if (!jQuery) throw new Error("Bootstrap requires jQuery"); + function(t) {
    "use strict";

    function e() {
        var t = document.createElement("bootstrap"),
            e = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd otransitionend",
                transition: "transitionend"
            };
        for (var i in e)
            if (void 0 !== t.style[i]) return {
                end: e[i]
            }
    }
    t.fn.emulateTransitionEnd = function(e) {
        var i = !1,
            o = this;
        t(this).one(t.support.transition.end, function() {
            i = !0
        });
        var n = function() {
            i || t(o).trigger(t.support.transition.end)
        };
        return setTimeout(n, e), this
    }, t(function() {
        t.support.transition = e()
    })
}(window.jQuery), + function(t) {
    "use strict";
    var e = '[data-dismiss="alert"]',
        i = function(i) {
            t(i).on("click", e, this.close)
        };
    i.prototype.close = function(e) {
        function i() {
            s.trigger("closed.bs.alert").remove()
        }
        var o = t(this),
            n = o.attr("data-target");
        n || (n = o.attr("href"), n = n && n.replace(/.*(?=#[^\s]*$)/, ""));
        var s = t(n);
        e && e.preventDefault(), s.length || (s = o.hasClass("alert") ? o : o.parent()), s.trigger(e = t.Event("close.bs.alert")), e.isDefaultPrevented() || (s.removeClass("in"), t.support.transition && s.hasClass("fade") ? s.one(t.support.transition.end, i).emulateTransitionEnd(150) : i())
    };
    var o = t.fn.alert;
    t.fn.alert = function(e) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.alert");
            n || o.data("bs.alert", n = new i(this)), "string" == typeof e && n[e].call(o)
        })
    }, t.fn.alert.Constructor = i, t.fn.alert.noConflict = function() {
        return t.fn.alert = o, this
    }, t(document).on("click.bs.alert.data-api", e, i.prototype.close)
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(i, o) {
        this.$element = t(i), this.options = t.extend({}, e.DEFAULTS, o)
    };
    e.DEFAULTS = {
        loadingText: "loading..."
    }, e.prototype.setState = function(t) {
        var e = "disabled",
            i = this.$element,
            o = i.is("input") ? "val" : "html",
            n = i.data();
        t += "Text", n.resetText || i.data("resetText", i[o]()), i[o](n[t] || this.options[t]), setTimeout(function() {
            "loadingText" == t ? i.addClass(e).attr(e, e) : i.removeClass(e).removeAttr(e)
        }, 0)
    }, e.prototype.toggle = function() {
        var t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var e = this.$element.find("input").prop("checked", !this.$element.hasClass("active")).trigger("change");
            "radio" === e.prop("type") && t.find(".active").removeClass("active")
        }
        this.$element.toggleClass("active")
    };
    var i = t.fn.button;
    t.fn.button = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.button"),
                s = "object" == typeof i && i;
            n || o.data("bs.button", n = new e(this, s)), "toggle" == i ? n.toggle() : i && n.setState(i)
        })
    }, t.fn.button.Constructor = e, t.fn.button.noConflict = function() {
        return t.fn.button = i, this
    }, t(document).on("click.bs.button.data-api", "[data-toggle^=button]", function(e) {
        var i = t(e.target);
        i.hasClass("btn") || (i = i.closest(".btn")), i.button("toggle"), e.preventDefault()
    })
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(e, i) {
        this.$element = t(e), this.$indicators = this.$element.find(".carousel-indicators"), this.options = i, this.paused = this.sliding = this.interval = this.$active = this.$items = null, "hover" == this.options.pause && this.$element.on("mouseenter", t.proxy(this.pause, this)).on("mouseleave", t.proxy(this.cycle, this))
    };
    e.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0
    }, e.prototype.cycle = function(e) {
        return e || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(t.proxy(this.next, this), this.options.interval)), this
    }, e.prototype.getActiveIndex = function() {
        return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), this.$items.index(this.$active)
    }, e.prototype.to = function(e) {
        var i = this,
            o = this.getActiveIndex();
        if (!(e > this.$items.length - 1 || e < 0)) return this.sliding ? this.$element.one("slid", function() {
            i.to(e)
        }) : o == e ? this.pause().cycle() : this.slide(e > o ? "next" : "prev", t(this.$items[e]))
    }, e.prototype.pause = function(e) {
        return e || (this.paused = !0), this.$element.find(".next, .prev").length && t.support.transition.end && (this.$element.trigger(t.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this
    }, e.prototype.next = function() {
        if (!this.sliding) return this.slide("next")
    }, e.prototype.prev = function() {
        if (!this.sliding) return this.slide("prev")
    }, e.prototype.slide = function(e, i) {
        var o = this.$element.find(".item.active"),
            n = i || o[e](),
            s = this.interval,
            a = "next" == e ? "left" : "right",
            r = "next" == e ? "first" : "last",
            l = this;
        if (!n.length) {
            if (!this.options.wrap) return;
            n = this.$element.find(".item")[r]()
        }
        this.sliding = !0, s && this.pause();
        var h = t.Event("slide.bs.carousel", {
            relatedTarget: n[0],
            direction: a
        });
        if (!n.hasClass("active")) {
            if (this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), this.$element.one("slid", function() {
                    var e = t(l.$indicators.children()[l.getActiveIndex()]);
                    e && e.addClass("active")
                })), t.support.transition && this.$element.hasClass("slide")) {
                if (this.$element.trigger(h), h.isDefaultPrevented()) return;
                n.addClass(e), n[0].offsetWidth, o.addClass(a), n.addClass(a), o.one(t.support.transition.end, function() {
                    n.removeClass([e, a].join(" ")).addClass("active"), o.removeClass(["active", a].join(" ")), l.sliding = !1, setTimeout(function() {
                        l.$element.trigger("slid")
                    }, 0)
                }).emulateTransitionEnd(600)
            } else {
                if (this.$element.trigger(h), h.isDefaultPrevented()) return;
                o.removeClass("active"), n.addClass("active"), this.sliding = !1, this.$element.trigger("slid")
            }
            return s && this.cycle(), this
        }
    };
    var i = t.fn.carousel;
    t.fn.carousel = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.carousel"),
                s = t.extend({}, e.DEFAULTS, o.data(), "object" == typeof i && i),
                a = "string" == typeof i ? i : s.slide;
            n || o.data("bs.carousel", n = new e(this, s)), "number" == typeof i ? n.to(i) : a ? n[a]() : s.interval && n.pause().cycle()
        })
    }, t.fn.carousel.Constructor = e, t.fn.carousel.noConflict = function() {
        return t.fn.carousel = i, this
    }, t(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function(e) {
        var i, o = t(this),
            n = t(o.attr("data-target") || (i = o.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, "")),
            s = t.extend({}, n.data(), o.data()),
            a = o.attr("data-slide-to");
        a && (s.interval = !1), n.carousel(s), (a = o.attr("data-slide-to")) && n.data("bs.carousel").to(a), e.preventDefault()
    }), t(window).on("load", function() {
        t('[data-ride="carousel"]').each(function() {
            var e = t(this);
            e.carousel(e.data())
        })
    })
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(i, o) {
        this.$element = t(i), this.options = t.extend({}, e.DEFAULTS, o), this.transitioning = null, this.options.parent && (this.$parent = t(this.options.parent)), this.options.toggle && this.toggle()
    };
    e.DEFAULTS = {
        toggle: !0
    }, e.prototype.dimension = function() {
        var t = this.$element.hasClass("width");
        return t ? "width" : "height"
    }, e.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var e = t.Event("show.bs.collapse");
            if (this.$element.trigger(e), !e.isDefaultPrevented()) {
                var i = this.$parent && this.$parent.find("> .panel > .in");
                if (i && i.length) {
                    var o = i.data("bs.collapse");
                    if (o && o.transitioning) return;
                    i.collapse("hide"), o || i.data("bs.collapse", null)
                }
                var n = this.dimension();
                this.$element.removeClass("collapse").addClass("collapsing")[n](0), this.transitioning = 1;
                var s = function() {
                    this.$element.removeClass("collapsing").addClass("in")[n]("auto"), this.transitioning = 0, this.$element.trigger("shown.bs.collapse")
                };
                if (!t.support.transition) return s.call(this);
                var a = t.camelCase(["scroll", n].join("-"));
                this.$element.one(t.support.transition.end, t.proxy(s, this)).emulateTransitionEnd(350)[n](this.$element[0][a])
            }
        }
    }, e.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var e = t.Event("hide.bs.collapse");
            if (this.$element.trigger(e), !e.isDefaultPrevented()) {
                var i = this.dimension();
                this.$element[i](this.$element[i]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), this.transitioning = 1;
                var o = function() {
                    this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")
                };
                return t.support.transition ? void this.$element[i](0).one(t.support.transition.end, t.proxy(o, this)).emulateTransitionEnd(350) : o.call(this)
            }
        }
    }, e.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    };
    var i = t.fn.collapse;
    t.fn.collapse = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.collapse"),
                s = t.extend({}, e.DEFAULTS, o.data(), "object" == typeof i && i);
            n || o.data("bs.collapse", n = new e(this, s)), "string" == typeof i && n[i]()
        })
    }, t.fn.collapse.Constructor = e, t.fn.collapse.noConflict = function() {
        return t.fn.collapse = i, this
    }, t(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function(e) {
        var i, o = t(this),
            n = o.attr("data-target") || e.preventDefault() || (i = o.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, ""),
            s = t(n),
            a = s.data("bs.collapse"),
            r = a ? "toggle" : o.data(),
            l = o.attr("data-parent"),
            h = l && t(l);
        a && a.transitioning || (h && h.find('[data-toggle=collapse][data-parent="' + l + '"]').not(o).addClass("collapsed"), o[s.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), s.collapse(r)
    })
}(window.jQuery), + function(t) {
    "use strict";

    function e() {
        t(o).remove(), t(n).each(function(e) {
            var o = i(t(this));
            o.hasClass("open") && (o.trigger(e = t.Event("hide.bs.dropdown")), e.isDefaultPrevented() || o.removeClass("open").trigger("hidden.bs.dropdown"))
        })
    }

    function i(e) {
        var i = e.attr("data-target");
        i || (i = e.attr("href"), i = i && /#/.test(i) && i.replace(/.*(?=#[^\s]*$)/, ""));
        var o = i && t(i);
        return o && o.length ? o : e.parent()
    }
    var o = ".dropdown-backdrop",
        n = "[data-toggle=dropdown]",
        s = function(e) {
            t(e).on("click.bs.dropdown", this.toggle)
        };
    s.prototype.toggle = function(o) {
        var n = t(this);
        if (!n.is(".disabled, :disabled")) {
            var s = i(n),
                a = s.hasClass("open");
            if (e(), !a) {
                if ("ontouchstart" in document.documentElement && !s.closest(".navbar-nav").length && t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click", e), s.trigger(o = t.Event("show.bs.dropdown")), o.isDefaultPrevented()) return;
                s.toggleClass("open").trigger("shown.bs.dropdown"), n.focus()
            }
            return !1
        }
    }, s.prototype.keydown = function(e) {
        if (/(38|40|27)/.test(e.keyCode)) {
            var o = t(this);
            if (e.preventDefault(), e.stopPropagation(), !o.is(".disabled, :disabled")) {
                var s = i(o),
                    a = s.hasClass("open");
                if (!a || a && 27 == e.keyCode) return 27 == e.which && s.find(n).focus(), o.click();
                var r = t("[role=menu] li:not(.divider):visible a", s);
                if (r.length) {
                    var l = r.index(r.filter(":focus"));
                    38 == e.keyCode && l > 0 && l--, 40 == e.keyCode && l < r.length - 1 && l++, ~l || (l = 0), r.eq(l).focus()
                }
            }
        }
    };
    var a = t.fn.dropdown;
    t.fn.dropdown = function(e) {
        return this.each(function() {
            var i = t(this),
                o = i.data("dropdown");
            o || i.data("dropdown", o = new s(this)), "string" == typeof e && o[e].call(i)
        })
    }, t.fn.dropdown.Constructor = s, t.fn.dropdown.noConflict = function() {
        return t.fn.dropdown = a, this
    }, t(document).on("click.bs.dropdown.data-api", e).on("click.bs.dropdown.data-api", ".dropdown form", function(t) {
        t.stopPropagation()
    }).on("click.bs.dropdown.data-api", n, s.prototype.toggle).on("keydown.bs.dropdown.data-api", n + ", [role=menu]", s.prototype.keydown)
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(e, i) {
        this.options = i, this.$element = t(e), this.$backdrop = this.isShown = null, this.options.remote && this.$element.load(this.options.remote)
    };
    e.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, e.prototype.toggle = function(t) {
        return this[this.isShown ? "hide" : "show"](t)
    }, e.prototype.show = function(e) {
        var i = this,
            o = t.Event("show.bs.modal", {
                relatedTarget: e
            });
        this.$element.trigger(o), this.isShown || o.isDefaultPrevented() || (this.isShown = !0, this.escape(), this.$element.on("click.dismiss.modal", '[data-dismiss="modal"]', t.proxy(this.hide, this)), this.backdrop(function() {
            var o = t.support.transition && i.$element.hasClass("fade");
            i.$element.parent().length || i.$element.appendTo(document.body), i.$element.show(), o && i.$element[0].offsetWidth, i.$element.addClass("in").attr("aria-hidden", !1), i.enforceFocus();
            var n = t.Event("shown.bs.modal", {
                relatedTarget: e
            });
            o ? i.$element.find(".modal-dialog").one(t.support.transition.end, function() {
                i.$element.focus().trigger(n)
            }).emulateTransitionEnd(300) : i.$element.focus().trigger(n)
        }))
    }, e.prototype.hide = function(e) {
        e && e.preventDefault(), e = t.Event("hide.bs.modal"), this.$element.trigger(e), this.isShown && !e.isDefaultPrevented() && (this.isShown = !1, this.escape(), t(document).off("focusin.bs.modal"), this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.modal"), t.support.transition && this.$element.hasClass("fade") ? this.$element.one(t.support.transition.end, t.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal())
    }, e.prototype.enforceFocus = function() {
        t(document).off("focusin.bs.modal").on("focusin.bs.modal", t.proxy(function(t) {
            this.$element[0] === t.target || this.$element.has(t.target).length || this.$element.focus()
        }, this))
    }, e.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", t.proxy(function(t) {
            27 == t.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal")
    }, e.prototype.hideModal = function() {
        var t = this;
        this.$element.hide(), this.backdrop(function() {
            t.removeBackdrop(), t.$element.trigger("hidden.bs.modal")
        })
    }, e.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
    }, e.prototype.backdrop = function(e) {
        var i = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var o = t.support.transition && i;
            if (this.$backdrop = t('<div class="modal-backdrop ' + i + '" />').appendTo(document.body), this.$element.on("click.dismiss.modal", t.proxy(function(t) {
                    t.target === t.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this))
                }, this)), o && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !e) return;
            o ? this.$backdrop.one(t.support.transition.end, e).emulateTransitionEnd(150) : e()
        } else !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), t.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(t.support.transition.end, e).emulateTransitionEnd(150) : e()) : e && e()
    };
    var i = t.fn.modal;
    t.fn.modal = function(i, o) {
        return this.each(function() {
            var n = t(this),
                s = n.data("bs.modal"),
                a = t.extend({}, e.DEFAULTS, n.data(), "object" == typeof i && i);
            s || n.data("bs.modal", s = new e(this, a)), "string" == typeof i ? s[i](o) : a.show && s.show(o)
        })
    }, t.fn.modal.Constructor = e, t.fn.modal.noConflict = function() {
        return t.fn.modal = i, this
    }, t(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(e) {
        var i = t(this),
            o = i.attr("href"),
            n = t(i.attr("data-target") || o && o.replace(/.*(?=#[^\s]+$)/, "")),
            s = n.data("modal") ? "toggle" : t.extend({
                remote: !/#/.test(o) && o
            }, n.data(), i.data());
        e.preventDefault(), n.modal(s, this).one("hide", function() {
            i.is(":visible") && i.focus()
        })
    }), t(document).on("show.bs.modal", ".modal", function() {
        t(document.body).addClass("modal-open")
    }).on("hidden.bs.modal", ".modal", function() {
        t(document.body).removeClass("modal-open")
    })
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(t, e) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, this.init("tooltip", t, e)
    };
    e.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1
    }, e.prototype.init = function(e, i, o) {
        this.enabled = !0, this.type = e, this.$element = t(i), this.options = this.getOptions(o);
        for (var n = this.options.trigger.split(" "), s = n.length; s--;) {
            var a = n[s];
            if ("click" == a) this.$element.on("click." + this.type, this.options.selector, t.proxy(this.toggle, this));
            else if ("manual" != a) {
                var r = "hover" == a ? "mouseenter" : "focus",
                    l = "hover" == a ? "mouseleave" : "blur";
                this.$element.on(r + "." + this.type, this.options.selector, t.proxy(this.enter, this)), this.$element.on(l + "." + this.type, this.options.selector, t.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = t.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }, e.prototype.getDefaults = function() {
        return e.DEFAULTS
    }, e.prototype.getOptions = function(e) {
        return e = t.extend({}, this.getDefaults(), this.$element.data(), e), e.delay && "number" == typeof e.delay && (e.delay = {
            show: e.delay,
            hide: e.delay
        }), e
    }, e.prototype.getDelegateOptions = function() {
        var e = {},
            i = this.getDefaults();
        return this._options && t.each(this._options, function(t, o) {
            i[t] != o && (e[t] = o)
        }), e
    }, e.prototype.enter = function(e) {
        var i = e instanceof this.constructor ? e : t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(i.timeout), i.hoverState = "in", i.options.delay && i.options.delay.show ? void(i.timeout = setTimeout(function() {
            "in" == i.hoverState && i.show()
        }, i.options.delay.show)) : i.show()
    }, e.prototype.leave = function(e) {
        var i = e instanceof this.constructor ? e : t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(i.timeout), i.hoverState = "out", i.options.delay && i.options.delay.hide ? void(i.timeout = setTimeout(function() {
            "out" == i.hoverState && i.hide()
        }, i.options.delay.hide)) : i.hide()
    }, e.prototype.show = function() {
        var e = t.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(e), e.isDefaultPrevented()) return;
            var i = this.tip();
            this.setContent(), this.options.animation && i.addClass("fade");
            var o = "function" == typeof this.options.placement ? this.options.placement.call(this, i[0], this.$element[0]) : this.options.placement,
                n = /\s?auto?\s?/i,
                s = n.test(o);
            s && (o = o.replace(n, "") || "top"), i.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(o), this.options.container ? i.appendTo(this.options.container) : i.insertAfter(this.$element);
            var a = this.getPosition(),
                r = i[0].offsetWidth,
                l = i[0].offsetHeight;
            if (s) {
                var h = this.$element.parent(),
                    p = o,
                    d = document.documentElement.scrollTop || document.body.scrollTop,
                    c = "body" == this.options.container ? window.innerWidth : h.outerWidth(),
                    f = "body" == this.options.container ? window.innerHeight : h.outerHeight(),
                    u = "body" == this.options.container ? 0 : h.offset().left;
                o = "bottom" == o && a.top + a.height + l - d > f ? "top" : "top" == o && a.top - d - l < 0 ? "bottom" : "right" == o && a.right + r > c ? "left" : "left" == o && a.left - r < u ? "right" : o, i.removeClass(p).addClass(o)
            }
            var v = this.getCalculatedOffset(o, a, r, l);
            this.applyPlacement(v, o), this.$element.trigger("shown.bs." + this.type)
        }
    }, e.prototype.applyPlacement = function(t, e) {
        var i, o = this.tip(),
            n = o[0].offsetWidth,
            s = o[0].offsetHeight,
            a = parseInt(o.css("margin-top"), 10),
            r = parseInt(o.css("margin-left"), 10);
        isNaN(a) && (a = 0), isNaN(r) && (r = 0), t.top = t.top + a, t.left = t.left + r, o.offset(t).addClass("in");
        var l = o[0].offsetWidth,
            h = o[0].offsetHeight;
        if ("top" == e && h != s && (i = !0, t.top = t.top + s - h), /bottom|top/.test(e)) {
            var p = 0;
            t.left < 0 && (p = t.left * -2, t.left = 0, o.offset(t), l = o[0].offsetWidth, h = o[0].offsetHeight), this.replaceArrow(p - n + l, l, "left")
        } else this.replaceArrow(h - s, h, "top");
        i && o.offset(t)
    }, e.prototype.replaceArrow = function(t, e, i) {
        this.arrow().css(i, t ? 50 * (1 - t / e) + "%" : "")
    }, e.prototype.setContent = function() {
        var t = this.tip(),
            e = this.getTitle();
        t.find(".tooltip-inner")[this.options.html ? "html" : "text"](e), t.removeClass("fade in top bottom left right")
    }, e.prototype.hide = function() {
        function e() {
            "in" != i.hoverState && o.detach()
        }
        var i = this,
            o = this.tip(),
            n = t.Event("hide.bs." + this.type);
        if (this.$element.trigger(n), !n.isDefaultPrevented()) return o.removeClass("in"), t.support.transition && this.$tip.hasClass("fade") ? o.one(t.support.transition.end, e).emulateTransitionEnd(150) : e(), this.$element.trigger("hidden.bs." + this.type), this
    }, e.prototype.fixTitle = function() {
        var t = this.$element;
        (t.attr("title") || "string" != typeof t.attr("data-original-title")) && t.attr("data-original-title", t.attr("title") || "").attr("title", "")
    }, e.prototype.hasContent = function() {
        return this.getTitle()
    }, e.prototype.getPosition = function() {
        var e = this.$element[0];
        return t.extend({}, "function" == typeof e.getBoundingClientRect ? e.getBoundingClientRect() : {
            width: e.offsetWidth,
            height: e.offsetHeight
        }, this.$element.offset())
    }, e.prototype.getCalculatedOffset = function(t, e, i, o) {
        return "bottom" == t ? {
            top: e.top + e.height,
            left: e.left + e.width / 2 - i / 2
        } : "top" == t ? {
            top: e.top - o,
            left: e.left + e.width / 2 - i / 2
        } : "left" == t ? {
            top: e.top + e.height / 2 - o / 2,
            left: e.left - i
        } : {
            top: e.top + e.height / 2 - o / 2,
            left: e.left + e.width
        }
    }, e.prototype.getTitle = function() {
        var t, e = this.$element,
            i = this.options;
        return t = e.attr("data-original-title") || ("function" == typeof i.title ? i.title.call(e[0]) : i.title)
    }, e.prototype.tip = function() {
        return this.$tip = this.$tip || t(this.options.template)
    }, e.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }, e.prototype.validate = function() {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    }, e.prototype.enable = function() {
        this.enabled = !0
    }, e.prototype.disable = function() {
        this.enabled = !1
    }, e.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled
    }, e.prototype.toggle = function(e) {
        var i = e ? t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        i.tip().hasClass("in") ? i.leave(i) : i.enter(i)
    }, e.prototype.destroy = function() {
        this.hide().$element.off("." + this.type).removeData("bs." + this.type)
    };
    var i = t.fn.tooltip;
    t.fn.tooltip = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.tooltip"),
                s = "object" == typeof i && i;
            n || o.data("bs.tooltip", n = new e(this, s)), "string" == typeof i && n[i]()
        })
    }, t.fn.tooltip.Constructor = e, t.fn.tooltip.noConflict = function() {
        return t.fn.tooltip = i, this
    }
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(t, e) {
        this.init("popover", t, e)
    };
    if (!t.fn.tooltip) throw new Error("Popover requires tooltip.js");
    e.DEFAULTS = t.extend({}, t.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), e.prototype = t.extend({}, t.fn.tooltip.Constructor.prototype), e.prototype.constructor = e, e.prototype.getDefaults = function() {
        return e.DEFAULTS
    }, e.prototype.setContent = function() {
        var t = this.tip(),
            e = this.getTitle(),
            i = this.getContent();
        t.find(".popover-title")[this.options.html ? "html" : "text"](e), t.find(".popover-content")[this.options.html ? "html" : "text"](i), t.removeClass("fade top bottom left right in"), t.find(".popover-title").html() || t.find(".popover-title").hide()
    }, e.prototype.hasContent = function() {
        return this.getTitle() || this.getContent()
    }, e.prototype.getContent = function() {
        var t = this.$element,
            e = this.options;
        return t.attr("data-content") || ("function" == typeof e.content ? e.content.call(t[0]) : e.content)
    }, e.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    }, e.prototype.tip = function() {
        return this.$tip || (this.$tip = t(this.options.template)), this.$tip
    };
    var i = t.fn.popover;
    t.fn.popover = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.popover"),
                s = "object" == typeof i && i;
            n || o.data("bs.popover", n = new e(this, s)), "string" == typeof i && n[i]()
        })
    }, t.fn.popover.Constructor = e, t.fn.popover.noConflict = function() {
        return t.fn.popover = i, this
    }
}(window.jQuery), + function(t) {
    "use strict";

    function e(i, o) {
        var n, s = t.proxy(this.process, this);
        this.$element = t(t(i).is("body") ? window : i), this.$body = t("body"), this.$scrollElement = this.$element.on("scroll.bs.scroll-spy.data-api", s), this.options = t.extend({}, e.DEFAULTS, o), this.selector = (this.options.target || (n = t(i).attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", this.offsets = t([]), this.targets = t([]), this.activeTarget = null, this.refresh(), this.process()
    }
    e.DEFAULTS = {
        offset: 10
    }, e.prototype.refresh = function() {
        var e = this.$element[0] == window ? "offset" : "position";
        this.offsets = t([]), this.targets = t([]);
        var i = this;
        this.$body.find(this.selector).map(function() {
            var o = t(this),
                n = o.data("target") || o.attr("href"),
                s = /^#\w/.test(n) && t(n);
            return s && s.length && [
                [s[e]().top + (!t.isWindow(i.$scrollElement.get(0)) && i.$scrollElement.scrollTop()), n]
            ] || null
        }).sort(function(t, e) {
            return t[0] - e[0]
        }).each(function() {
            i.offsets.push(this[0]), i.targets.push(this[1])
        })
    }, e.prototype.process = function() {
        var t, e = this.$scrollElement.scrollTop() + this.options.offset,
            i = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight,
            o = i - this.$scrollElement.height(),
            n = this.offsets,
            s = this.targets,
            a = this.activeTarget;
        if (e >= o) return a != (t = s.last()[0]) && this.activate(t);
        for (t = n.length; t--;) a != s[t] && e >= n[t] && (!n[t + 1] || e <= n[t + 1]) && this.activate(s[t])
    }, e.prototype.activate = function(e) {
        this.activeTarget = e, t(this.selector).parents(".active").removeClass("active");
        var i = this.selector + '[data-target="' + e + '"],' + this.selector + '[href="' + e + '"]',
            o = t(i).parents("li").addClass("active");
        o.parent(".dropdown-menu").length && (o = o.closest("li.dropdown").addClass("active")), o.trigger("activate")
    };
    var i = t.fn.scrollspy;
    t.fn.scrollspy = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.scrollspy"),
                s = "object" == typeof i && i;
            n || o.data("bs.scrollspy", n = new e(this, s)), "string" == typeof i && n[i]()
        })
    }, t.fn.scrollspy.Constructor = e, t.fn.scrollspy.noConflict = function() {
        return t.fn.scrollspy = i, this
    }, t(window).on("load", function() {
        t('[data-spy="scroll"]').each(function() {
            var e = t(this);
            e.scrollspy(e.data())
        })
    })
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(e) {
        this.element = t(e)
    };
    e.prototype.show = function() {
        var e = this.element,
            i = e.closest("ul:not(.dropdown-menu)"),
            o = e.attr("data-target");
        if (o || (o = e.attr("href"), o = o && o.replace(/.*(?=#[^\s]*$)/, "")), !e.parent("li").hasClass("active")) {
            var n = i.find(".active:last a")[0],
                s = t.Event("show.bs.tab", {
                    relatedTarget: n
                });
            if (e.trigger(s), !s.isDefaultPrevented()) {
                var a = t(o);
                this.activate(e.parent("li"), i), this.activate(a, a.parent(), function() {
                    e.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: n
                    })
                })
            }
        }
    }, e.prototype.activate = function(e, i, o) {
        function n() {
            s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), e.addClass("active"), a ? (e[0].offsetWidth, e.addClass("in")) : e.removeClass("fade"), e.parent(".dropdown-menu") && e.closest("li.dropdown").addClass("active"), o && o()
        }
        var s = i.find("> .active"),
            a = o && t.support.transition && s.hasClass("fade");
        a ? s.one(t.support.transition.end, n).emulateTransitionEnd(150) : n(), s.removeClass("in")
    };
    var i = t.fn.tab;
    t.fn.tab = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.tab");
            n || o.data("bs.tab", n = new e(this)), "string" == typeof i && n[i]()
        })
    }, t.fn.tab.Constructor = e, t.fn.tab.noConflict = function() {
        return t.fn.tab = i, this
    }, t(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(e) {
        e.preventDefault(), t(this).tab("show")
    })
}(window.jQuery), + function(t) {
    "use strict";
    var e = function(i, o) {
        this.options = t.extend({}, e.DEFAULTS, o), this.$window = t(window).on("scroll.bs.affix.data-api", t.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", t.proxy(this.checkPositionWithEventLoop, this)), this.$element = t(i), this.affixed = this.unpin = null, this.checkPosition()
    };
    e.RESET = "affix affix-top affix-bottom", e.DEFAULTS = {
        offset: 0
    }, e.prototype.checkPositionWithEventLoop = function() {
        setTimeout(t.proxy(this.checkPosition, this), 1)
    }, e.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var i = t(document).height(),
                o = this.$window.scrollTop(),
                n = this.$element.offset(),
                s = this.options.offset,
                a = s.top,
                r = s.bottom;
            "object" != typeof s && (r = a = s), "function" == typeof a && (a = s.top()), "function" == typeof r && (r = s.bottom());
            var l = !(null != this.unpin && o + this.unpin <= n.top) && (null != r && n.top + this.$element.height() >= i - r ? "bottom" : null != a && o <= a && "top");
            this.affixed !== l && (this.unpin && this.$element.css("top", ""), this.affixed = l, this.unpin = "bottom" == l ? n.top - o : null, this.$element.removeClass(e.RESET).addClass("affix" + (l ? "-" + l : "")), "bottom" == l && this.$element.offset({
                top: document.body.offsetHeight - r - this.$element.height()
            }))
        }
    };
    var i = t.fn.affix;
    t.fn.affix = function(i) {
        return this.each(function() {
            var o = t(this),
                n = o.data("bs.affix"),
                s = "object" == typeof i && i;
            n || o.data("bs.affix", n = new e(this, s)), "string" == typeof i && n[i]()
        })
    }, t.fn.affix.Constructor = e, t.fn.affix.noConflict = function() {
        return t.fn.affix = i, this
    }, t(window).on("load", function() {
        t('[data-spy="affix"]').each(function() {
            var e = t(this),
                i = e.data();
            i.offset = i.offset || {}, i.offsetBottom && (i.offset.bottom = i.offsetBottom), i.offsetTop && (i.offset.top = i.offsetTop), e.affix(i)
        })
    })
}(window.jQuery);
! function(e) {
    jQuery.fn.areaPicker = function(a) {
        var r = jQuery.extend({
            source: null,
            preSelectedItems: null,
            enabledItems: null,
            selectedItemsContainer: jQuery("#selectedAreas"),
            selectedItemsLabel: jQuery("#selectedAreasLabel"),
            autoCompleteMatchValues: jQuery("#autoCompleteMatchValues"),
            areaPickerExpandAllButtonClass: ".areaPickerExpandAllButtonClass",
            areaPickerExpandAll: jQuery("#areaPickerExpandAll"),
            areaPickerExpandAllContainer: jQuery("#areaPickerExpandAllContainer"),
            numberOfColumnsExpandedMode: null,
            outerContainer: jQuery("#areaPickerContainer"),
            omitAreaTypesInExpandedMode: "",
            expandSubAreasButton: "&nbsp;+&nbsp;",
            closeSubAreasButton: "&nbsp;&minus;&nbsp;",
            defaultAutocompleteValue: "City / Neighborhood / Zip",
            autocompleteTextLength: 3,
            autocompleteMessage: "Enter a city, neighborhood or zip.",
            customAreaListToggle: jQuery("#areaPickerCustomListToggle"),
            customAreaListToggleMoreAreasText: "&nbsp;More Areas",
            customAreaListToggleLessAreasText: "&nbsp;Limit Areas",
            areaPickerClearAll: jQuery("#areaPickerClearAll"),
            isPhpStyle: "false",
            autocompleteRequestUrl: null,
            searchType: "basic",
            restrictCitySearchToCustomList: "false"
        }, a);
        return this.each(function() {
            var a = jQuery(this),
                t = r.source,
                l = r.preSelectedItems,
                n = r.enabledItems,
                s = !0,
                i = r.selectedItemsContainer,
                o = r.selectedItemsLabel,
                u = r.autoCompleteMatchValues,
                d = r.areaPickerExpandAllButtonClass,
                c = r.areaPickerExpandAll,
                p = r.areaPickerExpandAllContainer,
                v = r.omitAreaTypesInExpandedMode,
                f = r.defaultAutocompleteValue,
                m = r.autocompleteMessage,
                h = r.autocompleteTextLength,
                y = r.outerContainer,
                b = r.numberOfColumnsExpandedMode,
                A = r.customAreaListToggle,
                C = r.customAreaListToggleMoreAreasText,
                j = r.customAreaListToggleLessAreasText,
                g = r.areaPickerClearAll,
                Q = !1;
            "true" === r.isPhpStyle.toLowerCase() && (Q = !0);
            var k = r.autocompleteRequestUrl,
                x = r.searchType,
                P = !1;
            "true" === r.restrictCitySearchToCustomList.toLowerCase() && (P = !0), P && (A.hide(), C = "", j = ""), null !== n && void 0 !== n.areas && (s = !1);
            var E, L = {},
                T = {},
                _ = 38,
                S = 40,
                I = 13,
                w = -1,
                N = !0;
            A.html(C);
            var M;
            void 0 !== t && null !== t && void 0 !== t.allAreas && (M = t.allAreas.values);
            var O;
            void 0 !== t && null !== t && void 0 !== t.customAreas && (O = t.customAreas.values);
            var D = function() {
                    if (a.attr("autocomplete", "off"), fe(!1), a.val(f), a.addClass("areaPickerDefaultText"), y.click(function(e) {
                            fe(!0)
                        }), !s) {
                        var e = n.areas.values;
                        q(e)
                    }
                    if (g.click(function(e) {
                            se()
                        }), E = jQuery("<div/>", {
                            id: "areaPickerExpandAllResults"
                        }), p.append(E), void 0 !== M && null !== M && G(M, E, $), void 0 !== O) {
                        var r = jQuery("<div/>", {
                            id: "areaPickerExpandCustomResults"
                        });
                        p.append(r), G(O, r, z), E.hide(), U(), A.click(function(e) {
                            E.toggle(), r.toggle(), U()
                        })
                    } else A.hide();
                    if (void 0 !== l && null != l && void 0 !== l.areas && null != l.areas) {
                        var t = l.areas.values;
                        R(t)
                    }
                },
                U = function() {
                    E.is(":visible") ? A.html(j) : A.html(C)
                },
                B = function() {
                    N ? (N = !1, A.html(C)) : (N = !0, A.html(j))
                },
                R = function(e) {
                    if (e)
                        for (var a = 0; a < e.length; a++) {
                            var r = e[a];
                            ue(r), oe(r)
                        }
                },
                q = function(e) {
                    if (e)
                        for (var a = 0; a < e.length; a++) {
                            var r = e[a];
                            de(r)
                        }
                },
                V = function(e) {
                    if (s) return !0;
                    var a = pe(e),
                        r = T[a];
                    return void 0 !== r && null !== r
                },
                G = function(e, a, t) {
                    for (var l = 0, n = !1, s = 0; s < e.length; s++) {
                        var i = e[s];
                        if ("" !== i.label || "" !== i.fieldName || "" === i.groupLabel) {
                            if (v.indexOf(i.fieldName) == -1) {
                                n = null != b && l % b == 0, n && a.append("<div class='areaPickerExpandAllRow' style='clear:both'></div>"), l++;
                                var o = t(i),
                                    u = "areaPickerExpandAllElement";
                                V(i) || (u = "areaPickerExpandAllElementDisabled");
                                var d = jQuery("<div/>", {
                                        class: u
                                    }),
                                    c = jQuery("<div/>", {
                                        id: o,
                                        class: "areaUnselected"
                                    });
                                if (c.append(i.label), d.append(c), a.append(d), void 0 != i.subAreas && void 0 != i.subAreas.values && i.subAreas.values.length > 0) {
                                    var p = t(i) + "_expand_all_sub_areas",
                                        f = jQuery("<span/>");
                                    f.html(r.expandSubAreasButton);
                                    var m = jQuery("<div/>", {
                                            id: p,
                                            class: "areaPickerExpandAllSubAreaContainer"
                                        }),
                                        h = jQuery("<div/>", {
                                            style: "float:left"
                                        });
                                    h.append(f), c.css("float", "left"), c.addClass("areaPickerElementHasSubAreas"), c.parent().append(h), m.append(jQuery("<div/>", {
                                        style: "clear:both"
                                    })), a.append(m);
                                    for (var y = i.subAreas.values, A = 0; A < y.length; A++) {
                                        var C = y[A];
                                        C.parentLabel = i.label;
                                        var j = t(C);
                                        j = j.replace(" ", "_"), m.append("<div id='" + j + "' class='areaPickerExpandAllSubAreaElement'>" + C.label + "</div>"), ee(C, j)
                                    }
                                    m.append("<div style='clear:both;'></div>"), m.hide(), ae(f, p)
                                }
                                ee(i, o)
                            }
                        } else a.append("<div style='clear:both'></div>"), a.append("<div class='areaPickerExpandAllGroup'>" + i.groupLabel + "</div>"), l = 0
                    }
                },
                $ = function(e) {
                    var a = e.fieldName + "_expand_all_areas_" + e.uniqueId;
                    return a
                },
                z = function(e) {
                    var a = e.fieldName + "_expand_custom_areas_" + e.uniqueId;
                    return a
                },
                H = function(e) {
                    var a = e.fieldName + "_autocomplete_" + e.uniqueId;
                    return a.replace(" ", "_"), a
                },
                F = function(e) {
                    var a = {
                            fieldName: "cityId",
                            maxResults: 0
                        },
                        r = k;
                    N || (a.onlyCustomAreasIfAvailable = !1), jQuery("body *").css("cursor", "progress"), jQuery.ajax({
                        type: "GET",
                        url: r,
                        data: a,
                        traditional: !0,
                        dataType: "jsonp"
                    }).done(function(a) {
                        jQuery("body *").css("cursor", ""), jQuery("#areaPickerCustomListToggle").css("cursor", "pointer"), jQuery("#areaPickerClearAll").css("cursor", "pointer"), jQuery("#zpa-main-search-form-submit").css("cursor", "pointer"), jQuery(".zpa-advanced-search-launch").css("cursor", "pointer"), M = a, jQuery("#areaPickerExpandAllResults").empty(), G(M, E, $), re(!1), fe(!0), e && c.toggle(), B(), Z()
                    })
                },
                Z = function() {
                    P ? A.hide() : (A.show(), A.unbind("click"), A.click(function(e) {
                        F(!1)
                    }))
                },
                J = function(e, a) {
                    if (null !== e && e.length >= h) {
                        var r = {
                                term: e,
                                onlyCustomAreasIfAvailable: P
                            },
                            t = jQuery("[name='propertyType']").val();
                        (void 0 !== t && t.search(/SFR|CND/) === -1 || "advanced" === x) && (r.fieldName = ["cityId", "zip"]);
                        var l = k;
                        jQuery.ajax({
                            type: "GET",
                            url: l,
                            data: r,
                            traditional: !0,
                            dataType: "jsonp"
                        }).done(function(e) {
                            a(e)
                        })
                    }
                },
                K = function(a) {
                    for (var t = 0; t < a.length; t++) {
                        var l = a[t];
                        matchDivId = H(l);
                        var n = jQuery("<div/>", {
                                id: matchDivId
                            }),
                            s = "areaPickerElement";
                        if (V(l) || (s = "areaPickerElementDisabled"), n.addClass(s), n.addClass("areaUnselected"), n.append(l.label), V(l) || n.append(" (None)"), void 0 != l.parentLabel && n.append("&nbsp;(" + l.parentLabel + ")"), void 0 != l.fieldLabel && n.append("&nbsp;(" + l.fieldLabel + ")"), u.append(n), void 0 != l.subAreas && void 0 != l.subAreas.values && l.subAreas.values.length > 0) {
                            var i = l.fieldName + "_auto_complete_sub_areas_" + l.uniqueId,
                                o = jQuery("<span/>");
                            o.html(r.expandSubAreasButton);
                            var d = e("<div/>", {
                                    id: i
                                }),
                                c = jQuery("<div/>", {
                                    style: "float:left"
                                });
                            c.append(o), n.css("float", "left"), u.append(c).append(jQuery("<div/>", {
                                style: "clear:both"
                            })), n.addClass("areaPickerElementHasSubAreas"), u.append(d);
                            for (var p = l.subAreas.values, v = 0; v < p.length; v++) {
                                var f = p[v],
                                    m = f.fieldName + "_expand_all_" + f.uniqueId;
                                f.parentLabel = l.label, m = m.replace(" ", "_");
                                var h = jQuery("<div/>", {
                                    id: m,
                                    class: "areaPickerAutoCompleteSubAreaElement"
                                });
                                h.text(f.label), d.append(h), ve(f) ? (h.addClass("areaSelected"), h.removeClass("areaUnselected")) : ee(f, m)
                            }
                            d.hide(), ae(o, i)
                        }
                        ve(l) ? (n.removeClass("areaUnselected"), n.addClass("areaSelected")) : ee(l, matchDivId)
                    }
                },
                W = function(e, a) {
                    var r = e * a,
                        t = u.css("height");
                    if (t.indexOf("px") > -1) {
                        var l = t.length - 2;
                        t = t.slice(0, l)
                    }
                    var n = u.scrollTop(),
                        s = n + new Number(t);
                    (r < n || r > s) && u.scrollTop(r)
                },
                X = function(a, t) {
                    var l = jQuery("#" + a);
                    l.toggle(), l.is(":visible") ? (e(t).removeClass(), e(t).html(r.closeSubAreasButton)) : (e(t).removeClass(), e(t).html(r.expandSubAreasButton))
                },
                Y = function(e, a) {
                    var r = jQuery("#" + a);
                    r.click(function() {
                        ie(e)
                    }), r.mouseover(function() {
                        r.addClass("autocompleteMouseOver")
                    }), r.mouseout(function() {
                        r.removeClass("autocompleteMouseOver")
                    })
                },
                ee = function(e, a) {
                    if (V(e)) {
                        var r = jQuery("#" + a);
                        r.click(function() {
                            oe(e), u.html(m)
                        }), r.mouseenter(function() {
                            r.addClass("autocompleteMouseOver")
                        }), r.mouseout(function() {
                            r.removeClass("autocompleteMouseOver")
                        })
                    }
                },
                ae = function(e, a) {
                    e.click(function() {
                        X(a, this)
                    })
                },
                re = function(e) {
                    te(), fe(e)
                },
                te = function() {
                    u.parent().hide(), w = -1
                },
                le = function() {
                    u.parent().show(), c.hide()
                },
                ne = function() {
                    void 0 === M ? F(!0) : (re(!1), fe(!0), c.toggle())
                },
                se = function() {
                    for (var e in L) {
                        var a = L[e];
                        ie(a)
                    }
                },
                ie = function(e) {
                    i.find("input:hidden").each(function(a) {
                        if ($hidden = jQuery(this), $hidden.val() == e.value) {
                            $hidden.parent().remove();
                            var r = $(e),
                                t = jQuery("#" + r);
                            t.removeClass("areaSelected"), t.addClass("areaUnselected"), ee(e, r);
                            var l = z(e),
                                n = jQuery("#" + l);
                            n.removeClass("areaSelected"), n.addClass("areaUnselected"), ee(e, l), re(!0), ce(e), fe(!0)
                        }
                    })
                },
                oe = function(e) {
                    var a = jQuery("<div/>");
                    a.addClass("zpa-one-selectedArea");
                    var r = e.fieldName;
                    Q && (r += "[]");
                    var t = jQuery("<input type='hidden' data-zpa-location-field='true' value='" + e.value + "' name='" + r + "'/>"),
                        l = e.label;
                    void 0 != e.parentLabel && (l += "&nbsp;(" + e.parentLabel + ")"), void 0 != e.fieldLabel && (l += "&nbsp;(" + e.fieldLabel + ")");
                    var n = jQuery("<button class='btn' type='button'> &times;&nbsp;" + l + "</button>");
                    n.click(function() {
                        ie(e)
                    }), a.append(t), a.append(n), i.append(a), re(!0), ue(e);
                    var s = $(e),
                        o = jQuery("#" + s);
                    o.addClass("areaSelected"), o.removeClass("areaUnselected"), o.unbind("click"), Y(e, s);
                    var u = z(e),
                        d = jQuery("#" + u);
                    d.addClass("areaSelected"), d.removeClass("areaUnselected"), d.unbind("click"), Y(e, u), fe(!0)
                },
                ue = function(e) {
                    var a = pe(e);
                    L[a] = e, o.show()
                },
                de = function(e) {
                    var a = pe(e);
                    T[a] = e
                },
                ce = function(e) {
                    var a = pe(e);
                    delete L[a], jQuery.isEmptyObject(L) && o.hide()
                },
                pe = function(e) {
                    var a = e.fieldName + e.value;
                    return a
                },
                ve = function(e) {
                    var a = pe(e);
                    return void 0 !== L[a]
                },
                fe = function(e) {
                    a.val(""), a.blur(), e && a.focus()
                },
                me = function(e, a) {
                    if (a.which != I) {
                        var r = e.value;
                        r.length >= h ? J(r, function(e) {
                            if (a.which == _ ? w > 0 && w-- : a.which == S ? w < e.length && w++ : (u.text(""), le(), K(e)), e.length > 0 && w > e.length ? w = 0 : e.length > 0 && w == -1 ? w = 0 : 0 == e.length && (w = -1), w > -1) {
                                var r = e[w],
                                    t = H(r),
                                    l = "autocompleteArrowOver";
                                V(r) || (l = "autocompleteArrowOverDisabled"), jQuery("#" + t).addClass(l);
                                var n = w - 1;
                                if (n > -1) {
                                    var s = e[n],
                                        i = H(s),
                                        l = "autocompleteArrowOver";
                                    V(s) || (l = "autocompleteArrowOverDisabled"), jQuery("#" + i).removeClass(l)
                                }
                                var o = w + 1;
                                if (o < e.length) {
                                    var d = e[o],
                                        c = H(d),
                                        l = "autocompleteArrowOver";
                                    V(d) || (l = "autocompleteArrowOverDisabled"), jQuery("#" + c).removeClass(l)
                                }
                                W(w, 15)
                            }
                        }) : te()
                    }
                };
            a.keyup(function(e) {
                me(this, e)
            }), a.keydown(function(e) {
                if (e.which == I) {
                    e.preventDefault();
                    var a = this.value;
                    J(a, function(e) {
                        var a = e[w];
                        V(a) && void 0 !== a && (ve(a) || oe(a), re(!0))
                    })
                }
            }), a.click(function(e) {
                a.val(""), a.removeClass("areaPickerDefaultText"), a.addClass("areaPickerActive");
                var r = jQuery("<div/>", {
                    style: "padding: 2px"
                }).html(m);
                u.html(r);
                a.val();
                me(this, e)
            }), jQuery(d).each(function() {
                jQuery(this).click(function() {
                    ne()
                })
            }), c.mouseleave(function() {}), jQuery(document).click(function(e) {
                if ("image " == e.target.type && e.target.form && "INPUT" == e.target.nodeName) {
                    var r = jQuery(a).val();
                    J(r, function(e) {
                        e && 1 == e.length && oe(e[0])
                    })
                }
                jQuery(e.target).hasClass("expand-sub-areas") || jQuery(e.target).hasClass("close-sub-areas") || jQuery(e.target).parents().index(y) == -1 && (c.hide(), re(!1))
            }), D()
        })
    }
}(jQuery);
! function() {
    var t, e, s, i, r, o = {}.hasOwnProperty,
        n = function(t, e) {
            function s() {
                this.constructor = t
            }
            for (var i in e) o.call(e, i) && (t[i] = e[i]);
            return s.prototype = e.prototype, t.prototype = new s, t.__super__ = e.prototype, t
        };
    i = function() {
        function t() {
            this.options_index = 0, this.parsed = []
        }
        return t.prototype.add_node = function(t) {
            return "OPTGROUP" === t.nodeName.toUpperCase() ? this.add_group(t) : this.add_option(t)
        }, t.prototype.add_group = function(t) {
            var e, s, i, r, o, n;
            for (e = this.parsed.length, this.parsed.push({
                    array_index: e,
                    group: !0,
                    label: this.escapeExpression(t.label),
                    children: 0,
                    disabled: t.disabled,
                    classes: t.className
                }), o = t.childNodes, n = [], i = 0, r = o.length; r > i; i++) s = o[i], n.push(this.add_option(s, e, t.disabled));
            return n
        }, t.prototype.add_option = function(t, e, s) {
            return "OPTION" === t.nodeName.toUpperCase() ? ("" !== t.text ? (null != e && (this.parsed[e].children += 1), this.parsed.push({
                array_index: this.parsed.length,
                options_index: this.options_index,
                value: t.value,
                text: t.text,
                html: t.innerHTML,
                selected: t.selected,
                disabled: s === !0 ? s : t.disabled,
                group_array_index: e,
                classes: t.className,
                style: t.style.cssText
            })) : this.parsed.push({
                array_index: this.parsed.length,
                options_index: this.options_index,
                empty: !0
            }), this.options_index += 1) : void 0
        }, t.prototype.escapeExpression = function(t) {
            var e, s;
            return null == t || t === !1 ? "" : /[\&\<\>\"\'\`]/.test(t) ? (e = {
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;",
                "`": "&#x60;"
            }, s = /&(?!\w+;)|[\<\>\"\'\`]/g, t.replace(s, function(t) {
                return e[t] || "&amp;"
            })) : t
        }, t
    }(), i.select_to_array = function(t) {
        var e, s, r, o, n;
        for (s = new i, n = t.childNodes, r = 0, o = n.length; o > r; r++) e = n[r], s.add_node(e);
        return s.parsed
    }, e = function() {
        function t(e, s) {
            this.form_field = e, this.options = null != s ? s : {}, t.browser_is_supported() && (this.is_multiple = this.form_field.multiple, this.set_default_text(), this.set_default_values(), this.setup(), this.set_up_html(), this.register_observers(), this.on_ready())
        }
        return t.prototype.set_default_values = function() {
            var t = this;
            return this.click_test_action = function(e) {
                return t.test_active_click(e)
            }, this.activate_action = function(e) {
                return t.activate_field(e)
            }, this.active_field = !1, this.mouse_on_container = !1, this.results_showing = !1, this.result_highlighted = null, this.allow_single_deselect = null != this.options.allow_single_deselect && null != this.form_field.options[0] && "" === this.form_field.options[0].text && this.options.allow_single_deselect, this.disable_search_threshold = this.options.disable_search_threshold || 0, this.disable_search = this.options.disable_search || !1, this.enable_split_word_search = null == this.options.enable_split_word_search || this.options.enable_split_word_search, this.group_search = null == this.options.group_search || this.options.group_search, this.search_contains = this.options.search_contains || !1, this.single_backstroke_delete = null == this.options.single_backstroke_delete || this.options.single_backstroke_delete, this.max_selected_options = this.options.max_selected_options || 1 / 0, this.inherit_select_classes = this.options.inherit_select_classes || !1, this.display_selected_options = null == this.options.display_selected_options || this.options.display_selected_options, this.display_disabled_options = null == this.options.display_disabled_options || this.options.display_disabled_options
        }, t.prototype.set_default_text = function() {
            return this.default_text = this.form_field.getAttribute("data-placeholder") ? this.form_field.getAttribute("data-placeholder") : this.is_multiple ? this.options.placeholder_text_multiple || this.options.placeholder_text || t.default_multiple_text : this.options.placeholder_text_single || this.options.placeholder_text || t.default_single_text, this.results_none_found = this.form_field.getAttribute("data-no_results_text") || this.options.no_results_text || t.default_no_result_text
        }, t.prototype.mouse_enter = function() {
            return this.mouse_on_container = !0
        }, t.prototype.mouse_leave = function() {
            return this.mouse_on_container = !1
        }, t.prototype.input_focus = function() {
            var t = this;
            if (this.is_multiple) {
                if (!this.active_field) return setTimeout(function() {
                    return t.container_mousedown()
                }, 50)
            } else if (!this.active_field) return this.activate_field()
        }, t.prototype.input_blur = function() {
            var t = this;
            return this.mouse_on_container ? void 0 : (this.active_field = !1, setTimeout(function() {
                return t.blur_test()
            }, 100))
        }, t.prototype.results_option_build = function(t) {
            var e, s, i, r, o;
            for (e = "", o = this.results_data, i = 0, r = o.length; r > i; i++) s = o[i], e += s.group ? this.result_add_group(s) : this.result_add_option(s), (null != t ? t.first : void 0) && (s.selected && this.is_multiple ? this.choice_build(s) : s.selected && !this.is_multiple && this.single_set_selected_text(s.text));
            return e
        }, t.prototype.result_add_option = function(t) {
            var e, s;
            return t.search_match && this.include_option_in_results(t) ? (e = [], t.disabled || t.selected && this.is_multiple || e.push("active-result"), !t.disabled || t.selected && this.is_multiple || e.push("disabled-result"), t.selected && e.push("result-selected"), null != t.group_array_index && e.push("group-option"), "" !== t.classes && e.push(t.classes), s = document.createElement("li"), s.className = e.join(" "), s.style.cssText = t.style, s.setAttribute("data-option-array-index", t.array_index), s.innerHTML = t.search_text, this.outerHTML(s)) : ""
        }, t.prototype.result_add_group = function(t) {
            var e, s;
            return (t.search_match || t.group_match) && t.active_options > 0 ? (e = [], e.push("group-result"), t.classes && e.push(t.classes), s = document.createElement("li"), s.className = e.join(" "), s.innerHTML = t.search_text, this.outerHTML(s)) : ""
        }, t.prototype.results_update_field = function() {
            return this.set_default_text(), this.is_multiple || this.results_reset_cleanup(), this.result_clear_highlight(), this.results_build(), this.results_showing ? this.winnow_results() : void 0
        }, t.prototype.reset_single_select_options = function() {
            var t, e, s, i, r;
            for (i = this.results_data, r = [], e = 0, s = i.length; s > e; e++) t = i[e], t.selected ? r.push(t.selected = !1) : r.push(void 0);
            return r
        }, t.prototype.results_toggle = function() {
            return this.results_showing ? this.results_hide() : this.results_show()
        }, t.prototype.results_search = function() {
            return this.results_showing ? this.winnow_results() : this.results_show()
        }, t.prototype.winnow_results = function() {
            var t, e, s, i, r, o, n, h, l, c, a, _;
            for (this.no_results_clear(), i = 0, o = this.get_search_text(), t = o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), l = new RegExp(t, "i"), s = this.get_search_regex(t), _ = this.results_data, c = 0, a = _.length; a > c; c++) e = _[c], e.search_match = !1, r = null, this.include_option_in_results(e) && (e.group && (e.group_match = !1, e.active_options = 0), null != e.group_array_index && this.results_data[e.group_array_index] && (r = this.results_data[e.group_array_index], 0 === r.active_options && r.search_match && (i += 1), r.active_options += 1), (!e.group || this.group_search) && (e.search_text = e.group ? e.label : e.text, e.search_match = this.search_string_match(e.search_text, s), e.search_match && !e.group && (i += 1), e.search_match ? (o.length && (n = e.search_text.search(l), h = e.search_text.substr(0, n + o.length) + "</em>" + e.search_text.substr(n + o.length), e.search_text = h.substr(0, n) + "<em>" + h.substr(n)), null != r && (r.group_match = !0)) : null != e.group_array_index && this.results_data[e.group_array_index].search_match && (e.search_match = !0)));
            return this.result_clear_highlight(), 1 > i && o.length ? (this.update_results_content(""), this.no_results(o)) : (this.update_results_content(this.results_option_build()), this.winnow_results_set_highlight())
        }, t.prototype.get_search_regex = function(t) {
            var e;
            return e = this.search_contains ? "" : "^", new RegExp(e + t, "i")
        }, t.prototype.search_string_match = function(t, e) {
            var s, i, r, o;
            if (e.test(t)) return !0;
            if (this.enable_split_word_search && (t.indexOf(" ") >= 0 || 0 === t.indexOf("[")) && (i = t.replace(/\[|\]/g, "").split(" "), i.length))
                for (r = 0, o = i.length; o > r; r++)
                    if (s = i[r], e.test(s)) return !0
        }, t.prototype.choices_count = function() {
            var t, e, s, i;
            if (null != this.selected_option_count) return this.selected_option_count;
            for (this.selected_option_count = 0, i = this.form_field.options, e = 0, s = i.length; s > e; e++) t = i[e], t.selected && (this.selected_option_count += 1);
            return this.selected_option_count
        }, t.prototype.choices_click = function(t) {
            return t.preventDefault(), this.results_showing || this.is_disabled ? void 0 : this.results_show()
        }, t.prototype.keyup_checker = function(t) {
            var e, s;
            switch (e = null != (s = t.which) ? s : t.keyCode, this.search_field_scale(), e) {
                case 8:
                    if (this.is_multiple && this.backstroke_length < 1 && this.choices_count() > 0) return this.keydown_backstroke();
                    if (!this.pending_backstroke) return this.result_clear_highlight(), this.results_search();
                    break;
                case 13:
                    if (t.preventDefault(), this.results_showing) return this.result_select(t);
                    break;
                case 27:
                    return this.results_showing && this.results_hide(), !0;
                case 9:
                case 38:
                case 40:
                case 16:
                case 91:
                case 17:
                    break;
                default:
                    return this.results_search()
            }
        }, t.prototype.clipboard_event_checker = function() {
            var t = this;
            return setTimeout(function() {
                return t.results_search()
            }, 50)
        }, t.prototype.container_width = function() {
            return null != this.options.width ? this.options.width : "" + this.form_field.offsetWidth + "px"
        }, t.prototype.include_option_in_results = function(t) {
            return !(this.is_multiple && !this.display_selected_options && t.selected) && (!(!this.display_disabled_options && t.disabled) && !t.empty)
        }, t.prototype.search_results_touchstart = function(t) {
            return this.touch_started = !0, this.search_results_mouseover(t)
        }, t.prototype.search_results_touchmove = function(t) {
            return this.touch_started = !1, this.search_results_mouseout(t)
        }, t.prototype.search_results_touchend = function(t) {
            return this.touch_started ? this.search_results_mouseup(t) : void 0
        }, t.prototype.outerHTML = function(t) {
            var e;
            return t.outerHTML ? t.outerHTML : (e = document.createElement("div"), e.appendChild(t), e.innerHTML)
        }, t.browser_is_supported = function() {
            return "Microsoft Internet Explorer" === window.navigator.appName ? document.documentMode >= 8 : !/iP(od|hone)/i.test(window.navigator.userAgent) && (!/Android/i.test(window.navigator.userAgent) || !/Mobile/i.test(window.navigator.userAgent))
        }, t.default_multiple_text = "Select Some Options", t.default_single_text = "Select an Option", t.default_no_result_text = "No results match", t
    }(), t = jQuery, t.fn.extend({
        chosen: function(i) {
            return e.browser_is_supported() ? this.each(function() {
                var e, r;
                e = t(this), r = e.data("chosen"), "destroy" === i && r instanceof s ? r.destroy() : r instanceof s || e.data("chosen", new s(this, i))
            }) : this
        }
    }), s = function(e) {
        function s() {
            return r = s.__super__.constructor.apply(this, arguments)
        }
        return n(s, e), s.prototype.setup = function() {
            return this.form_field_jq = t(this.form_field), this.current_selectedIndex = this.form_field.selectedIndex, this.is_rtl = this.form_field_jq.hasClass("chosen-rtl")
        }, s.prototype.set_up_html = function() {
            var e, s;
            return e = ["chosen-container"], e.push("chosen-container-" + (this.is_multiple ? "multi" : "single")), this.inherit_select_classes && this.form_field.className && e.push(this.form_field.className), this.is_rtl && e.push("chosen-rtl"), s = {
                class: e.join(" "),
                style: "width: " + this.container_width() + ";",
                title: this.form_field.title
            }, this.form_field.id.length && (s.id = this.form_field.id.replace(/[^\w]/g, "_") + "_chosen"), this.container = t("<div />", s), this.is_multiple ? this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="' + this.default_text + '" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>') : this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>' + this.default_text + '</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'), this.form_field_jq.hide().after(this.container), this.dropdown = this.container.find("div.chosen-drop").first(), this.search_field = this.container.find("input").first(), this.search_results = this.container.find("ul.chosen-results").first(), this.search_field_scale(), this.search_no_results = this.container.find("li.no-results").first(), this.is_multiple ? (this.search_choices = this.container.find("ul.chosen-choices").first(), this.search_container = this.container.find("li.search-field").first()) : (this.search_container = this.container.find("div.chosen-search").first(), this.selected_item = this.container.find(".chosen-single").first()), this.results_build(), this.set_tab_index(), this.set_label_behavior()
        }, s.prototype.on_ready = function() {
            return this.form_field_jq.trigger("chosen:ready", {
                chosen: this
            })
        }, s.prototype.register_observers = function() {
            var t = this;
            return this.container.bind("touchstart.chosen", function(e) {
                t.container_mousedown(e)
            }), this.container.bind("touchend.chosen", function(e) {
                t.container_mouseup(e)
            }), this.container.bind("mousedown.chosen", function(e) {
                t.container_mousedown(e)
            }), this.container.bind("mouseup.chosen", function(e) {
                t.container_mouseup(e)
            }), this.container.bind("mouseenter.chosen", function(e) {
                t.mouse_enter(e)
            }), this.container.bind("mouseleave.chosen", function(e) {
                t.mouse_leave(e)
            }), this.search_results.bind("mouseup.chosen", function(e) {
                t.search_results_mouseup(e)
            }), this.search_results.bind("mouseover.chosen", function(e) {
                t.search_results_mouseover(e)
            }), this.search_results.bind("mouseout.chosen", function(e) {
                t.search_results_mouseout(e)
            }), this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen", function(e) {
                t.search_results_mousewheel(e)
            }), this.search_results.bind("touchstart.chosen", function(e) {
                t.search_results_touchstart(e)
            }), this.search_results.bind("touchmove.chosen", function(e) {
                t.search_results_touchmove(e)
            }), this.search_results.bind("touchend.chosen", function(e) {
                t.search_results_touchend(e)
            }), this.form_field_jq.bind("chosen:updated.chosen", function(e) {
                t.results_update_field(e)
            }), this.form_field_jq.bind("chosen:activate.chosen", function(e) {
                t.activate_field(e)
            }), this.form_field_jq.bind("chosen:open.chosen", function(e) {
                t.container_mousedown(e)
            }), this.form_field_jq.bind("chosen:close.chosen", function(e) {
                t.input_blur(e)
            }), this.search_field.bind("blur.chosen", function(e) {
                t.input_blur(e)
            }), this.search_field.bind("keyup.chosen", function(e) {
                t.keyup_checker(e)
            }), this.search_field.bind("keydown.chosen", function(e) {
                t.keydown_checker(e)
            }), this.search_field.bind("focus.chosen", function(e) {
                t.input_focus(e)
            }), this.search_field.bind("cut.chosen", function(e) {
                t.clipboard_event_checker(e)
            }), this.search_field.bind("paste.chosen", function(e) {
                t.clipboard_event_checker(e)
            }), this.is_multiple ? this.search_choices.bind("click.chosen", function(e) {
                t.choices_click(e)
            }) : this.container.bind("click.chosen", function(t) {
                t.preventDefault()
            })
        }, s.prototype.destroy = function() {
            return t(this.container[0].ownerDocument).unbind("click.chosen", this.click_test_action), this.search_field[0].tabIndex && (this.form_field_jq[0].tabIndex = this.search_field[0].tabIndex), this.container.remove(), this.form_field_jq.removeData("chosen"), this.form_field_jq.show()
        }, s.prototype.search_field_disabled = function() {
            return this.is_disabled = this.form_field_jq[0].disabled, this.is_disabled ? (this.container.addClass("chosen-disabled"), this.search_field[0].disabled = !0, this.is_multiple || this.selected_item.unbind("focus.chosen", this.activate_action), this.close_field()) : (this.container.removeClass("chosen-disabled"), this.search_field[0].disabled = !1, this.is_multiple ? void 0 : this.selected_item.bind("focus.chosen", this.activate_action))
        }, s.prototype.container_mousedown = function(e) {
            return this.is_disabled || (e && "mousedown" === e.type && !this.results_showing && e.preventDefault(), null != e && t(e.target).hasClass("search-choice-close")) ? void 0 : (this.active_field ? this.is_multiple || !e || t(e.target)[0] !== this.selected_item[0] && !t(e.target).parents("a.chosen-single").length || (e.preventDefault(), this.results_toggle()) : (this.is_multiple && this.search_field.val(""), t(this.container[0].ownerDocument).bind("click.chosen", this.click_test_action), this.results_show()), this.activate_field())
        }, s.prototype.container_mouseup = function(t) {
            return "ABBR" !== t.target.nodeName || this.is_disabled ? void 0 : this.results_reset(t)
        }, s.prototype.search_results_mousewheel = function(t) {
            var e;
            return t.originalEvent && (e = t.originalEvent.deltaY || -t.originalEvent.wheelDelta || t.originalEvent.detail), null != e ? (t.preventDefault(), "DOMMouseScroll" === t.type && (e = 40 * e), this.search_results.scrollTop(e + this.search_results.scrollTop())) : void 0
        }, s.prototype.blur_test = function() {
            return !this.active_field && this.container.hasClass("chosen-container-active") ? this.close_field() : void 0
        }, s.prototype.close_field = function() {
            return t(this.container[0].ownerDocument).unbind("click.chosen", this.click_test_action), this.active_field = !1, this.results_hide(), this.container.removeClass("chosen-container-active"), this.clear_backstroke(), this.show_search_field_default(), this.search_field_scale()
        }, s.prototype.activate_field = function() {
            return this.container.addClass("chosen-container-active"), this.active_field = !0, this.search_field.val(this.search_field.val()), this.search_field.focus()
        }, s.prototype.test_active_click = function(e) {
            var s;
            return s = t(e.target).closest(".chosen-container"), s.length && this.container[0] === s[0] ? this.active_field = !0 : this.close_field()
        }, s.prototype.results_build = function() {
            return this.parsing = !0, this.selected_option_count = null, this.results_data = i.select_to_array(this.form_field), this.is_multiple ? this.search_choices.find("li.search-choice").remove() : this.is_multiple || (this.single_set_selected_text(), this.disable_search || this.form_field.options.length <= this.disable_search_threshold ? (this.search_field[0].readOnly = !0, this.container.addClass("chosen-container-single-nosearch")) : (this.search_field[0].readOnly = !1, this.container.removeClass("chosen-container-single-nosearch"))), this.update_results_content(this.results_option_build({
                first: !0
            })), this.search_field_disabled(), this.show_search_field_default(), this.search_field_scale(), this.parsing = !1
        }, s.prototype.result_do_highlight = function(t) {
            var e, s, i, r, o;
            if (t.length) {
                if (this.result_clear_highlight(), this.result_highlight = t, this.result_highlight.addClass("highlighted"), i = parseInt(this.search_results.css("maxHeight"), 10), o = this.search_results.scrollTop(), r = i + o, s = this.result_highlight.position().top + this.search_results.scrollTop(), e = s + this.result_highlight.outerHeight(), e >= r) return this.search_results.scrollTop(e - i > 0 ? e - i : 0);
                if (o > s) return this.search_results.scrollTop(s)
            }
        }, s.prototype.result_clear_highlight = function() {
            return this.result_highlight && this.result_highlight.removeClass("highlighted"), this.result_highlight = null
        }, s.prototype.results_show = function() {
            return this.is_multiple && this.max_selected_options <= this.choices_count() ? (this.form_field_jq.trigger("chosen:maxselected", {
                chosen: this
            }), !1) : (this.container.addClass("chosen-with-drop"), this.results_showing = !0, this.search_field.focus(), this.search_field.val(this.search_field.val()), this.winnow_results(), this.form_field_jq.trigger("chosen:showing_dropdown", {
                chosen: this
            }))
        }, s.prototype.update_results_content = function(t) {
            return this.search_results.html(t)
        }, s.prototype.results_hide = function() {
            return this.results_showing && (this.result_clear_highlight(), this.container.removeClass("chosen-with-drop"), this.form_field_jq.trigger("chosen:hiding_dropdown", {
                chosen: this
            })), this.results_showing = !1
        }, s.prototype.set_tab_index = function() {
            var t;
            return this.form_field.tabIndex ? (t = this.form_field.tabIndex, this.form_field.tabIndex = -1, this.search_field[0].tabIndex = t) : void 0
        }, s.prototype.set_label_behavior = function() {
            var e = this;
            return this.form_field_label = this.form_field_jq.parents("label"), !this.form_field_label.length && this.form_field.id.length && (this.form_field_label = t("label[for='" + this.form_field.id + "']")), this.form_field_label.length > 0 ? this.form_field_label.bind("click.chosen", function(t) {
                return e.is_multiple ? e.container_mousedown(t) : e.activate_field()
            }) : void 0
        }, s.prototype.show_search_field_default = function() {
            return this.is_multiple && this.choices_count() < 1 && !this.active_field ? (this.search_field.val(this.default_text), this.search_field.addClass("default")) : (this.search_field.val(""), this.search_field.removeClass("default"))
        }, s.prototype.search_results_mouseup = function(e) {
            var s;
            return s = t(e.target).hasClass("active-result") ? t(e.target) : t(e.target).parents(".active-result").first(), s.length ? (this.result_highlight = s, this.result_select(e), this.search_field.focus()) : void 0
        }, s.prototype.search_results_mouseover = function(e) {
            var s;
            return s = t(e.target).hasClass("active-result") ? t(e.target) : t(e.target).parents(".active-result").first(), s ? this.result_do_highlight(s) : void 0
        }, s.prototype.search_results_mouseout = function(e) {
            return t(e.target).hasClass("active-result") ? this.result_clear_highlight() : void 0
        }, s.prototype.choice_build = function(e) {
            var s, i, r = this;
            return s = t("<li />", {
                class: "search-choice"
            }).html("<span>" + e.html + "</span>"), e.disabled ? s.addClass("search-choice-disabled") : (i = t("<a />", {
                class: "search-choice-close",
                "data-option-array-index": e.array_index
            }), i.bind("click.chosen", function(t) {
                return r.choice_destroy_link_click(t)
            }), s.append(i)), this.search_container.before(s)
        }, s.prototype.choice_destroy_link_click = function(e) {
            return e.preventDefault(), e.stopPropagation(), this.is_disabled ? void 0 : this.choice_destroy(t(e.target))
        }, s.prototype.choice_destroy = function(t) {
            return this.result_deselect(t[0].getAttribute("data-option-array-index")) ? (this.show_search_field_default(), this.is_multiple && this.choices_count() > 0 && this.search_field.val().length < 1 && this.results_hide(), t.parents("li").first().remove(), this.search_field_scale()) : void 0
        }, s.prototype.results_reset = function() {
            return this.reset_single_select_options(), this.form_field.options[0].selected = !0, this.single_set_selected_text(), this.show_search_field_default(), this.results_reset_cleanup(), this.form_field_jq.trigger("change"), this.active_field ? this.results_hide() : void 0
        }, s.prototype.results_reset_cleanup = function() {
            return this.current_selectedIndex = this.form_field.selectedIndex, this.selected_item.find("abbr").remove()
        }, s.prototype.result_select = function(t) {
            var e, s;
            return this.result_highlight ? (e = this.result_highlight, this.result_clear_highlight(), this.is_multiple && this.max_selected_options <= this.choices_count() ? (this.form_field_jq.trigger("chosen:maxselected", {
                chosen: this
            }), !1) : (this.is_multiple ? e.removeClass("active-result") : this.reset_single_select_options(), s = this.results_data[e[0].getAttribute("data-option-array-index")], s.selected = !0, this.form_field.options[s.options_index].selected = !0, this.selected_option_count = null, this.is_multiple ? this.choice_build(s) : this.single_set_selected_text(s.text), (t.metaKey || t.ctrlKey) && this.is_multiple || this.results_hide(), this.search_field.val(""), (this.is_multiple || this.form_field.selectedIndex !== this.current_selectedIndex) && this.form_field_jq.trigger("change", {
                selected: this.form_field.options[s.options_index].value
            }), this.current_selectedIndex = this.form_field.selectedIndex, this.search_field_scale())) : void 0
        }, s.prototype.single_set_selected_text = function(t) {
            return null == t && (t = this.default_text), t === this.default_text ? this.selected_item.addClass("chosen-default") : (this.single_deselect_control_build(), this.selected_item.removeClass("chosen-default")), this.selected_item.find("span").text(t)
        }, s.prototype.result_deselect = function(t) {
            var e;
            return e = this.results_data[t], !this.form_field.options[e.options_index].disabled && (e.selected = !1, this.form_field.options[e.options_index].selected = !1, this.selected_option_count = null, this.result_clear_highlight(), this.results_showing && this.winnow_results(), this.form_field_jq.trigger("change", {
                deselected: this.form_field.options[e.options_index].value
            }), this.search_field_scale(), !0)
        }, s.prototype.single_deselect_control_build = function() {
            return this.allow_single_deselect ? (this.selected_item.find("abbr").length || this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'), this.selected_item.addClass("chosen-single-with-deselect")) : void 0
        }, s.prototype.get_search_text = function() {
            return this.search_field.val() === this.default_text ? "" : t("<div/>").text(t.trim(this.search_field.val())).html()
        }, s.prototype.winnow_results_set_highlight = function() {
            var t, e;
            return e = this.is_multiple ? [] : this.search_results.find(".result-selected.active-result"), t = e.length ? e.first() : this.search_results.find(".active-result").first(), null != t ? this.result_do_highlight(t) : void 0
        }, s.prototype.no_results = function(e) {
            var s;
            return s = t('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>'), s.find("span").first().html(e), this.search_results.append(s), this.form_field_jq.trigger("chosen:no_results", {
                chosen: this
            })
        }, s.prototype.no_results_clear = function() {
            return this.search_results.find(".no-results").remove()
        }, s.prototype.keydown_arrow = function() {
            var t;
            return this.results_showing && this.result_highlight ? (t = this.result_highlight.nextAll("li.active-result").first()) ? this.result_do_highlight(t) : void 0 : this.results_show()
        }, s.prototype.keyup_arrow = function() {
            var t;
            return this.results_showing || this.is_multiple ? this.result_highlight ? (t = this.result_highlight.prevAll("li.active-result"), t.length ? this.result_do_highlight(t.first()) : (this.choices_count() > 0 && this.results_hide(), this.result_clear_highlight())) : void 0 : this.results_show()
        }, s.prototype.keydown_backstroke = function() {
            var t;
            return this.pending_backstroke ? (this.choice_destroy(this.pending_backstroke.find("a").first()), this.clear_backstroke()) : (t = this.search_container.siblings("li.search-choice").last(), t.length && !t.hasClass("search-choice-disabled") ? (this.pending_backstroke = t, this.single_backstroke_delete ? this.keydown_backstroke() : this.pending_backstroke.addClass("search-choice-focus")) : void 0)
        }, s.prototype.clear_backstroke = function() {
            return this.pending_backstroke && this.pending_backstroke.removeClass("search-choice-focus"), this.pending_backstroke = null
        }, s.prototype.keydown_checker = function(t) {
            var e, s;
            switch (e = null != (s = t.which) ? s : t.keyCode, this.search_field_scale(), 8 !== e && this.pending_backstroke && this.clear_backstroke(), e) {
                case 8:
                    this.backstroke_length = this.search_field.val().length;
                    break;
                case 9:
                    this.results_showing && !this.is_multiple && this.result_select(t), this.mouse_on_container = !1;
                    break;
                case 13:
                    this.results_showing && t.preventDefault();
                    break;
                case 32:
                    this.disable_search && t.preventDefault();
                    break;
                case 38:
                    t.preventDefault(), this.keyup_arrow();
                    break;
                case 40:
                    t.preventDefault(), this.keydown_arrow()
            }
        }, s.prototype.search_field_scale = function() {
            var e, s, i, r, o, n, h, l, c;
            if (this.is_multiple) {
                for (i = 0, h = 0, o = "position:absolute; left: -1000px; top: -1000px; display:none;", n = ["font-size", "font-style", "font-weight", "font-family", "line-height", "text-transform", "letter-spacing"], l = 0, c = n.length; c > l; l++) r = n[l], o += r + ":" + this.search_field.css(r) + ";";
                return e = t("<div />", {
                    style: o
                }), e.text(this.search_field.val()), t("body").append(e), h = e.width() + 25, e.remove(), s = this.container.outerWidth(), h > s - 10 && (h = s - 10), this.search_field.css({
                    width: h + "px"
                })
            }
        }, s
    }(e)
}.call(this);
jQuery(document).ready(function() {
    var e = {
        ".zpa-chosen-select": {},
        ".zpa-chosen-select-deselect": {
            allow_single_deselect: !0
        },
        ".zpa-chosen-select-no-single": {
            disable_search_threshold: 10
        },
        ".zpa-chosen-select-no-results": {
            no_results_text: "Oops, nothing found!"
        },
        ".zpa-chosen-select-width": {
            width: "100%",
            disable_search_threshold: 10,
            placeholder_text_multiple: " ",
            placeholder_text_single: " "
        }
    };
    for (var s in e) {
        if (jQuery(s).length) jQuery(s).chosen(e[s])
    }
});
! function(t) {
    t.extend(t.fn, {
        validate: function(e) {
            if (!this.length) return void(e && e.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing."));
            var i = t.data(this[0], "validator");
            return i ? i : (this.attr("novalidate", "novalidate"), i = new t.validator(e, this[0]), t.data(this[0], "validator", i), i.settings.onsubmit && (this.validateDelegate(":submit", "click", function(e) {
                i.settings.submitHandler && (i.submitButton = e.target), t(e.target).hasClass("cancel") && (i.cancelSubmit = !0), void 0 !== t(e.target).attr("formnovalidate") && (i.cancelSubmit = !0)
            }), this.submit(function(e) {
                function s() {
                    var s;
                    return !i.settings.submitHandler || (i.submitButton && (s = t("<input type='hidden'/>").attr("name", i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)), i.settings.submitHandler.call(i, i.currentForm, e), i.submitButton && s.remove(), !1)
                }
                return i.settings.debug && e.preventDefault(), i.cancelSubmit ? (i.cancelSubmit = !1, s()) : i.form() ? i.pendingRequest ? (i.formSubmitted = !0, !1) : s() : (i.focusInvalid(), !1)
            })), i)
        },
        valid: function() {
            if (t(this[0]).is("form")) return this.validate().form();
            var e = !0,
                i = t(this[0].form).validate();
            return this.each(function() {
                e = e && i.element(this)
            }), e
        },
        removeAttrs: function(e) {
            var i = {},
                s = this;
            return t.each(e.split(/\s/), function(t, e) {
                i[e] = s.attr(e), s.removeAttr(e)
            }), i
        },
        rules: function(e, i) {
            var s = this[0];
            if (e) {
                var r = t.data(s.form, "validator").settings,
                    n = r.rules,
                    a = t.validator.staticRules(s);
                switch (e) {
                    case "add":
                        t.extend(a, t.validator.normalizeRule(i)), delete a.messages, n[s.name] = a, i.messages && (r.messages[s.name] = t.extend(r.messages[s.name], i.messages));
                        break;
                    case "remove":
                        if (!i) return delete n[s.name], a;
                        var u = {};
                        return t.each(i.split(/\s/), function(t, e) {
                            u[e] = a[e], delete a[e]
                        }), u
                }
            }
            var o = t.validator.normalizeRules(t.extend({}, t.validator.classRules(s), t.validator.attributeRules(s), t.validator.dataRules(s), t.validator.staticRules(s)), s);
            if (o.required) {
                var l = o.required;
                delete o.required, o = t.extend({
                    required: l
                }, o)
            }
            return o
        }
    }), t.extend(t.expr[":"], {
        blank: function(e) {
            return !t.trim("" + t(e).val())
        },
        filled: function(e) {
            return !!t.trim("" + t(e).val())
        },
        unchecked: function(e) {
            return !t(e).prop("checked")
        }
    }), t.validator = function(e, i) {
        this.settings = t.extend(!0, {}, t.validator.defaults, e), this.currentForm = i, this.init()
    }, t.validator.format = function(e, i) {
        return 1 === arguments.length ? function() {
            var i = t.makeArray(arguments);
            return i.unshift(e), t.validator.format.apply(this, i)
        } : (arguments.length > 2 && i.constructor !== Array && (i = t.makeArray(arguments).slice(1)), i.constructor !== Array && (i = [i]), t.each(i, function(t, i) {
            e = e.replace(new RegExp("\\{" + t + "\\}", "g"), function() {
                return i
            })
        }), e)
    }, t.extend(t.validator, {
        defaults: {
            messages: {},
            groups: {},
            rules: {},
            errorClass: "error",
            validClass: "valid",
            errorElement: "label",
            focusInvalid: !0,
            errorContainer: t([]),
            errorLabelContainer: t([]),
            onsubmit: !0,
            ignore: ":hidden",
            ignoreTitle: !1,
            onfocusin: function(t, e) {
                this.lastActive = t, this.settings.focusCleanup && !this.blockFocusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, t, this.settings.errorClass, this.settings.validClass), this.addWrapper(this.errorsFor(t)).hide())
            },
            onfocusout: function(t, e) {
                this.checkable(t) || !(t.name in this.submitted) && this.optional(t) || this.element(t)
            },
            onkeyup: function(t, e) {
                9 === e.which && "" === this.elementValue(t) || (t.name in this.submitted || t === this.lastElement) && this.element(t)
            },
            onclick: function(t, e) {
                t.name in this.submitted ? this.element(t) : t.parentNode.name in this.submitted && this.element(t.parentNode)
            },
            highlight: function(e, i, s) {
                "radio" === e.type ? this.findByName(e.name).addClass(i).removeClass(s) : t(e).addClass(i).removeClass(s)
            },
            unhighlight: function(e, i, s) {
                "radio" === e.type ? this.findByName(e.name).removeClass(i).addClass(s) : t(e).removeClass(i).addClass(s)
            }
        },
        setDefaults: function(e) {
            t.extend(t.validator.defaults, e)
        },
        messages: {
            required: "This field is required.",
            remote: "Please fix this field.",
            email: "Please enter a valid email address.",
            url: "Please enter a valid URL.",
            date: "Please enter a valid date.",
            dateISO: "Please enter a valid date (ISO).",
            number: "Please enter a valid number.",
            digits: "Please enter only digits.",
            creditcard: "Please enter a valid credit card number.",
            equalTo: "Please enter the same value again.",
            maxlength: t.validator.format("Please enter no more than {0} characters."),
            minlength: t.validator.format("Please enter at least {0} characters."),
            rangelength: t.validator.format("Please enter a value between {0} and {1} characters long."),
            range: t.validator.format("Please enter a value between {0} and {1}."),
            max: t.validator.format("Please enter a value less than or equal to {0}."),
            min: t.validator.format("Please enter a value greater than or equal to {0}.")
        },
        autoCreateRanges: !1,
        prototype: {
            init: function() {
                function e(e) {
                    var i = t.data(this[0].form, "validator"),
                        s = "on" + e.type.replace(/^validate/, "");
                    i.settings[s] && i.settings[s].call(i, this[0], e)
                }
                this.labelContainer = t(this.settings.errorLabelContainer), this.errorContext = this.labelContainer.length && this.labelContainer || t(this.currentForm), this.containers = t(this.settings.errorContainer).add(this.settings.errorLabelContainer), this.submitted = {}, this.valueCache = {}, this.pendingRequest = 0, this.pending = {}, this.invalid = {}, this.reset();
                var i = this.groups = {};
                t.each(this.settings.groups, function(e, s) {
                    "string" == typeof s && (s = s.split(/\s/)), t.each(s, function(t, s) {
                        i[s] = e
                    })
                });
                var s = this.settings.rules;
                t.each(s, function(e, i) {
                    s[e] = t.validator.normalizeRule(i)
                }), t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ", "focusin focusout keyup", e).validateDelegate("[type='radio'], [type='checkbox'], select, option", "click", e), this.settings.invalidHandler && t(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler)
            },
            form: function() {
                return this.checkForm(), t.extend(this.submitted, this.errorMap), this.invalid = t.extend({}, this.errorMap), this.valid() || t(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid()
            },
            checkForm: function() {
                this.prepareForm();
                for (var t = 0, e = this.currentElements = this.elements(); e[t]; t++) this.check(e[t]);
                return this.valid()
            },
            element: function(e) {
                e = this.validationTargetFor(this.clean(e)), this.lastElement = e, this.prepareElement(e), this.currentElements = t(e);
                var i = this.check(e) !== !1;
                return i ? delete this.invalid[e.name] : this.invalid[e.name] = !0, this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), i
            },
            showErrors: function(e) {
                if (e) {
                    t.extend(this.errorMap, e), this.errorList = [];
                    for (var i in e) this.errorList.push({
                        message: e[i],
                        element: this.findByName(i)[0]
                    });
                    this.successList = t.grep(this.successList, function(t) {
                        return !(t.name in e)
                    })
                }
                this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors()
            },
            resetForm: function() {
                t.fn.resetForm && t(this.currentForm).resetForm(), this.submitted = {}, this.lastElement = null, this.prepareForm(), this.hideErrors(), this.elements().removeClass(this.settings.errorClass).removeData("previousValue")
            },
            numberOfInvalids: function() {
                return this.objectLength(this.invalid)
            },
            objectLength: function(t) {
                var e = 0;
                for (var i in t) e++;
                return e
            },
            hideErrors: function() {
                this.addWrapper(this.toHide).hide()
            },
            valid: function() {
                return 0 === this.size()
            },
            size: function() {
                return this.errorList.length
            },
            focusInvalid: function() {
                if (this.settings.focusInvalid) try {
                    t(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin")
                } catch (t) {}
            },
            findLastActive: function() {
                var e = this.lastActive;
                return e && 1 === t.grep(this.errorList, function(t) {
                    return t.element.name === e.name
                }).length && e
            },
            elements: function() {
                var e = this,
                    i = {};
                return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function() {
                    return !this.name && e.settings.debug && window.console && console.error("%o has no name assigned", this), !(this.name in i || !e.objectLength(t(this).rules())) && (i[this.name] = !0, !0)
                })
            },
            clean: function(e) {
                return t(e)[0]
            },
            errors: function() {
                var e = this.settings.errorClass.replace(" ", ".");
                return t(this.settings.errorElement + "." + e, this.errorContext)
            },
            reset: function() {
                this.successList = [], this.errorList = [], this.errorMap = {}, this.toShow = t([]), this.toHide = t([]), this.currentElements = t([])
            },
            prepareForm: function() {
                this.reset(), this.toHide = this.errors().add(this.containers)
            },
            prepareElement: function(t) {
                this.reset(), this.toHide = this.errorsFor(t)
            },
            elementValue: function(e) {
                var i = t(e).attr("type"),
                    s = t(e).val();
                return "radio" === i || "checkbox" === i ? t("input[name='" + t(e).attr("name") + "']:checked").val() : "string" == typeof s ? s.replace(/\r/g, "") : s
            },
            check: function(e) {
                e = this.validationTargetFor(this.clean(e));
                var i, s = t(e).rules(),
                    r = !1,
                    n = this.elementValue(e);
                for (var a in s) {
                    var u = {
                        method: a,
                        parameters: s[a]
                    };
                    try {
                        if (i = t.validator.methods[a].call(this, n, e, u.parameters), "dependency-mismatch" === i) {
                            r = !0;
                            continue
                        }
                        if (r = !1, "pending" === i) return void(this.toHide = this.toHide.not(this.errorsFor(e)));
                        if (!i) return this.formatAndAdd(e, u), !1
                    } catch (t) {
                        throw this.settings.debug && window.console && console.log("Exception occurred when checking element " + e.id + ", check the '" + u.method + "' method.", t), t
                    }
                }
                if (!r) return this.objectLength(s) && this.successList.push(e), !0
            },
            customDataMessage: function(e, i) {
                return t(e).data("msg-" + i.toLowerCase()) || e.attributes && t(e).attr("data-msg-" + i.toLowerCase())
            },
            customMessage: function(t, e) {
                var i = this.settings.messages[t];
                return i && (i.constructor === String ? i : i[e])
            },
            findDefined: function() {
                for (var t = 0; t < arguments.length; t++)
                    if (void 0 !== arguments[t]) return arguments[t]
            },
            defaultMessage: function(e, i) {
                return this.findDefined(this.customMessage(e.name, i), this.customDataMessage(e, i), !this.settings.ignoreTitle && e.title || void 0, t.validator.messages[i], "<strong>Warning: No message defined for " + e.name + "</strong>")
            },
            formatAndAdd: function(e, i) {
                var s = this.defaultMessage(e, i.method),
                    r = /\$?\{(\d+)\}/g;
                "function" == typeof s ? s = s.call(this, i.parameters, e) : r.test(s) && (s = t.validator.format(s.replace(r, "{$1}"), i.parameters)), this.errorList.push({
                    message: s,
                    element: e
                }), this.errorMap[e.name] = s, this.submitted[e.name] = s
            },
            addWrapper: function(t) {
                return this.settings.wrapper && (t = t.add(t.parent(this.settings.wrapper))), t
            },
            defaultShowErrors: function() {
                var t, e;
                for (t = 0; this.errorList[t]; t++) {
                    var i = this.errorList[t];
                    this.settings.highlight && this.settings.highlight.call(this, i.element, this.settings.errorClass, this.settings.validClass), this.showLabel(i.element, i.message)
                }
                if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success)
                    for (t = 0; this.successList[t]; t++) this.showLabel(this.successList[t]);
                if (this.settings.unhighlight)
                    for (t = 0, e = this.validElements(); e[t]; t++) this.settings.unhighlight.call(this, e[t], this.settings.errorClass, this.settings.validClass);
                this.toHide = this.toHide.not(this.toShow), this.hideErrors(), this.addWrapper(this.toShow).show()
            },
            validElements: function() {
                return this.currentElements.not(this.invalidElements())
            },
            invalidElements: function() {
                return t(this.errorList).map(function() {
                    return this.element
                })
            },
            showLabel: function(e, i) {
                var s = this.errorsFor(e);
                s.length ? (s.removeClass(this.settings.validClass).addClass(this.settings.errorClass), s.html(i)) : (s = t("<" + this.settings.errorElement + ">").attr("for", this.idOrName(e)).addClass(this.settings.errorClass).html(i || ""), this.settings.wrapper && (s = s.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.append(s).length || (this.settings.errorPlacement ? this.settings.errorPlacement(s, t(e)) : s.insertAfter(e))), !i && this.settings.success && (s.text(""), "string" == typeof this.settings.success ? s.addClass(this.settings.success) : this.settings.success(s, e)), this.toShow = this.toShow.add(s)
            },
            errorsFor: function(e) {
                var i = this.idOrName(e);
                return this.errors().filter(function() {
                    return t(this).attr("for") === i
                })
            },
            idOrName: function(t) {
                return this.groups[t.name] || (this.checkable(t) ? t.name : t.id || t.name)
            },
            validationTargetFor: function(t) {
                return this.checkable(t) && (t = this.findByName(t.name).not(this.settings.ignore)[0]), t
            },
            checkable: function(t) {
                return /radio|checkbox/i.test(t.type)
            },
            findByName: function(e) {
                return t(this.currentForm).find("[name='" + e + "']")
            },
            getLength: function(e, i) {
                switch (i.nodeName.toLowerCase()) {
                    case "select":
                        return t("option:selected", i).length;
                    case "input":
                        if (this.checkable(i)) return this.findByName(i.name).filter(":checked").length
                }
                return e.length
            },
            depend: function(t, e) {
                return !this.dependTypes[typeof t] || this.dependTypes[typeof t](t, e)
            },
            dependTypes: {
                boolean: function(t, e) {
                    return t
                },
                string: function(e, i) {
                    return !!t(e, i.form).length
                },
                function: function(t, e) {
                    return t(e)
                }
            },
            optional: function(e) {
                var i = this.elementValue(e);
                return !t.validator.methods.required.call(this, i, e) && "dependency-mismatch"
            },
            startRequest: function(t) {
                this.pending[t.name] || (this.pendingRequest++, this.pending[t.name] = !0)
            },
            stopRequest: function(e, i) {
                this.pendingRequest--, this.pendingRequest < 0 && (this.pendingRequest = 0), delete this.pending[e.name], i && 0 === this.pendingRequest && this.formSubmitted && this.form() ? (t(this.currentForm).submit(), this.formSubmitted = !1) : !i && 0 === this.pendingRequest && this.formSubmitted && (t(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1)
            },
            previousValue: function(e) {
                return t.data(e, "previousValue") || t.data(e, "previousValue", {
                    old: null,
                    valid: !0,
                    message: this.defaultMessage(e, "remote")
                })
            }
        },
        classRuleSettings: {
            required: {
                required: !0
            },
            email: {
                email: !0
            },
            url: {
                url: !0
            },
            date: {
                date: !0
            },
            dateISO: {
                dateISO: !0
            },
            number: {
                number: !0
            },
            digits: {
                digits: !0
            },
            creditcard: {
                creditcard: !0
            }
        },
        addClassRules: function(e, i) {
            e.constructor === String ? this.classRuleSettings[e] = i : t.extend(this.classRuleSettings, e)
        },
        classRules: function(e) {
            var i = {},
                s = t(e).attr("class");
            return s && t.each(s.split(" "), function() {
                this in t.validator.classRuleSettings && t.extend(i, t.validator.classRuleSettings[this])
            }), i
        },
        attributeRules: function(e) {
            var i = {},
                s = t(e),
                r = s[0].getAttribute("type");
            for (var n in t.validator.methods) {
                var a;
                "required" === n ? (a = s.get(0).getAttribute(n), "" === a && (a = !0), a = !!a) : a = s.attr(n), /min|max/.test(n) && (null === r || /number|range|text/.test(r)) && (a = Number(a)), a ? i[n] = a : r === n && "range" !== r && (i[n] = !0)
            }
            return i.maxlength && /-1|2147483647|524288/.test(i.maxlength) && delete i.maxlength, i
        },
        dataRules: function(e) {
            var i, s, r = {},
                n = t(e);
            for (i in t.validator.methods) s = n.data("rule-" + i.toLowerCase()), void 0 !== s && (r[i] = s);
            return r
        },
        staticRules: function(e) {
            var i = {},
                s = t.data(e.form, "validator");
            return s.settings.rules && (i = t.validator.normalizeRule(s.settings.rules[e.name]) || {}), i
        },
        normalizeRules: function(e, i) {
            return t.each(e, function(s, r) {
                if (r === !1) return void delete e[s];
                if (r.param || r.depends) {
                    var n = !0;
                    switch (typeof r.depends) {
                        case "string":
                            n = !!t(r.depends, i.form).length;
                            break;
                        case "function":
                            n = r.depends.call(i, i)
                    }
                    n ? e[s] = void 0 === r.param || r.param : delete e[s]
                }
            }), t.each(e, function(s, r) {
                e[s] = t.isFunction(r) ? r(i) : r
            }), t.each(["minlength", "maxlength"], function() {
                e[this] && (e[this] = Number(e[this]))
            }), t.each(["rangelength", "range"], function() {
                var i;
                e[this] && (t.isArray(e[this]) ? e[this] = [Number(e[this][0]), Number(e[this][1])] : "string" == typeof e[this] && (i = e[this].split(/[\s,]+/), e[this] = [Number(i[0]), Number(i[1])]))
            }), t.validator.autoCreateRanges && (e.min && e.max && (e.range = [e.min, e.max], delete e.min, delete e.max), e.minlength && e.maxlength && (e.rangelength = [e.minlength, e.maxlength], delete e.minlength, delete e.maxlength)), e
        },
        normalizeRule: function(e) {
            if ("string" == typeof e) {
                var i = {};
                t.each(e.split(/\s/), function() {
                    i[this] = !0
                }), e = i
            }
            return e
        },
        addMethod: function(e, i, s) {
            t.validator.methods[e] = i, t.validator.messages[e] = void 0 !== s ? s : t.validator.messages[e], i.length < 3 && t.validator.addClassRules(e, t.validator.normalizeRule(e))
        },
        methods: {
            required: function(e, i, s) {
                if (!this.depend(s, i)) return "dependency-mismatch";
                if ("select" === i.nodeName.toLowerCase()) {
                    var r = t(i).val();
                    return r && r.length > 0
                }
                return this.checkable(i) ? this.getLength(e, i) > 0 : t.trim(e).length > 0
            },
            email: function(t, e) {
                return this.optional(e) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)
            },
            url: function(t, e) {
                return this.optional(e) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)
            },
            date: function(t, e) {
                return this.optional(e) || !/Invalid|NaN/.test(new Date(t).toString())
            },
            dateISO: function(t, e) {
                return this.optional(e) || /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)
            },
            number: function(t, e) {
                return this.optional(e) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)
            },
            digits: function(t, e) {
                return this.optional(e) || /^\d+$/.test(t)
            },
            creditcard: function(t, e) {
                if (this.optional(e)) return "dependency-mismatch";
                if (/[^0-9 \-]+/.test(t)) return !1;
                var i = 0,
                    s = 0,
                    r = !1;
                t = t.replace(/\D/g, "");
                for (var n = t.length - 1; n >= 0; n--) {
                    var a = t.charAt(n);
                    s = parseInt(a, 10), r && (s *= 2) > 9 && (s -= 9), i += s, r = !r
                }
                return i % 10 === 0
            },
            minlength: function(e, i, s) {
                var r = t.isArray(e) ? e.length : this.getLength(t.trim(e), i);
                return this.optional(i) || r >= s
            },
            maxlength: function(e, i, s) {
                var r = t.isArray(e) ? e.length : this.getLength(t.trim(e), i);
                return this.optional(i) || r <= s
            },
            rangelength: function(e, i, s) {
                var r = t.isArray(e) ? e.length : this.getLength(t.trim(e), i);
                return this.optional(i) || r >= s[0] && r <= s[1]
            },
            min: function(t, e, i) {
                return this.optional(e) || t >= i
            },
            max: function(t, e, i) {
                return this.optional(e) || t <= i
            },
            range: function(t, e, i) {
                return this.optional(e) || t >= i[0] && t <= i[1]
            },
            equalTo: function(e, i, s) {
                var r = t(s);
                return this.settings.onfocusout && r.unbind(".validate-equalTo").bind("blur.validate-equalTo", function() {
                    t(i).valid()
                }), e === r.val()
            },
            remote: function(e, i, s) {
                if (this.optional(i)) return "dependency-mismatch";
                var r = this.previousValue(i);
                if (this.settings.messages[i.name] || (this.settings.messages[i.name] = {}), r.originalMessage = this.settings.messages[i.name].remote, this.settings.messages[i.name].remote = r.message, s = "string" == typeof s && {
                        url: s
                    } || s, r.old === e) return r.valid;
                r.old = e;
                var n = this;
                this.startRequest(i);
                var a = {};
                return a[i.name] = e, t.ajax(t.extend(!0, {
                    url: s,
                    mode: "abort",
                    port: "validate" + i.name,
                    dataType: "json",
                    data: a,
                    success: function(s) {
                        n.settings.messages[i.name].remote = r.originalMessage;
                        var a = s === !0 || "true" === s;
                        if (a) {
                            var u = n.formSubmitted;
                            n.prepareElement(i), n.formSubmitted = u, n.successList.push(i), delete n.invalid[i.name], n.showErrors()
                        } else {
                            var o = {},
                                l = s || n.defaultMessage(i, "remote");
                            o[i.name] = r.message = t.isFunction(l) ? l(e) : l, n.invalid[i.name] = !0, n.showErrors(o)
                        }
                        r.valid = a, n.stopRequest(i, a)
                    }
                }, s)), "pending"
            }
        }
    }), t.format = t.validator.format
}(jQuery),
function(t) {
    var e = {};
    if (t.ajaxPrefilter) t.ajaxPrefilter(function(t, i, s) {
        var r = t.port;
        "abort" === t.mode && (e[r] && e[r].abort(), e[r] = s)
    });
    else {
        var i = t.ajax;
        t.ajax = function(s) {
            var r = ("mode" in s ? s : t.ajaxSettings).mode,
                n = ("port" in s ? s : t.ajaxSettings).port;
            return "abort" === r ? (e[n] && e[n].abort(), e[n] = i.apply(this, arguments), e[n]) : i.apply(this, arguments)
        }
    }
}(jQuery),
function(t) {
    t.extend(t.fn, {
        validateDelegate: function(e, i, s) {
            return this.bind(i, function(i) {
                var r = t(i.target);
                if (r.is(e)) return s.apply(r, arguments)
            })
        }
    })
}(jQuery);
! function(n) {
    function t(t) {
        return !t || void 0 !== t.allowPageScroll || void 0 === t.swipe && void 0 === t.swipeStatus || (t.allowPageScroll = c), void 0 !== t.click && void 0 === t.tap && (t.tap = t.click), t || (t = {}), t = n.extend({}, n.fn.swipe.defaults, t), this.each(function() {
            var r = n(this),
                i = r.data(m);
            i || (i = new e(this, t), r.data(m, i))
        })
    }

    function e(t, e) {
        function L(t) {
            if (!(an() || n(t.target).closest(e.excludedElements, Wn).length > 0)) {
                var r, i = t.originalEvent ? t.originalEvent : t,
                    u = y ? i.touches[0] : i;
                return qn = S, y ? Fn = i.touches.length : t.preventDefault(), Nn = 0, Un = null, Yn = null, Hn = 0, _n = 0, jn = 0, Qn = 1, Xn = 0, Vn = fn(), Cn = wn(), on(), !y || Fn === e.fingers || e.fingers === T || Y() ? (sn(0, u), zn = mn(), 2 == Fn && (sn(1, i.touches[1]), _n = jn = bn(Vn[0].start, Vn[1].start)), (e.swipeStatus || e.pinchStatus) && (r = I(i, qn))) : r = !1, r === !1 ? (qn = x, I(i, qn), r) : void cn(!0)
            }
        }

        function M(n) {
            var t = n.originalEvent ? n.originalEvent : n;
            if (qn !== O && qn !== x && !ln()) {
                var r, i = y ? t.touches[0] : t,
                    u = hn(i);
                if (Gn = mn(), y && (Fn = t.touches.length), qn = E, 2 == Fn && (0 == _n ? (sn(1, t.touches[1]), _n = jn = bn(Vn[0].start, Vn[1].start)) : (hn(t.touches[1]), jn = bn(Vn[0].end, Vn[1].end), Yn = En(Vn[0].end, Vn[1].end)), Qn = Sn(_n, jn), Xn = Math.abs(_n - jn)), Fn === e.fingers || e.fingers === T || !y || Y()) {
                    if (Un = yn(u.start, u.end), Q(n, Un), Nn = On(u.start, u.end), Hn = Tn(), gn(Un, Nn), (e.swipeStatus || e.pinchStatus) && (r = I(t, qn)), !e.triggerOnTouchEnd || e.triggerOnTouchLeave) {
                        var o = !0;
                        if (e.triggerOnTouchLeave) {
                            var l = Ln(this);
                            o = Mn(u.end, l)
                        }!e.triggerOnTouchEnd && o ? qn = A(E) : e.triggerOnTouchLeave && !o && (qn = A(O)), qn != x && qn != O || I(t, qn)
                    }
                } else qn = x, I(t, qn);
                r === !1 && (qn = x, I(t, qn))
            }
        }

        function D(n) {
            var t = n.originalEvent;
            return y && t.touches.length > 0 ? (un(), !0) : (ln() && (Fn = Bn), n.preventDefault(), Gn = mn(), Hn = Tn(), H() ? (qn = x, I(t, qn)) : e.triggerOnTouchEnd || 0 == e.triggerOnTouchEnd && qn === E ? (qn = O, I(t, qn)) : !e.triggerOnTouchEnd && G() ? (qn = O, N(t, qn, f)) : qn === E && (qn = x, I(t, qn)), void cn(!1))
        }

        function P() {
            Fn = 0, Gn = 0, zn = 0, _n = 0, jn = 0, Qn = 1, on(), cn(!1)
        }

        function R(n) {
            var t = n.originalEvent;
            e.triggerOnTouchLeave && (qn = A(O), I(t, qn))
        }

        function k() {
            Wn.unbind(Pn, L), Wn.unbind(In, P), Wn.unbind(Rn, M), Wn.unbind(kn, D), An && Wn.unbind(An, R), cn(!1)
        }

        function A(n) {
            var t = n,
                r = j(),
                i = U(),
                u = H();
            return !r || u ? t = x : !i || n != E || e.triggerOnTouchEnd && !e.triggerOnTouchLeave ? !i && n == O && e.triggerOnTouchLeave && (t = x) : t = O, t
        }

        function I(n, t) {
            var e = void 0;
            return F() || q() ? e = N(n, t, h) : (C() || Y()) && e !== !1 && (e = N(n, t, p)), en() && e !== !1 ? e = N(n, t, g) : rn() && e !== !1 ? e = N(n, t, d) : tn() && e !== !1 && (e = N(n, t, f)), t === x && P(n), t === O && (y ? 0 == n.touches.length && P(n) : P(n)), e
        }

        function N(t, c, s) {
            var w = void 0;
            if (s == h) {
                if (Wn.trigger("swipeStatus", [c, Un || null, Nn || 0, Hn || 0, Fn]), e.swipeStatus && (w = e.swipeStatus.call(Wn, t, c, Un || null, Nn || 0, Hn || 0, Fn), w === !1)) return !1;
                if (c == O && W()) {
                    if (Wn.trigger("swipe", [Un, Nn, Hn, Fn]), e.swipe && (w = e.swipe.call(Wn, t, Un, Nn, Hn, Fn), w === !1)) return !1;
                    switch (Un) {
                        case r:
                            Wn.trigger("swipeLeft", [Un, Nn, Hn, Fn]), e.swipeLeft && (w = e.swipeLeft.call(Wn, t, Un, Nn, Hn, Fn));
                            break;
                        case i:
                            Wn.trigger("swipeRight", [Un, Nn, Hn, Fn]), e.swipeRight && (w = e.swipeRight.call(Wn, t, Un, Nn, Hn, Fn));
                            break;
                        case u:
                            Wn.trigger("swipeUp", [Un, Nn, Hn, Fn]), e.swipeUp && (w = e.swipeUp.call(Wn, t, Un, Nn, Hn, Fn));
                            break;
                        case o:
                            Wn.trigger("swipeDown", [Un, Nn, Hn, Fn]), e.swipeDown && (w = e.swipeDown.call(Wn, t, Un, Nn, Hn, Fn))
                    }
                }
            }
            if (s == p) {
                if (Wn.trigger("pinchStatus", [c, Yn || null, Xn || 0, Hn || 0, Fn, Qn]), e.pinchStatus && (w = e.pinchStatus.call(Wn, t, c, Yn || null, Xn || 0, Hn || 0, Fn, Qn), w === !1)) return !1;
                if (c == O && X()) switch (Yn) {
                    case l:
                        Wn.trigger("pinchIn", [Yn || null, Xn || 0, Hn || 0, Fn, Qn]), e.pinchIn && (w = e.pinchIn.call(Wn, t, Yn || null, Xn || 0, Hn || 0, Fn, Qn));
                        break;
                    case a:
                        Wn.trigger("pinchOut", [Yn || null, Xn || 0, Hn || 0, Fn, Qn]), e.pinchOut && (w = e.pinchOut.call(Wn, t, Yn || null, Xn || 0, Hn || 0, Fn, Qn))
                }
            }
            return s == f ? c !== x && c !== O || (clearTimeout(Kn), Z() && !K() ? (Jn = mn(), Kn = setTimeout(n.proxy(function() {
                Jn = null, Wn.trigger("tap", [t.target]), e.tap && (w = e.tap.call(Wn, t, t.target))
            }, this), e.doubleTapThreshold)) : (Jn = null, Wn.trigger("tap", [t.target]), e.tap && (w = e.tap.call(Wn, t, t.target)))) : s == g ? c !== x && c !== O || (clearTimeout(Kn), Jn = null, Wn.trigger("doubletap", [t.target]), e.doubleTap && (w = e.doubleTap.call(Wn, t, t.target))) : s == d && (c !== x && c !== O || (clearTimeout(Kn), Jn = null, Wn.trigger("longtap", [t.target]), e.longTap && (w = e.longTap.call(Wn, t, t.target)))), w
        }

        function U() {
            var n = !0;
            return null !== e.threshold && (n = Nn >= e.threshold), n
        }

        function H() {
            var n = !1;
            return null !== e.cancelThreshold && null !== Un && (n = dn(Un) - Nn >= e.cancelThreshold), n
        }

        function _() {
            return null === e.pinchThreshold || Xn >= e.pinchThreshold
        }

        function j() {
            var n;
            return n = !e.maxTimeThreshold || !(Hn >= e.maxTimeThreshold)
        }

        function Q(n, t) {
            if (e.allowPageScroll === c || Y()) n.preventDefault();
            else {
                var l = e.allowPageScroll === s;
                switch (t) {
                    case r:
                        (e.swipeLeft && l || !l && e.allowPageScroll != w) && n.preventDefault();
                        break;
                    case i:
                        (e.swipeRight && l || !l && e.allowPageScroll != w) && n.preventDefault();
                        break;
                    case u:
                        (e.swipeUp && l || !l && e.allowPageScroll != v) && n.preventDefault();
                        break;
                    case o:
                        (e.swipeDown && l || !l && e.allowPageScroll != v) && n.preventDefault()
                }
            }
        }

        function X() {
            var n = V(),
                t = z(),
                e = _();
            return n && t && e
        }

        function Y() {
            return !!(e.pinchStatus || e.pinchIn || e.pinchOut)
        }

        function C() {
            return !(!X() || !Y())
        }

        function W() {
            var n = j(),
                t = U(),
                e = V(),
                r = z(),
                i = H(),
                u = !i && r && e && t && n;
            return u
        }

        function q() {
            return !!(e.swipe || e.swipeStatus || e.swipeLeft || e.swipeRight || e.swipeUp || e.swipeDown)
        }

        function F() {
            return !(!W() || !q())
        }

        function V() {
            return Fn === e.fingers || e.fingers === T || !y
        }

        function z() {
            return 0 !== Vn[0].end.x
        }

        function G() {
            return !!e.tap
        }

        function Z() {
            return !!e.doubleTap
        }

        function B() {
            return !!e.longTap
        }

        function J() {
            if (null == Jn) return !1;
            var n = mn();
            return Z() && n - Jn <= e.doubleTapThreshold
        }

        function K() {
            return J()
        }

        function $() {
            return (1 === Fn || !y) && (isNaN(Nn) || 0 === Nn)
        }

        function nn() {
            return Hn > e.longTapThreshold && Nn < b
        }

        function tn() {
            return !(!$() || !G())
        }

        function en() {
            return !(!J() || !Z())
        }

        function rn() {
            return !(!nn() || !B())
        }

        function un() {
            Zn = mn(), Bn = event.touches.length + 1
        }

        function on() {
            Zn = 0, Bn = 0
        }

        function ln() {
            var n = !1;
            if (Zn) {
                var t = mn() - Zn;
                t <= e.fingerReleaseThreshold && (n = !0)
            }
            return n
        }

        function an() {
            return !(Wn.data(m + "_intouch") !== !0)
        }

        function cn(n) {
            n === !0 ? (Wn.bind(Rn, M), Wn.bind(kn, D), An && Wn.bind(An, R)) : (Wn.unbind(Rn, M, !1), Wn.unbind(kn, D, !1), An && Wn.unbind(An, R, !1)), Wn.data(m + "_intouch", n === !0)
        }

        function sn(n, t) {
            var e = void 0 !== t.identifier ? t.identifier : 0;
            return Vn[n].identifier = e, Vn[n].start.x = Vn[n].end.x = t.pageX || t.clientX, Vn[n].start.y = Vn[n].end.y = t.pageY || t.clientY, Vn[n]
        }

        function hn(n) {
            var t = void 0 !== n.identifier ? n.identifier : 0,
                e = pn(t);
            return e.end.x = n.pageX || n.clientX, e.end.y = n.pageY || n.clientY, e
        }

        function pn(n) {
            for (var t = 0; t < Vn.length; t++)
                if (Vn[t].identifier == n) return Vn[t]
        }

        function fn() {
            for (var n = [], t = 0; t <= 5; t++) n.push({
                start: {
                    x: 0,
                    y: 0
                },
                end: {
                    x: 0,
                    y: 0
                },
                identifier: 0
            });
            return n
        }

        function gn(n, t) {
            t = Math.max(t, dn(n)), Cn[n].distance = t
        }

        function dn(n) {
            return Cn[n].distance
        }

        function wn() {
            var n = {};
            return n[r] = vn(r), n[i] = vn(i), n[u] = vn(u), n[o] = vn(o), n
        }

        function vn(n) {
            return {
                direction: n,
                distance: 0
            }
        }

        function Tn() {
            return Gn - zn
        }

        function bn(n, t) {
            var e = Math.abs(n.x - t.x),
                r = Math.abs(n.y - t.y);
            return Math.round(Math.sqrt(e * e + r * r))
        }

        function Sn(n, t) {
            var e = t / n * 1;
            return e.toFixed(2)
        }

        function En() {
            return Qn < 1 ? a : l
        }

        function On(n, t) {
            return Math.round(Math.sqrt(Math.pow(t.x - n.x, 2) + Math.pow(t.y - n.y, 2)))
        }

        function xn(n, t) {
            var e = n.x - t.x,
                r = t.y - n.y,
                i = Math.atan2(r, e),
                u = Math.round(180 * i / Math.PI);
            return u < 0 && (u = 360 - Math.abs(u)), u
        }

        function yn(n, t) {
            var e = xn(n, t);
            return e <= 45 && e >= 0 ? r : e <= 360 && e >= 315 ? r : e >= 135 && e <= 225 ? i : e > 45 && e < 135 ? o : u
        }

        function mn() {
            var n = new Date;
            return n.getTime()
        }

        function Ln(t) {
            t = n(t);
            var e = t.offset(),
                r = {
                    left: e.left,
                    right: e.left + t.outerWidth(),
                    top: e.top,
                    bottom: e.top + t.outerHeight()
                };
            return r
        }

        function Mn(n, t) {
            return n.x > t.left && n.x < t.right && n.y > t.top && n.y < t.bottom
        }
        var Dn = y || !e.fallbackToMouseEvents,
            Pn = Dn ? "touchstart" : "mousedown",
            Rn = Dn ? "touchmove" : "mousemove",
            kn = Dn ? "touchend" : "mouseup",
            An = Dn ? null : "mouseleave",
            In = "touchcancel",
            Nn = 0,
            Un = null,
            Hn = 0,
            _n = 0,
            jn = 0,
            Qn = 1,
            Xn = 0,
            Yn = 0,
            Cn = null,
            Wn = n(t),
            qn = "start",
            Fn = 0,
            Vn = null,
            zn = 0,
            Gn = 0,
            Zn = 0,
            Bn = 0,
            Jn = 0,
            Kn = null;
        try {
            Wn.bind(Pn, L), Wn.bind(In, P)
        } catch (t) {
            n.error("events not supported " + Pn + "," + In + " on jQuery.swipe")
        }
        this.enable = function() {
            return Wn.bind(Pn, L), Wn.bind(In, P), Wn
        }, this.disable = function() {
            return k(), Wn
        }, this.destroy = function() {
            return k(), Wn.data(m, null), Wn
        }, this.option = function(t, r) {
            if (void 0 !== e[t]) {
                if (void 0 === r) return e[t];
                e[t] = r
            } else n.error("Option " + t + " does not exist on jQuery.swipe.options")
        }
    }
    var r = "left",
        i = "right",
        u = "up",
        o = "down",
        l = "in",
        a = "out",
        c = "none",
        s = "auto",
        h = "swipe",
        p = "pinch",
        f = "tap",
        g = "doubletap",
        d = "longtap",
        w = "horizontal",
        v = "vertical",
        T = "all",
        b = 10,
        S = "start",
        E = "move",
        O = "end",
        x = "cancel",
        y = "ontouchstart" in window,
        m = "TouchSwipe",
        L = {
            fingers: 1,
            threshold: 75,
            cancelThreshold: null,
            pinchThreshold: 20,
            maxTimeThreshold: null,
            fingerReleaseThreshold: 250,
            longTapThreshold: 500,
            doubleTapThreshold: 200,
            swipe: null,
            swipeLeft: null,
            swipeRight: null,
            swipeUp: null,
            swipeDown: null,
            swipeStatus: null,
            pinchIn: null,
            pinchOut: null,
            pinchStatus: null,
            click: null,
            tap: null,
            doubleTap: null,
            longTap: null,
            triggerOnTouchEnd: !0,
            triggerOnTouchLeave: !1,
            allowPageScroll: "auto",
            fallbackToMouseEvents: !0,
            excludedElements: "button, input, select, textarea, a, .noSwipe"
        };
    n.fn.swipe = function(e) {
        var r = n(this),
            i = r.data(m);
        if (i && "string" == typeof e) {
            if (i[e]) return i[e].apply(this, Array.prototype.slice.call(arguments, 1));
            n.error("Method " + e + " does not exist on jQuery.swipe")
        } else if (!(i || "object" != typeof e && e)) return t.apply(this, arguments);
        return r
    }, n.fn.swipe.defaults = L, n.fn.swipe.phases = {
        PHASE_START: S,
        PHASE_MOVE: E,
        PHASE_END: O,
        PHASE_CANCEL: x
    }, n.fn.swipe.directions = {
        LEFT: r,
        RIGHT: i,
        UP: u,
        DOWN: o,
        IN: l,
        OUT: a
    }, n.fn.swipe.pageScroll = {
        NONE: c,
        HORIZONTAL: w,
        VERTICAL: v,
        AUTO: s
    }, n.fn.swipe.fingers = {
        ONE: 1,
        TWO: 2,
        THREE: 3,
        ALL: T
    }
}(jQuery);
! function(e) {
    function t() {
        window.console && console.log && console.log("[cycle2] " + Array.prototype.join.call(arguments, " "))
    }

    function i(e) {
        return (e || "").toLowerCase()
    }
    var n = "20121125.2";
    e.fn.cycle = function(n) {
        var s;
        return 0 !== this.length || e.isReady ? this.each(function() {
            var s, c, o, l, r = e(this);
            if (!r.data("cycle.opts")) {
                (r.data("cycle-log") === !1 || n && n.log === !1 || c && c.log === !1) && (t = e.noop), t("--c2 init--"), s = r.data();
                for (var a in s) s.hasOwnProperty(a) && /^cycle[A-Z]+/.test(a) && (l = s[a], o = a.match(/^cycle(.*)/)[1].replace(/^[A-Z]/, i), t(o + ":", l, "(" + typeof l + ")"), s[o] = l);
                c = e.extend({}, e.fn.cycle.defaults, s, n || {}), c.timeoutId = 0, c.paused = 0, c.container = r, c._maxZ = c.maxZ, c.API = e.extend({
                    _container: r
                }, e.fn.cycle.API), c.API.log = t, c.API.trigger = function(e, t) {
                    return c.container.trigger(e, t), c.API
                }, r.data("cycle.opts", c), r.data("cycle.API", c.API), c.API.trigger("cycle-bootstrap", [c, c.API]), c.API.addInitialSlides(), c.API.preInitSlideshow(), c.slides.length && c.API.initSlideshow()
            }
        }) : (s = {
            s: this.selector,
            c: this.context
        }, t("requeuing slideshow (dom not ready)"), e(function() {
            e(s.s, s.c).cycle(n)
        }), this)
    }, e.fn.cycle.API = {
        opts: function() {
            return this._container.data("cycle.opts")
        },
        addInitialSlides: function() {
            var t = this.opts(),
                i = t.slides;
            t.slideCount = 0, t.slides = e(), i = i.jquery ? i : t.container.find(i), t.random && i.sort(function() {
                return Math.random() - .5
            }), t.API.add(i)
        },
        preInitSlideshow: function() {
            var t = this.opts();
            t.API.trigger("cycle-pre-initialize", [t]);
            var i = e.fn.cycle.transitions[t.fx];
            i && e.isFunction(i.preInit) && i.preInit(t), t._preInitialized = !0
        },
        postInitSlideshow: function() {
            var t = this.opts();
            t.API.trigger("cycle-post-initialize", [t]);
            var i = e.fn.cycle.transitions[t.fx];
            i && e.isFunction(i.postInit) && i.postInit(t)
        },
        initSlideshow: function() {
            var t = this.opts(),
                i = t.container;
            t.API.calcFirstSlide(), "static" == t.container.css("position") && t.container.css("position", "relative"), e(t.slides[t.currSlide]).css("opacity", 1).show(), t.API.stackSlides(t.slides[t.currSlide], t.slides[t.nextSlide], !t.reverse), t.pauseOnHover && (t.pauseOnHover !== !0 && (i = e(t.pauseOnHover)), i.hover(function() {
                t.paused = 1, t.API.trigger("cycle-paused", [t])
            }, function() {
                t.paused = 0, t.API.trigger("cycle-resumed", [t])
            })), t.timeout && (t.timeoutId = setTimeout(function() {
                t.API.prepareTx(!1, !t.reverse)
            }, t.timeout + t.delay)), t._initialized = !0, t.API.updateView(!0), t.container.on("cycle-paused cycle-resumed", function(e) {
                t.container["cycle-paused" === e.type ? "addClass" : "removeClass"]("cycle-paused")
            }), t.API.trigger("cycle-initialized", [t]), t.API.postInitSlideshow()
        },
        add: function(t, i) {
            var n, s = this.opts(),
                c = s.slideCount,
                o = !1;
            e(t).each(function(t) {
                var n, c = e(this);
                i ? s.container.prepend(c) : s.container.append(c), s.slideCount++, n = s.API.buildSlideOpts(c), i ? s.slides = e(c).add(s.slides) : s.slides = s.slides.add(c), s.API.initSlide(n, c, --s._maxZ), c.data("cycle.opts", n), s.API.trigger("cycle-slide-added", [s, n, c])
            }), s.API.updateView(!0), o = s._preInitialized && c < 2 && s.slideCount >= 1, o && (s._initialized ? s.timeout && (n = s.slides.length, s.nextSlide = s.reverse ? n - 1 : 1) : s.API.initSlideshow())
        },
        calcFirstSlide: function() {
            var e, t = this.opts();
            e = parseInt(t.startingSlide || 0, 10), (e >= t.slides.length || e < 0) && (e = 0), t.currSlide = e, t.reverse ? (t.nextSlide = e - 1, t.nextSlide < 0 && (t.nextSlide = t.slides.length - 1)) : (t.nextSlide = e + 1, t.nextSlide == t.slides.length && (t.nextSlide = 0))
        },
        calcNextSlide: function() {
            var e, t = this.opts();
            t.reverse ? (e = t.nextSlide - 1 < 0, t.nextSlide = e ? t.slideCount - 1 : t.nextSlide - 1, t.currSlide = e ? 0 : t.nextSlide + 1) : (e = t.nextSlide + 1 == t.slides.length, t.nextSlide = e ? 0 : t.nextSlide + 1, t.currSlide = e ? t.slides.length - 1 : t.nextSlide - 1)
        },
        calcTx: function(i, n) {
            var s, c = i;
            return n && c.manualFx && (s = e.fn.cycle.transitions[c.manualFx]), s || (s = e.fn.cycle.transitions[c.fx]), s || (s = e.fn.cycle.transitions.fade, t('Transition "' + c.fx + '" not found.  Using fade.')), s
        },
        prepareTx: function(e, t) {
            var i, n, s, c, o, l = this.opts();
            return l.slideCount < 2 ? void(l.timeoutId = 0) : (e && (l.API.stopTransition(), l.busy = !1, clearTimeout(l.timeoutId), l.timeoutId = 0), void(l.busy || (0 !== l.timeoutId || e) && (n = l.slides[l.currSlide], s = l.slides[l.nextSlide], c = l.API.getSlideOpts(l.nextSlide), o = l.API.calcTx(c, e), l._tx = o, e && void 0 !== c.manualSpeed && (c.speed = c.manualSpeed), l.nextSlide != l.currSlide && (e || !l.paused && l.timeout) ? (l.API.trigger("cycle-before", [c, n, s, t]), o.before && o.before(c, n, s, t), i = function() {
                l.busy = !1, o.after && o.after(c, n, s, t), l.API.trigger("cycle-after", [c, n, s, t]), l.API.queueTransition(c), l.API.updateView(!0)
            }, l.busy = !0, o.transition ? o.transition(c, n, s, t, i) : l.API.doTransition(c, n, s, t, i), l.API.calcNextSlide(), l.updateView < 0 && l.API.updateView()) : l.API.queueTransition(c))))
        },
        doTransition: function(t, i, n, s, c) {
            var o = t,
                l = e(i),
                r = e(n),
                a = function() {
                    r.animate(o.animIn || {
                        opacity: 1
                    }, o.speed, o.easeIn || o.easing, c)
                };
            r.css(o.cssBefore || {}), l.animate(o.animOut || {}, o.speed, o.easeOut || o.easing, function() {
                l.css(o.cssAfter || {}), o.sync || a()
            }), o.sync && a()
        },
        queueTransition: function(e) {
            var t = this.opts();
            return 0 === t.nextSlide && 0 === --t.loop ? (t.API.log("terminating; loop=0"), t.timeout = 0, t.API.trigger("cycle-finished", [t]), t.nextSlide = t.currSlide, void 0) : void(e.timeout && (t.timeoutId = setTimeout(function() {
                t.API.prepareTx(!1, !t.reverse)
            }, e.timeout)))
        },
        stopTransition: function() {
            var e = this.opts();
            e.slides.filter(":animated").length && (e.slides.stop(!1, !0), e.API.trigger("cycle-transition-stopped", [e])), e._tx && e._tx.stopTransition && e._tx.stopTransition(e)
        },
        advanceSlide: function(e) {
            var t = this.opts();
            return clearTimeout(t.timeoutId), t.timeoutId = 0, t.nextSlide = t.currSlide + e, t.nextSlide < 0 ? t.nextSlide = t.slides.length - 1 : t.nextSlide >= t.slides.length && (t.nextSlide = 0), t.API.prepareTx(!0, e >= 0), !1
        },
        buildSlideOpts: function(n) {
            var s, c, o = this.opts(),
                l = n.data() || {};
            for (var r in l) l.hasOwnProperty(r) && /^cycle[A-Z]+/.test(r) && (s = l[r], c = r.match(/^cycle(.*)/)[1].replace(/^[A-Z]/, i), t("[" + (o.slideCount - 1) + "]", c + ":", s, "(" + typeof s + ")"), l[c] = s);
            l = e.extend({}, e.fn.cycle.defaults, o, l), l.slideNum = o.slideCount;
            try {
                delete l.API, delete l.slideCount, delete l.currSlide, delete l.nextSlide, delete l.slides
            } catch (e) {}
            return l
        },
        getSlideOpts: function(t) {
            var i = this.opts();
            void 0 === t && (t = i.currSlide);
            var n = i.slides[t],
                s = e(n).data("cycle.opts");
            return e.extend({}, i, s)
        },
        initSlide: function(t, i, n) {
            var s = this.opts();
            i.css(t.slideCss || {}), n > 0 && i.css("zIndex", n), isNaN(t.speed) && (t.speed = e.fx.speeds[t.speed] || e.fx.speeds._default), t.sync || (t.speed = t.speed / 2), i.addClass(s.slideClass)
        },
        updateView: function(e) {
            var t = this.opts();
            if (t._initialized) {
                var i = t.API.getSlideOpts(),
                    n = t.slides[t.currSlide];
                t.slideActiveClass && t.slides.removeClass(t.slideActiveClass).eq(t.currSlide).addClass(t.slideActiveClass), e && t.hideNonActive && t.slides.filter(":not(." + t.slideActiveClass + ")").hide(), t.API.trigger("cycle-update-view", [t, i, n])
            }
        },
        getComponent: function(t) {
            var i = this.opts(),
                n = i[t];
            return "string" == typeof n ? /^\s*\>/.test(n) ? i.container.find(n) : e(n) : n.jquery ? n : e(n)
        },
        stackSlides: function(t, i, n) {
            var s = this.opts();
            t || (t = s.slides[s.currSlide], i = s.slides[s.nextSlide], n = !s.reverse), e(t).css("zIndex", s.maxZ);
            var c, o = s.maxZ - 2,
                l = s.slideCount;
            if (n) {
                for (c = s.currSlide + 1; c < l; c++) e(s.slides[c]).css("zIndex", o--);
                for (c = 0; c < s.currSlide; c++) e(s.slides[c]).css("zIndex", o--)
            } else {
                for (c = s.currSlide - 1; c >= 0; c--) e(s.slides[c]).css("zIndex", o--);
                for (c = l - 1; c > s.currSlide; c--) e(s.slides[c]).css("zIndex", o--)
            }
            e(i).css("zIndex", s.maxZ - 1)
        },
        getSlideIndex: function(e) {
            return this.opts().slides.index(e)
        }
    }, e.fn.cycle.log = t, e.fn.cycle.version = function() {
        return "Cycle2: " + n
    }, e.fn.cycle.transitions = {
        custom: {},
        none: {
            before: function(e, t, i, n) {
                e.API.stackSlides(i, t, n), e.cssBefore = {
                    opacity: 1,
                    display: "block"
                }
            }
        },
        fade: {
            before: function(t, i, n, s) {
                var c = t.API.getSlideOpts(t.nextSlide).slideCss || {};
                t.API.stackSlides(i, n, s), t.cssBefore = e.extend(c, {
                    opacity: 0,
                    display: "block"
                }), t.animIn = {
                    opacity: 1
                }, t.animOut = {
                    opacity: 0
                }
            }
        },
        fadeout: {
            before: function(t, i, n, s) {
                var c = t.API.getSlideOpts(t.nextSlide).slideCss || {};
                t.API.stackSlides(i, n, s), t.cssBefore = e.extend(c, {
                    opacity: 1,
                    display: "block"
                }), t.animOut = {
                    opacity: 0
                }
            }
        },
        scrollHorz: {
            before: function(e, t, i, n) {
                e.API.stackSlides(t, i, n);
                var s = e.container.css("overflow", "hidden").width();
                e.cssBefore = {
                    left: n ? s : -s,
                    top: 0,
                    opacity: 1,
                    display: "block"
                }, e.cssAfter = {
                    zIndex: e._maxZ - 2
                }, e.animIn = {
                    left: 0
                }, e.animOut = {
                    left: n ? -s : s
                }
            }
        }
    }, e.fn.cycle.defaults = {
        allowWrap: !0,
        autoSelector: ".cycle-slideshow[data-cycle-auto-init!=false]",
        delay: 0,
        easing: null,
        fx: "fade",
        hideNonActive: !0,
        loop: 0,
        manualFx: void 0,
        manualSpeed: void 0,
        maxZ: 100,
        pauseOnHover: !1,
        reverse: !1,
        slideActiveClass: "cycle-slide-active",
        slideClass: "cycle-slide",
        slideCss: {
            position: "absolute",
            top: 0,
            left: 0
        },
        slides: "> img",
        speed: 500,
        startingSlide: 0,
        sync: !0,
        timeout: 4e3,
        updateView: -1
    }, e(document).ready(function() {
        e(e.fn.cycle.defaults.autoSelector).cycle()
    })
}(jQuery),
function(e) {
    e.extend(e.fn.cycle.defaults, {
        autoHeight: 0
    }), e(document).on("cycle-initialized", function(t, i) {
        function n() {
            i.container.height(i.container.width() / c)
        }
        var s, c, o = i.autoHeight,
            l = -1;
        "calc" === o || "number" == e.type(o) && o >= 0 ? ("calc" === o ? i.slides.each(function(t) {
            var i = e(this).height();
            i > l && (l = i, o = t)
        }) : o >= i.slides.length && (o = 0), s = e(i.slides[o]).clone(), s.removeAttr("id").find("[id]").removeAttr("id"), s.removeAttr("name").find("[name]").removeAttr("name"), s.css({
            position: "static",
            visibility: "hidden",
            display: "block"
        }).prependTo(i.container).removeClass().addClass("cycle-sentinel cycle-slide"), i._sentinel = s) : "string" == e.type(o) && /\d+\:\d+/.test(o) && (c = o.match(/(\d+)\:(\d+)/), c = c[1] / c[2], e(window).on("resize", n), i._autoHeightOnResize = n, setTimeout(function() {
            e(window).triggerHandler("resize")
        }, 15))
    }), e(document).on("cycle-destroyed", function(t, i) {
        i._sentinel && i._sentinel.remove(), i._autoHeightOnResize && e(window).off("resize", i._autoHeightOnResize)
    })
}(jQuery),
function(e) {
    e.extend(e.fn.cycle.defaults, {
        caption: "> .cycle-caption",
        captionTemplate: "{{slideNum}} / {{slideCount}}",
        overlay: "> .cycle-overlay",
        overlayTemplate: "<div>{{title}}</div><div>{{desc}}</div>"
    }), e(document).on("cycle-update-view", function(t, i, n, s) {
        e.each(["caption", "overlay"], function() {
            var e = this,
                t = n[e + "Template"],
                c = i.API.getComponent(e);
            c.length && t ? (c.html(i.API.tmpl(t, n, i, s)), c.show()) : c.hide()
        })
    }), e(document).on("cycle-destroyed", function(t, i) {
        var n;
        e.each(["caption", "overlay"], function() {
            var e = this,
                t = i[e + "Template"];
            i[e] && t && (n = i.API.getComponent("caption"), n.empty())
        })
    })
}(jQuery),
function(e) {
    "use strict";
    var t = e.fn.cycle;
    e.fn.cycle = function(i) {
        var n, s, c, o = e.makeArray(arguments);
        return "number" == e.type(i) ? this.cycle("goto", i) : "string" == e.type(i) ? this.each(function() {
            var l;
            return n = i, c = e(this).data("cycle.opts"), void 0 === c ? void t.log('slideshow must be initialized before sending commands; "' + n + '" ignored') : (n = "goto" == n ? "jump" : n, s = c.API[n], e.isFunction(s) ? (l = e.makeArray(o), l.shift(), s.apply(c.API, l)) : void t.log("unknown command: ", n))
        }) : t.apply(this, arguments)
    }, e.extend(e.fn.cycle, t), e.extend(t.API, {
        next: function() {
            var e = this.opts(),
                t = e.reverse ? -1 : 1;
            e.allowWrap === !1 && e.currSlide + t >= e.slideCount || (e.API.advanceSlide(t), e.API.trigger("cycle-next", [e]).log("cycle-next"))
        },
        prev: function() {
            var e = this.opts(),
                t = e.reverse ? 1 : -1;
            e.allowWrap === !1 && e.currSlide + t < 0 || (e.API.advanceSlide(t), e.API.trigger("cycle-prev", [e]).log("cycle-prev"))
        },
        destroy: function() {
            var e = this.opts();
            clearTimeout(e.timeoutId), e.timeoutId = 0, e.API.stop(), e.API.trigger("cycle-destroyed", [e]).log("cycle-destroyed"), e.container.removeData("cycle.opts")
        },
        jump: function(e) {
            var t, i = this.opts(),
                n = parseInt(e, 10);
            return isNaN(n) || n < 0 || n >= i.slides.length ? void i.API.log("goto: invalid slide index: " + n) : n == i.currSlide ? void i.API.log("goto: skipping, already on slide", n) : (i.nextSlide = n, clearTimeout(i.timeoutId), i.timeoutId = 0, i.API.log("goto: ", n, " (zero-index)"), t = i.currSlide < i.nextSlide, i.API.prepareTx(!0, t), void 0)
        },
        stop: function() {
            var t = this.opts(),
                i = t.container;
            clearTimeout(t.timeoutId), t.timeoutId = 0, t.API.stopTransition(), t.pauseOnHover && (t.pauseOnHover !== !0 && (i = e(t.pauseOnHover)), i.off("mouseenter mouseleave")), t.API.trigger("cycle-stopped", [t]).log("cycle-stopped")
        },
        pause: function() {
            var e = this.opts();
            e.paused = !0, e.API.trigger("cycle-paused", [e]).log("cycle-paused")
        },
        resume: function() {
            var e = this.opts();
            e.paused = !1, e.API.trigger("cycle-resumed", [e]).log("cycle-resumed")
        },
        reinit: function() {
            var e = this.opts();
            e.API.destroy(), e.container.cycle()
        },
        remove: function(t) {
            for (var i, n, s = this.opts(), c = [], o = 1, l = 0; l < s.slides.length; l++) i = s.slides[l], l == t ? n = i : (c.push(i), e(i).data("cycle.opts").slideNum = o, o++);
            n && (s.slides = e(c), s.slideCount--, e(n).remove(), t == s.currSlide && s.API.advanceSlide(1), s.API.trigger("cycle-slide-removed", [s, t, n]).log("cycle-slide-removed"), s.API.updateView())
        }
    }), e(document).on("click.cycle", "[data-cycle-cmd]", function(t) {
        t.preventDefault();
        var i = e(this),
            n = i.data("cycle-cmd"),
            s = i.data("cycle-context") || ".cycle-slideshow";
        e(s).cycle(n, i.data("cycle-arg"))
    })
}(jQuery),
function(e) {
    function t(t, i) {
        var n;
        return t._hashFence ? void(t._hashFence = !1) : (n = window.location.hash.substring(1), void t.slides.each(function(s) {
            if (e(this).data("cycle-hash") == n) return i === !0 ? t.startingSlide = s : (t.nextSlide = s, t.API.prepareTx(!0, !1)), !1
        }))
    }
    e(document).on("cycle-pre-initialize", function(i, n) {
        t(n, !0), n._onHashChange = function() {
            t(n, !1)
        }, e(window).on("hashchange", n._onHashChange)
    }), e(document).on("cycle-update-view", function(e, t, i) {
        i.hash && (t._hashFence = !0, window.location.hash = i.hash)
    }), e(document).on("cycle-destroyed", function(t, i) {
        i._onHashChange && e(window).off("hashchange", i._onHashChange)
    })
}(jQuery),
function(e) {
    e.extend(e.fn.cycle.defaults, {
        loader: !1
    }), e(document).on("cycle-bootstrap", function(t, i) {
        function n(t, n) {
            function c(t) {
                var c;
                "wait" == i.loader ? (o.push(t), 0 === l && (s.apply(i.API, [o, n]), i.container.removeClass("cycle-loading"))) : (c = e(i.slides[i.currSlide]), s.apply(i.API, [t, n]), c.show(), i.container.removeClass("cycle-loading"))
            }
            var o = [];
            t = e(t);
            var l = t.length;
            t.hide().each(function() {
                function t() {
                    0 === --r && (--l, c(a))
                }
                var r = 0,
                    a = e(this),
                    d = a.is("img") ? a : a.find("img");
                return d = d.filter(":not(.cycle-loader-ignore)"), d.length ? (r = d.length, void d.each(function() {
                    this.complete ? t() : e(this).load(function() {
                        t()
                    }).error(function() {
                        0 === --r && (i.API.log("slide skipped; img not loaded:", this.src), 0 === --l && "wait" == i.loader && s.apply(i.API, [o, n]))
                    })
                })) : (--l, void o.push(a))
            }), l && i.container.addClass("cycle-loading")
        }
        var s;
        i.loader && (s = i.API.add, i.API.add = n)
    })
}(jQuery),
function(e) {
    function t(t, i, n) {
        var s, c = t.API.getComponent("pager");
        c.each(function() {
            var c = e(this);
            if (i.pagerTemplate) {
                var o = t.API.tmpl(i.pagerTemplate, i, t, n[0]);
                s = e(o).appendTo(c)
            } else s = c.children().eq(t.slideCount - 1);
            s.on(t.pagerEvent, function(e) {
                e.preventDefault(), t.API.page(c, e.currentTarget)
            })
        })
    }

    function i(e, t) {
        var i = this.opts(),
            n = e.children().index(t),
            s = n,
            c = i.currSlide < s;
        i.currSlide != s && (i.nextSlide = s, i.API.prepareTx(!0, c), i.API.trigger("cycle-pager-activated", [i, e, t]))
    }
    e.extend(e.fn.cycle.defaults, {
        pager: "> .cycle-pager",
        pagerActiveClass: "cycle-pager-active",
        pagerEvent: "click.cycle",
        pagerTemplate: "<span>&bull;</span>"
    }), e(document).on("cycle-bootstrap", function(e, i, n) {
        n.buildPagerLink = t
    }), e(document).on("cycle-slide-added", function(e, t, n, s) {
        t.pager && (t.API.buildPagerLink(t, n, s), t.API.page = i)
    }), e(document).on("cycle-slide-removed", function(t, i, n, s) {
        if (i.pager) {
            var c = i.API.getComponent("pager");
            c.each(function() {
                var t = e(this);
                e(t.children()[n]).remove()
            })
        }
    }), e(document).on("cycle-update-view", function(t, i, n) {
        var s;
        i.pager && (s = i.API.getComponent("pager"), s.each(function() {
            e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)
        }))
    }), e(document).on("cycle-destroyed", function(e, t) {
        var i;
        t.pager && t.pagerTemplate && (i = t.API.getComponent("pager"), i.empty())
    })
}(jQuery),
function(e) {
    e.extend(e.fn.cycle.defaults, {
        next: "> .cycle-next",
        nextEvent: "click.cycle",
        disabledClass: "disabled",
        prev: "> .cycle-prev",
        prevEvent: "click.cycle",
        swipe: !1
    }), e(document).on("cycle-initialized", function(e, t) {
        if (t.API.getComponent("next").off(t.nextEvent).on(t.nextEvent, function(e) {
                e.preventDefault(), t.API.next()
            }), t.API.getComponent("prev").off(t.prevEvent).on(t.prevEvent, function(e) {
                e.preventDefault(), t.API.prev()
            }), t.swipe) {
            var i = t.swipeVert ? "swipeUp.cycle" : "swipeLeft.cycle swipeleft.cycle",
                n = t.swipeVert ? "swipeDown.cycle" : "swipeRight.cycle swiperight.cycle";
            t.container.on(i, function(e) {
                t.API.next()
            }), t.container.on(n, function() {
                t.API.prev()
            })
        }
    }), e(document).on("cycle-update-view", function(e, t, i, n) {
        if (!t.allowWrap) {
            var s = t.disabledClass,
                c = t.API.getComponent("next"),
                o = t.API.getComponent("prev"),
                l = t._prevBoundry || 0,
                r = t._nextBoundry || t.slideCount - 1;
            t.currSlide == r ? c.addClass(s).prop("disabled", !0) : c.removeClass(s).prop("disabled", !1), t.currSlide === l ? o.addClass(s).prop("disabled", !0) : o.removeClass(s).prop("disabled", !1)
        }
    }), e(document).on("cycle-destroyed", function(t, i) {
        e(i.next).off(i.nextEvent), e(i.prev).off(i.prevEvent), i.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")
    })
}(jQuery),
function(e) {
    e.extend(e.fn.cycle.defaults, {
        progressive: !1
    }), e(document).on("cycle-pre-initialize", function(t, i) {
        if (i.progressive) {
            var n, s = i.API,
                c = s.next,
                o = s.prev,
                l = s.prepareTx,
                r = e.type(i.progressive);
            if ("array" == r) n = i.progressive;
            else if (e.isFunction(i.progressive)) n = i.progressive(i);
            else if ("string" == r) {
                if (n = e(i.progressive).html(), !e.trim(n)) return;
                try {
                    n = e.parseJSON(n)
                } catch (e) {
                    return void s.log("error parsing progressive slides", e)
                }
            }
            l && (s.prepareTx = function(e, t) {
                var s, c;
                return e || 0 === n.length ? void l.apply(i.API, [e, t]) : void(t && i.currSlide == i.slideCount - 1 ? (c = n[0], n = n.slice(1), i.container.one("cycle-slide-added", function(e, t) {
                    t.API.advanceSlide(1)
                }), i.API.add(c)) : t || 0 !== i.currSlide ? l.apply(i.API, [e, t]) : (s = n.length - 1, c = n[s], n = n.slice(0, s), i.container.one("cycle-slide-added", function(e, t) {
                    t.currSlide = 1, t.API.advanceSlide(-1)
                }), i.API.add(c, !0)))
            }), c && (s.next = function() {
                var e = this.opts();
                if (n.length && e.currSlide == e.slideCount - 1) {
                    var t = n[0];
                    n = n.slice(1), e.container.one("cycle-slide-added", function(e, t) {
                        c.apply(t.API), t.container.removeClass("cycle-loading")
                    }), e.container.addClass("cycle-loading"), e.API.add(t)
                } else c.apply(e.API)
            }), o && (s.prev = function() {
                var e = this.opts();
                if (n.length && 0 === e.currSlide) {
                    var t = n.length - 1,
                        i = n[t];
                    n = n.slice(0, t), e.container.one("cycle-slide-added", function(e, t) {
                        t.currSlide = 1, t.API.advanceSlide(-1), t.container.removeClass("cycle-loading")
                    }), e.container.addClass("cycle-loading"), e.API.add(i, !0)
                } else o.apply(e.API)
            })
        }
    })
}(jQuery),
function(e) {
    e.extend(e.fn.cycle.defaults, {
        tmplRegex: "{{((.)?.*?)}}"
    }), e.extend(e.fn.cycle.API, {
        tmpl: function(t, i) {
            var n = new RegExp(i.tmplRegex || e.fn.cycle.defaults.tmplRegex, "g"),
                s = e.makeArray(arguments);
            return s.shift(), t.replace(n, function(t, i) {
                var n, c, o, l, r = i.split(".");
                for (n = 0; n < s.length; n++) {
                    if (o = s[n], r.length > 1)
                        for (l = o, c = 0; c < r.length; c++) o = l, l = l[r[c]] || i;
                    else l = o[i];
                    if (e.isFunction(l)) return l.apply(o, s);
                    if (void 0 !== l && null !== l && l != i) return l
                }
                return i
            })
        }
    })
}(jQuery);
! function(t, e, i) {
    var n = t.L,
        o = {};
    o.version = "0.7.3", "object" == typeof module && "object" == typeof module.exports ? module.exports = o : "function" == typeof define && define.amd && define(o), o.noConflict = function() {
            return t.L = n, this
        }, t.L = o, o.Util = {
            extend: function(t) {
                var e, i, n, o, s = Array.prototype.slice.call(arguments, 1);
                for (i = 0, n = s.length; n > i; i++) {
                    o = s[i] || {};
                    for (e in o) o.hasOwnProperty(e) && (t[e] = o[e])
                }
                return t
            },
            bind: function(t, e) {
                var i = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;
                return function() {
                    return t.apply(e, i || arguments)
                }
            },
            stamp: function() {
                var t = 0,
                    e = "_leaflet_id";
                return function(i) {
                    return i[e] = i[e] || ++t, i[e]
                }
            }(),
            invokeEach: function(t, e, i) {
                var n, o;
                if ("object" == typeof t) {
                    o = Array.prototype.slice.call(arguments, 3);
                    for (n in t) e.apply(i, [n, t[n]].concat(o));
                    return !0
                }
                return !1
            },
            limitExecByInterval: function(t, e, i) {
                var n, o;
                return function s() {
                    var a = arguments;
                    return n ? void(o = !0) : (n = !0, setTimeout(function() {
                        n = !1, o && (s.apply(i, a), o = !1)
                    }, e), void t.apply(i, a))
                }
            },
            falseFn: function() {
                return !1
            },
            formatNum: function(t, e) {
                var i = Math.pow(10, e || 5);
                return Math.round(t * i) / i
            },
            trim: function(t) {
                return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
            },
            splitWords: function(t) {
                return o.Util.trim(t).split(/\s+/)
            },
            setOptions: function(t, e) {
                return t.options = o.extend({}, t.options, e), t.options
            },
            getParamString: function(t, e, i) {
                var n = [];
                for (var o in t) n.push(encodeURIComponent(i ? o.toUpperCase() : o) + "=" + encodeURIComponent(t[o]));
                return (e && -1 !== e.indexOf("?") ? "&" : "?") + n.join("&")
            },
            template: function(t, e) {
                return t.replace(/\{ *([\w_]+) *\}/g, function(t, n) {
                    var o = e[n];
                    if (o === i) throw new Error("No value provided for variable " + t);
                    return "function" == typeof o && (o = o(e)), o
                })
            },
            isArray: Array.isArray || function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            },
            emptyImageUrl: "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
        },
        function() {
            function e(e) {
                var i, n, o = ["webkit", "moz", "o", "ms"];
                for (i = 0; i < o.length && !n; i++) n = t[o[i] + e];
                return n
            }

            function i(e) {
                var i = +new Date,
                    o = Math.max(0, 16 - (i - n));
                return n = i + o, t.setTimeout(e, o)
            }
            var n = 0,
                s = t.requestAnimationFrame || e("RequestAnimationFrame") || i,
                a = t.cancelAnimationFrame || e("CancelAnimationFrame") || e("CancelRequestAnimationFrame") || function(e) {
                    t.clearTimeout(e)
                };
            o.Util.requestAnimFrame = function(e, n, a, r) {
                return e = o.bind(e, n), a && s === i ? void e() : s.call(t, e, r)
            }, o.Util.cancelAnimFrame = function(e) {
                e && a.call(t, e)
            }
        }(), o.extend = o.Util.extend, o.bind = o.Util.bind, o.stamp = o.Util.stamp, o.setOptions = o.Util.setOptions, o.Class = function() {}, o.Class.extend = function(t) {
            var e = function() {
                    this.initialize && this.initialize.apply(this, arguments), this._initHooks && this.callInitHooks()
                },
                i = function() {};
            i.prototype = this.prototype;
            var n = new i;
            n.constructor = e, e.prototype = n;
            for (var s in this) this.hasOwnProperty(s) && "prototype" !== s && (e[s] = this[s]);
            t.statics && (o.extend(e, t.statics), delete t.statics), t.includes && (o.Util.extend.apply(null, [n].concat(t.includes)), delete t.includes), t.options && n.options && (t.options = o.extend({}, n.options, t.options)), o.extend(n, t), n._initHooks = [];
            var a = this;
            return e.__super__ = a.prototype, n.callInitHooks = function() {
                if (!this._initHooksCalled) {
                    a.prototype.callInitHooks && a.prototype.callInitHooks.call(this), this._initHooksCalled = !0;
                    for (var t = 0, e = n._initHooks.length; e > t; t++) n._initHooks[t].call(this)
                }
            }, e
        }, o.Class.include = function(t) {
            o.extend(this.prototype, t)
        }, o.Class.mergeOptions = function(t) {
            o.extend(this.prototype.options, t)
        }, o.Class.addInitHook = function(t) {
            var e = Array.prototype.slice.call(arguments, 1),
                i = "function" == typeof t ? t : function() {
                    this[t].apply(this, e)
                };
            this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(i)
        };
    var s = "_leaflet_events";
    o.Mixin = {}, o.Mixin.Events = {
            addEventListener: function(t, e, i) {
                if (o.Util.invokeEach(t, this.addEventListener, this, e, i)) return this;
                var n, a, r, h, l, u, c, d = this[s] = this[s] || {},
                    p = i && i !== this && o.stamp(i);
                for (t = o.Util.splitWords(t), n = 0, a = t.length; a > n; n++) r = {
                    action: e,
                    context: i || this
                }, h = t[n], p ? (l = h + "_idx", u = l + "_len", c = d[l] = d[l] || {}, c[p] || (c[p] = [], d[u] = (d[u] || 0) + 1), c[p].push(r)) : (d[h] = d[h] || [], d[h].push(r));
                return this
            },
            hasEventListeners: function(t) {
                var e = this[s];
                return !!e && (t in e && e[t].length > 0 || t + "_idx" in e && e[t + "_idx_len"] > 0)
            },
            removeEventListener: function(t, e, i) {
                if (!this[s]) return this;
                if (!t) return this.clearAllEventListeners();
                if (o.Util.invokeEach(t, this.removeEventListener, this, e, i)) return this;
                var n, a, r, h, l, u, c, d, p, _ = this[s],
                    m = i && i !== this && o.stamp(i);
                for (t = o.Util.splitWords(t), n = 0, a = t.length; a > n; n++)
                    if (r = t[n], u = r + "_idx", c = u + "_len", d = _[u], e) {
                        if (h = m && d ? d[m] : _[r]) {
                            for (l = h.length - 1; l >= 0; l--) h[l].action !== e || i && h[l].context !== i || (p = h.splice(l, 1), p[0].action = o.Util.falseFn);
                            i && d && 0 === h.length && (delete d[m], _[c]--)
                        }
                    } else delete _[r], delete _[u], delete _[c];
                return this
            },
            clearAllEventListeners: function() {
                return delete this[s], this
            },
            fireEvent: function(t, e) {
                if (!this.hasEventListeners(t)) return this;
                var i, n, a, r, h, l = o.Util.extend({}, e, {
                        type: t,
                        target: this
                    }),
                    u = this[s];
                if (u[t])
                    for (i = u[t].slice(), n = 0, a = i.length; a > n; n++) i[n].action.call(i[n].context, l);
                r = u[t + "_idx"];
                for (h in r)
                    if (i = r[h].slice())
                        for (n = 0, a = i.length; a > n; n++) i[n].action.call(i[n].context, l);
                return this
            },
            addOneTimeEventListener: function(t, e, i) {
                if (o.Util.invokeEach(t, this.addOneTimeEventListener, this, e, i)) return this;
                var n = o.bind(function() {
                    this.removeEventListener(t, e, i).removeEventListener(t, n, i)
                }, this);
                return this.addEventListener(t, e, i).addEventListener(t, n, i)
            }
        }, o.Mixin.Events.on = o.Mixin.Events.addEventListener, o.Mixin.Events.off = o.Mixin.Events.removeEventListener, o.Mixin.Events.once = o.Mixin.Events.addOneTimeEventListener, o.Mixin.Events.fire = o.Mixin.Events.fireEvent,
        function() {
            var n = "ActiveXObject" in t,
                s = n && !e.addEventListener,
                a = navigator.userAgent.toLowerCase(),
                r = -1 !== a.indexOf("webkit"),
                h = -1 !== a.indexOf("chrome"),
                l = -1 !== a.indexOf("phantom"),
                u = -1 !== a.indexOf("android"),
                c = -1 !== a.search("android [23]"),
                d = -1 !== a.indexOf("gecko"),
                p = typeof orientation != i + "",
                _ = t.navigator && t.navigator.msPointerEnabled && t.navigator.msMaxTouchPoints && !t.PointerEvent,
                m = t.PointerEvent && t.navigator.pointerEnabled && t.navigator.maxTouchPoints || _,
                f = "devicePixelRatio" in t && t.devicePixelRatio > 1 || "matchMedia" in t && t.matchMedia("(min-resolution:144dpi)") && t.matchMedia("(min-resolution:144dpi)").matches,
                g = e.documentElement,
                v = n && "transition" in g.style,
                y = "WebKitCSSMatrix" in t && "m11" in new t.WebKitCSSMatrix && !c,
                P = "MozPerspective" in g.style,
                L = "OTransition" in g.style,
                x = !t.L_DISABLE_3D && (v || y || P || L) && !l,
                w = !t.L_NO_TOUCH && !l && function() {
                    var t = "ontouchstart";
                    if (m || t in g) return !0;
                    var i = e.createElement("div"),
                        n = !1;
                    return !!i.setAttribute && (i.setAttribute(t, "return;"), "function" == typeof i[t] && (n = !0), i.removeAttribute(t), i = null, n)
                }();
            o.Browser = {
                ie: n,
                ielt9: s,
                webkit: r,
                gecko: d && !r && !t.opera && !n,
                android: u,
                android23: c,
                chrome: h,
                ie3d: v,
                webkit3d: y,
                gecko3d: P,
                opera3d: L,
                any3d: x,
                mobile: p,
                mobileWebkit: p && r,
                mobileWebkit3d: p && y,
                mobileOpera: p && t.opera,
                touch: w,
                msPointer: _,
                pointer: m,
                retina: f
            }
        }(), o.Point = function(t, e, i) {
            this.x = i ? Math.round(t) : t, this.y = i ? Math.round(e) : e
        }, o.Point.prototype = {
            clone: function() {
                return new o.Point(this.x, this.y)
            },
            add: function(t) {
                return this.clone()._add(o.point(t))
            },
            _add: function(t) {
                return this.x += t.x, this.y += t.y, this
            },
            subtract: function(t) {
                return this.clone()._subtract(o.point(t))
            },
            _subtract: function(t) {
                return this.x -= t.x, this.y -= t.y, this
            },
            divideBy: function(t) {
                return this.clone()._divideBy(t)
            },
            _divideBy: function(t) {
                return this.x /= t, this.y /= t, this
            },
            multiplyBy: function(t) {
                return this.clone()._multiplyBy(t)
            },
            _multiplyBy: function(t) {
                return this.x *= t, this.y *= t, this
            },
            round: function() {
                return this.clone()._round()
            },
            _round: function() {
                return this.x = Math.round(this.x), this.y = Math.round(this.y), this
            },
            floor: function() {
                return this.clone()._floor()
            },
            _floor: function() {
                return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
            },
            distanceTo: function(t) {
                t = o.point(t);
                var e = t.x - this.x,
                    i = t.y - this.y;
                return Math.sqrt(e * e + i * i)
            },
            equals: function(t) {
                return t = o.point(t), t.x === this.x && t.y === this.y
            },
            contains: function(t) {
                return t = o.point(t), Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y)
            },
            toString: function() {
                return "Point(" + o.Util.formatNum(this.x) + ", " + o.Util.formatNum(this.y) + ")"
            }
        }, o.point = function(t, e, n) {
            return t instanceof o.Point ? t : o.Util.isArray(t) ? new o.Point(t[0], t[1]) : t === i || null === t ? t : new o.Point(t, e, n)
        }, o.Bounds = function(t, e) {
            if (t)
                for (var i = e ? [t, e] : t, n = 0, o = i.length; o > n; n++) this.extend(i[n])
        }, o.Bounds.prototype = {
            extend: function(t) {
                return t = o.point(t), this.min || this.max ? (this.min.x = Math.min(t.x, this.min.x), this.max.x = Math.max(t.x, this.max.x), this.min.y = Math.min(t.y, this.min.y), this.max.y = Math.max(t.y, this.max.y)) : (this.min = t.clone(), this.max = t.clone()), this
            },
            getCenter: function(t) {
                return new o.Point((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, t)
            },
            getBottomLeft: function() {
                return new o.Point(this.min.x, this.max.y)
            },
            getTopRight: function() {
                return new o.Point(this.max.x, this.min.y)
            },
            getSize: function() {
                return this.max.subtract(this.min)
            },
            contains: function(t) {
                var e, i;
                return t = "number" == typeof t[0] || t instanceof o.Point ? o.point(t) : o.bounds(t), t instanceof o.Bounds ? (e = t.min, i = t.max) : e = i = t, e.x >= this.min.x && i.x <= this.max.x && e.y >= this.min.y && i.y <= this.max.y
            },
            intersects: function(t) {
                t = o.bounds(t);
                var e = this.min,
                    i = this.max,
                    n = t.min,
                    s = t.max,
                    a = s.x >= e.x && n.x <= i.x,
                    r = s.y >= e.y && n.y <= i.y;
                return a && r
            },
            isValid: function() {
                return !(!this.min || !this.max)
            }
        }, o.bounds = function(t, e) {
            return !t || t instanceof o.Bounds ? t : new o.Bounds(t, e)
        }, o.Transformation = function(t, e, i, n) {
            this._a = t, this._b = e, this._c = i, this._d = n
        }, o.Transformation.prototype = {
            transform: function(t, e) {
                return this._transform(t.clone(), e)
            },
            _transform: function(t, e) {
                return e = e || 1, t.x = e * (this._a * t.x + this._b), t.y = e * (this._c * t.y + this._d), t
            },
            untransform: function(t, e) {
                return e = e || 1, new o.Point((t.x / e - this._b) / this._a, (t.y / e - this._d) / this._c)
            }
        }, o.DomUtil = {
            get: function(t) {
                return "string" == typeof t ? e.getElementById(t) : t
            },
            getStyle: function(t, i) {
                var n = t.style[i];
                if (!n && t.currentStyle && (n = t.currentStyle[i]), (!n || "auto" === n) && e.defaultView) {
                    var o = e.defaultView.getComputedStyle(t, null);
                    n = o ? o[i] : null
                }
                return "auto" === n ? null : n
            },
            getViewportOffset: function(t) {
                var i, n = 0,
                    s = 0,
                    a = t,
                    r = e.body,
                    h = e.documentElement;
                do {
                    if (n += a.offsetTop || 0, s += a.offsetLeft || 0, n += parseInt(o.DomUtil.getStyle(a, "borderTopWidth"), 10) || 0, s += parseInt(o.DomUtil.getStyle(a, "borderLeftWidth"), 10) || 0, i = o.DomUtil.getStyle(a, "position"), a.offsetParent === r && "absolute" === i) break;
                    if ("fixed" === i) {
                        n += r.scrollTop || h.scrollTop || 0, s += r.scrollLeft || h.scrollLeft || 0;
                        break
                    }
                    if ("relative" === i && !a.offsetLeft) {
                        var l = o.DomUtil.getStyle(a, "width"),
                            u = o.DomUtil.getStyle(a, "max-width"),
                            c = a.getBoundingClientRect();
                        ("none" !== l || "none" !== u) && (s += c.left + a.clientLeft), n += c.top + (r.scrollTop || h.scrollTop || 0);
                        break
                    }
                    a = a.offsetParent
                } while (a);
                a = t;
                do {
                    if (a === r) break;
                    n -= a.scrollTop || 0, s -= a.scrollLeft || 0, a = a.parentNode
                } while (a);
                return new o.Point(s, n)
            },
            documentIsLtr: function() {
                return o.DomUtil._docIsLtrCached || (o.DomUtil._docIsLtrCached = !0, o.DomUtil._docIsLtr = "ltr" === o.DomUtil.getStyle(e.body, "direction")), o.DomUtil._docIsLtr
            },
            create: function(t, i, n) {
                var o = e.createElement(t);
                return o.className = i, n && n.appendChild(o), o
            },
            hasClass: function(t, e) {
                if (t.classList !== i) return t.classList.contains(e);
                var n = o.DomUtil._getClass(t);
                return n.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(n)
            },
            addClass: function(t, e) {
                if (t.classList !== i)
                    for (var n = o.Util.splitWords(e), s = 0, a = n.length; a > s; s++) t.classList.add(n[s]);
                else if (!o.DomUtil.hasClass(t, e)) {
                    var r = o.DomUtil._getClass(t);
                    o.DomUtil._setClass(t, (r ? r + " " : "") + e)
                }
            },
            removeClass: function(t, e) {
                t.classList !== i ? t.classList.remove(e) : o.DomUtil._setClass(t, o.Util.trim((" " + o.DomUtil._getClass(t) + " ").replace(" " + e + " ", " ")))
            },
            _setClass: function(t, e) {
                t.className.baseVal === i ? t.className = e : t.className.baseVal = e
            },
            _getClass: function(t) {
                return t.className.baseVal === i ? t.className : t.className.baseVal
            },
            setOpacity: function(t, e) {
                if ("opacity" in t.style) t.style.opacity = e;
                else if ("filter" in t.style) {
                    var i = !1,
                        n = "DXImageTransform.Microsoft.Alpha";
                    try {
                        i = t.filters.item(n)
                    } catch (t) {
                        if (1 === e) return
                    }
                    e = Math.round(100 * e), i ? (i.Enabled = 100 !== e, i.Opacity = e) : t.style.filter += " progid:" + n + "(opacity=" + e + ")"
                }
            },
            testProp: function(t) {
                for (var i = e.documentElement.style, n = 0; n < t.length; n++)
                    if (t[n] in i) return t[n];
                return !1
            },
            getTranslateString: function(t) {
                var e = o.Browser.webkit3d,
                    i = "translate" + (e ? "3d" : "") + "(",
                    n = (e ? ",0" : "") + ")";
                return i + t.x + "px," + t.y + "px" + n
            },
            getScaleString: function(t, e) {
                var i = o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1 * t))),
                    n = " scale(" + t + ") ";
                return i + n
            },
            setPosition: function(t, e, i) {
                t._leaflet_pos = e, !i && o.Browser.any3d ? t.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(e) : (t.style.left = e.x + "px", t.style.top = e.y + "px")
            },
            getPosition: function(t) {
                return t._leaflet_pos
            }
        }, o.DomUtil.TRANSFORM = o.DomUtil.testProp(["transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform"]), o.DomUtil.TRANSITION = o.DomUtil.testProp(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]), o.DomUtil.TRANSITION_END = "webkitTransition" === o.DomUtil.TRANSITION || "OTransition" === o.DomUtil.TRANSITION ? o.DomUtil.TRANSITION + "End" : "transitionend",
        function() {
            if ("onselectstart" in e) o.extend(o.DomUtil, {
                disableTextSelection: function() {
                    o.DomEvent.on(t, "selectstart", o.DomEvent.preventDefault)
                },
                enableTextSelection: function() {
                    o.DomEvent.off(t, "selectstart", o.DomEvent.preventDefault)
                }
            });
            else {
                var i = o.DomUtil.testProp(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]);
                o.extend(o.DomUtil, {
                    disableTextSelection: function() {
                        if (i) {
                            var t = e.documentElement.style;
                            this._userSelect = t[i], t[i] = "none"
                        }
                    },
                    enableTextSelection: function() {
                        i && (e.documentElement.style[i] = this._userSelect, delete this._userSelect)
                    }
                })
            }
            o.extend(o.DomUtil, {
                disableImageDrag: function() {
                    o.DomEvent.on(t, "dragstart", o.DomEvent.preventDefault)
                },
                enableImageDrag: function() {
                    o.DomEvent.off(t, "dragstart", o.DomEvent.preventDefault)
                }
            })
        }(), o.LatLng = function(t, e, n) {
            if (t = parseFloat(t), e = parseFloat(e), isNaN(t) || isNaN(e)) throw new Error("Invalid LatLng object: (" + t + ", " + e + ")");
            this.lat = t, this.lng = e, n !== i && (this.alt = parseFloat(n))
        }, o.extend(o.LatLng, {
            DEG_TO_RAD: Math.PI / 180,
            RAD_TO_DEG: 180 / Math.PI,
            MAX_MARGIN: 1e-9
        }), o.LatLng.prototype = {
            equals: function(t) {
                if (!t) return !1;
                t = o.latLng(t);
                var e = Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng));
                return e <= o.LatLng.MAX_MARGIN
            },
            toString: function(t) {
                return "LatLng(" + o.Util.formatNum(this.lat, t) + ", " + o.Util.formatNum(this.lng, t) + ")"
            },
            distanceTo: function(t) {
                t = o.latLng(t);
                var e = 6378137,
                    i = o.LatLng.DEG_TO_RAD,
                    n = (t.lat - this.lat) * i,
                    s = (t.lng - this.lng) * i,
                    a = this.lat * i,
                    r = t.lat * i,
                    h = Math.sin(n / 2),
                    l = Math.sin(s / 2),
                    u = h * h + l * l * Math.cos(a) * Math.cos(r);
                return 2 * e * Math.atan2(Math.sqrt(u), Math.sqrt(1 - u))
            },
            wrap: function(t, e) {
                var i = this.lng;
                return t = t || -180, e = e || 180, i = (i + e) % (e - t) + (t > i || i === e ? e : t), new o.LatLng(this.lat, i)
            }
        }, o.latLng = function(t, e) {
            return t instanceof o.LatLng ? t : o.Util.isArray(t) ? "number" == typeof t[0] || "string" == typeof t[0] ? new o.LatLng(t[0], t[1], t[2]) : null : t === i || null === t ? t : "object" == typeof t && "lat" in t ? new o.LatLng(t.lat, "lng" in t ? t.lng : t.lon) : e === i ? null : new o.LatLng(t, e)
        }, o.LatLngBounds = function(t, e) {
            if (t)
                for (var i = e ? [t, e] : t, n = 0, o = i.length; o > n; n++) this.extend(i[n])
        }, o.LatLngBounds.prototype = {
            extend: function(t) {
                if (!t) return this;
                var e = o.latLng(t);
                return t = null !== e ? e : o.latLngBounds(t), t instanceof o.LatLng ? this._southWest || this._northEast ? (this._southWest.lat = Math.min(t.lat, this._southWest.lat), this._southWest.lng = Math.min(t.lng, this._southWest.lng), this._northEast.lat = Math.max(t.lat, this._northEast.lat), this._northEast.lng = Math.max(t.lng, this._northEast.lng)) : (this._southWest = new o.LatLng(t.lat, t.lng), this._northEast = new o.LatLng(t.lat, t.lng)) : t instanceof o.LatLngBounds && (this.extend(t._southWest), this.extend(t._northEast)), this
            },
            pad: function(t) {
                var e = this._southWest,
                    i = this._northEast,
                    n = Math.abs(e.lat - i.lat) * t,
                    s = Math.abs(e.lng - i.lng) * t;
                return new o.LatLngBounds(new o.LatLng(e.lat - n, e.lng - s), new o.LatLng(i.lat + n, i.lng + s))
            },
            getCenter: function() {
                return new o.LatLng((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2)
            },
            getSouthWest: function() {
                return this._southWest
            },
            getNorthEast: function() {
                return this._northEast
            },
            getNorthWest: function() {
                return new o.LatLng(this.getNorth(), this.getWest())
            },
            getSouthEast: function() {
                return new o.LatLng(this.getSouth(), this.getEast())
            },
            getWest: function() {
                return this._southWest.lng
            },
            getSouth: function() {
                return this._southWest.lat
            },
            getEast: function() {
                return this._northEast.lng
            },
            getNorth: function() {
                return this._northEast.lat
            },
            contains: function(t) {
                t = "number" == typeof t[0] || t instanceof o.LatLng ? o.latLng(t) : o.latLngBounds(t);
                var e, i, n = this._southWest,
                    s = this._northEast;
                return t instanceof o.LatLngBounds ? (e = t.getSouthWest(), i = t.getNorthEast()) : e = i = t, e.lat >= n.lat && i.lat <= s.lat && e.lng >= n.lng && i.lng <= s.lng
            },
            intersects: function(t) {
                t = o.latLngBounds(t);
                var e = this._southWest,
                    i = this._northEast,
                    n = t.getSouthWest(),
                    s = t.getNorthEast(),
                    a = s.lat >= e.lat && n.lat <= i.lat,
                    r = s.lng >= e.lng && n.lng <= i.lng;
                return a && r
            },
            toBBoxString: function() {
                return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",")
            },
            equals: function(t) {
                return !!t && (t = o.latLngBounds(t), this._southWest.equals(t.getSouthWest()) && this._northEast.equals(t.getNorthEast()))
            },
            isValid: function() {
                return !(!this._southWest || !this._northEast)
            }
        }, o.latLngBounds = function(t, e) {
            return !t || t instanceof o.LatLngBounds ? t : new o.LatLngBounds(t, e)
        }, o.Projection = {}, o.Projection.SphericalMercator = {
            MAX_LATITUDE: 85.0511287798,
            project: function(t) {
                var e = o.LatLng.DEG_TO_RAD,
                    i = this.MAX_LATITUDE,
                    n = Math.max(Math.min(i, t.lat), -i),
                    s = t.lng * e,
                    a = n * e;
                return a = Math.log(Math.tan(Math.PI / 4 + a / 2)), new o.Point(s, a)
            },
            unproject: function(t) {
                var e = o.LatLng.RAD_TO_DEG,
                    i = t.x * e,
                    n = (2 * Math.atan(Math.exp(t.y)) - Math.PI / 2) * e;
                return new o.LatLng(n, i)
            }
        }, o.Projection.LonLat = {
            project: function(t) {
                return new o.Point(t.lng, t.lat)
            },
            unproject: function(t) {
                return new o.LatLng(t.y, t.x)
            }
        }, o.CRS = {
            latLngToPoint: function(t, e) {
                var i = this.projection.project(t),
                    n = this.scale(e);
                return this.transformation._transform(i, n)
            },
            pointToLatLng: function(t, e) {
                var i = this.scale(e),
                    n = this.transformation.untransform(t, i);
                return this.projection.unproject(n)
            },
            project: function(t) {
                return this.projection.project(t)
            },
            scale: function(t) {
                return 256 * Math.pow(2, t)
            },
            getSize: function(t) {
                var e = this.scale(t);
                return o.point(e, e)
            }
        }, o.CRS.Simple = o.extend({}, o.CRS, {
            projection: o.Projection.LonLat,
            transformation: new o.Transformation(1, 0, (-1), 0),
            scale: function(t) {
                return Math.pow(2, t)
            }
        }), o.CRS.EPSG3857 = o.extend({}, o.CRS, {
            code: "EPSG:3857",
            projection: o.Projection.SphericalMercator,
            transformation: new o.Transformation(.5 / Math.PI, .5, -.5 / Math.PI, .5),
            project: function(t) {
                var e = this.projection.project(t),
                    i = 6378137;
                return e.multiplyBy(i)
            }
        }), o.CRS.EPSG900913 = o.extend({}, o.CRS.EPSG3857, {
            code: "EPSG:900913"
        }), o.CRS.EPSG4326 = o.extend({}, o.CRS, {
            code: "EPSG:4326",
            projection: o.Projection.LonLat,
            transformation: new o.Transformation(1 / 360, .5, -1 / 360, .5)
        }), o.Map = o.Class.extend({
            includes: o.Mixin.Events,
            options: {
                crs: o.CRS.EPSG3857,
                fadeAnimation: o.DomUtil.TRANSITION && !o.Browser.android23,
                trackResize: !0,
                markerZoomAnimation: o.DomUtil.TRANSITION && o.Browser.any3d
            },
            initialize: function(t, e) {
                e = o.setOptions(this, e), this._initContainer(t), this._initLayout(), this._onResize = o.bind(this._onResize, this), this._initEvents(), e.maxBounds && this.setMaxBounds(e.maxBounds), e.center && e.zoom !== i && this.setView(o.latLng(e.center), e.zoom, {
                    reset: !0
                }), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._tileLayersNum = 0, this.callInitHooks(), this._addLayers(e.layers)
            },
            setView: function(t, e) {
                return e = e === i ? this.getZoom() : e, this._resetView(o.latLng(t), this._limitZoom(e)), this
            },
            setZoom: function(t, e) {
                return this._loaded ? this.setView(this.getCenter(), t, {
                    zoom: e
                }) : (this._zoom = this._limitZoom(t), this)
            },
            zoomIn: function(t, e) {
                return this.setZoom(this._zoom + (t || 1), e)
            },
            zoomOut: function(t, e) {
                return this.setZoom(this._zoom - (t || 1), e)
            },
            setZoomAround: function(t, e, i) {
                var n = this.getZoomScale(e),
                    s = this.getSize().divideBy(2),
                    a = t instanceof o.Point ? t : this.latLngToContainerPoint(t),
                    r = a.subtract(s).multiplyBy(1 - 1 / n),
                    h = this.containerPointToLatLng(s.add(r));
                return this.setView(h, e, {
                    zoom: i
                })
            },
            fitBounds: function(t, e) {
                e = e || {}, t = t.getBounds ? t.getBounds() : o.latLngBounds(t);
                var i = o.point(e.paddingTopLeft || e.padding || [0, 0]),
                    n = o.point(e.paddingBottomRight || e.padding || [0, 0]),
                    s = this.getBoundsZoom(t, !1, i.add(n)),
                    a = n.subtract(i).divideBy(2),
                    r = this.project(t.getSouthWest(), s),
                    h = this.project(t.getNorthEast(), s),
                    l = this.unproject(r.add(h).divideBy(2).add(a), s);
                return s = e && e.maxZoom ? Math.min(e.maxZoom, s) : s, this.setView(l, s, e)
            },
            fitWorld: function(t) {
                return this.fitBounds([
                    [-90, -180],
                    [90, 180]
                ], t)
            },
            panTo: function(t, e) {
                return this.setView(t, this._zoom, {
                    pan: e
                })
            },
            panBy: function(t) {
                return this.fire("movestart"), this._rawPanBy(o.point(t)), this.fire("move"), this.fire("moveend")
            },
            setMaxBounds: function(t) {
                return t = o.latLngBounds(t), this.options.maxBounds = t, t ? (this._loaded && this._panInsideMaxBounds(), this.on("moveend", this._panInsideMaxBounds, this)) : this.off("moveend", this._panInsideMaxBounds, this)
            },
            panInsideBounds: function(t, e) {
                var i = this.getCenter(),
                    n = this._limitCenter(i, this._zoom, t);
                return i.equals(n) ? this : this.panTo(n, e)
            },
            addLayer: function(t) {
                var e = o.stamp(t);
                return this._layers[e] ? this : (this._layers[e] = t, !t.options || isNaN(t.options.maxZoom) && isNaN(t.options.minZoom) || (this._zoomBoundLayers[e] = t, this._updateZoomLevels()), this.options.zoomAnimation && o.TileLayer && t instanceof o.TileLayer && (this._tileLayersNum++, this._tileLayersToLoad++, t.on("load", this._onTileLayerLoad, this)), this._loaded && this._layerAdd(t), this)
            },
            removeLayer: function(t) {
                var e = o.stamp(t);
                return this._layers[e] ? (this._loaded && t.onRemove(this), delete this._layers[e], this._loaded && this.fire("layerremove", {
                    layer: t
                }), this._zoomBoundLayers[e] && (delete this._zoomBoundLayers[e], this._updateZoomLevels()), this.options.zoomAnimation && o.TileLayer && t instanceof o.TileLayer && (this._tileLayersNum--, this._tileLayersToLoad--, t.off("load", this._onTileLayerLoad, this)), this) : this
            },
            hasLayer: function(t) {
                return !!t && o.stamp(t) in this._layers
            },
            eachLayer: function(t, e) {
                for (var i in this._layers) t.call(e, this._layers[i]);
                return this
            },
            invalidateSize: function(t) {
                if (!this._loaded) return this;
                t = o.extend({
                    animate: !1,
                    pan: !0
                }, t === !0 ? {
                    animate: !0
                } : t);
                var e = this.getSize();
                this._sizeChanged = !0, this._initialCenter = null;
                var i = this.getSize(),
                    n = e.divideBy(2).round(),
                    s = i.divideBy(2).round(),
                    a = n.subtract(s);
                return a.x || a.y ? (t.animate && t.pan ? this.panBy(a) : (t.pan && this._rawPanBy(a), this.fire("move"), t.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(o.bind(this.fire, this, "moveend"), 200)) : this.fire("moveend")), this.fire("resize", {
                    oldSize: e,
                    newSize: i
                })) : this
            },
            addHandler: function(t, e) {
                if (!e) return this;
                var i = this[t] = new e(this);
                return this._handlers.push(i), this.options[t] && i.enable(), this
            },
            remove: function() {
                this._loaded && this.fire("unload"), this._initEvents("off");
                try {
                    delete this._container._leaflet
                } catch (t) {
                    this._container._leaflet = i
                }
                return this._clearPanes(), this._clearControlPos && this._clearControlPos(), this._clearHandlers(), this
            },
            getCenter: function() {
                return this._checkIfLoaded(), this._initialCenter && !this._moved() ? this._initialCenter : this.layerPointToLatLng(this._getCenterLayerPoint())
            },
            getZoom: function() {
                return this._zoom
            },
            getBounds: function() {
                var t = this.getPixelBounds(),
                    e = this.unproject(t.getBottomLeft()),
                    i = this.unproject(t.getTopRight());
                return new o.LatLngBounds(e, i)
            },
            getMinZoom: function() {
                return this.options.minZoom === i ? this._layersMinZoom === i ? 0 : this._layersMinZoom : this.options.minZoom
            },
            getMaxZoom: function() {
                return this.options.maxZoom === i ? this._layersMaxZoom === i ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom
            },
            getBoundsZoom: function(t, e, i) {
                t = o.latLngBounds(t);
                var n, s = this.getMinZoom() - (e ? 1 : 0),
                    a = this.getMaxZoom(),
                    r = this.getSize(),
                    h = t.getNorthWest(),
                    l = t.getSouthEast(),
                    u = !0;
                i = o.point(i || [0, 0]);
                do s++, n = this.project(l, s).subtract(this.project(h, s)).add(i), u = e ? n.x < r.x || n.y < r.y : r.contains(n); while (u && a >= s);
                return u && e ? null : e ? s : s - 1
            },
            getSize: function() {
                return (!this._size || this._sizeChanged) && (this._size = new o.Point(this._container.clientWidth, this._container.clientHeight), this._sizeChanged = !1), this._size.clone()
            },
            getPixelBounds: function() {
                var t = this._getTopLeftPoint();
                return new o.Bounds(t, t.add(this.getSize()))
            },
            getPixelOrigin: function() {
                return this._checkIfLoaded(), this._initialTopLeftPoint
            },
            getPanes: function() {
                return this._panes
            },
            getContainer: function() {
                return this._container
            },
            getZoomScale: function(t) {
                var e = this.options.crs;
                return e.scale(t) / e.scale(this._zoom)
            },
            getScaleZoom: function(t) {
                return this._zoom + Math.log(t) / Math.LN2
            },
            project: function(t, e) {
                return e = e === i ? this._zoom : e, this.options.crs.latLngToPoint(o.latLng(t), e)
            },
            unproject: function(t, e) {
                return e = e === i ? this._zoom : e, this.options.crs.pointToLatLng(o.point(t), e)
            },
            layerPointToLatLng: function(t) {
                var e = o.point(t).add(this.getPixelOrigin());
                return this.unproject(e)
            },
            latLngToLayerPoint: function(t) {
                var e = this.project(o.latLng(t))._round();
                return e._subtract(this.getPixelOrigin())
            },
            containerPointToLayerPoint: function(t) {
                return o.point(t).subtract(this._getMapPanePos())
            },
            layerPointToContainerPoint: function(t) {
                return o.point(t).add(this._getMapPanePos())
            },
            containerPointToLatLng: function(t) {
                var e = this.containerPointToLayerPoint(o.point(t));
                return this.layerPointToLatLng(e)
            },
            latLngToContainerPoint: function(t) {
                return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))
            },
            mouseEventToContainerPoint: function(t) {
                return o.DomEvent.getMousePosition(t, this._container)
            },
            mouseEventToLayerPoint: function(t) {
                return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))
            },
            mouseEventToLatLng: function(t) {
                return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))
            },
            _initContainer: function(t) {
                var e = this._container = o.DomUtil.get(t);
                if (!e) throw new Error("Map container not found.");
                if (e._leaflet) throw new Error("Map container is already initialized.");
                e._leaflet = !0
            },
            _initLayout: function() {
                var t = this._container;
                o.DomUtil.addClass(t, "leaflet-container" + (o.Browser.touch ? " leaflet-touch" : "") + (o.Browser.retina ? " leaflet-retina" : "") + (o.Browser.ielt9 ? " leaflet-oldie" : "") + (this.options.fadeAnimation ? " leaflet-fade-anim" : ""));
                var e = o.DomUtil.getStyle(t, "position");
                "absolute" !== e && "relative" !== e && "fixed" !== e && (t.style.position = "relative"), this._initPanes(), this._initControlPos && this._initControlPos()
            },
            _initPanes: function() {
                var t = this._panes = {};
                this._mapPane = t.mapPane = this._createPane("leaflet-map-pane", this._container), this._tilePane = t.tilePane = this._createPane("leaflet-tile-pane", this._mapPane), t.objectsPane = this._createPane("leaflet-objects-pane", this._mapPane), t.shadowPane = this._createPane("leaflet-shadow-pane"), t.overlayPane = this._createPane("leaflet-overlay-pane"), t.markerPane = this._createPane("leaflet-marker-pane"), t.popupPane = this._createPane("leaflet-popup-pane");
                var e = " leaflet-zoom-hide";
                this.options.markerZoomAnimation || (o.DomUtil.addClass(t.markerPane, e), o.DomUtil.addClass(t.shadowPane, e), o.DomUtil.addClass(t.popupPane, e))
            },
            _createPane: function(t, e) {
                return o.DomUtil.create("div", t, e || this._panes.objectsPane)
            },
            _clearPanes: function() {
                this._container.removeChild(this._mapPane)
            },
            _addLayers: function(t) {
                t = t ? o.Util.isArray(t) ? t : [t] : [];
                for (var e = 0, i = t.length; i > e; e++) this.addLayer(t[e])
            },
            _resetView: function(t, e, i, n) {
                var s = this._zoom !== e;
                n || (this.fire("movestart"), s && this.fire("zoomstart")), this._zoom = e, this._initialCenter = t, this._initialTopLeftPoint = this._getNewTopLeftPoint(t), i ? this._initialTopLeftPoint._add(this._getMapPanePos()) : o.DomUtil.setPosition(this._mapPane, new o.Point(0, 0)), this._tileLayersToLoad = this._tileLayersNum;
                var a = !this._loaded;
                this._loaded = !0, this.fire("viewreset", {
                    hard: !i
                }), a && (this.fire("load"), this.eachLayer(this._layerAdd, this)), this.fire("move"), (s || n) && this.fire("zoomend"), this.fire("moveend", {
                    hard: !i
                })
            },
            _rawPanBy: function(t) {
                o.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(t))
            },
            _getZoomSpan: function() {
                return this.getMaxZoom() - this.getMinZoom()
            },
            _updateZoomLevels: function() {
                var t, e = 1 / 0,
                    n = -1 / 0,
                    o = this._getZoomSpan();
                for (t in this._zoomBoundLayers) {
                    var s = this._zoomBoundLayers[t];
                    isNaN(s.options.minZoom) || (e = Math.min(e, s.options.minZoom)), isNaN(s.options.maxZoom) || (n = Math.max(n, s.options.maxZoom))
                }
                t === i ? this._layersMaxZoom = this._layersMinZoom = i : (this._layersMaxZoom = n, this._layersMinZoom = e), o !== this._getZoomSpan() && this.fire("zoomlevelschange")
            },
            _panInsideMaxBounds: function() {
                this.panInsideBounds(this.options.maxBounds)
            },
            _checkIfLoaded: function() {
                if (!this._loaded) throw new Error("Set map center and zoom first.")
            },
            _initEvents: function(e) {
                if (o.DomEvent) {
                    e = e || "on", o.DomEvent[e](this._container, "click", this._onMouseClick, this);
                    var i, n, s = ["dblclick", "mousedown", "mouseup", "mouseenter", "mouseleave", "mousemove", "contextmenu"];
                    for (i = 0, n = s.length; n > i; i++) o.DomEvent[e](this._container, s[i], this._fireMouseEvent, this);
                    this.options.trackResize && o.DomEvent[e](t, "resize", this._onResize, this)
                }
            },
            _onResize: function() {
                o.Util.cancelAnimFrame(this._resizeRequest), this._resizeRequest = o.Util.requestAnimFrame(function() {
                    this.invalidateSize({
                        debounceMoveend: !0
                    })
                }, this, !1, this._container)
            },
            _onMouseClick: function(t) {
                !this._loaded || !t._simulated && (this.dragging && this.dragging.moved() || this.boxZoom && this.boxZoom.moved()) || o.DomEvent._skipped(t) || (this.fire("preclick"), this._fireMouseEvent(t))
            },
            _fireMouseEvent: function(t) {
                if (this._loaded && !o.DomEvent._skipped(t)) {
                    var e = t.type;
                    if (e = "mouseenter" === e ? "mouseover" : "mouseleave" === e ? "mouseout" : e, this.hasEventListeners(e)) {
                        "contextmenu" === e && o.DomEvent.preventDefault(t);
                        var i = this.mouseEventToContainerPoint(t),
                            n = this.containerPointToLayerPoint(i),
                            s = this.layerPointToLatLng(n);
                        this.fire(e, {
                            latlng: s,
                            layerPoint: n,
                            containerPoint: i,
                            originalEvent: t
                        })
                    }
                }
            },
            _onTileLayerLoad: function() {
                this._tileLayersToLoad--, this._tileLayersNum && !this._tileLayersToLoad && this.fire("tilelayersload")
            },
            _clearHandlers: function() {
                for (var t = 0, e = this._handlers.length; e > t; t++) this._handlers[t].disable()
            },
            whenReady: function(t, e) {
                return this._loaded ? t.call(e || this, this) : this.on("load", t, e), this
            },
            _layerAdd: function(t) {
                t.onAdd(this), this.fire("layeradd", {
                    layer: t
                })
            },
            _getMapPanePos: function() {
                return o.DomUtil.getPosition(this._mapPane)
            },
            _moved: function() {
                var t = this._getMapPanePos();
                return t && !t.equals([0, 0])
            },
            _getTopLeftPoint: function() {
                return this.getPixelOrigin().subtract(this._getMapPanePos())
            },
            _getNewTopLeftPoint: function(t, e) {
                var i = this.getSize()._divideBy(2);
                return this.project(t, e)._subtract(i)._round()
            },
            _latLngToNewLayerPoint: function(t, e, i) {
                var n = this._getNewTopLeftPoint(i, e).add(this._getMapPanePos());
                return this.project(t, e)._subtract(n)
            },
            _getCenterLayerPoint: function() {
                return this.containerPointToLayerPoint(this.getSize()._divideBy(2))
            },
            _getCenterOffset: function(t) {
                return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())
            },
            _limitCenter: function(t, e, i) {
                if (!i) return t;
                var n = this.project(t, e),
                    s = this.getSize().divideBy(2),
                    a = new o.Bounds(n.subtract(s), n.add(s)),
                    r = this._getBoundsOffset(a, i, e);
                return this.unproject(n.add(r), e)
            },
            _limitOffset: function(t, e) {
                if (!e) return t;
                var i = this.getPixelBounds(),
                    n = new o.Bounds(i.min.add(t), i.max.add(t));
                return t.add(this._getBoundsOffset(n, e))
            },
            _getBoundsOffset: function(t, e, i) {
                var n = this.project(e.getNorthWest(), i).subtract(t.min),
                    s = this.project(e.getSouthEast(), i).subtract(t.max),
                    a = this._rebound(n.x, -s.x),
                    r = this._rebound(n.y, -s.y);
                return new o.Point(a, r)
            },
            _rebound: function(t, e) {
                return t + e > 0 ? Math.round(t - e) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(e))
            },
            _limitZoom: function(t) {
                var e = this.getMinZoom(),
                    i = this.getMaxZoom();
                return Math.max(e, Math.min(i, t))
            }
        }), o.map = function(t, e) {
            return new o.Map(t, e)
        }, o.Projection.Mercator = {
            MAX_LATITUDE: 85.0840591556,
            R_MINOR: 6356752.314245179,
            R_MAJOR: 6378137,
            project: function(t) {
                var e = o.LatLng.DEG_TO_RAD,
                    i = this.MAX_LATITUDE,
                    n = Math.max(Math.min(i, t.lat), -i),
                    s = this.R_MAJOR,
                    a = this.R_MINOR,
                    r = t.lng * e * s,
                    h = n * e,
                    l = a / s,
                    u = Math.sqrt(1 - l * l),
                    c = u * Math.sin(h);
                c = Math.pow((1 - c) / (1 + c), .5 * u);
                var d = Math.tan(.5 * (.5 * Math.PI - h)) / c;
                return h = -s * Math.log(d), new o.Point(r, h)
            },
            unproject: function(t) {
                for (var e, i = o.LatLng.RAD_TO_DEG, n = this.R_MAJOR, s = this.R_MINOR, a = t.x * i / n, r = s / n, h = Math.sqrt(1 - r * r), l = Math.exp(-t.y / n), u = Math.PI / 2 - 2 * Math.atan(l), c = 15, d = 1e-7, p = c, _ = .1; Math.abs(_) > d && --p > 0;) e = h * Math.sin(u),
                    _ = Math.PI / 2 - 2 * Math.atan(l * Math.pow((1 - e) / (1 + e), .5 * h)) - u, u += _;
                return new o.LatLng(u * i, a)
            }
        }, o.CRS.EPSG3395 = o.extend({}, o.CRS, {
            code: "EPSG:3395",
            projection: o.Projection.Mercator,
            transformation: function() {
                var t = o.Projection.Mercator,
                    e = t.R_MAJOR,
                    i = .5 / (Math.PI * e);
                return new o.Transformation(i, .5, (-i), .5)
            }()
        }), o.TileLayer = o.Class.extend({
            includes: o.Mixin.Events,
            options: {
                minZoom: 0,
                maxZoom: 18,
                tileSize: 256,
                subdomains: "abc",
                errorTileUrl: "",
                attribution: "",
                zoomOffset: 0,
                opacity: 1,
                unloadInvisibleTiles: o.Browser.mobile,
                updateWhenIdle: o.Browser.mobile
            },
            initialize: function(t, e) {
                e = o.setOptions(this, e), e.detectRetina && o.Browser.retina && e.maxZoom > 0 && (e.tileSize = Math.floor(e.tileSize / 2), e.zoomOffset++, e.minZoom > 0 && e.minZoom--, this.options.maxZoom--), e.bounds && (e.bounds = o.latLngBounds(e.bounds)), this._url = t;
                var i = this.options.subdomains;
                "string" == typeof i && (this.options.subdomains = i.split(""))
            },
            onAdd: function(t) {
                this._map = t, this._animated = t._zoomAnimated, this._initContainer(), t.on({
                    viewreset: this._reset,
                    moveend: this._update
                }, this), this._animated && t.on({
                    zoomanim: this._animateZoom,
                    zoomend: this._endZoomAnim
                }, this), this.options.updateWhenIdle || (this._limitedUpdate = o.Util.limitExecByInterval(this._update, 150, this), t.on("move", this._limitedUpdate, this)), this._reset(), this._update()
            },
            addTo: function(t) {
                return t.addLayer(this), this
            },
            onRemove: function(t) {
                this._container.parentNode.removeChild(this._container), t.off({
                    viewreset: this._reset,
                    moveend: this._update
                }, this), this._animated && t.off({
                    zoomanim: this._animateZoom,
                    zoomend: this._endZoomAnim
                }, this), this.options.updateWhenIdle || t.off("move", this._limitedUpdate, this), this._container = null, this._map = null
            },
            bringToFront: function() {
                var t = this._map._panes.tilePane;
                return this._container && (t.appendChild(this._container), this._setAutoZIndex(t, Math.max)), this
            },
            bringToBack: function() {
                var t = this._map._panes.tilePane;
                return this._container && (t.insertBefore(this._container, t.firstChild), this._setAutoZIndex(t, Math.min)), this
            },
            getAttribution: function() {
                return this.options.attribution
            },
            getContainer: function() {
                return this._container
            },
            setOpacity: function(t) {
                return this.options.opacity = t, this._map && this._updateOpacity(), this
            },
            setZIndex: function(t) {
                return this.options.zIndex = t, this._updateZIndex(), this
            },
            setUrl: function(t, e) {
                return this._url = t, e || this.redraw(), this
            },
            redraw: function() {
                return this._map && (this._reset({
                    hard: !0
                }), this._update()), this
            },
            _updateZIndex: function() {
                this._container && this.options.zIndex !== i && (this._container.style.zIndex = this.options.zIndex)
            },
            _setAutoZIndex: function(t, e) {
                var i, n, o, s = t.children,
                    a = -e(1 / 0, -1 / 0);
                for (n = 0, o = s.length; o > n; n++) s[n] !== this._container && (i = parseInt(s[n].style.zIndex, 10), isNaN(i) || (a = e(a, i)));
                this.options.zIndex = this._container.style.zIndex = (isFinite(a) ? a : 0) + e(1, -1)
            },
            _updateOpacity: function() {
                var t, e = this._tiles;
                if (o.Browser.ielt9)
                    for (t in e) o.DomUtil.setOpacity(e[t], this.options.opacity);
                else o.DomUtil.setOpacity(this._container, this.options.opacity)
            },
            _initContainer: function() {
                var t = this._map._panes.tilePane;
                if (!this._container) {
                    if (this._container = o.DomUtil.create("div", "leaflet-layer"), this._updateZIndex(), this._animated) {
                        var e = "leaflet-tile-container";
                        this._bgBuffer = o.DomUtil.create("div", e, this._container), this._tileContainer = o.DomUtil.create("div", e, this._container)
                    } else this._tileContainer = this._container;
                    t.appendChild(this._container), this.options.opacity < 1 && this._updateOpacity()
                }
            },
            _reset: function(t) {
                for (var e in this._tiles) this.fire("tileunload", {
                    tile: this._tiles[e]
                });
                this._tiles = {}, this._tilesToLoad = 0, this.options.reuseTiles && (this._unusedTiles = []), this._tileContainer.innerHTML = "", this._animated && t && t.hard && this._clearBgBuffer(), this._initContainer()
            },
            _getTileSize: function() {
                var t = this._map,
                    e = t.getZoom() + this.options.zoomOffset,
                    i = this.options.maxNativeZoom,
                    n = this.options.tileSize;
                return i && e > i && (n = Math.round(t.getZoomScale(e) / t.getZoomScale(i) * n)), n
            },
            _update: function() {
                if (this._map) {
                    var t = this._map,
                        e = t.getPixelBounds(),
                        i = t.getZoom(),
                        n = this._getTileSize();
                    if (!(i > this.options.maxZoom || i < this.options.minZoom)) {
                        var s = o.bounds(e.min.divideBy(n)._floor(), e.max.divideBy(n)._floor());
                        this._addTilesFromCenterOut(s), (this.options.unloadInvisibleTiles || this.options.reuseTiles) && this._removeOtherTiles(s)
                    }
                }
            },
            _addTilesFromCenterOut: function(t) {
                var i, n, s, a = [],
                    r = t.getCenter();
                for (i = t.min.y; i <= t.max.y; i++)
                    for (n = t.min.x; n <= t.max.x; n++) s = new o.Point(n, i), this._tileShouldBeLoaded(s) && a.push(s);
                var h = a.length;
                if (0 !== h) {
                    a.sort(function(t, e) {
                        return t.distanceTo(r) - e.distanceTo(r)
                    });
                    var l = e.createDocumentFragment();
                    for (this._tilesToLoad || this.fire("loading"), this._tilesToLoad += h, n = 0; h > n; n++) this._addTile(a[n], l);
                    this._tileContainer.appendChild(l)
                }
            },
            _tileShouldBeLoaded: function(t) {
                if (t.x + ":" + t.y in this._tiles) return !1;
                var e = this.options;
                if (!e.continuousWorld) {
                    var i = this._getWrapTileNum();
                    if (e.noWrap && (t.x < 0 || t.x >= i.x) || t.y < 0 || t.y >= i.y) return !1
                }
                if (e.bounds) {
                    var n = e.tileSize,
                        o = t.multiplyBy(n),
                        s = o.add([n, n]),
                        a = this._map.unproject(o),
                        r = this._map.unproject(s);
                    if (e.continuousWorld || e.noWrap || (a = a.wrap(), r = r.wrap()), !e.bounds.intersects([a, r])) return !1
                }
                return !0
            },
            _removeOtherTiles: function(t) {
                var e, i, n, o;
                for (o in this._tiles) e = o.split(":"), i = parseInt(e[0], 10), n = parseInt(e[1], 10), (i < t.min.x || i > t.max.x || n < t.min.y || n > t.max.y) && this._removeTile(o)
            },
            _removeTile: function(t) {
                var e = this._tiles[t];
                this.fire("tileunload", {
                    tile: e,
                    url: e.src
                }), this.options.reuseTiles ? (o.DomUtil.removeClass(e, "leaflet-tile-loaded"), this._unusedTiles.push(e)) : e.parentNode === this._tileContainer && this._tileContainer.removeChild(e), o.Browser.android || (e.onload = null, e.src = o.Util.emptyImageUrl), delete this._tiles[t]
            },
            _addTile: function(t, e) {
                var i = this._getTilePos(t),
                    n = this._getTile();
                o.DomUtil.setPosition(n, i, o.Browser.chrome), this._tiles[t.x + ":" + t.y] = n, this._loadTile(n, t), n.parentNode !== this._tileContainer && e.appendChild(n)
            },
            _getZoomForUrl: function() {
                var t = this.options,
                    e = this._map.getZoom();
                return t.zoomReverse && (e = t.maxZoom - e), e += t.zoomOffset, t.maxNativeZoom ? Math.min(e, t.maxNativeZoom) : e
            },
            _getTilePos: function(t) {
                var e = this._map.getPixelOrigin(),
                    i = this._getTileSize();
                return t.multiplyBy(i).subtract(e)
            },
            getTileUrl: function(t) {
                return o.Util.template(this._url, o.extend({
                    s: this._getSubdomain(t),
                    z: t.z,
                    x: t.x,
                    y: t.y
                }, this.options))
            },
            _getWrapTileNum: function() {
                var t = this._map.options.crs,
                    e = t.getSize(this._map.getZoom());
                return e.divideBy(this._getTileSize())._floor()
            },
            _adjustTilePoint: function(t) {
                var e = this._getWrapTileNum();
                this.options.continuousWorld || this.options.noWrap || (t.x = (t.x % e.x + e.x) % e.x), this.options.tms && (t.y = e.y - t.y - 1), t.z = this._getZoomForUrl()
            },
            _getSubdomain: function(t) {
                var e = Math.abs(t.x + t.y) % this.options.subdomains.length;
                return this.options.subdomains[e]
            },
            _getTile: function() {
                if (this.options.reuseTiles && this._unusedTiles.length > 0) {
                    var t = this._unusedTiles.pop();
                    return this._resetTile(t), t
                }
                return this._createTile()
            },
            _resetTile: function() {},
            _createTile: function() {
                var t = o.DomUtil.create("img", "leaflet-tile");
                return t.style.width = t.style.height = this._getTileSize() + "px", t.galleryimg = "no", t.onselectstart = t.onmousemove = o.Util.falseFn, o.Browser.ielt9 && this.options.opacity !== i && o.DomUtil.setOpacity(t, this.options.opacity), o.Browser.mobileWebkit3d && (t.style.WebkitBackfaceVisibility = "hidden"), t
            },
            _loadTile: function(t, e) {
                t._layer = this, t.onload = this._tileOnLoad, t.onerror = this._tileOnError, this._adjustTilePoint(e), t.src = this.getTileUrl(e), this.fire("tileloadstart", {
                    tile: t,
                    url: t.src
                })
            },
            _tileLoaded: function() {
                this._tilesToLoad--, this._animated && o.DomUtil.addClass(this._tileContainer, "leaflet-zoom-animated"), this._tilesToLoad || (this.fire("load"), this._animated && (clearTimeout(this._clearBgBufferTimer), this._clearBgBufferTimer = setTimeout(o.bind(this._clearBgBuffer, this), 500)))
            },
            _tileOnLoad: function() {
                var t = this._layer;
                this.src !== o.Util.emptyImageUrl && (o.DomUtil.addClass(this, "leaflet-tile-loaded"), t.fire("tileload", {
                    tile: this,
                    url: this.src
                })), t._tileLoaded()
            },
            _tileOnError: function() {
                var t = this._layer;
                t.fire("tileerror", {
                    tile: this,
                    url: this.src
                });
                var e = t.options.errorTileUrl;
                e && (this.src = e), t._tileLoaded()
            }
        }), o.tileLayer = function(t, e) {
            return new o.TileLayer(t, e)
        }, o.TileLayer.WMS = o.TileLayer.extend({
            defaultWmsParams: {
                service: "WMS",
                request: "GetMap",
                version: "1.1.1",
                layers: "",
                styles: "",
                format: "image/jpeg",
                transparent: !1
            },
            initialize: function(t, e) {
                this._url = t;
                var i = o.extend({}, this.defaultWmsParams),
                    n = e.tileSize || this.options.tileSize;
                i.width = i.height = e.detectRetina && o.Browser.retina ? 2 * n : n;
                for (var s in e) this.options.hasOwnProperty(s) || "crs" === s || (i[s] = e[s]);
                this.wmsParams = i, o.setOptions(this, e)
            },
            onAdd: function(t) {
                this._crs = this.options.crs || t.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version);
                var e = this._wmsVersion >= 1.3 ? "crs" : "srs";
                this.wmsParams[e] = this._crs.code, o.TileLayer.prototype.onAdd.call(this, t)
            },
            getTileUrl: function(t) {
                var e = this._map,
                    i = this.options.tileSize,
                    n = t.multiplyBy(i),
                    s = n.add([i, i]),
                    a = this._crs.project(e.unproject(n, t.z)),
                    r = this._crs.project(e.unproject(s, t.z)),
                    h = this._wmsVersion >= 1.3 && this._crs === o.CRS.EPSG4326 ? [r.y, a.x, a.y, r.x].join(",") : [a.x, r.y, r.x, a.y].join(","),
                    l = o.Util.template(this._url, {
                        s: this._getSubdomain(t)
                    });
                return l + o.Util.getParamString(this.wmsParams, l, !0) + "&BBOX=" + h
            },
            setParams: function(t, e) {
                return o.extend(this.wmsParams, t), e || this.redraw(), this
            }
        }), o.tileLayer.wms = function(t, e) {
            return new o.TileLayer.WMS(t, e)
        }, o.TileLayer.Canvas = o.TileLayer.extend({
            options: {
                async: !1
            },
            initialize: function(t) {
                o.setOptions(this, t)
            },
            redraw: function() {
                this._map && (this._reset({
                    hard: !0
                }), this._update());
                for (var t in this._tiles) this._redrawTile(this._tiles[t]);
                return this
            },
            _redrawTile: function(t) {
                this.drawTile(t, t._tilePoint, this._map._zoom)
            },
            _createTile: function() {
                var t = o.DomUtil.create("canvas", "leaflet-tile");
                return t.width = t.height = this.options.tileSize, t.onselectstart = t.onmousemove = o.Util.falseFn, t
            },
            _loadTile: function(t, e) {
                t._layer = this, t._tilePoint = e, this._redrawTile(t), this.options.async || this.tileDrawn(t)
            },
            drawTile: function() {},
            tileDrawn: function(t) {
                this._tileOnLoad.call(t)
            }
        }), o.tileLayer.canvas = function(t) {
            return new o.TileLayer.Canvas(t)
        }, o.ImageOverlay = o.Class.extend({
            includes: o.Mixin.Events,
            options: {
                opacity: 1
            },
            initialize: function(t, e, i) {
                this._url = t, this._bounds = o.latLngBounds(e), o.setOptions(this, i)
            },
            onAdd: function(t) {
                this._map = t, this._image || this._initImage(), t._panes.overlayPane.appendChild(this._image), t.on("viewreset", this._reset, this), t.options.zoomAnimation && o.Browser.any3d && t.on("zoomanim", this._animateZoom, this), this._reset()
            },
            onRemove: function(t) {
                t.getPanes().overlayPane.removeChild(this._image), t.off("viewreset", this._reset, this), t.options.zoomAnimation && t.off("zoomanim", this._animateZoom, this)
            },
            addTo: function(t) {
                return t.addLayer(this), this
            },
            setOpacity: function(t) {
                return this.options.opacity = t, this._updateOpacity(), this
            },
            bringToFront: function() {
                return this._image && this._map._panes.overlayPane.appendChild(this._image), this
            },
            bringToBack: function() {
                var t = this._map._panes.overlayPane;
                return this._image && t.insertBefore(this._image, t.firstChild), this
            },
            setUrl: function(t) {
                this._url = t, this._image.src = this._url
            },
            getAttribution: function() {
                return this.options.attribution
            },
            _initImage: function() {
                this._image = o.DomUtil.create("img", "leaflet-image-layer"), this._map.options.zoomAnimation && o.Browser.any3d ? o.DomUtil.addClass(this._image, "leaflet-zoom-animated") : o.DomUtil.addClass(this._image, "leaflet-zoom-hide"), this._updateOpacity(), o.extend(this._image, {
                    galleryimg: "no",
                    onselectstart: o.Util.falseFn,
                    onmousemove: o.Util.falseFn,
                    onload: o.bind(this._onImageLoad, this),
                    src: this._url
                })
            },
            _animateZoom: function(t) {
                var e = this._map,
                    i = this._image,
                    n = e.getZoomScale(t.zoom),
                    s = this._bounds.getNorthWest(),
                    a = this._bounds.getSouthEast(),
                    r = e._latLngToNewLayerPoint(s, t.zoom, t.center),
                    h = e._latLngToNewLayerPoint(a, t.zoom, t.center)._subtract(r),
                    l = r._add(h._multiplyBy(.5 * (1 - 1 / n)));
                i.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(l) + " scale(" + n + ") "
            },
            _reset: function() {
                var t = this._image,
                    e = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),
                    i = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);
                o.DomUtil.setPosition(t, e), t.style.width = i.x + "px", t.style.height = i.y + "px"
            },
            _onImageLoad: function() {
                this.fire("load")
            },
            _updateOpacity: function() {
                o.DomUtil.setOpacity(this._image, this.options.opacity)
            }
        }), o.imageOverlay = function(t, e, i) {
            return new o.ImageOverlay(t, e, i)
        }, o.Icon = o.Class.extend({
            options: {
                className: ""
            },
            initialize: function(t) {
                o.setOptions(this, t)
            },
            createIcon: function(t) {
                return this._createIcon("icon", t)
            },
            createShadow: function(t) {
                return this._createIcon("shadow", t)
            },
            _createIcon: function(t, e) {
                var i = this._getIconUrl(t);
                if (!i) {
                    if ("icon" === t) throw new Error("iconUrl not set in Icon options (see the docs).");
                    return null
                }
                var n;
                return n = e && "IMG" === e.tagName ? this._createImg(i, e) : this._createImg(i), this._setIconStyles(n, t), n
            },
            _setIconStyles: function(t, e) {
                var i, n = this.options,
                    s = o.point(n[e + "Size"]);
                i = o.point("shadow" === e ? n.shadowAnchor || n.iconAnchor : n.iconAnchor), !i && s && (i = s.divideBy(2, !0)), t.className = "leaflet-marker-" + e + " " + n.className, i && (t.style.marginLeft = -i.x + "px", t.style.marginTop = -i.y + "px"), s && (t.style.width = s.x + "px", t.style.height = s.y + "px")
            },
            _createImg: function(t, i) {
                return i = i || e.createElement("img"), i.src = t, i
            },
            _getIconUrl: function(t) {
                return o.Browser.retina && this.options[t + "RetinaUrl"] ? this.options[t + "RetinaUrl"] : this.options[t + "Url"]
            }
        }), o.icon = function(t) {
            return new o.Icon(t)
        }, o.Icon.Default = o.Icon.extend({
            options: {
                iconSize: [25, 41],
                iconAnchor: [12, 41],
                popupAnchor: [1, -34],
                shadowSize: [41, 41]
            },
            _getIconUrl: function(t) {
                var e = t + "Url";
                if (this.options[e]) return this.options[e];
                o.Browser.retina && "icon" === t && (t += "-2x");
                var i = o.Icon.Default.imagePath;
                if (!i) throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");
                return i + "/marker-" + t + ".png"
            }
        }), o.Icon.Default.imagePath = function() {
            var t, i, n, o, s, a = e.getElementsByTagName("script"),
                r = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;
            for (t = 0, i = a.length; i > t; t++)
                if (n = a[t].src, o = n.match(r)) return s = n.split(r)[0], (s ? s + "/" : "") + "images"
        }(), o.Marker = o.Class.extend({
            includes: o.Mixin.Events,
            options: {
                icon: new o.Icon.Default,
                title: "",
                alt: "",
                clickable: !0,
                draggable: !1,
                keyboard: !0,
                zIndexOffset: 0,
                opacity: 1,
                riseOnHover: !1,
                riseOffset: 250
            },
            initialize: function(t, e) {
                o.setOptions(this, e), this._latlng = o.latLng(t)
            },
            onAdd: function(t) {
                this._map = t, t.on("viewreset", this.update, this), this._initIcon(), this.update(), this.fire("add"), t.options.zoomAnimation && t.options.markerZoomAnimation && t.on("zoomanim", this._animateZoom, this)
            },
            addTo: function(t) {
                return t.addLayer(this), this
            },
            onRemove: function(t) {
                this.dragging && this.dragging.disable(), this._removeIcon(), this._removeShadow(), this.fire("remove"), t.off({
                    viewreset: this.update,
                    zoomanim: this._animateZoom
                }, this), this._map = null
            },
            getLatLng: function() {
                return this._latlng
            },
            setLatLng: function(t) {
                return this._latlng = o.latLng(t), this.update(), this.fire("move", {
                    latlng: this._latlng
                })
            },
            setZIndexOffset: function(t) {
                return this.options.zIndexOffset = t, this.update(), this
            },
            setIcon: function(t) {
                return this.options.icon = t, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup), this
            },
            update: function() {
                if (this._icon) {
                    var t = this._map.latLngToLayerPoint(this._latlng).round();
                    this._setPos(t)
                }
                return this
            },
            _initIcon: function() {
                var t = this.options,
                    e = this._map,
                    i = e.options.zoomAnimation && e.options.markerZoomAnimation,
                    n = i ? "leaflet-zoom-animated" : "leaflet-zoom-hide",
                    s = t.icon.createIcon(this._icon),
                    a = !1;
                s !== this._icon && (this._icon && this._removeIcon(), a = !0, t.title && (s.title = t.title), t.alt && (s.alt = t.alt)), o.DomUtil.addClass(s, n), t.keyboard && (s.tabIndex = "0"), this._icon = s, this._initInteraction(), t.riseOnHover && o.DomEvent.on(s, "mouseover", this._bringToFront, this).on(s, "mouseout", this._resetZIndex, this);
                var r = t.icon.createShadow(this._shadow),
                    h = !1;
                r !== this._shadow && (this._removeShadow(), h = !0), r && o.DomUtil.addClass(r, n), this._shadow = r, t.opacity < 1 && this._updateOpacity();
                var l = this._map._panes;
                a && l.markerPane.appendChild(this._icon), r && h && l.shadowPane.appendChild(this._shadow)
            },
            _removeIcon: function() {
                this.options.riseOnHover && o.DomEvent.off(this._icon, "mouseover", this._bringToFront).off(this._icon, "mouseout", this._resetZIndex), this._map._panes.markerPane.removeChild(this._icon), this._icon = null
            },
            _removeShadow: function() {
                this._shadow && this._map._panes.shadowPane.removeChild(this._shadow), this._shadow = null
            },
            _setPos: function(t) {
                o.DomUtil.setPosition(this._icon, t), this._shadow && o.DomUtil.setPosition(this._shadow, t), this._zIndex = t.y + this.options.zIndexOffset, this._resetZIndex()
            },
            _updateZIndex: function(t) {
                this._icon.style.zIndex = this._zIndex + t
            },
            _animateZoom: function(t) {
                var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round();
                this._setPos(e)
            },
            _initInteraction: function() {
                if (this.options.clickable) {
                    var t = this._icon,
                        e = ["dblclick", "mousedown", "mouseover", "mouseout", "contextmenu"];
                    o.DomUtil.addClass(t, "leaflet-clickable"), o.DomEvent.on(t, "click", this._onMouseClick, this), o.DomEvent.on(t, "keypress", this._onKeyPress, this);
                    for (var i = 0; i < e.length; i++) o.DomEvent.on(t, e[i], this._fireMouseEvent, this);
                    o.Handler.MarkerDrag && (this.dragging = new o.Handler.MarkerDrag(this), this.options.draggable && this.dragging.enable())
                }
            },
            _onMouseClick: function(t) {
                var e = this.dragging && this.dragging.moved();
                (this.hasEventListeners(t.type) || e) && o.DomEvent.stopPropagation(t), e || (this.dragging && this.dragging._enabled || !this._map.dragging || !this._map.dragging.moved()) && this.fire(t.type, {
                    originalEvent: t,
                    latlng: this._latlng
                })
            },
            _onKeyPress: function(t) {
                13 === t.keyCode && this.fire("click", {
                    originalEvent: t,
                    latlng: this._latlng
                })
            },
            _fireMouseEvent: function(t) {
                this.fire(t.type, {
                    originalEvent: t,
                    latlng: this._latlng
                }), "contextmenu" === t.type && this.hasEventListeners(t.type) && o.DomEvent.preventDefault(t), "mousedown" !== t.type ? o.DomEvent.stopPropagation(t) : o.DomEvent.preventDefault(t)
            },
            setOpacity: function(t) {
                return this.options.opacity = t, this._map && this._updateOpacity(), this
            },
            _updateOpacity: function() {
                o.DomUtil.setOpacity(this._icon, this.options.opacity), this._shadow && o.DomUtil.setOpacity(this._shadow, this.options.opacity)
            },
            _bringToFront: function() {
                this._updateZIndex(this.options.riseOffset)
            },
            _resetZIndex: function() {
                this._updateZIndex(0)
            }
        }), o.marker = function(t, e) {
            return new o.Marker(t, e)
        }, o.DivIcon = o.Icon.extend({
            options: {
                iconSize: [12, 12],
                className: "leaflet-div-icon",
                html: !1
            },
            createIcon: function(t) {
                var i = t && "DIV" === t.tagName ? t : e.createElement("div"),
                    n = this.options;
                return i.innerHTML = n.html !== !1 ? n.html : "", n.bgPos && (i.style.backgroundPosition = -n.bgPos.x + "px " + -n.bgPos.y + "px"), this._setIconStyles(i, "icon"), i
            },
            createShadow: function() {
                return null
            }
        }), o.divIcon = function(t) {
            return new o.DivIcon(t)
        }, o.Map.mergeOptions({
            closePopupOnClick: !0
        }), o.Popup = o.Class.extend({
            includes: o.Mixin.Events,
            options: {
                minWidth: 50,
                maxWidth: 300,
                autoPan: !0,
                closeButton: !0,
                offset: [0, 7],
                autoPanPadding: [5, 5],
                keepInView: !1,
                className: "",
                zoomAnimation: !0
            },
            initialize: function(t, e) {
                o.setOptions(this, t), this._source = e, this._animated = o.Browser.any3d && this.options.zoomAnimation, this._isOpen = !1
            },
            onAdd: function(t) {
                this._map = t, this._container || this._initLayout();
                var e = t.options.fadeAnimation;
                e && o.DomUtil.setOpacity(this._container, 0), t._panes.popupPane.appendChild(this._container), t.on(this._getEvents(), this), this.update(), e && o.DomUtil.setOpacity(this._container, 1), this.fire("open"), t.fire("popupopen", {
                    popup: this
                }), this._source && this._source.fire("popupopen", {
                    popup: this
                })
            },
            addTo: function(t) {
                return t.addLayer(this), this
            },
            openOn: function(t) {
                return t.openPopup(this), this
            },
            onRemove: function(t) {
                t._panes.popupPane.removeChild(this._container), o.Util.falseFn(this._container.offsetWidth), t.off(this._getEvents(), this), t.options.fadeAnimation && o.DomUtil.setOpacity(this._container, 0), this._map = null, this.fire("close"), t.fire("popupclose", {
                    popup: this
                }), this._source && this._source.fire("popupclose", {
                    popup: this
                })
            },
            getLatLng: function() {
                return this._latlng
            },
            setLatLng: function(t) {
                return this._latlng = o.latLng(t), this._map && (this._updatePosition(), this._adjustPan()), this
            },
            getContent: function() {
                return this._content
            },
            setContent: function(t) {
                return this._content = t, this.update(), this
            },
            update: function() {
                this._map && (this._container.style.visibility = "hidden", this._updateContent(), this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", this._adjustPan())
            },
            _getEvents: function() {
                var t = {
                    viewreset: this._updatePosition
                };
                return this._animated && (t.zoomanim = this._zoomAnimation), ("closeOnClick" in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this._close), this.options.keepInView && (t.moveend = this._adjustPan), t
            },
            _close: function() {
                this._map && this._map.closePopup(this)
            },
            _initLayout: function() {
                var t, e = "leaflet-popup",
                    i = e + " " + this.options.className + " leaflet-zoom-" + (this._animated ? "animated" : "hide"),
                    n = this._container = o.DomUtil.create("div", i);
                this.options.closeButton && (t = this._closeButton = o.DomUtil.create("a", e + "-close-button", n), t.href = "#close", t.innerHTML = "&#215;", o.DomEvent.disableClickPropagation(t), o.DomEvent.on(t, "click", this._onCloseButtonClick, this));
                var s = this._wrapper = o.DomUtil.create("div", e + "-content-wrapper", n);
                o.DomEvent.disableClickPropagation(s), this._contentNode = o.DomUtil.create("div", e + "-content", s), o.DomEvent.disableScrollPropagation(this._contentNode), o.DomEvent.on(s, "contextmenu", o.DomEvent.stopPropagation), this._tipContainer = o.DomUtil.create("div", e + "-tip-container", n), this._tip = o.DomUtil.create("div", e + "-tip", this._tipContainer)
            },
            _updateContent: function() {
                if (this._content) {
                    if ("string" == typeof this._content) this._contentNode.innerHTML = this._content;
                    else {
                        for (; this._contentNode.hasChildNodes();) this._contentNode.removeChild(this._contentNode.firstChild);
                        this._contentNode.appendChild(this._content)
                    }
                    this.fire("contentupdate")
                }
            },
            _updateLayout: function() {
                var t = this._contentNode,
                    e = t.style;
                e.width = "", e.whiteSpace = "nowrap";
                var i = t.offsetWidth;
                i = Math.min(i, this.options.maxWidth), i = Math.max(i, this.options.minWidth), e.width = i + 1 + "px", e.whiteSpace = "", e.height = "";
                var n = t.offsetHeight,
                    s = this.options.maxHeight,
                    a = "leaflet-popup-scrolled";
                s && n > s ? (e.height = s + "px", o.DomUtil.addClass(t, a)) : o.DomUtil.removeClass(t, a), this._containerWidth = this._container.offsetWidth
            },
            _updatePosition: function() {
                if (this._map) {
                    var t = this._map.latLngToLayerPoint(this._latlng),
                        e = this._animated,
                        i = o.point(this.options.offset);
                    e && o.DomUtil.setPosition(this._container, t), this._containerBottom = -i.y - (e ? 0 : t.y), this._containerLeft = -Math.round(this._containerWidth / 2) + i.x + (e ? 0 : t.x), this._container.style.bottom = this._containerBottom + "px", this._container.style.left = this._containerLeft + "px"
                }
            },
            _zoomAnimation: function(t) {
                var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center);
                o.DomUtil.setPosition(this._container, e)
            },
            _adjustPan: function() {
                if (this.options.autoPan) {
                    var t = this._map,
                        e = this._container.offsetHeight,
                        i = this._containerWidth,
                        n = new o.Point(this._containerLeft, -e - this._containerBottom);
                    this._animated && n._add(o.DomUtil.getPosition(this._container));
                    var s = t.layerPointToContainerPoint(n),
                        a = o.point(this.options.autoPanPadding),
                        r = o.point(this.options.autoPanPaddingTopLeft || a),
                        h = o.point(this.options.autoPanPaddingBottomRight || a),
                        l = t.getSize(),
                        u = 0,
                        c = 0;
                    s.x + i + h.x > l.x && (u = s.x + i - l.x + h.x), s.x - u - r.x < 0 && (u = s.x - r.x), s.y + e + h.y > l.y && (c = s.y + e - l.y + h.y), s.y - c - r.y < 0 && (c = s.y - r.y), (u || c) && t.fire("autopanstart").panBy([u, c])
                }
            },
            _onCloseButtonClick: function(t) {
                this._close(), o.DomEvent.stop(t)
            }
        }), o.popup = function(t, e) {
            return new o.Popup(t, e)
        }, o.Map.include({
            openPopup: function(t, e, i) {
                if (this.closePopup(), !(t instanceof o.Popup)) {
                    var n = t;
                    t = new o.Popup(i).setLatLng(e).setContent(n)
                }
                return t._isOpen = !0, this._popup = t, this.addLayer(t)
            },
            closePopup: function(t) {
                return t && t !== this._popup || (t = this._popup, this._popup = null), t && (this.removeLayer(t), t._isOpen = !1), this
            }
        }), o.Marker.include({
            openPopup: function() {
                return this._popup && this._map && !this._map.hasLayer(this._popup) && (this._popup.setLatLng(this._latlng), this._map.openPopup(this._popup)), this
            },
            closePopup: function() {
                return this._popup && this._popup._close(), this
            },
            togglePopup: function() {
                return this._popup && (this._popup._isOpen ? this.closePopup() : this.openPopup()), this
            },
            bindPopup: function(t, e) {
                var i = o.point(this.options.icon.options.popupAnchor || [0, 0]);
                return i = i.add(o.Popup.prototype.options.offset), e && e.offset && (i = i.add(e.offset)), e = o.extend({
                    offset: i
                }, e), this._popupHandlersAdded || (this.on("click", this.togglePopup, this).on("remove", this.closePopup, this).on("move", this._movePopup, this), this._popupHandlersAdded = !0), t instanceof o.Popup ? (o.setOptions(t, e), this._popup = t) : this._popup = new o.Popup(e, this).setContent(t), this
            },
            setPopupContent: function(t) {
                return this._popup && this._popup.setContent(t), this
            },
            unbindPopup: function() {
                return this._popup && (this._popup = null, this.off("click", this.togglePopup, this).off("remove", this.closePopup, this).off("move", this._movePopup, this), this._popupHandlersAdded = !1), this
            },
            getPopup: function() {
                return this._popup
            },
            _movePopup: function(t) {
                this._popup.setLatLng(t.latlng)
            }
        }), o.LayerGroup = o.Class.extend({
            initialize: function(t) {
                this._layers = {};
                var e, i;
                if (t)
                    for (e = 0, i = t.length; i > e; e++) this.addLayer(t[e])
            },
            addLayer: function(t) {
                var e = this.getLayerId(t);
                return this._layers[e] = t, this._map && this._map.addLayer(t), this
            },
            removeLayer: function(t) {
                var e = t in this._layers ? t : this.getLayerId(t);
                return this._map && this._layers[e] && this._map.removeLayer(this._layers[e]), delete this._layers[e], this
            },
            hasLayer: function(t) {
                return !!t && (t in this._layers || this.getLayerId(t) in this._layers)
            },
            clearLayers: function() {
                return this.eachLayer(this.removeLayer, this), this
            },
            invoke: function(t) {
                var e, i, n = Array.prototype.slice.call(arguments, 1);
                for (e in this._layers) i = this._layers[e], i[t] && i[t].apply(i, n);
                return this
            },
            onAdd: function(t) {
                this._map = t, this.eachLayer(t.addLayer, t)
            },
            onRemove: function(t) {
                this.eachLayer(t.removeLayer, t), this._map = null
            },
            addTo: function(t) {
                return t.addLayer(this), this
            },
            eachLayer: function(t, e) {
                for (var i in this._layers) t.call(e, this._layers[i]);
                return this
            },
            getLayer: function(t) {
                return this._layers[t]
            },
            getLayers: function() {
                var t = [];
                for (var e in this._layers) t.push(this._layers[e]);
                return t
            },
            setZIndex: function(t) {
                return this.invoke("setZIndex", t)
            },
            getLayerId: function(t) {
                return o.stamp(t)
            }
        }), o.layerGroup = function(t) {
            return new o.LayerGroup(t)
        }, o.FeatureGroup = o.LayerGroup.extend({
            includes: o.Mixin.Events,
            statics: {
                EVENTS: "click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"
            },
            addLayer: function(t) {
                return this.hasLayer(t) ? this : ("on" in t && t.on(o.FeatureGroup.EVENTS, this._propagateEvent, this), o.LayerGroup.prototype.addLayer.call(this, t), this._popupContent && t.bindPopup && t.bindPopup(this._popupContent, this._popupOptions), this.fire("layeradd", {
                    layer: t
                }))
            },
            removeLayer: function(t) {
                return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]), t.off(o.FeatureGroup.EVENTS, this._propagateEvent, this), o.LayerGroup.prototype.removeLayer.call(this, t), this._popupContent && this.invoke("unbindPopup"), this.fire("layerremove", {
                    layer: t
                })) : this
            },
            bindPopup: function(t, e) {
                return this._popupContent = t, this._popupOptions = e, this.invoke("bindPopup", t, e)
            },
            openPopup: function(t) {
                for (var e in this._layers) {
                    this._layers[e].openPopup(t);
                    break
                }
                return this
            },
            setStyle: function(t) {
                return this.invoke("setStyle", t)
            },
            bringToFront: function() {
                return this.invoke("bringToFront")
            },
            bringToBack: function() {
                return this.invoke("bringToBack")
            },
            getBounds: function() {
                var t = new o.LatLngBounds;
                return this.eachLayer(function(e) {
                    t.extend(e instanceof o.Marker ? e.getLatLng() : e.getBounds())
                }), t
            },
            _propagateEvent: function(t) {
                t = o.extend({
                    layer: t.target,
                    target: this
                }, t), this.fire(t.type, t)
            }
        }), o.featureGroup = function(t) {
            return new o.FeatureGroup(t)
        }, o.Path = o.Class.extend({
            includes: [o.Mixin.Events],
            statics: {
                CLIP_PADDING: function() {
                    var e = o.Browser.mobile ? 1280 : 2e3,
                        i = (e / Math.max(t.outerWidth, t.outerHeight) - 1) / 2;
                    return Math.max(0, Math.min(.5, i))
                }()
            },
            options: {
                stroke: !0,
                color: "#0033ff",
                dashArray: null,
                lineCap: null,
                lineJoin: null,
                weight: 5,
                opacity: .5,
                fill: !1,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            },
            initialize: function(t) {
                o.setOptions(this, t)
            },
            onAdd: function(t) {
                this._map = t, this._container || (this._initElements(), this._initEvents()), this.projectLatlngs(), this._updatePath(), this._container && this._map._pathRoot.appendChild(this._container), this.fire("add"), t.on({
                    viewreset: this.projectLatlngs,
                    moveend: this._updatePath
                }, this)
            },
            addTo: function(t) {
                return t.addLayer(this), this
            },
            onRemove: function(t) {
                t._pathRoot.removeChild(this._container), this.fire("remove"), this._map = null, o.Browser.vml && (this._container = null, this._stroke = null, this._fill = null), t.off({
                    viewreset: this.projectLatlngs,
                    moveend: this._updatePath
                }, this)
            },
            projectLatlngs: function() {},
            setStyle: function(t) {
                return o.setOptions(this, t), this._container && this._updateStyle(), this
            },
            redraw: function() {
                return this._map && (this.projectLatlngs(), this._updatePath()), this
            }
        }), o.Map.include({
            _updatePathViewport: function() {
                var t = o.Path.CLIP_PADDING,
                    e = this.getSize(),
                    i = o.DomUtil.getPosition(this._mapPane),
                    n = i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),
                    s = n.add(e.multiplyBy(1 + 2 * t)._round());
                this._pathViewport = new o.Bounds(n, s)
            }
        }), o.Path.SVG_NS = "http://www.w3.org/2000/svg", o.Browser.svg = !(!e.createElementNS || !e.createElementNS(o.Path.SVG_NS, "svg").createSVGRect), o.Path = o.Path.extend({
            statics: {
                SVG: o.Browser.svg
            },
            bringToFront: function() {
                var t = this._map._pathRoot,
                    e = this._container;
                return e && t.lastChild !== e && t.appendChild(e), this
            },
            bringToBack: function() {
                var t = this._map._pathRoot,
                    e = this._container,
                    i = t.firstChild;
                return e && i !== e && t.insertBefore(e, i), this
            },
            getPathString: function() {},
            _createElement: function(t) {
                return e.createElementNS(o.Path.SVG_NS, t)
            },
            _initElements: function() {
                this._map._initPathRoot(), this._initPath(), this._initStyle()
            },
            _initPath: function() {
                this._container = this._createElement("g"), this._path = this._createElement("path"), this.options.className && o.DomUtil.addClass(this._path, this.options.className), this._container.appendChild(this._path)
            },
            _initStyle: function() {
                this.options.stroke && (this._path.setAttribute("stroke-linejoin", "round"), this._path.setAttribute("stroke-linecap", "round")), this.options.fill && this._path.setAttribute("fill-rule", "evenodd"), this.options.pointerEvents && this._path.setAttribute("pointer-events", this.options.pointerEvents), this.options.clickable || this.options.pointerEvents || this._path.setAttribute("pointer-events", "none"), this._updateStyle()
            },
            _updateStyle: function() {
                this.options.stroke ? (this._path.setAttribute("stroke", this.options.color), this._path.setAttribute("stroke-opacity", this.options.opacity), this._path.setAttribute("stroke-width", this.options.weight), this.options.dashArray ? this._path.setAttribute("stroke-dasharray", this.options.dashArray) : this._path.removeAttribute("stroke-dasharray"), this.options.lineCap && this._path.setAttribute("stroke-linecap", this.options.lineCap), this.options.lineJoin && this._path.setAttribute("stroke-linejoin", this.options.lineJoin)) : this._path.setAttribute("stroke", "none"), this.options.fill ? (this._path.setAttribute("fill", this.options.fillColor || this.options.color), this._path.setAttribute("fill-opacity", this.options.fillOpacity)) : this._path.setAttribute("fill", "none")
            },
            _updatePath: function() {
                var t = this.getPathString();
                t || (t = "M0 0"), this._path.setAttribute("d", t)
            },
            _initEvents: function() {
                if (this.options.clickable) {
                    (o.Browser.svg || !o.Browser.vml) && o.DomUtil.addClass(this._path, "leaflet-clickable"), o.DomEvent.on(this._container, "click", this._onMouseClick, this);
                    for (var t = ["dblclick", "mousedown", "mouseover", "mouseout", "mousemove", "contextmenu"], e = 0; e < t.length; e++) o.DomEvent.on(this._container, t[e], this._fireMouseEvent, this)
                }
            },
            _onMouseClick: function(t) {
                this._map.dragging && this._map.dragging.moved() || this._fireMouseEvent(t)
            },
            _fireMouseEvent: function(t) {
                if (this.hasEventListeners(t.type)) {
                    var e = this._map,
                        i = e.mouseEventToContainerPoint(t),
                        n = e.containerPointToLayerPoint(i),
                        s = e.layerPointToLatLng(n);
                    this.fire(t.type, {
                        latlng: s,
                        layerPoint: n,
                        containerPoint: i,
                        originalEvent: t
                    }), "contextmenu" === t.type && o.DomEvent.preventDefault(t), "mousemove" !== t.type && o.DomEvent.stopPropagation(t)
                }
            }
        }), o.Map.include({
            _initPathRoot: function() {
                this._pathRoot || (this._pathRoot = o.Path.prototype._createElement("svg"), this._panes.overlayPane.appendChild(this._pathRoot),
                    this.options.zoomAnimation && o.Browser.any3d ? (o.DomUtil.addClass(this._pathRoot, "leaflet-zoom-animated"), this.on({
                        zoomanim: this._animatePathZoom,
                        zoomend: this._endPathZoom
                    })) : o.DomUtil.addClass(this._pathRoot, "leaflet-zoom-hide"), this.on("moveend", this._updateSvgViewport), this._updateSvgViewport())
            },
            _animatePathZoom: function(t) {
                var e = this.getZoomScale(t.zoom),
                    i = this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);
                this._pathRoot.style[o.DomUtil.TRANSFORM] = o.DomUtil.getTranslateString(i) + " scale(" + e + ") ", this._pathZooming = !0
            },
            _endPathZoom: function() {
                this._pathZooming = !1
            },
            _updateSvgViewport: function() {
                if (!this._pathZooming) {
                    this._updatePathViewport();
                    var t = this._pathViewport,
                        e = t.min,
                        i = t.max,
                        n = i.x - e.x,
                        s = i.y - e.y,
                        a = this._pathRoot,
                        r = this._panes.overlayPane;
                    o.Browser.mobileWebkit && r.removeChild(a), o.DomUtil.setPosition(a, e), a.setAttribute("width", n), a.setAttribute("height", s), a.setAttribute("viewBox", [e.x, e.y, n, s].join(" ")), o.Browser.mobileWebkit && r.appendChild(a)
                }
            }
        }), o.Path.include({
            bindPopup: function(t, e) {
                return t instanceof o.Popup ? this._popup = t : ((!this._popup || e) && (this._popup = new o.Popup(e, this)), this._popup.setContent(t)), this._popupHandlersAdded || (this.on("click", this._openPopup, this).on("remove", this.closePopup, this), this._popupHandlersAdded = !0), this
            },
            unbindPopup: function() {
                return this._popup && (this._popup = null, this.off("click", this._openPopup).off("remove", this.closePopup), this._popupHandlersAdded = !1), this
            },
            openPopup: function(t) {
                return this._popup && (t = t || this._latlng || this._latlngs[Math.floor(this._latlngs.length / 2)], this._openPopup({
                    latlng: t
                })), this
            },
            closePopup: function() {
                return this._popup && this._popup._close(), this
            },
            _openPopup: function(t) {
                this._popup.setLatLng(t.latlng), this._map.openPopup(this._popup)
            }
        }), o.Browser.vml = !o.Browser.svg && function() {
            try {
                var t = e.createElement("div");
                t.innerHTML = '<v:shape adj="1"/>';
                var i = t.firstChild;
                return i.style.behavior = "url(#default#VML)", i && "object" == typeof i.adj
            } catch (t) {
                return !1
            }
        }(), o.Path = o.Browser.svg || !o.Browser.vml ? o.Path : o.Path.extend({
            statics: {
                VML: !0,
                CLIP_PADDING: .02
            },
            _createElement: function() {
                try {
                    return e.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"),
                        function(t) {
                            return e.createElement("<lvml:" + t + ' class="lvml">')
                        }
                } catch (t) {
                    return function(t) {
                        return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')
                    }
                }
            }(),
            _initPath: function() {
                var t = this._container = this._createElement("shape");
                o.DomUtil.addClass(t, "leaflet-vml-shape" + (this.options.className ? " " + this.options.className : "")), this.options.clickable && o.DomUtil.addClass(t, "leaflet-clickable"), t.coordsize = "1 1", this._path = this._createElement("path"), t.appendChild(this._path), this._map._pathRoot.appendChild(t)
            },
            _initStyle: function() {
                this._updateStyle()
            },
            _updateStyle: function() {
                var t = this._stroke,
                    e = this._fill,
                    i = this.options,
                    n = this._container;
                n.stroked = i.stroke, n.filled = i.fill, i.stroke ? (t || (t = this._stroke = this._createElement("stroke"), t.endcap = "round", n.appendChild(t)), t.weight = i.weight + "px", t.color = i.color, t.opacity = i.opacity, t.dashStyle = i.dashArray ? o.Util.isArray(i.dashArray) ? i.dashArray.join(" ") : i.dashArray.replace(/( *, *)/g, " ") : "", i.lineCap && (t.endcap = i.lineCap.replace("butt", "flat")), i.lineJoin && (t.joinstyle = i.lineJoin)) : t && (n.removeChild(t), this._stroke = null), i.fill ? (e || (e = this._fill = this._createElement("fill"), n.appendChild(e)), e.color = i.fillColor || i.color, e.opacity = i.fillOpacity) : e && (n.removeChild(e), this._fill = null)
            },
            _updatePath: function() {
                var t = this._container.style;
                t.display = "none", this._path.v = this.getPathString() + " ", t.display = ""
            }
        }), o.Map.include(o.Browser.svg || !o.Browser.vml ? {} : {
            _initPathRoot: function() {
                if (!this._pathRoot) {
                    var t = this._pathRoot = e.createElement("div");
                    t.className = "leaflet-vml-container", this._panes.overlayPane.appendChild(t), this.on("moveend", this._updatePathViewport), this._updatePathViewport()
                }
            }
        }), o.Browser.canvas = function() {
            return !!e.createElement("canvas").getContext
        }(), o.Path = o.Path.SVG && !t.L_PREFER_CANVAS || !o.Browser.canvas ? o.Path : o.Path.extend({
            statics: {
                CANVAS: !0,
                SVG: !1
            },
            redraw: function() {
                return this._map && (this.projectLatlngs(), this._requestUpdate()), this
            },
            setStyle: function(t) {
                return o.setOptions(this, t), this._map && (this._updateStyle(), this._requestUpdate()), this
            },
            onRemove: function(t) {
                t.off("viewreset", this.projectLatlngs, this).off("moveend", this._updatePath, this), this.options.clickable && (this._map.off("click", this._onClick, this), this._map.off("mousemove", this._onMouseMove, this)), this._requestUpdate(), this.fire("remove"), this._map = null
            },
            _requestUpdate: function() {
                this._map && !o.Path._updateRequest && (o.Path._updateRequest = o.Util.requestAnimFrame(this._fireMapMoveEnd, this._map))
            },
            _fireMapMoveEnd: function() {
                o.Path._updateRequest = null, this.fire("moveend")
            },
            _initElements: function() {
                this._map._initPathRoot(), this._ctx = this._map._canvasCtx
            },
            _updateStyle: function() {
                var t = this.options;
                t.stroke && (this._ctx.lineWidth = t.weight, this._ctx.strokeStyle = t.color), t.fill && (this._ctx.fillStyle = t.fillColor || t.color)
            },
            _drawPath: function() {
                var t, e, i, n, s, a;
                for (this._ctx.beginPath(), t = 0, i = this._parts.length; i > t; t++) {
                    for (e = 0, n = this._parts[t].length; n > e; e++) s = this._parts[t][e], a = (0 === e ? "move" : "line") + "To", this._ctx[a](s.x, s.y);
                    this instanceof o.Polygon && this._ctx.closePath()
                }
            },
            _checkIfEmpty: function() {
                return !this._parts.length
            },
            _updatePath: function() {
                if (!this._checkIfEmpty()) {
                    var t = this._ctx,
                        e = this.options;
                    this._drawPath(), t.save(), this._updateStyle(), e.fill && (t.globalAlpha = e.fillOpacity, t.fill()), e.stroke && (t.globalAlpha = e.opacity, t.stroke()), t.restore()
                }
            },
            _initEvents: function() {
                this.options.clickable && (this._map.on("mousemove", this._onMouseMove, this), this._map.on("click", this._onClick, this))
            },
            _onClick: function(t) {
                this._containsPoint(t.layerPoint) && this.fire("click", t)
            },
            _onMouseMove: function(t) {
                this._map && !this._map._animatingZoom && (this._containsPoint(t.layerPoint) ? (this._ctx.canvas.style.cursor = "pointer", this._mouseInside = !0, this.fire("mouseover", t)) : this._mouseInside && (this._ctx.canvas.style.cursor = "", this._mouseInside = !1, this.fire("mouseout", t)))
            }
        }), o.Map.include(o.Path.SVG && !t.L_PREFER_CANVAS || !o.Browser.canvas ? {} : {
            _initPathRoot: function() {
                var t, i = this._pathRoot;
                i || (i = this._pathRoot = e.createElement("canvas"), i.style.position = "absolute", t = this._canvasCtx = i.getContext("2d"), t.lineCap = "round", t.lineJoin = "round", this._panes.overlayPane.appendChild(i), this.options.zoomAnimation && (this._pathRoot.className = "leaflet-zoom-animated", this.on("zoomanim", this._animatePathZoom), this.on("zoomend", this._endPathZoom)), this.on("moveend", this._updateCanvasViewport), this._updateCanvasViewport())
            },
            _updateCanvasViewport: function() {
                if (!this._pathZooming) {
                    this._updatePathViewport();
                    var t = this._pathViewport,
                        e = t.min,
                        i = t.max.subtract(e),
                        n = this._pathRoot;
                    o.DomUtil.setPosition(n, e), n.width = i.x, n.height = i.y, n.getContext("2d").translate(-e.x, -e.y)
                }
            }
        }), o.LineUtil = {
            simplify: function(t, e) {
                if (!e || !t.length) return t.slice();
                var i = e * e;
                return t = this._reducePoints(t, i), t = this._simplifyDP(t, i)
            },
            pointToSegmentDistance: function(t, e, i) {
                return Math.sqrt(this._sqClosestPointOnSegment(t, e, i, !0))
            },
            closestPointOnSegment: function(t, e, i) {
                return this._sqClosestPointOnSegment(t, e, i)
            },
            _simplifyDP: function(t, e) {
                var n = t.length,
                    o = typeof Uint8Array != i + "" ? Uint8Array : Array,
                    s = new o(n);
                s[0] = s[n - 1] = 1, this._simplifyDPStep(t, s, e, 0, n - 1);
                var a, r = [];
                for (a = 0; n > a; a++) s[a] && r.push(t[a]);
                return r
            },
            _simplifyDPStep: function(t, e, i, n, o) {
                var s, a, r, h = 0;
                for (a = n + 1; o - 1 >= a; a++) r = this._sqClosestPointOnSegment(t[a], t[n], t[o], !0), r > h && (s = a, h = r);
                h > i && (e[s] = 1, this._simplifyDPStep(t, e, i, n, s), this._simplifyDPStep(t, e, i, s, o))
            },
            _reducePoints: function(t, e) {
                for (var i = [t[0]], n = 1, o = 0, s = t.length; s > n; n++) this._sqDist(t[n], t[o]) > e && (i.push(t[n]), o = n);
                return s - 1 > o && i.push(t[s - 1]), i
            },
            clipSegment: function(t, e, i, n) {
                var o, s, a, r = n ? this._lastCode : this._getBitCode(t, i),
                    h = this._getBitCode(e, i);
                for (this._lastCode = h;;) {
                    if (!(r | h)) return [t, e];
                    if (r & h) return !1;
                    o = r || h, s = this._getEdgeIntersection(t, e, o, i), a = this._getBitCode(s, i), o === r ? (t = s, r = a) : (e = s, h = a)
                }
            },
            _getEdgeIntersection: function(t, e, i, n) {
                var s = e.x - t.x,
                    a = e.y - t.y,
                    r = n.min,
                    h = n.max;
                return 8 & i ? new o.Point(t.x + s * (h.y - t.y) / a, h.y) : 4 & i ? new o.Point(t.x + s * (r.y - t.y) / a, r.y) : 2 & i ? new o.Point(h.x, t.y + a * (h.x - t.x) / s) : 1 & i ? new o.Point(r.x, t.y + a * (r.x - t.x) / s) : void 0
            },
            _getBitCode: function(t, e) {
                var i = 0;
                return t.x < e.min.x ? i |= 1 : t.x > e.max.x && (i |= 2), t.y < e.min.y ? i |= 4 : t.y > e.max.y && (i |= 8), i
            },
            _sqDist: function(t, e) {
                var i = e.x - t.x,
                    n = e.y - t.y;
                return i * i + n * n
            },
            _sqClosestPointOnSegment: function(t, e, i, n) {
                var s, a = e.x,
                    r = e.y,
                    h = i.x - a,
                    l = i.y - r,
                    u = h * h + l * l;
                return u > 0 && (s = ((t.x - a) * h + (t.y - r) * l) / u, s > 1 ? (a = i.x, r = i.y) : s > 0 && (a += h * s, r += l * s)), h = t.x - a, l = t.y - r, n ? h * h + l * l : new o.Point(a, r)
            }
        }, o.Polyline = o.Path.extend({
            initialize: function(t, e) {
                o.Path.prototype.initialize.call(this, e), this._latlngs = this._convertLatLngs(t)
            },
            options: {
                smoothFactor: 1,
                noClip: !1
            },
            projectLatlngs: function() {
                this._originalPoints = [];
                for (var t = 0, e = this._latlngs.length; e > t; t++) this._originalPoints[t] = this._map.latLngToLayerPoint(this._latlngs[t])
            },
            getPathString: function() {
                for (var t = 0, e = this._parts.length, i = ""; e > t; t++) i += this._getPathPartStr(this._parts[t]);
                return i
            },
            getLatLngs: function() {
                return this._latlngs
            },
            setLatLngs: function(t) {
                return this._latlngs = this._convertLatLngs(t), this.redraw()
            },
            addLatLng: function(t) {
                return this._latlngs.push(o.latLng(t)), this.redraw()
            },
            spliceLatLngs: function() {
                var t = [].splice.apply(this._latlngs, arguments);
                return this._convertLatLngs(this._latlngs, !0), this.redraw(), t
            },
            closestLayerPoint: function(t) {
                for (var e, i, n = 1 / 0, s = this._parts, a = null, r = 0, h = s.length; h > r; r++)
                    for (var l = s[r], u = 1, c = l.length; c > u; u++) {
                        e = l[u - 1], i = l[u];
                        var d = o.LineUtil._sqClosestPointOnSegment(t, e, i, !0);
                        n > d && (n = d, a = o.LineUtil._sqClosestPointOnSegment(t, e, i))
                    }
                return a && (a.distance = Math.sqrt(n)), a
            },
            getBounds: function() {
                return new o.LatLngBounds(this.getLatLngs())
            },
            _convertLatLngs: function(t, e) {
                var i, n, s = e ? t : [];
                for (i = 0, n = t.length; n > i; i++) {
                    if (o.Util.isArray(t[i]) && "number" != typeof t[i][0]) return;
                    s[i] = o.latLng(t[i])
                }
                return s
            },
            _initEvents: function() {
                o.Path.prototype._initEvents.call(this)
            },
            _getPathPartStr: function(t) {
                for (var e, i = o.Path.VML, n = 0, s = t.length, a = ""; s > n; n++) e = t[n], i && e._round(), a += (n ? "L" : "M") + e.x + " " + e.y;
                return a
            },
            _clipPoints: function() {
                var t, e, i, n = this._originalPoints,
                    s = n.length;
                if (this.options.noClip) return void(this._parts = [n]);
                this._parts = [];
                var a = this._parts,
                    r = this._map._pathViewport,
                    h = o.LineUtil;
                for (t = 0, e = 0; s - 1 > t; t++) i = h.clipSegment(n[t], n[t + 1], r, t), i && (a[e] = a[e] || [], a[e].push(i[0]), (i[1] !== n[t + 1] || t === s - 2) && (a[e].push(i[1]), e++))
            },
            _simplifyPoints: function() {
                for (var t = this._parts, e = o.LineUtil, i = 0, n = t.length; n > i; i++) t[i] = e.simplify(t[i], this.options.smoothFactor)
            },
            _updatePath: function() {
                this._map && (this._clipPoints(), this._simplifyPoints(), o.Path.prototype._updatePath.call(this))
            }
        }), o.polyline = function(t, e) {
            return new o.Polyline(t, e)
        }, o.PolyUtil = {}, o.PolyUtil.clipPolygon = function(t, e) {
            var i, n, s, a, r, h, l, u, c, d = [1, 4, 2, 8],
                p = o.LineUtil;
            for (n = 0, l = t.length; l > n; n++) t[n]._code = p._getBitCode(t[n], e);
            for (a = 0; 4 > a; a++) {
                for (u = d[a], i = [], n = 0, l = t.length, s = l - 1; l > n; s = n++) r = t[n], h = t[s], r._code & u ? h._code & u || (c = p._getEdgeIntersection(h, r, u, e), c._code = p._getBitCode(c, e), i.push(c)) : (h._code & u && (c = p._getEdgeIntersection(h, r, u, e), c._code = p._getBitCode(c, e), i.push(c)), i.push(r));
                t = i
            }
            return t
        }, o.Polygon = o.Polyline.extend({
            options: {
                fill: !0
            },
            initialize: function(t, e) {
                o.Polyline.prototype.initialize.call(this, t, e), this._initWithHoles(t)
            },
            _initWithHoles: function(t) {
                var e, i, n;
                if (t && o.Util.isArray(t[0]) && "number" != typeof t[0][0])
                    for (this._latlngs = this._convertLatLngs(t[0]), this._holes = t.slice(1), e = 0, i = this._holes.length; i > e; e++) n = this._holes[e] = this._convertLatLngs(this._holes[e]), n[0].equals(n[n.length - 1]) && n.pop();
                t = this._latlngs, t.length >= 2 && t[0].equals(t[t.length - 1]) && t.pop()
            },
            projectLatlngs: function() {
                if (o.Polyline.prototype.projectLatlngs.call(this), this._holePoints = [], this._holes) {
                    var t, e, i, n;
                    for (t = 0, i = this._holes.length; i > t; t++)
                        for (this._holePoints[t] = [], e = 0, n = this._holes[t].length; n > e; e++) this._holePoints[t][e] = this._map.latLngToLayerPoint(this._holes[t][e])
                }
            },
            setLatLngs: function(t) {
                return t && o.Util.isArray(t[0]) && "number" != typeof t[0][0] ? (this._initWithHoles(t), this.redraw()) : o.Polyline.prototype.setLatLngs.call(this, t)
            },
            _clipPoints: function() {
                var t = this._originalPoints,
                    e = [];
                if (this._parts = [t].concat(this._holePoints), !this.options.noClip) {
                    for (var i = 0, n = this._parts.length; n > i; i++) {
                        var s = o.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);
                        s.length && e.push(s)
                    }
                    this._parts = e
                }
            },
            _getPathPartStr: function(t) {
                var e = o.Polyline.prototype._getPathPartStr.call(this, t);
                return e + (o.Browser.svg ? "z" : "x")
            }
        }), o.polygon = function(t, e) {
            return new o.Polygon(t, e)
        },
        function() {
            function t(t) {
                return o.FeatureGroup.extend({
                    initialize: function(t, e) {
                        this._layers = {}, this._options = e, this.setLatLngs(t)
                    },
                    setLatLngs: function(e) {
                        var i = 0,
                            n = e.length;
                        for (this.eachLayer(function(t) {
                                n > i ? t.setLatLngs(e[i++]) : this.removeLayer(t)
                            }, this); n > i;) this.addLayer(new t(e[i++], this._options));
                        return this
                    },
                    getLatLngs: function() {
                        var t = [];
                        return this.eachLayer(function(e) {
                            t.push(e.getLatLngs())
                        }), t
                    }
                })
            }
            o.MultiPolyline = t(o.Polyline), o.MultiPolygon = t(o.Polygon), o.multiPolyline = function(t, e) {
                return new o.MultiPolyline(t, e)
            }, o.multiPolygon = function(t, e) {
                return new o.MultiPolygon(t, e)
            }
        }(), o.Rectangle = o.Polygon.extend({
            initialize: function(t, e) {
                o.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(t), e)
            },
            setBounds: function(t) {
                this.setLatLngs(this._boundsToLatLngs(t))
            },
            _boundsToLatLngs: function(t) {
                return t = o.latLngBounds(t), [t.getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast()]
            }
        }), o.rectangle = function(t, e) {
            return new o.Rectangle(t, e)
        }, o.Circle = o.Path.extend({
            initialize: function(t, e, i) {
                o.Path.prototype.initialize.call(this, i), this._latlng = o.latLng(t), this._mRadius = e
            },
            options: {
                fill: !0
            },
            setLatLng: function(t) {
                return this._latlng = o.latLng(t), this.redraw()
            },
            setRadius: function(t) {
                return this._mRadius = t, this.redraw()
            },
            projectLatlngs: function() {
                var t = this._getLngRadius(),
                    e = this._latlng,
                    i = this._map.latLngToLayerPoint([e.lat, e.lng - t]);
                this._point = this._map.latLngToLayerPoint(e), this._radius = Math.max(this._point.x - i.x, 1)
            },
            getBounds: function() {
                var t = this._getLngRadius(),
                    e = this._mRadius / 40075017 * 360,
                    i = this._latlng;
                return new o.LatLngBounds([i.lat - e, i.lng - t], [i.lat + e, i.lng + t])
            },
            getLatLng: function() {
                return this._latlng
            },
            getPathString: function() {
                var t = this._point,
                    e = this._radius;
                return this._checkIfEmpty() ? "" : o.Browser.svg ? "M" + t.x + "," + (t.y - e) + "A" + e + "," + e + ",0,1,1," + (t.x - .1) + "," + (t.y - e) + " z" : (t._round(), e = Math.round(e), "AL " + t.x + "," + t.y + " " + e + "," + e + " 0,23592600")
            },
            getRadius: function() {
                return this._mRadius
            },
            _getLatRadius: function() {
                return this._mRadius / 40075017 * 360
            },
            _getLngRadius: function() {
                return this._getLatRadius() / Math.cos(o.LatLng.DEG_TO_RAD * this._latlng.lat)
            },
            _checkIfEmpty: function() {
                if (!this._map) return !1;
                var t = this._map._pathViewport,
                    e = this._radius,
                    i = this._point;
                return i.x - e > t.max.x || i.y - e > t.max.y || i.x + e < t.min.x || i.y + e < t.min.y
            }
        }), o.circle = function(t, e, i) {
            return new o.Circle(t, e, i)
        }, o.CircleMarker = o.Circle.extend({
            options: {
                radius: 10,
                weight: 2
            },
            initialize: function(t, e) {
                o.Circle.prototype.initialize.call(this, t, null, e), this._radius = this.options.radius
            },
            projectLatlngs: function() {
                this._point = this._map.latLngToLayerPoint(this._latlng)
            },
            _updateStyle: function() {
                o.Circle.prototype._updateStyle.call(this), this.setRadius(this.options.radius)
            },
            setLatLng: function(t) {
                return o.Circle.prototype.setLatLng.call(this, t), this._popup && this._popup._isOpen && this._popup.setLatLng(t), this
            },
            setRadius: function(t) {
                return this.options.radius = this._radius = t, this.redraw()
            },
            getRadius: function() {
                return this._radius
            }
        }), o.circleMarker = function(t, e) {
            return new o.CircleMarker(t, e)
        }, o.Polyline.include(o.Path.CANVAS ? {
            _containsPoint: function(t, e) {
                var i, n, s, a, r, h, l, u = this.options.weight / 2;
                for (o.Browser.touch && (u += 10), i = 0, a = this._parts.length; a > i; i++)
                    for (l = this._parts[i], n = 0, r = l.length, s = r - 1; r > n; s = n++)
                        if ((e || 0 !== n) && (h = o.LineUtil.pointToSegmentDistance(t, l[s], l[n]), u >= h)) return !0;
                return !1
            }
        } : {}), o.Polygon.include(o.Path.CANVAS ? {
            _containsPoint: function(t) {
                var e, i, n, s, a, r, h, l, u = !1;
                if (o.Polyline.prototype._containsPoint.call(this, t, !0)) return !0;
                for (s = 0, h = this._parts.length; h > s; s++)
                    for (e = this._parts[s], a = 0, l = e.length, r = l - 1; l > a; r = a++) i = e[a], n = e[r], i.y > t.y != n.y > t.y && t.x < (n.x - i.x) * (t.y - i.y) / (n.y - i.y) + i.x && (u = !u);
                return u
            }
        } : {}), o.Circle.include(o.Path.CANVAS ? {
            _drawPath: function() {
                var t = this._point;
                this._ctx.beginPath(), this._ctx.arc(t.x, t.y, this._radius, 0, 2 * Math.PI, !1)
            },
            _containsPoint: function(t) {
                var e = this._point,
                    i = this.options.stroke ? this.options.weight / 2 : 0;
                return t.distanceTo(e) <= this._radius + i
            }
        } : {}), o.CircleMarker.include(o.Path.CANVAS ? {
            _updateStyle: function() {
                o.Path.prototype._updateStyle.call(this)
            }
        } : {}), o.GeoJSON = o.FeatureGroup.extend({
            initialize: function(t, e) {
                o.setOptions(this, e), this._layers = {}, t && this.addData(t)
            },
            addData: function(t) {
                var e, i, n, s = o.Util.isArray(t) ? t : t.features;
                if (s) {
                    for (e = 0, i = s.length; i > e; e++) n = s[e], (n.geometries || n.geometry || n.features || n.coordinates) && this.addData(s[e]);
                    return this
                }
                var a = this.options;
                if (!a.filter || a.filter(t)) {
                    var r = o.GeoJSON.geometryToLayer(t, a.pointToLayer, a.coordsToLatLng, a);
                    return r.feature = o.GeoJSON.asFeature(t), r.defaultOptions = r.options, this.resetStyle(r), a.onEachFeature && a.onEachFeature(t, r), this.addLayer(r)
                }
            },
            resetStyle: function(t) {
                var e = this.options.style;
                e && (o.Util.extend(t.options, t.defaultOptions), this._setLayerStyle(t, e))
            },
            setStyle: function(t) {
                this.eachLayer(function(e) {
                    this._setLayerStyle(e, t)
                }, this)
            },
            _setLayerStyle: function(t, e) {
                "function" == typeof e && (e = e(t.feature)), t.setStyle && t.setStyle(e)
            }
        }), o.extend(o.GeoJSON, {
            geometryToLayer: function(t, e, i, n) {
                var s, a, r, h, l = "Feature" === t.type ? t.geometry : t,
                    u = l.coordinates,
                    c = [];
                switch (i = i || this.coordsToLatLng, l.type) {
                    case "Point":
                        return s = i(u), e ? e(t, s) : new o.Marker(s);
                    case "MultiPoint":
                        for (r = 0, h = u.length; h > r; r++) s = i(u[r]), c.push(e ? e(t, s) : new o.Marker(s));
                        return new o.FeatureGroup(c);
                    case "LineString":
                        return a = this.coordsToLatLngs(u, 0, i), new o.Polyline(a, n);
                    case "Polygon":
                        if (2 === u.length && !u[1].length) throw new Error("Invalid GeoJSON object.");
                        return a = this.coordsToLatLngs(u, 1, i), new o.Polygon(a, n);
                    case "MultiLineString":
                        return a = this.coordsToLatLngs(u, 1, i), new o.MultiPolyline(a, n);
                    case "MultiPolygon":
                        return a = this.coordsToLatLngs(u, 2, i), new o.MultiPolygon(a, n);
                    case "GeometryCollection":
                        for (r = 0, h = l.geometries.length; h > r; r++) c.push(this.geometryToLayer({
                            geometry: l.geometries[r],
                            type: "Feature",
                            properties: t.properties
                        }, e, i, n));
                        return new o.FeatureGroup(c);
                    default:
                        throw new Error("Invalid GeoJSON object.")
                }
            },
            coordsToLatLng: function(t) {
                return new o.LatLng(t[1], t[0], t[2])
            },
            coordsToLatLngs: function(t, e, i) {
                var n, o, s, a = [];
                for (o = 0, s = t.length; s > o; o++) n = e ? this.coordsToLatLngs(t[o], e - 1, i) : (i || this.coordsToLatLng)(t[o]), a.push(n);
                return a
            },
            latLngToCoords: function(t) {
                var e = [t.lng, t.lat];
                return t.alt !== i && e.push(t.alt), e
            },
            latLngsToCoords: function(t) {
                for (var e = [], i = 0, n = t.length; n > i; i++) e.push(o.GeoJSON.latLngToCoords(t[i]));
                return e
            },
            getFeature: function(t, e) {
                return t.feature ? o.extend({}, t.feature, {
                    geometry: e
                }) : o.GeoJSON.asFeature(e)
            },
            asFeature: function(t) {
                return "Feature" === t.type ? t : {
                    type: "Feature",
                    properties: {},
                    geometry: t
                }
            }
        });
    var a = {
        toGeoJSON: function() {
            return o.GeoJSON.getFeature(this, {
                type: "Point",
                coordinates: o.GeoJSON.latLngToCoords(this.getLatLng())
            })
        }
    };
    o.Marker.include(a), o.Circle.include(a), o.CircleMarker.include(a), o.Polyline.include({
            toGeoJSON: function() {
                return o.GeoJSON.getFeature(this, {
                    type: "LineString",
                    coordinates: o.GeoJSON.latLngsToCoords(this.getLatLngs())
                })
            }
        }), o.Polygon.include({
            toGeoJSON: function() {
                var t, e, i, n = [o.GeoJSON.latLngsToCoords(this.getLatLngs())];
                if (n[0].push(n[0][0]), this._holes)
                    for (t = 0, e = this._holes.length; e > t; t++) i = o.GeoJSON.latLngsToCoords(this._holes[t]), i.push(i[0]), n.push(i);
                return o.GeoJSON.getFeature(this, {
                    type: "Polygon",
                    coordinates: n
                })
            }
        }),
        function() {
            function t(t) {
                return function() {
                    var e = [];
                    return this.eachLayer(function(t) {
                        e.push(t.toGeoJSON().geometry.coordinates)
                    }), o.GeoJSON.getFeature(this, {
                        type: t,
                        coordinates: e
                    })
                }
            }
            o.MultiPolyline.include({
                toGeoJSON: t("MultiLineString")
            }), o.MultiPolygon.include({
                toGeoJSON: t("MultiPolygon")
            }), o.LayerGroup.include({
                toGeoJSON: function() {
                    var e, i = this.feature && this.feature.geometry,
                        n = [];
                    if (i && "MultiPoint" === i.type) return t("MultiPoint").call(this);
                    var s = i && "GeometryCollection" === i.type;
                    return this.eachLayer(function(t) {
                        t.toGeoJSON && (e = t.toGeoJSON(), n.push(s ? e.geometry : o.GeoJSON.asFeature(e)))
                    }), s ? o.GeoJSON.getFeature(this, {
                        geometries: n,
                        type: "GeometryCollection"
                    }) : {
                        type: "FeatureCollection",
                        features: n
                    }
                }
            })
        }(), o.geoJson = function(t, e) {
            return new o.GeoJSON(t, e)
        }, o.DomEvent = {
            addListener: function(t, e, i, n) {
                var s, a, r, h = o.stamp(i),
                    l = "_leaflet_" + e + h;
                return t[l] ? this : (s = function(e) {
                    return i.call(n || t, e || o.DomEvent._getEvent())
                }, o.Browser.pointer && 0 === e.indexOf("touch") ? this.addPointerListener(t, e, s, h) : (o.Browser.touch && "dblclick" === e && this.addDoubleTapListener && this.addDoubleTapListener(t, s, h), "addEventListener" in t ? "mousewheel" === e ? (t.addEventListener("DOMMouseScroll", s, !1), t.addEventListener(e, s, !1)) : "mouseenter" === e || "mouseleave" === e ? (a = s, r = "mouseenter" === e ? "mouseover" : "mouseout", s = function(e) {
                    return o.DomEvent._checkMouse(t, e) ? a(e) : void 0
                }, t.addEventListener(r, s, !1)) : "click" === e && o.Browser.android ? (a = s, s = function(t) {
                    return o.DomEvent._filterClick(t, a)
                }, t.addEventListener(e, s, !1)) : t.addEventListener(e, s, !1) : "attachEvent" in t && t.attachEvent("on" + e, s), t[l] = s, this))
            },
            removeListener: function(t, e, i) {
                var n = o.stamp(i),
                    s = "_leaflet_" + e + n,
                    a = t[s];
                return a ? (o.Browser.pointer && 0 === e.indexOf("touch") ? this.removePointerListener(t, e, n) : o.Browser.touch && "dblclick" === e && this.removeDoubleTapListener ? this.removeDoubleTapListener(t, n) : "removeEventListener" in t ? "mousewheel" === e ? (t.removeEventListener("DOMMouseScroll", a, !1), t.removeEventListener(e, a, !1)) : "mouseenter" === e || "mouseleave" === e ? t.removeEventListener("mouseenter" === e ? "mouseover" : "mouseout", a, !1) : t.removeEventListener(e, a, !1) : "detachEvent" in t && t.detachEvent("on" + e, a), t[s] = null, this) : this
            },
            stopPropagation: function(t) {
                return t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0, o.DomEvent._skipped(t), this
            },
            disableScrollPropagation: function(t) {
                var e = o.DomEvent.stopPropagation;
                return o.DomEvent.on(t, "mousewheel", e).on(t, "MozMousePixelScroll", e)
            },
            disableClickPropagation: function(t) {
                for (var e = o.DomEvent.stopPropagation, i = o.Draggable.START.length - 1; i >= 0; i--) o.DomEvent.on(t, o.Draggable.START[i], e);
                return o.DomEvent.on(t, "click", o.DomEvent._fakeStop).on(t, "dblclick", e)
            },
            preventDefault: function(t) {
                return t.preventDefault ? t.preventDefault() : t.returnValue = !1, this
            },
            stop: function(t) {
                return o.DomEvent.preventDefault(t).stopPropagation(t)
            },
            getMousePosition: function(t, e) {
                if (!e) return new o.Point(t.clientX, t.clientY);
                var i = e.getBoundingClientRect();
                return new o.Point(t.clientX - i.left - e.clientLeft, t.clientY - i.top - e.clientTop)
            },
            getWheelDelta: function(t) {
                var e = 0;
                return t.wheelDelta && (e = t.wheelDelta / 120), t.detail && (e = -t.detail / 3), e
            },
            _skipEvents: {},
            _fakeStop: function(t) {
                o.DomEvent._skipEvents[t.type] = !0
            },
            _skipped: function(t) {
                var e = this._skipEvents[t.type];
                return this._skipEvents[t.type] = !1, e
            },
            _checkMouse: function(t, e) {
                var i = e.relatedTarget;
                if (!i) return !0;
                try {
                    for (; i && i !== t;) i = i.parentNode
                } catch (t) {
                    return !1
                }
                return i !== t
            },
            _getEvent: function() {
                var e = t.event;
                if (!e)
                    for (var i = arguments.callee.caller; i && (e = i.arguments[0], !e || t.Event !== e.constructor);) i = i.caller;
                return e
            },
            _filterClick: function(t, e) {
                var i = t.timeStamp || t.originalEvent.timeStamp,
                    n = o.DomEvent._lastClick && i - o.DomEvent._lastClick;
                return n && n > 100 && 500 > n || t.target._simulatedClick && !t._simulated ? void o.DomEvent.stop(t) : (o.DomEvent._lastClick = i, e(t))
            }
        }, o.DomEvent.on = o.DomEvent.addListener, o.DomEvent.off = o.DomEvent.removeListener, o.Draggable = o.Class.extend({
            includes: o.Mixin.Events,
            statics: {
                START: o.Browser.touch ? ["touchstart", "mousedown"] : ["mousedown"],
                END: {
                    mousedown: "mouseup",
                    touchstart: "touchend",
                    pointerdown: "touchend",
                    MSPointerDown: "touchend"
                },
                MOVE: {
                    mousedown: "mousemove",
                    touchstart: "touchmove",
                    pointerdown: "touchmove",
                    MSPointerDown: "touchmove"
                }
            },
            initialize: function(t, e) {
                this._element = t, this._dragStartTarget = e || t
            },
            enable: function() {
                if (!this._enabled) {
                    for (var t = o.Draggable.START.length - 1; t >= 0; t--) o.DomEvent.on(this._dragStartTarget, o.Draggable.START[t], this._onDown, this);
                    this._enabled = !0
                }
            },
            disable: function() {
                if (this._enabled) {
                    for (var t = o.Draggable.START.length - 1; t >= 0; t--) o.DomEvent.off(this._dragStartTarget, o.Draggable.START[t], this._onDown, this);
                    this._enabled = !1, this._moved = !1
                }
            },
            _onDown: function(t) {
                if (this._moved = !1, !(t.shiftKey || 1 !== t.which && 1 !== t.button && !t.touches || (o.DomEvent.stopPropagation(t), o.Draggable._disabled || (o.DomUtil.disableImageDrag(), o.DomUtil.disableTextSelection(), this._moving)))) {
                    var i = t.touches ? t.touches[0] : t;
                    this._startPoint = new o.Point(i.clientX, i.clientY), this._startPos = this._newPos = o.DomUtil.getPosition(this._element), o.DomEvent.on(e, o.Draggable.MOVE[t.type], this._onMove, this).on(e, o.Draggable.END[t.type], this._onUp, this)
                }
            },
            _onMove: function(t) {
                if (t.touches && t.touches.length > 1) return void(this._moved = !0);
                var i = t.touches && 1 === t.touches.length ? t.touches[0] : t,
                    n = new o.Point(i.clientX, i.clientY),
                    s = n.subtract(this._startPoint);
                (s.x || s.y) && (o.Browser.touch && Math.abs(s.x) + Math.abs(s.y) < 3 || (o.DomEvent.preventDefault(t), this._moved || (this.fire("dragstart"), this._moved = !0, this._startPos = o.DomUtil.getPosition(this._element).subtract(s), o.DomUtil.addClass(e.body, "leaflet-dragging"), this._lastTarget = t.target || t.srcElement, o.DomUtil.addClass(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(s), this._moving = !0, o.Util.cancelAnimFrame(this._animRequest), this._animRequest = o.Util.requestAnimFrame(this._updatePosition, this, !0, this._dragStartTarget)))
            },
            _updatePosition: function() {
                this.fire("predrag"), o.DomUtil.setPosition(this._element, this._newPos), this.fire("drag")
            },
            _onUp: function() {
                o.DomUtil.removeClass(e.body, "leaflet-dragging"), this._lastTarget && (o.DomUtil.removeClass(this._lastTarget, "leaflet-drag-target"), this._lastTarget = null);
                for (var t in o.Draggable.MOVE) o.DomEvent.off(e, o.Draggable.MOVE[t], this._onMove).off(e, o.Draggable.END[t], this._onUp);
                o.DomUtil.enableImageDrag(), o.DomUtil.enableTextSelection(), this._moved && this._moving && (o.Util.cancelAnimFrame(this._animRequest), this.fire("dragend", {
                    distance: this._newPos.distanceTo(this._startPos)
                })), this._moving = !1
            }
        }), o.Handler = o.Class.extend({
            initialize: function(t) {
                this._map = t
            },
            enable: function() {
                this._enabled || (this._enabled = !0, this.addHooks())
            },
            disable: function() {
                this._enabled && (this._enabled = !1, this.removeHooks())
            },
            enabled: function() {
                return !!this._enabled
            }
        }), o.Map.mergeOptions({
            dragging: !0,
            inertia: !o.Browser.android23,
            inertiaDeceleration: 3400,
            inertiaMaxSpeed: 1 / 0,
            inertiaThreshold: o.Browser.touch ? 32 : 18,
            easeLinearity: .25,
            worldCopyJump: !1
        }), o.Map.Drag = o.Handler.extend({
            addHooks: function() {
                if (!this._draggable) {
                    var t = this._map;
                    this._draggable = new o.Draggable(t._mapPane, t._container), this._draggable.on({
                        dragstart: this._onDragStart,
                        drag: this._onDrag,
                        dragend: this._onDragEnd
                    }, this), t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDrag, this), t.on("viewreset", this._onViewReset, this), t.whenReady(this._onViewReset, this))
                }
                this._draggable.enable()
            },
            removeHooks: function() {
                this._draggable.disable()
            },
            moved: function() {
                return this._draggable && this._draggable._moved
            },
            _onDragStart: function() {
                var t = this._map;
                t._panAnim && t._panAnim.stop(), t.fire("movestart").fire("dragstart"), t.options.inertia && (this._positions = [], this._times = [])
            },
            _onDrag: function() {
                if (this._map.options.inertia) {
                    var t = this._lastTime = +new Date,
                        e = this._lastPos = this._draggable._newPos;
                    this._positions.push(e), this._times.push(t), t - this._times[0] > 200 && (this._positions.shift(), this._times.shift())
                }
                this._map.fire("move").fire("drag")
            },
            _onViewReset: function() {
                var t = this._map.getSize()._divideBy(2),
                    e = this._map.latLngToLayerPoint([0, 0]);
                this._initialWorldOffset = e.subtract(t).x, this._worldWidth = this._map.project([0, 180]).x
            },
            _onPreDrag: function() {
                var t = this._worldWidth,
                    e = Math.round(t / 2),
                    i = this._initialWorldOffset,
                    n = this._draggable._newPos.x,
                    o = (n - e + i) % t + e - i,
                    s = (n + e + i) % t - e - i,
                    a = Math.abs(o + i) < Math.abs(s + i) ? o : s;
                this._draggable._newPos.x = a
            },
            _onDragEnd: function(t) {
                var e = this._map,
                    i = e.options,
                    n = +new Date - this._lastTime,
                    s = !i.inertia || n > i.inertiaThreshold || !this._positions[0];
                if (e.fire("dragend", t), s) e.fire("moveend");
                else {
                    var a = this._lastPos.subtract(this._positions[0]),
                        r = (this._lastTime + n - this._times[0]) / 1e3,
                        h = i.easeLinearity,
                        l = a.multiplyBy(h / r),
                        u = l.distanceTo([0, 0]),
                        c = Math.min(i.inertiaMaxSpeed, u),
                        d = l.multiplyBy(c / u),
                        p = c / (i.inertiaDeceleration * h),
                        _ = d.multiplyBy(-p / 2).round();
                    _.x && _.y ? (_ = e._limitOffset(_, e.options.maxBounds), o.Util.requestAnimFrame(function() {
                        e.panBy(_, {
                            duration: p,
                            easeLinearity: h,
                            noMoveStart: !0
                        })
                    })) : e.fire("moveend")
                }
            }
        }), o.Map.addInitHook("addHandler", "dragging", o.Map.Drag), o.Map.mergeOptions({
            doubleClickZoom: !0
        }), o.Map.DoubleClickZoom = o.Handler.extend({
            addHooks: function() {
                this._map.on("dblclick", this._onDoubleClick, this)
            },
            removeHooks: function() {
                this._map.off("dblclick", this._onDoubleClick, this)
            },
            _onDoubleClick: function(t) {
                var e = this._map,
                    i = e.getZoom() + (t.originalEvent.shiftKey ? -1 : 1);
                "center" === e.options.doubleClickZoom ? e.setZoom(i) : e.setZoomAround(t.containerPoint, i)
            }
        }), o.Map.addInitHook("addHandler", "doubleClickZoom", o.Map.DoubleClickZoom), o.Map.mergeOptions({
            scrollWheelZoom: !0
        }), o.Map.ScrollWheelZoom = o.Handler.extend({
            addHooks: function() {
                o.DomEvent.on(this._map._container, "mousewheel", this._onWheelScroll, this), o.DomEvent.on(this._map._container, "MozMousePixelScroll", o.DomEvent.preventDefault), this._delta = 0
            },
            removeHooks: function() {
                o.DomEvent.off(this._map._container, "mousewheel", this._onWheelScroll), o.DomEvent.off(this._map._container, "MozMousePixelScroll", o.DomEvent.preventDefault)
            },
            _onWheelScroll: function(t) {
                var e = o.DomEvent.getWheelDelta(t);
                this._delta += e, this._lastMousePos = this._map.mouseEventToContainerPoint(t), this._startTime || (this._startTime = +new Date);
                var i = Math.max(40 - (+new Date - this._startTime), 0);
                clearTimeout(this._timer), this._timer = setTimeout(o.bind(this._performZoom, this), i), o.DomEvent.preventDefault(t), o.DomEvent.stopPropagation(t)
            },
            _performZoom: function() {
                var t = this._map,
                    e = this._delta,
                    i = t.getZoom();
                e = e > 0 ? Math.ceil(e) : Math.floor(e), e = Math.max(Math.min(e, 4), -4), e = t._limitZoom(i + e) - i, this._delta = 0, this._startTime = null, e && ("center" === t.options.scrollWheelZoom ? t.setZoom(i + e) : t.setZoomAround(this._lastMousePos, i + e))
            }
        }), o.Map.addInitHook("addHandler", "scrollWheelZoom", o.Map.ScrollWheelZoom), o.extend(o.DomEvent, {
            _touchstart: o.Browser.msPointer ? "MSPointerDown" : o.Browser.pointer ? "pointerdown" : "touchstart",
            _touchend: o.Browser.msPointer ? "MSPointerUp" : o.Browser.pointer ? "pointerup" : "touchend",
            addDoubleTapListener: function(t, i, n) {
                function s(t) {
                    var e;
                    if (o.Browser.pointer ? (_.push(t.pointerId), e = _.length) : e = t.touches.length, !(e > 1)) {
                        var i = Date.now(),
                            n = i - (r || i);
                        h = t.touches ? t.touches[0] : t, l = n > 0 && u >= n, r = i
                    }
                }

                function a(t) {
                    if (o.Browser.pointer) {
                        var e = _.indexOf(t.pointerId);
                        if (-1 === e) return;
                        _.splice(e, 1)
                    }
                    if (l) {
                        if (o.Browser.pointer) {
                            var n, s = {};
                            for (var a in h) n = h[a], s[a] = "function" == typeof n ? n.bind(h) : n;
                            h = s
                        }
                        h.type = "dblclick", i(h), r = null
                    }
                }
                var r, h, l = !1,
                    u = 250,
                    c = "_leaflet_",
                    d = this._touchstart,
                    p = this._touchend,
                    _ = [];
                t[c + d + n] = s, t[c + p + n] = a;
                var m = o.Browser.pointer ? e.documentElement : t;
                return t.addEventListener(d, s, !1), m.addEventListener(p, a, !1), o.Browser.pointer && m.addEventListener(o.DomEvent.POINTER_CANCEL, a, !1), this
            },
            removeDoubleTapListener: function(t, i) {
                var n = "_leaflet_";
                return t.removeEventListener(this._touchstart, t[n + this._touchstart + i], !1), (o.Browser.pointer ? e.documentElement : t).removeEventListener(this._touchend, t[n + this._touchend + i], !1), o.Browser.pointer && e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL, t[n + this._touchend + i], !1), this
            }
        }), o.extend(o.DomEvent, {
            POINTER_DOWN: o.Browser.msPointer ? "MSPointerDown" : "pointerdown",
            POINTER_MOVE: o.Browser.msPointer ? "MSPointerMove" : "pointermove",
            POINTER_UP: o.Browser.msPointer ? "MSPointerUp" : "pointerup",
            POINTER_CANCEL: o.Browser.msPointer ? "MSPointerCancel" : "pointercancel",
            _pointers: [],
            _pointerDocumentListener: !1,
            addPointerListener: function(t, e, i, n) {
                switch (e) {
                    case "touchstart":
                        return this.addPointerListenerStart(t, e, i, n);
                    case "touchend":
                        return this.addPointerListenerEnd(t, e, i, n);
                    case "touchmove":
                        return this.addPointerListenerMove(t, e, i, n);
                    default:
                        throw "Unknown touch event type"
                }
            },
            addPointerListenerStart: function(t, i, n, s) {
                var a = "_leaflet_",
                    r = this._pointers,
                    h = function(t) {
                        o.DomEvent.preventDefault(t);
                        for (var e = !1, i = 0; i < r.length; i++)
                            if (r[i].pointerId === t.pointerId) {
                                e = !0;
                                break
                            } e || r.push(t), t.touches = r.slice(), t.changedTouches = [t], n(t)
                    };
                if (t[a + "touchstart" + s] = h, t.addEventListener(this.POINTER_DOWN, h, !1), !this._pointerDocumentListener) {
                    var l = function(t) {
                        for (var e = 0; e < r.length; e++)
                            if (r[e].pointerId === t.pointerId) {
                                r.splice(e, 1);
                                break
                            }
                    };
                    e.documentElement.addEventListener(this.POINTER_UP, l, !1), e.documentElement.addEventListener(this.POINTER_CANCEL, l, !1), this._pointerDocumentListener = !0
                }
                return this
            },
            addPointerListenerMove: function(t, e, i, n) {
                function o(t) {
                    if (t.pointerType !== t.MSPOINTER_TYPE_MOUSE && "mouse" !== t.pointerType || 0 !== t.buttons) {
                        for (var e = 0; e < a.length; e++)
                            if (a[e].pointerId === t.pointerId) {
                                a[e] = t;
                                break
                            } t.touches = a.slice(), t.changedTouches = [t], i(t)
                    }
                }
                var s = "_leaflet_",
                    a = this._pointers;
                return t[s + "touchmove" + n] = o, t.addEventListener(this.POINTER_MOVE, o, !1), this
            },
            addPointerListenerEnd: function(t, e, i, n) {
                var o = "_leaflet_",
                    s = this._pointers,
                    a = function(t) {
                        for (var e = 0; e < s.length; e++)
                            if (s[e].pointerId === t.pointerId) {
                                s.splice(e, 1);
                                break
                            } t.touches = s.slice(), t.changedTouches = [t], i(t)
                    };
                return t[o + "touchend" + n] = a, t.addEventListener(this.POINTER_UP, a, !1), t.addEventListener(this.POINTER_CANCEL, a, !1), this
            },
            removePointerListener: function(t, e, i) {
                var n = "_leaflet_",
                    o = t[n + e + i];
                switch (e) {
                    case "touchstart":
                        t.removeEventListener(this.POINTER_DOWN, o, !1);
                        break;
                    case "touchmove":
                        t.removeEventListener(this.POINTER_MOVE, o, !1);
                        break;
                    case "touchend":
                        t.removeEventListener(this.POINTER_UP, o, !1), t.removeEventListener(this.POINTER_CANCEL, o, !1)
                }
                return this
            }
        }), o.Map.mergeOptions({
            touchZoom: o.Browser.touch && !o.Browser.android23,
            bounceAtZoomLimits: !0
        }), o.Map.TouchZoom = o.Handler.extend({
            addHooks: function() {
                o.DomEvent.on(this._map._container, "touchstart", this._onTouchStart, this)
            },
            removeHooks: function() {
                o.DomEvent.off(this._map._container, "touchstart", this._onTouchStart, this)
            },
            _onTouchStart: function(t) {
                var i = this._map;
                if (t.touches && 2 === t.touches.length && !i._animatingZoom && !this._zooming) {
                    var n = i.mouseEventToLayerPoint(t.touches[0]),
                        s = i.mouseEventToLayerPoint(t.touches[1]),
                        a = i._getCenterLayerPoint();
                    this._startCenter = n.add(s)._divideBy(2), this._startDist = n.distanceTo(s), this._moved = !1, this._zooming = !0, this._centerOffset = a.subtract(this._startCenter), i._panAnim && i._panAnim.stop(), o.DomEvent.on(e, "touchmove", this._onTouchMove, this).on(e, "touchend", this._onTouchEnd, this), o.DomEvent.preventDefault(t)
                }
            },
            _onTouchMove: function(t) {
                var e = this._map;
                if (t.touches && 2 === t.touches.length && this._zooming) {
                    var i = e.mouseEventToLayerPoint(t.touches[0]),
                        n = e.mouseEventToLayerPoint(t.touches[1]);
                    this._scale = i.distanceTo(n) / this._startDist, this._delta = i._add(n)._divideBy(2)._subtract(this._startCenter), 1 !== this._scale && (e.options.bounceAtZoomLimits || !(e.getZoom() === e.getMinZoom() && this._scale < 1 || e.getZoom() === e.getMaxZoom() && this._scale > 1)) && (this._moved || (o.DomUtil.addClass(e._mapPane, "leaflet-touching"), e.fire("movestart").fire("zoomstart"), this._moved = !0), o.Util.cancelAnimFrame(this._animRequest), this._animRequest = o.Util.requestAnimFrame(this._updateOnMove, this, !0, this._map._container), o.DomEvent.preventDefault(t))
                }
            },
            _updateOnMove: function() {
                var t = this._map,
                    e = this._getScaleOrigin(),
                    i = t.layerPointToLatLng(e),
                    n = t.getScaleZoom(this._scale);
                t._animateZoom(i, n, this._startCenter, this._scale, this._delta, !1, !0)
            },
            _onTouchEnd: function() {
                if (!this._moved || !this._zooming) return void(this._zooming = !1);
                var t = this._map;
                this._zooming = !1, o.DomUtil.removeClass(t._mapPane, "leaflet-touching"), o.Util.cancelAnimFrame(this._animRequest), o.DomEvent.off(e, "touchmove", this._onTouchMove).off(e, "touchend", this._onTouchEnd);
                var i = this._getScaleOrigin(),
                    n = t.layerPointToLatLng(i),
                    s = t.getZoom(),
                    a = t.getScaleZoom(this._scale) - s,
                    r = a > 0 ? Math.ceil(a) : Math.floor(a),
                    h = t._limitZoom(s + r),
                    l = t.getZoomScale(h) / this._scale;
                t._animateZoom(n, h, i, l)
            },
            _getScaleOrigin: function() {
                var t = this._centerOffset.subtract(this._delta).divideBy(this._scale);
                return this._startCenter.add(t)
            }
        }), o.Map.addInitHook("addHandler", "touchZoom", o.Map.TouchZoom), o.Map.mergeOptions({
            tap: !0,
            tapTolerance: 15
        }), o.Map.Tap = o.Handler.extend({
            addHooks: function() {
                o.DomEvent.on(this._map._container, "touchstart", this._onDown, this)
            },
            removeHooks: function() {
                o.DomEvent.off(this._map._container, "touchstart", this._onDown, this)
            },
            _onDown: function(t) {
                if (t.touches) {
                    if (o.DomEvent.preventDefault(t), this._fireClick = !0, t.touches.length > 1) return this._fireClick = !1, void clearTimeout(this._holdTimeout);
                    var i = t.touches[0],
                        n = i.target;
                    this._startPos = this._newPos = new o.Point(i.clientX, i.clientY), n.tagName && "a" === n.tagName.toLowerCase() && o.DomUtil.addClass(n, "leaflet-active"), this._holdTimeout = setTimeout(o.bind(function() {
                        this._isTapValid() && (this._fireClick = !1, this._onUp(), this._simulateEvent("contextmenu", i))
                    }, this), 1e3), o.DomEvent.on(e, "touchmove", this._onMove, this).on(e, "touchend", this._onUp, this)
                }
            },
            _onUp: function(t) {
                if (clearTimeout(this._holdTimeout), o.DomEvent.off(e, "touchmove", this._onMove, this).off(e, "touchend", this._onUp, this), this._fireClick && t && t.changedTouches) {
                    var i = t.changedTouches[0],
                        n = i.target;
                    n && n.tagName && "a" === n.tagName.toLowerCase() && o.DomUtil.removeClass(n, "leaflet-active"), this._isTapValid() && this._simulateEvent("click", i)
                }
            },
            _isTapValid: function() {
                return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance
            },
            _onMove: function(t) {
                var e = t.touches[0];
                this._newPos = new o.Point(e.clientX, e.clientY)
            },
            _simulateEvent: function(i, n) {
                var o = e.createEvent("MouseEvents");
                o._simulated = !0, n.target._simulatedClick = !0, o.initMouseEvent(i, !0, !0, t, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), n.target.dispatchEvent(o)
            }
        }), o.Browser.touch && !o.Browser.pointer && o.Map.addInitHook("addHandler", "tap", o.Map.Tap), o.Map.mergeOptions({
            boxZoom: !0
        }), o.Map.BoxZoom = o.Handler.extend({
            initialize: function(t) {
                this._map = t, this._container = t._container, this._pane = t._panes.overlayPane, this._moved = !1
            },
            addHooks: function() {
                o.DomEvent.on(this._container, "mousedown", this._onMouseDown, this)
            },
            removeHooks: function() {
                o.DomEvent.off(this._container, "mousedown", this._onMouseDown), this._moved = !1
            },
            moved: function() {
                return this._moved
            },
            _onMouseDown: function(t) {
                return this._moved = !1, !(!t.shiftKey || 1 !== t.which && 1 !== t.button) && (o.DomUtil.disableTextSelection(), o.DomUtil.disableImageDrag(), this._startLayerPoint = this._map.mouseEventToLayerPoint(t), void o.DomEvent.on(e, "mousemove", this._onMouseMove, this).on(e, "mouseup", this._onMouseUp, this).on(e, "keydown", this._onKeyDown, this))
            },
            _onMouseMove: function(t) {
                this._moved || (this._box = o.DomUtil.create("div", "leaflet-zoom-box", this._pane), o.DomUtil.setPosition(this._box, this._startLayerPoint), this._container.style.cursor = "crosshair", this._map.fire("boxzoomstart"));
                var e = this._startLayerPoint,
                    i = this._box,
                    n = this._map.mouseEventToLayerPoint(t),
                    s = n.subtract(e),
                    a = new o.Point(Math.min(n.x, e.x), Math.min(n.y, e.y));
                o.DomUtil.setPosition(i, a), this._moved = !0, i.style.width = Math.max(0, Math.abs(s.x) - 4) + "px", i.style.height = Math.max(0, Math.abs(s.y) - 4) + "px"
            },
            _finish: function() {
                this._moved && (this._pane.removeChild(this._box), this._container.style.cursor = ""), o.DomUtil.enableTextSelection(), o.DomUtil.enableImageDrag(), o.DomEvent.off(e, "mousemove", this._onMouseMove).off(e, "mouseup", this._onMouseUp).off(e, "keydown", this._onKeyDown)
            },
            _onMouseUp: function(t) {
                this._finish();
                var e = this._map,
                    i = e.mouseEventToLayerPoint(t);
                if (!this._startLayerPoint.equals(i)) {
                    var n = new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint), e.layerPointToLatLng(i));
                    e.fitBounds(n), e.fire("boxzoomend", {
                        boxZoomBounds: n
                    })
                }
            },
            _onKeyDown: function(t) {
                27 === t.keyCode && this._finish()
            }
        }), o.Map.addInitHook("addHandler", "boxZoom", o.Map.BoxZoom), o.Map.mergeOptions({
            keyboard: !0,
            keyboardPanOffset: 80,
            keyboardZoomOffset: 1
        }), o.Map.Keyboard = o.Handler.extend({
            keyCodes: {
                left: [37],
                right: [39],
                down: [40],
                up: [38],
                zoomIn: [187, 107, 61, 171],
                zoomOut: [189, 109, 173]
            },
            initialize: function(t) {
                this._map = t, this._setPanOffset(t.options.keyboardPanOffset), this._setZoomOffset(t.options.keyboardZoomOffset)
            },
            addHooks: function() {
                var t = this._map._container; - 1 === t.tabIndex && (t.tabIndex = "0"), o.DomEvent.on(t, "focus", this._onFocus, this).on(t, "blur", this._onBlur, this).on(t, "mousedown", this._onMouseDown, this), this._map.on("focus", this._addHooks, this).on("blur", this._removeHooks, this)
            },
            removeHooks: function() {
                this._removeHooks();
                var t = this._map._container;
                o.DomEvent.off(t, "focus", this._onFocus, this).off(t, "blur", this._onBlur, this).off(t, "mousedown", this._onMouseDown, this), this._map.off("focus", this._addHooks, this).off("blur", this._removeHooks, this)
            },
            _onMouseDown: function() {
                if (!this._focused) {
                    var i = e.body,
                        n = e.documentElement,
                        o = i.scrollTop || n.scrollTop,
                        s = i.scrollLeft || n.scrollLeft;
                    this._map._container.focus(), t.scrollTo(s, o)
                }
            },
            _onFocus: function() {
                this._focused = !0, this._map.fire("focus")
            },
            _onBlur: function() {
                this._focused = !1, this._map.fire("blur")
            },
            _setPanOffset: function(t) {
                var e, i, n = this._panKeys = {},
                    o = this.keyCodes;
                for (e = 0, i = o.left.length; i > e; e++) n[o.left[e]] = [-1 * t, 0];
                for (e = 0, i = o.right.length; i > e; e++) n[o.right[e]] = [t, 0];
                for (e = 0, i = o.down.length; i > e; e++) n[o.down[e]] = [0, t];
                for (e = 0, i = o.up.length; i > e; e++) n[o.up[e]] = [0, -1 * t]
            },
            _setZoomOffset: function(t) {
                var e, i, n = this._zoomKeys = {},
                    o = this.keyCodes;
                for (e = 0, i = o.zoomIn.length; i > e; e++) n[o.zoomIn[e]] = t;
                for (e = 0, i = o.zoomOut.length; i > e; e++) n[o.zoomOut[e]] = -t
            },
            _addHooks: function() {
                o.DomEvent.on(e, "keydown", this._onKeyDown, this)
            },
            _removeHooks: function() {
                o.DomEvent.off(e, "keydown", this._onKeyDown, this)
            },
            _onKeyDown: function(t) {
                var e = t.keyCode,
                    i = this._map;
                if (e in this._panKeys) {
                    if (i._panAnim && i._panAnim._inProgress) return;
                    i.panBy(this._panKeys[e]), i.options.maxBounds && i.panInsideBounds(i.options.maxBounds)
                } else {
                    if (!(e in this._zoomKeys)) return;
                    i.setZoom(i.getZoom() + this._zoomKeys[e])
                }
                o.DomEvent.stop(t)
            }
        }), o.Map.addInitHook("addHandler", "keyboard", o.Map.Keyboard), o.Handler.MarkerDrag = o.Handler.extend({
            initialize: function(t) {
                this._marker = t
            },
            addHooks: function() {
                var t = this._marker._icon;
                this._draggable || (this._draggable = new o.Draggable(t, t)), this._draggable.on("dragstart", this._onDragStart, this).on("drag", this._onDrag, this).on("dragend", this._onDragEnd, this), this._draggable.enable(), o.DomUtil.addClass(this._marker._icon, "leaflet-marker-draggable")
            },
            removeHooks: function() {
                this._draggable.off("dragstart", this._onDragStart, this).off("drag", this._onDrag, this).off("dragend", this._onDragEnd, this), this._draggable.disable(), o.DomUtil.removeClass(this._marker._icon, "leaflet-marker-draggable")
            },
            moved: function() {
                return this._draggable && this._draggable._moved
            },
            _onDragStart: function() {
                this._marker.closePopup().fire("movestart").fire("dragstart")
            },
            _onDrag: function() {
                var t = this._marker,
                    e = t._shadow,
                    i = o.DomUtil.getPosition(t._icon),
                    n = t._map.layerPointToLatLng(i);
                e && o.DomUtil.setPosition(e, i), t._latlng = n, t.fire("move", {
                    latlng: n
                }).fire("drag")
            },
            _onDragEnd: function(t) {
                this._marker.fire("moveend").fire("dragend", t)
            }
        }), o.Control = o.Class.extend({
            options: {
                position: "topright"
            },
            initialize: function(t) {
                o.setOptions(this, t)
            },
            getPosition: function() {
                return this.options.position
            },
            setPosition: function(t) {
                var e = this._map;
                return e && e.removeControl(this), this.options.position = t, e && e.addControl(this), this
            },
            getContainer: function() {
                return this._container
            },
            addTo: function(t) {
                this._map = t;
                var e = this._container = this.onAdd(t),
                    i = this.getPosition(),
                    n = t._controlCorners[i];
                return o.DomUtil.addClass(e, "leaflet-control"), -1 !== i.indexOf("bottom") ? n.insertBefore(e, n.firstChild) : n.appendChild(e), this
            },
            removeFrom: function(t) {
                var e = this.getPosition(),
                    i = t._controlCorners[e];
                return i.removeChild(this._container), this._map = null, this.onRemove && this.onRemove(t), this
            },
            _refocusOnMap: function() {
                this._map && this._map.getContainer().focus()
            }
        }), o.control = function(t) {
            return new o.Control(t)
        }, o.Map.include({
            addControl: function(t) {
                return t.addTo(this), this
            },
            removeControl: function(t) {
                return t.removeFrom(this), this
            },
            _initControlPos: function() {
                function t(t, s) {
                    var a = i + t + " " + i + s;
                    e[t + s] = o.DomUtil.create("div", a, n)
                }
                var e = this._controlCorners = {},
                    i = "leaflet-",
                    n = this._controlContainer = o.DomUtil.create("div", i + "control-container", this._container);
                t("top", "left"), t("top", "right"), t("bottom", "left"), t("bottom", "right")
            },
            _clearControlPos: function() {
                this._container.removeChild(this._controlContainer)
            }
        }), o.Control.Zoom = o.Control.extend({
            options: {
                position: "topleft",
                zoomInText: "+",
                zoomInTitle: "Zoom in",
                zoomOutText: "-",
                zoomOutTitle: "Zoom out"
            },
            onAdd: function(t) {
                var e = "leaflet-control-zoom",
                    i = o.DomUtil.create("div", e + " leaflet-bar");
                return this._map = t, this._zoomInButton = this._createButton(this.options.zoomInText, this.options.zoomInTitle, e + "-in", i, this._zoomIn, this), this._zoomOutButton = this._createButton(this.options.zoomOutText, this.options.zoomOutTitle, e + "-out", i, this._zoomOut, this), this._updateDisabled(), t.on("zoomend zoomlevelschange", this._updateDisabled, this), i
            },
            onRemove: function(t) {
                t.off("zoomend zoomlevelschange", this._updateDisabled, this)
            },
            _zoomIn: function(t) {
                this._map.zoomIn(t.shiftKey ? 3 : 1)
            },
            _zoomOut: function(t) {
                this._map.zoomOut(t.shiftKey ? 3 : 1)
            },
            _createButton: function(t, e, i, n, s, a) {
                var r = o.DomUtil.create("a", i, n);
                r.innerHTML = t, r.href = "#", r.title = e;
                var h = o.DomEvent.stopPropagation;
                return o.DomEvent.on(r, "click", h).on(r, "mousedown", h).on(r, "dblclick", h).on(r, "click", o.DomEvent.preventDefault).on(r, "click", s, a).on(r, "click", this._refocusOnMap, a), r
            },
            _updateDisabled: function() {
                var t = this._map,
                    e = "leaflet-disabled";
                o.DomUtil.removeClass(this._zoomInButton, e), o.DomUtil.removeClass(this._zoomOutButton, e), t._zoom === t.getMinZoom() && o.DomUtil.addClass(this._zoomOutButton, e), t._zoom === t.getMaxZoom() && o.DomUtil.addClass(this._zoomInButton, e)
            }
        }), o.Map.mergeOptions({
            zoomControl: !0
        }), o.Map.addInitHook(function() {
            this.options.zoomControl && (this.zoomControl = new o.Control.Zoom, this.addControl(this.zoomControl))
        }), o.control.zoom = function(t) {
            return new o.Control.Zoom(t)
        }, o.Control.Attribution = o.Control.extend({
            options: {
                position: "bottomright",
                prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
            },
            initialize: function(t) {
                o.setOptions(this, t), this._attributions = {}
            },
            onAdd: function(t) {
                this._container = o.DomUtil.create("div", "leaflet-control-attribution"), o.DomEvent.disableClickPropagation(this._container);
                for (var e in t._layers) t._layers[e].getAttribution && this.addAttribution(t._layers[e].getAttribution());
                return t.on("layeradd", this._onLayerAdd, this).on("layerremove", this._onLayerRemove, this), this._update(), this._container
            },
            onRemove: function(t) {
                t.off("layeradd", this._onLayerAdd).off("layerremove", this._onLayerRemove)
            },
            setPrefix: function(t) {
                return this.options.prefix = t, this._update(), this
            },
            addAttribution: function(t) {
                return t ? (this._attributions[t] || (this._attributions[t] = 0), this._attributions[t]++, this._update(), this) : void 0
            },
            removeAttribution: function(t) {
                return t ? (this._attributions[t] && (this._attributions[t]--, this._update()), this) : void 0
            },
            _update: function() {
                if (this._map) {
                    var t = [];
                    for (var e in this._attributions) this._attributions[e] && t.push(e);
                    var i = [];
                    this.options.prefix && i.push(this.options.prefix), t.length && i.push(t.join(", ")), this._container.innerHTML = i.join(" | ")
                }
            },
            _onLayerAdd: function(t) {
                t.layer.getAttribution && this.addAttribution(t.layer.getAttribution())
            },
            _onLayerRemove: function(t) {
                t.layer.getAttribution && this.removeAttribution(t.layer.getAttribution())
            }
        }), o.Map.mergeOptions({
            attributionControl: !0
        }), o.Map.addInitHook(function() {
            this.options.attributionControl && (this.attributionControl = (new o.Control.Attribution).addTo(this))
        }), o.control.attribution = function(t) {
            return new o.Control.Attribution(t)
        }, o.Control.Scale = o.Control.extend({
            options: {
                position: "bottomleft",
                maxWidth: 100,
                metric: !0,
                imperial: !0,
                updateWhenIdle: !1
            },
            onAdd: function(t) {
                this._map = t;
                var e = "leaflet-control-scale",
                    i = o.DomUtil.create("div", e),
                    n = this.options;
                return this._addScales(n, e, i), t.on(n.updateWhenIdle ? "moveend" : "move", this._update, this), t.whenReady(this._update, this), i
            },
            onRemove: function(t) {
                t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this)
            },
            _addScales: function(t, e, i) {
                t.metric && (this._mScale = o.DomUtil.create("div", e + "-line", i)), t.imperial && (this._iScale = o.DomUtil.create("div", e + "-line", i))
            },
            _update: function() {
                var t = this._map.getBounds(),
                    e = t.getCenter().lat,
                    i = 6378137 * Math.PI * Math.cos(e * Math.PI / 180),
                    n = i * (t.getNorthEast().lng - t.getSouthWest().lng) / 180,
                    o = this._map.getSize(),
                    s = this.options,
                    a = 0;
                o.x > 0 && (a = n * (s.maxWidth / o.x)), this._updateScales(s, a)
            },
            _updateScales: function(t, e) {
                t.metric && e && this._updateMetric(e), t.imperial && e && this._updateImperial(e)
            },
            _updateMetric: function(t) {
                var e = this._getRoundNum(t);
                this._mScale.style.width = this._getScaleWidth(e / t) + "px", this._mScale.innerHTML = 1e3 > e ? e + " m" : e / 1e3 + " km"
            },
            _updateImperial: function(t) {
                var e, i, n, o = 3.2808399 * t,
                    s = this._iScale;
                o > 5280 ? (e = o / 5280, i = this._getRoundNum(e), s.style.width = this._getScaleWidth(i / e) + "px", s.innerHTML = i + " mi") : (n = this._getRoundNum(o), s.style.width = this._getScaleWidth(n / o) + "px", s.innerHTML = n + " ft")
            },
            _getScaleWidth: function(t) {
                return Math.round(this.options.maxWidth * t) - 10
            },
            _getRoundNum: function(t) {
                var e = Math.pow(10, (Math.floor(t) + "").length - 1),
                    i = t / e;
                return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : 1, e * i
            }
        }), o.control.scale = function(t) {
            return new o.Control.Scale(t)
        }, o.Control.Layers = o.Control.extend({
            options: {
                collapsed: !0,
                position: "topright",
                autoZIndex: !0
            },
            initialize: function(t, e, i) {
                o.setOptions(this, i), this._layers = {}, this._lastZIndex = 0, this._handlingClick = !1;
                for (var n in t) this._addLayer(t[n], n);
                for (n in e) this._addLayer(e[n], n, !0)
            },
            onAdd: function(t) {
                return this._initLayout(), this._update(), t.on("layeradd", this._onLayerChange, this).on("layerremove", this._onLayerChange, this), this._container
            },
            onRemove: function(t) {
                t.off("layeradd", this._onLayerChange, this).off("layerremove", this._onLayerChange, this)
            },
            addBaseLayer: function(t, e) {
                return this._addLayer(t, e), this._update(), this
            },
            addOverlay: function(t, e) {
                return this._addLayer(t, e, !0), this._update(), this
            },
            removeLayer: function(t) {
                var e = o.stamp(t);
                return delete this._layers[e], this._update(), this
            },
            _initLayout: function() {
                var t = "leaflet-control-layers",
                    e = this._container = o.DomUtil.create("div", t);
                e.setAttribute("aria-haspopup", !0), o.Browser.touch ? o.DomEvent.on(e, "click", o.DomEvent.stopPropagation) : o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);
                var i = this._form = o.DomUtil.create("form", t + "-list");
                if (this.options.collapsed) {
                    o.Browser.android || o.DomEvent.on(e, "mouseover", this._expand, this).on(e, "mouseout", this._collapse, this);
                    var n = this._layersLink = o.DomUtil.create("a", t + "-toggle", e);
                    n.href = "#", n.title = "Layers", o.Browser.touch ? o.DomEvent.on(n, "click", o.DomEvent.stop).on(n, "click", this._expand, this) : o.DomEvent.on(n, "focus", this._expand, this), o.DomEvent.on(i, "click", function() {
                        setTimeout(o.bind(this._onInputClick, this), 0)
                    }, this), this._map.on("click", this._collapse, this)
                } else this._expand();
                this._baseLayersList = o.DomUtil.create("div", t + "-base", i), this._separator = o.DomUtil.create("div", t + "-separator", i), this._overlaysList = o.DomUtil.create("div", t + "-overlays", i), e.appendChild(i)
            },
            _addLayer: function(t, e, i) {
                var n = o.stamp(t);
                this._layers[n] = {
                    layer: t,
                    name: e,
                    overlay: i
                }, this.options.autoZIndex && t.setZIndex && (this._lastZIndex++, t.setZIndex(this._lastZIndex))
            },
            _update: function() {
                if (this._container) {
                    this._baseLayersList.innerHTML = "", this._overlaysList.innerHTML = "";
                    var t, e, i = !1,
                        n = !1;
                    for (t in this._layers) e = this._layers[t], this._addItem(e), n = n || e.overlay, i = i || !e.overlay;
                    this._separator.style.display = n && i ? "" : "none"
                }
            },
            _onLayerChange: function(t) {
                var e = this._layers[o.stamp(t.layer)];
                if (e) {
                    this._handlingClick || this._update();
                    var i = e.overlay ? "layeradd" === t.type ? "overlayadd" : "overlayremove" : "layeradd" === t.type ? "baselayerchange" : null;
                    i && this._map.fire(i, e)
                }
            },
            _createRadioElement: function(t, i) {
                var n = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"';
                i && (n += ' checked="checked"'), n += "/>";
                var o = e.createElement("div");
                return o.innerHTML = n, o.firstChild
            },
            _addItem: function(t) {
                var i, n = e.createElement("label"),
                    s = this._map.hasLayer(t.layer);
                t.overlay ? (i = e.createElement("input"), i.type = "checkbox", i.className = "leaflet-control-layers-selector", i.defaultChecked = s) : i = this._createRadioElement("leaflet-base-layers", s), i.layerId = o.stamp(t.layer), o.DomEvent.on(i, "click", this._onInputClick, this);
                var a = e.createElement("span");
                a.innerHTML = " " + t.name, n.appendChild(i), n.appendChild(a);
                var r = t.overlay ? this._overlaysList : this._baseLayersList;
                return r.appendChild(n), n
            },
            _onInputClick: function() {
                var t, e, i, n = this._form.getElementsByTagName("input"),
                    o = n.length;
                for (this._handlingClick = !0, t = 0; o > t; t++) e = n[t], i = this._layers[e.layerId], e.checked && !this._map.hasLayer(i.layer) ? this._map.addLayer(i.layer) : !e.checked && this._map.hasLayer(i.layer) && this._map.removeLayer(i.layer);
                this._handlingClick = !1, this._refocusOnMap()
            },
            _expand: function() {
                o.DomUtil.addClass(this._container, "leaflet-control-layers-expanded")
            },
            _collapse: function() {
                this._container.className = this._container.className.replace(" leaflet-control-layers-expanded", "")
            }
        }), o.control.layers = function(t, e, i) {
            return new o.Control.Layers(t, e, i)
        }, o.PosAnimation = o.Class.extend({
            includes: o.Mixin.Events,
            run: function(t, e, i, n) {
                this.stop(), this._el = t, this._inProgress = !0, this._newPos = e, this.fire("start"), t.style[o.DomUtil.TRANSITION] = "all " + (i || .25) + "s cubic-bezier(0,0," + (n || .5) + ",1)", o.DomEvent.on(t, o.DomUtil.TRANSITION_END, this._onTransitionEnd, this), o.DomUtil.setPosition(t, e), o.Util.falseFn(t.offsetWidth), this._stepTimer = setInterval(o.bind(this._onStep, this), 50)
            },
            stop: function() {
                this._inProgress && (o.DomUtil.setPosition(this._el, this._getPos()), this._onTransitionEnd(), o.Util.falseFn(this._el.offsetWidth))
            },
            _onStep: function() {
                var t = this._getPos();
                return t ? (this._el._leaflet_pos = t, void this.fire("step")) : void this._onTransitionEnd()
            },
            _transformRe: /([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,
            _getPos: function() {
                var e, i, n, s = this._el,
                    a = t.getComputedStyle(s);
                if (o.Browser.any3d) {
                    if (n = a[o.DomUtil.TRANSFORM].match(this._transformRe), !n) return;
                    e = parseFloat(n[1]), i = parseFloat(n[2])
                } else e = parseFloat(a.left), i = parseFloat(a.top);
                return new o.Point(e, i, (!0))
            },
            _onTransitionEnd: function() {
                o.DomEvent.off(this._el, o.DomUtil.TRANSITION_END, this._onTransitionEnd, this), this._inProgress && (this._inProgress = !1, this._el.style[o.DomUtil.TRANSITION] = "", this._el._leaflet_pos = this._newPos, clearInterval(this._stepTimer), this.fire("step").fire("end"))
            }
        }), o.Map.include({
            setView: function(t, e, n) {
                if (e = e === i ? this._zoom : this._limitZoom(e), t = this._limitCenter(o.latLng(t), e, this.options.maxBounds), n = n || {}, this._panAnim && this._panAnim.stop(), this._loaded && !n.reset && n !== !0) {
                    n.animate !== i && (n.zoom = o.extend({
                        animate: n.animate
                    }, n.zoom), n.pan = o.extend({
                        animate: n.animate
                    }, n.pan));
                    var s = this._zoom !== e ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, e, n.zoom) : this._tryAnimatedPan(t, n.pan);
                    if (s) return clearTimeout(this._sizeTimer), this
                }
                return this._resetView(t, e), this
            },
            panBy: function(t, e) {
                if (t = o.point(t).round(), e = e || {}, !t.x && !t.y) return this;
                if (this._panAnim || (this._panAnim = new o.PosAnimation, this._panAnim.on({
                        step: this._onPanTransitionStep,
                        end: this._onPanTransitionEnd
                    }, this)), e.noMoveStart || this.fire("movestart"), e.animate !== !1) {
                    o.DomUtil.addClass(this._mapPane, "leaflet-pan-anim");
                    var i = this._getMapPanePos().subtract(t);
                    this._panAnim.run(this._mapPane, i, e.duration || .25, e.easeLinearity)
                } else this._rawPanBy(t), this.fire("move").fire("moveend");
                return this
            },
            _onPanTransitionStep: function() {
                this.fire("move")
            },
            _onPanTransitionEnd: function() {
                o.DomUtil.removeClass(this._mapPane, "leaflet-pan-anim"), this.fire("moveend")
            },
            _tryAnimatedPan: function(t, e) {
                var i = this._getCenterOffset(t)._floor();
                return !((e && e.animate) !== !0 && !this.getSize().contains(i)) && (this.panBy(i, e), !0)
            }
        }), o.PosAnimation = o.DomUtil.TRANSITION ? o.PosAnimation : o.PosAnimation.extend({
            run: function(t, e, i, n) {
                this.stop(), this._el = t, this._inProgress = !0, this._duration = i || .25, this._easeOutPower = 1 / Math.max(n || .5, .2), this._startPos = o.DomUtil.getPosition(t), this._offset = e.subtract(this._startPos), this._startTime = +new Date, this.fire("start"), this._animate()
            },
            stop: function() {
                this._inProgress && (this._step(), this._complete())
            },
            _animate: function() {
                this._animId = o.Util.requestAnimFrame(this._animate, this), this._step()
            },
            _step: function() {
                var t = +new Date - this._startTime,
                    e = 1e3 * this._duration;
                e > t ? this._runFrame(this._easeOut(t / e)) : (this._runFrame(1), this._complete())
            },
            _runFrame: function(t) {
                var e = this._startPos.add(this._offset.multiplyBy(t));
                o.DomUtil.setPosition(this._el, e), this.fire("step")
            },
            _complete: function() {
                o.Util.cancelAnimFrame(this._animId), this._inProgress = !1, this.fire("end")
            },
            _easeOut: function(t) {
                return 1 - Math.pow(1 - t, this._easeOutPower)
            }
        }), o.Map.mergeOptions({
            zoomAnimation: !0,
            zoomAnimationThreshold: 4
        }), o.DomUtil.TRANSITION && o.Map.addInitHook(function() {
            this._zoomAnimated = this.options.zoomAnimation && o.DomUtil.TRANSITION && o.Browser.any3d && !o.Browser.android23 && !o.Browser.mobileOpera, this._zoomAnimated && o.DomEvent.on(this._mapPane, o.DomUtil.TRANSITION_END, this._catchTransitionEnd, this)
        }), o.Map.include(o.DomUtil.TRANSITION ? {
            _catchTransitionEnd: function(t) {
                this._animatingZoom && t.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd()
            },
            _nothingToAnimate: function() {
                return !this._container.getElementsByClassName("leaflet-zoom-animated").length
            },
            _tryAnimatedZoom: function(t, e, i) {
                if (this._animatingZoom) return !0;
                if (i = i || {}, !this._zoomAnimated || i.animate === !1 || this._nothingToAnimate() || Math.abs(e - this._zoom) > this.options.zoomAnimationThreshold) return !1;
                var n = this.getZoomScale(e),
                    o = this._getCenterOffset(t)._divideBy(1 - 1 / n),
                    s = this._getCenterLayerPoint()._add(o);
                return !(i.animate !== !0 && !this.getSize().contains(o)) && (this.fire("movestart").fire("zoomstart"), this._animateZoom(t, e, s, n, null, !0), !0)
            },
            _animateZoom: function(t, e, i, n, s, a, r) {
                r || (this._animatingZoom = !0), o.DomUtil.addClass(this._mapPane, "leaflet-zoom-anim"), this._animateToCenter = t, this._animateToZoom = e, o.Draggable && (o.Draggable._disabled = !0), o.Util.requestAnimFrame(function() {
                    this.fire("zoomanim", {
                        center: t,
                        zoom: e,
                        origin: i,
                        scale: n,
                        delta: s,
                        backwards: a
                    })
                }, this)
            },
            _onZoomTransitionEnd: function() {
                this._animatingZoom = !1, o.DomUtil.removeClass(this._mapPane, "leaflet-zoom-anim"), this._resetView(this._animateToCenter, this._animateToZoom, !0, !0), o.Draggable && (o.Draggable._disabled = !1)
            }
        } : {}), o.TileLayer.include({
            _animateZoom: function(t) {
                this._animating || (this._animating = !0, this._prepareBgBuffer());
                var e = this._bgBuffer,
                    i = o.DomUtil.TRANSFORM,
                    n = t.delta ? o.DomUtil.getTranslateString(t.delta) : e.style[i],
                    s = o.DomUtil.getScaleString(t.scale, t.origin);
                e.style[i] = t.backwards ? s + " " + n : n + " " + s
            },
            _endZoomAnim: function() {
                var t = this._tileContainer,
                    e = this._bgBuffer;
                t.style.visibility = "", t.parentNode.appendChild(t), o.Util.falseFn(e.offsetWidth), this._animating = !1
            },
            _clearBgBuffer: function() {
                var t = this._map;
                !t || t._animatingZoom || t.touchZoom._zooming || (this._bgBuffer.innerHTML = "", this._bgBuffer.style[o.DomUtil.TRANSFORM] = "")
            },
            _prepareBgBuffer: function() {
                var t = this._tileContainer,
                    e = this._bgBuffer,
                    i = this._getLoadedTilesPercentage(e),
                    n = this._getLoadedTilesPercentage(t);
                return e && i > .5 && .5 > n ? (t.style.visibility = "hidden", void this._stopLoadingImages(t)) : (e.style.visibility = "hidden", e.style[o.DomUtil.TRANSFORM] = "", this._tileContainer = e, e = this._bgBuffer = t, this._stopLoadingImages(e), void clearTimeout(this._clearBgBufferTimer))
            },
            _getLoadedTilesPercentage: function(t) {
                var e, i, n = t.getElementsByTagName("img"),
                    o = 0;
                for (e = 0, i = n.length; i > e; e++) n[e].complete && o++;
                return o / i
            },
            _stopLoadingImages: function(t) {
                var e, i, n, s = Array.prototype.slice.call(t.getElementsByTagName("img"));
                for (e = 0, i = s.length; i > e; e++) n = s[e], n.complete || (n.onload = o.Util.falseFn, n.onerror = o.Util.falseFn, n.src = o.Util.emptyImageUrl, n.parentNode.removeChild(n))
            }
        }), o.Map.include({
            _defaultLocateOptions: {
                watch: !1,
                setView: !1,
                maxZoom: 1 / 0,
                timeout: 1e4,
                maximumAge: 0,
                enableHighAccuracy: !1
            },
            locate: function(t) {
                if (t = this._locateOptions = o.extend(this._defaultLocateOptions, t), !navigator.geolocation) return this._handleGeolocationError({
                    code: 0,
                    message: "Geolocation not supported."
                }), this;
                var e = o.bind(this._handleGeolocationResponse, this),
                    i = o.bind(this._handleGeolocationError, this);
                return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(e, i, t) : navigator.geolocation.getCurrentPosition(e, i, t), this
            },
            stopLocate: function() {
                return navigator.geolocation && navigator.geolocation.clearWatch(this._locationWatchId), this._locateOptions && (this._locateOptions.setView = !1), this
            },
            _handleGeolocationError: function(t) {
                var e = t.code,
                    i = t.message || (1 === e ? "permission denied" : 2 === e ? "position unavailable" : "timeout");
                this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", {
                    code: e,
                    message: "Geolocation error: " + i + "."
                })
            },
            _handleGeolocationResponse: function(t) {
                var e = t.coords.latitude,
                    i = t.coords.longitude,
                    n = new o.LatLng(e, i),
                    s = 180 * t.coords.accuracy / 40075017,
                    a = s / Math.cos(o.LatLng.DEG_TO_RAD * e),
                    r = o.latLngBounds([e - s, i - a], [e + s, i + a]),
                    h = this._locateOptions;
                if (h.setView) {
                    var l = Math.min(this.getBoundsZoom(r), h.maxZoom);
                    this.setView(n, l)
                }
                var u = {
                    latlng: n,
                    bounds: r,
                    timestamp: t.timestamp
                };
                for (var c in t.coords) "number" == typeof t.coords[c] && (u[c] = t.coords[c]);
                this.fire("locationfound", u)
            }
        })
}(window, document);
! function(t, e, i) {
    L.MarkerClusterGroup = L.FeatureGroup.extend({
            options: {
                maxClusterRadius: 80,
                iconCreateFunction: null,
                spiderfyOnMaxZoom: !0,
                showCoverageOnHover: !0,
                zoomToBoundsOnClick: !0,
                singleMarkerMode: !1,
                disableClusteringAtZoom: null,
                removeOutsideVisibleBounds: !0,
                animateAddingMarkers: !1,
                spiderfyDistanceMultiplier: 1,
                chunkedLoading: !1,
                chunkInterval: 200,
                chunkDelay: 50,
                chunkProgress: null,
                polygonOptions: {}
            },
            initialize: function(t) {
                L.Util.setOptions(this, t), this.options.iconCreateFunction || (this.options.iconCreateFunction = this._defaultIconCreateFunction), this._featureGroup = L.featureGroup(), this._featureGroup.on(L.FeatureGroup.EVENTS, this._propagateEvent, this), this._nonPointGroup = L.featureGroup(), this._nonPointGroup.on(L.FeatureGroup.EVENTS, this._propagateEvent, this), this._inZoomAnimation = 0, this._needsClustering = [], this._needsRemoving = [], this._currentShownBounds = null, this._queue = []
            },
            addLayer: function(t) {
                if (t instanceof L.LayerGroup) {
                    var e = [];
                    for (var i in t._layers) e.push(t._layers[i]);
                    return this.addLayers(e)
                }
                if (!t.getLatLng) return this._nonPointGroup.addLayer(t), this;
                if (!this._map) return this._needsClustering.push(t), this;
                if (this.hasLayer(t)) return this;
                this._unspiderfy && this._unspiderfy(), this._addLayer(t, this._maxZoom);
                var n = t,
                    s = this._map.getZoom();
                if (t.__parent)
                    for (; n.__parent._zoom >= s;) n = n.__parent;
                return this._currentShownBounds.contains(n.getLatLng()) && (this.options.animateAddingMarkers ? this._animationAddLayer(t, n) : this._animationAddLayerNonAnimated(t, n)), this
            },
            removeLayer: function(t) {
                if (t instanceof L.LayerGroup) {
                    var e = [];
                    for (var i in t._layers) e.push(t._layers[i]);
                    return this.removeLayers(e)
                }
                return t.getLatLng ? this._map ? t.__parent ? (this._unspiderfy && (this._unspiderfy(), this._unspiderfyLayer(t)), this._removeLayer(t, !0), this._featureGroup.hasLayer(t) && (this._featureGroup.removeLayer(t), t.setOpacity && t.setOpacity(1)), this) : this : (!this._arraySplice(this._needsClustering, t) && this.hasLayer(t) && this._needsRemoving.push(t), this) : (this._nonPointGroup.removeLayer(t), this)
            },
            addLayers: function(t) {
                var e, i, n, s, r = this._featureGroup,
                    o = this._nonPointGroup,
                    a = this.options.chunkedLoading,
                    h = this.options.chunkInterval,
                    _ = this.options.chunkProgress;
                if (this._map) {
                    var u = 0,
                        l = (new Date).getTime(),
                        d = L.bind(function() {
                            for (var e = (new Date).getTime(); u < t.length; u++) {
                                if (a && u % 200 === 0) {
                                    var i = (new Date).getTime() - e;
                                    if (i > h) break
                                }
                                if (s = t[u], s.getLatLng) {
                                    if (!this.hasLayer(s) && (this._addLayer(s, this._maxZoom), s.__parent && 2 === s.__parent.getChildCount())) {
                                        var n = s.__parent.getAllChildMarkers(),
                                            p = n[0] === s ? n[1] : n[0];
                                        r.removeLayer(p)
                                    }
                                } else o.addLayer(s)
                            }
                            _ && _(u, t.length, (new Date).getTime() - l), u === t.length ? (this._featureGroup.eachLayer(function(t) {
                                t instanceof L.MarkerCluster && t._iconNeedsUpdate && t._updateIcon()
                            }), this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds)) : setTimeout(d, this.options.chunkDelay)
                        }, this);
                    d()
                } else {
                    for (e = [], i = 0, n = t.length; i < n; i++) s = t[i], s.getLatLng ? this.hasLayer(s) || e.push(s) : o.addLayer(s);
                    this._needsClustering = this._needsClustering.concat(e)
                }
                return this
            },
            removeLayers: function(t) {
                var e, i, n, s = this._featureGroup,
                    r = this._nonPointGroup;
                if (!this._map) {
                    for (e = 0, i = t.length; e < i; e++) n = t[e], this._arraySplice(this._needsClustering, n), r.removeLayer(n);
                    return this
                }
                for (e = 0, i = t.length; e < i; e++) n = t[e], n.__parent ? (this._removeLayer(n, !0, !0), s.hasLayer(n) && (s.removeLayer(n), n.setOpacity && n.setOpacity(1))) : r.removeLayer(n);
                return this._topClusterLevel._recursivelyAddChildrenToMap(null, this._zoom, this._currentShownBounds), s.eachLayer(function(t) {
                    t instanceof L.MarkerCluster && t._updateIcon()
                }), this
            },
            clearLayers: function() {
                return this._map || (this._needsClustering = [], delete this._gridClusters, delete this._gridUnclustered), this._noanimationUnspiderfy && this._noanimationUnspiderfy(), this._featureGroup.clearLayers(), this._nonPointGroup.clearLayers(), this.eachLayer(function(t) {
                    delete t.__parent
                }), this._map && this._generateInitialClusters(), this
            },
            getBounds: function() {
                var t = new L.LatLngBounds;
                this._topClusterLevel && t.extend(this._topClusterLevel._bounds);
                for (var e = this._needsClustering.length - 1; e >= 0; e--) t.extend(this._needsClustering[e].getLatLng());
                return t.extend(this._nonPointGroup.getBounds()), t
            },
            eachLayer: function(t, e) {
                var i, n = this._needsClustering.slice();
                for (this._topClusterLevel && this._topClusterLevel.getAllChildMarkers(n), i = n.length - 1; i >= 0; i--) t.call(e, n[i]);
                this._nonPointGroup.eachLayer(t, e)
            },
            getLayers: function() {
                var t = [];
                return this.eachLayer(function(e) {
                    t.push(e)
                }), t
            },
            getLayer: function(t) {
                var e = null;
                return this.eachLayer(function(i) {
                    L.stamp(i) === t && (e = i)
                }), e
            },
            hasLayer: function(t) {
                if (!t) return !1;
                var e, i = this._needsClustering;
                for (e = i.length - 1; e >= 0; e--)
                    if (i[e] === t) return !0;
                for (i = this._needsRemoving, e = i.length - 1; e >= 0; e--)
                    if (i[e] === t) return !1;
                return !(!t.__parent || t.__parent._group !== this) || this._nonPointGroup.hasLayer(t)
            },
            zoomToShowLayer: function(t, e) {
                var i = function() {
                    if ((t._icon || t.__parent._icon) && !this._inZoomAnimation)
                        if (this._map.off("moveend", i, this), this.off("animationend", i, this), t._icon) e();
                        else if (t.__parent._icon) {
                        var n = function() {
                            this.off("spiderfied", n, this), e()
                        };
                        this.on("spiderfied", n, this), t.__parent.spiderfy()
                    }
                };
                if (t._icon && this._map.getBounds().contains(t.getLatLng())) e();
                else if (t.__parent._zoom < this._map.getZoom()) this._map.on("moveend", i, this), this._map.panTo(t.getLatLng());
                else {
                    var n = function() {
                        this._map.off("movestart", n, this), n = null
                    };
                    this._map.on("movestart", n, this), this._map.on("moveend", i, this), this.on("animationend", i, this), t.__parent.zoomToBounds(), n && i.call(this)
                }
            },
            onAdd: function(t) {
                this._map = t;
                var e, i, n;
                if (!isFinite(this._map.getMaxZoom())) throw "Map has no maxZoom specified";
                for (this._featureGroup.onAdd(t), this._nonPointGroup.onAdd(t), this._gridClusters || this._generateInitialClusters(), e = 0, i = this._needsRemoving.length; e < i; e++) n = this._needsRemoving[e], this._removeLayer(n, !0);
                this._needsRemoving = [], this._zoom = this._map.getZoom(), this._currentShownBounds = this._getExpandedVisibleBounds(), this._map.on("zoomend", this._zoomEnd, this), this._map.on("moveend", this._moveEnd, this), this._spiderfierOnAdd && this._spiderfierOnAdd(), this._bindEvents(), i = this._needsClustering, this._needsClustering = [], this.addLayers(i)
            },
            onRemove: function(t) {
                t.off("zoomend", this._zoomEnd, this), t.off("moveend", this._moveEnd, this), this._unbindEvents(), this._map._mapPane.className = this._map._mapPane.className.replace(" leaflet-cluster-anim", ""), this._spiderfierOnRemove && this._spiderfierOnRemove(), this._hideCoverage(), this._featureGroup.onRemove(t), this._nonPointGroup.onRemove(t), this._featureGroup.clearLayers(), this._map = null
            },
            getVisibleParent: function(t) {
                for (var e = t; e && !e._icon;) e = e.__parent;
                return e || null
            },
            _arraySplice: function(t, e) {
                for (var i = t.length - 1; i >= 0; i--)
                    if (t[i] === e) return t.splice(i, 1), !0
            },
            _removeLayer: function(t, e, i) {
                var n = this._gridClusters,
                    s = this._gridUnclustered,
                    r = this._featureGroup,
                    o = this._map;
                if (e)
                    for (var a = this._maxZoom; a >= 0 && s[a].removeObject(t, o.project(t.getLatLng(), a)); a--);
                var h, _ = t.__parent,
                    u = _._markers;
                for (this._arraySplice(u, t); _ && (_._childCount--, !(_._zoom < 0));) e && _._childCount <= 1 ? (h = _._markers[0] === t ? _._markers[1] : _._markers[0], n[_._zoom].removeObject(_, o.project(_._cLatLng, _._zoom)), s[_._zoom].addObject(h, o.project(h.getLatLng(), _._zoom)), this._arraySplice(_.__parent._childClusters, _), _.__parent._markers.push(h), h.__parent = _.__parent, _._icon && (r.removeLayer(_), i || r.addLayer(h))) : (_._recalculateBounds(), i && _._icon || _._updateIcon()), _ = _.__parent;
                delete t.__parent
            },
            _isOrIsParent: function(t, e) {
                for (; e;) {
                    if (t === e) return !0;
                    e = e.parentNode
                }
                return !1
            },
            _propagateEvent: function(t) {
                if (t.layer instanceof L.MarkerCluster) {
                    if (t.originalEvent && this._isOrIsParent(t.layer._icon, t.originalEvent.relatedTarget)) return;
                    t.type = "cluster" + t.type
                }
                this.fire(t.type, t)
            },
            _defaultIconCreateFunction: function(t) {
                var e = t.getChildCount(),
                    i = " marker-cluster-";
                return i += e < 10 ? "small" : e < 100 ? "medium" : "large", new L.DivIcon({
                    html: "<div><span>" + e + "</span></div>",
                    className: "marker-cluster" + i,
                    iconSize: new L.Point(40, 40)
                })
            },
            _bindEvents: function() {
                var t = this._map,
                    e = this.options.spiderfyOnMaxZoom,
                    i = this.options.showCoverageOnHover,
                    n = this.options.zoomToBoundsOnClick;
                (e || n) && this.on("clusterclick", this._zoomOrSpiderfy, this), i && (this.on("clustermouseover", this._showCoverage, this), this.on("clustermouseout", this._hideCoverage, this), t.on("zoomend", this._hideCoverage, this))
            },
            _zoomOrSpiderfy: function(t) {
                var e = this._map;
                e.getMaxZoom() === e.getZoom() ? this.options.spiderfyOnMaxZoom && t.layer.spiderfy() : this.options.zoomToBoundsOnClick && t.layer.zoomToBounds(), t.originalEvent && 13 === t.originalEvent.keyCode && e._container.focus()
            },
            _showCoverage: function(t) {
                var e = this._map;
                this._inZoomAnimation || (this._shownPolygon && e.removeLayer(this._shownPolygon), t.layer.getChildCount() > 2 && t.layer !== this._spiderfied && (this._shownPolygon = new L.Polygon(t.layer.getConvexHull(), this.options.polygonOptions), e.addLayer(this._shownPolygon)))
            },
            _hideCoverage: function() {
                this._shownPolygon && (this._map.removeLayer(this._shownPolygon), this._shownPolygon = null)
            },
            _unbindEvents: function() {
                var t = this.options.spiderfyOnMaxZoom,
                    e = this.options.showCoverageOnHover,
                    i = this.options.zoomToBoundsOnClick,
                    n = this._map;
                (t || i) && this.off("clusterclick", this._zoomOrSpiderfy, this), e && (this.off("clustermouseover", this._showCoverage, this), this.off("clustermouseout", this._hideCoverage, this), n.off("zoomend", this._hideCoverage, this))
            },
            _zoomEnd: function() {
                this._map && (this._mergeSplitClusters(), this._zoom = this._map._zoom, this._currentShownBounds = this._getExpandedVisibleBounds())
            },
            _moveEnd: function() {
                if (!this._inZoomAnimation) {
                    var t = this._getExpandedVisibleBounds();
                    this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, t), this._topClusterLevel._recursivelyAddChildrenToMap(null, this._map._zoom, t), this._currentShownBounds = t
                }
            },
            _generateInitialClusters: function() {
                var t = this._map.getMaxZoom(),
                    e = this.options.maxClusterRadius,
                    i = e;
                "function" != typeof e && (i = function() {
                    return e
                }), this.options.disableClusteringAtZoom && (t = this.options.disableClusteringAtZoom - 1), this._maxZoom = t, this._gridClusters = {}, this._gridUnclustered = {};
                for (var n = t; n >= 0; n--) this._gridClusters[n] = new L.DistanceGrid(i(n)), this._gridUnclustered[n] = new L.DistanceGrid(i(n));
                this._topClusterLevel = new L.MarkerCluster(this, (-1))
            },
            _addLayer: function(t, e) {
                var i, n, s = this._gridClusters,
                    r = this._gridUnclustered;
                for (this.options.singleMarkerMode && (t.options.icon = this.options.iconCreateFunction({
                        getChildCount: function() {
                            return 1
                        },
                        getAllChildMarkers: function() {
                            return [t]
                        }
                    })); e >= 0; e--) {
                    i = this._map.project(t.getLatLng(), e);
                    var o = s[e].getNearObject(i);
                    if (o) return o._addChild(t), void(t.__parent = o);
                    if (o = r[e].getNearObject(i)) {
                        var a = o.__parent;
                        a && this._removeLayer(o, !1);
                        var h = new L.MarkerCluster(this, e, o, t);
                        s[e].addObject(h, this._map.project(h._cLatLng, e)), o.__parent = h, t.__parent = h;
                        var _ = h;
                        for (n = e - 1; n > a._zoom; n--) _ = new L.MarkerCluster(this, n, _), s[n].addObject(_, this._map.project(o.getLatLng(), n));
                        for (a._addChild(_), n = e; n >= 0 && r[n].removeObject(o, this._map.project(o.getLatLng(), n)); n--);
                        return
                    }
                    r[e].addObject(t, i)
                }
                this._topClusterLevel._addChild(t), t.__parent = this._topClusterLevel
            },
            _enqueue: function(t) {
                this._queue.push(t), this._queueTimeout || (this._queueTimeout = setTimeout(L.bind(this._processQueue, this), 300))
            },
            _processQueue: function() {
                for (var t = 0; t < this._queue.length; t++) this._queue[t].call(this);
                this._queue.length = 0, clearTimeout(this._queueTimeout), this._queueTimeout = null
            },
            _mergeSplitClusters: function() {
                this._processQueue(), this._zoom < this._map._zoom && this._currentShownBounds.intersects(this._getExpandedVisibleBounds()) ? (this._animationStart(), this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, this._zoom, this._getExpandedVisibleBounds()), this._animationZoomIn(this._zoom, this._map._zoom)) : this._zoom > this._map._zoom ? (this._animationStart(), this._animationZoomOut(this._zoom, this._map._zoom)) : this._moveEnd()
            },
            _getExpandedVisibleBounds: function() {
                if (!this.options.removeOutsideVisibleBounds) return this.getBounds();
                var t = this._map,
                    e = t.getBounds(),
                    i = e._southWest,
                    n = e._northEast,
                    s = L.Browser.mobile ? 0 : Math.abs(i.lat - n.lat),
                    r = L.Browser.mobile ? 0 : Math.abs(i.lng - n.lng);
                return new L.LatLngBounds(new L.LatLng(i.lat - s, i.lng - r, (!0)), new L.LatLng(n.lat + s, n.lng + r, (!0)))
            },
            _animationAddLayerNonAnimated: function(t, e) {
                if (e === t) this._featureGroup.addLayer(t);
                else if (2 === e._childCount) {
                    e._addToMap();
                    var i = e.getAllChildMarkers();
                    this._featureGroup.removeLayer(i[0]), this._featureGroup.removeLayer(i[1])
                } else e._updateIcon()
            }
        }), L.MarkerClusterGroup.include(L.DomUtil.TRANSITION ? {
            _animationStart: function() {
                this._map._mapPane.className += " leaflet-cluster-anim", this._inZoomAnimation++
            },
            _animationEnd: function() {
                this._map && (this._map._mapPane.className = this._map._mapPane.className.replace(" leaflet-cluster-anim", "")), this._inZoomAnimation--, this.fire("animationend")
            },
            _animationZoomIn: function(t, e) {
                var i, n = this._getExpandedVisibleBounds(),
                    s = this._featureGroup;
                this._topClusterLevel._recursively(n, t, 0, function(r) {
                    var o, a = r._latlng,
                        h = r._markers;
                    for (n.contains(a) || (a = null), r._isSingleParent() && t + 1 === e ? (s.removeLayer(r), r._recursivelyAddChildrenToMap(null, e, n)) : (r.setOpacity(0), r._recursivelyAddChildrenToMap(a, e, n)), i = h.length - 1; i >= 0; i--) o = h[i], n.contains(o._latlng) || s.removeLayer(o)
                }), this._forceLayout(), this._topClusterLevel._recursivelyBecomeVisible(n, e), s.eachLayer(function(t) {
                    t instanceof L.MarkerCluster || !t._icon || t.setOpacity(1)
                }), this._topClusterLevel._recursively(n, t, e, function(t) {
                    t._recursivelyRestoreChildPositions(e)
                }), this._enqueue(function() {
                    this._topClusterLevel._recursively(n, t, 0, function(t) {
                        s.removeLayer(t), t.setOpacity(1)
                    }), this._animationEnd()
                })
            },
            _animationZoomOut: function(t, e) {
                this._animationZoomOutSingle(this._topClusterLevel, t - 1, e), this._topClusterLevel._recursivelyAddChildrenToMap(null, e, this._getExpandedVisibleBounds()), this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, t, this._getExpandedVisibleBounds())
            },
            _animationZoomOutSingle: function(t, e, i) {
                var n = this._getExpandedVisibleBounds();
                t._recursivelyAnimateChildrenInAndAddSelfToMap(n, e + 1, i);
                var s = this;
                this._forceLayout(), t._recursivelyBecomeVisible(n, i), this._enqueue(function() {
                    if (1 === t._childCount) {
                        var r = t._markers[0];
                        r.setLatLng(r.getLatLng()), r.setOpacity && r.setOpacity(1)
                    } else t._recursively(n, i, 0, function(t) {
                        t._recursivelyRemoveChildrenFromMap(n, e + 1)
                    });
                    s._animationEnd()
                })
            },
            _animationAddLayer: function(t, e) {
                var i = this,
                    n = this._featureGroup;
                n.addLayer(t), e !== t && (e._childCount > 2 ? (e._updateIcon(), this._forceLayout(), this._animationStart(), t._setPos(this._map.latLngToLayerPoint(e.getLatLng())), t.setOpacity(0), this._enqueue(function() {
                    n.removeLayer(t), t.setOpacity(1), i._animationEnd()
                })) : (this._forceLayout(), i._animationStart(), i._animationZoomOutSingle(e, this._map.getMaxZoom(), this._map.getZoom())))
            },
            _forceLayout: function() {
                L.Util.falseFn(e.body.offsetWidth)
            }
        } : {
            _animationStart: function() {},
            _animationZoomIn: function(t, e) {
                this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, t), this._topClusterLevel._recursivelyAddChildrenToMap(null, e, this._getExpandedVisibleBounds()), this.fire("animationend")
            },
            _animationZoomOut: function(t, e) {
                this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds, t), this._topClusterLevel._recursivelyAddChildrenToMap(null, e, this._getExpandedVisibleBounds()), this.fire("animationend")
            },
            _animationAddLayer: function(t, e) {
                this._animationAddLayerNonAnimated(t, e)
            }
        }), L.markerClusterGroup = function(t) {
            return new L.MarkerClusterGroup(t)
        }, L.MarkerCluster = L.Marker.extend({
            initialize: function(t, e, i, n) {
                L.Marker.prototype.initialize.call(this, i ? i._cLatLng || i.getLatLng() : new L.LatLng(0, 0), {
                    icon: this
                }), this._group = t, this._zoom = e, this._markers = [], this._childClusters = [], this._childCount = 0, this._iconNeedsUpdate = !0, this._bounds = new L.LatLngBounds, i && this._addChild(i), n && this._addChild(n)
            },
            getAllChildMarkers: function(t) {
                t = t || [];
                for (var e = this._childClusters.length - 1; e >= 0; e--) this._childClusters[e].getAllChildMarkers(t);
                for (var i = this._markers.length - 1; i >= 0; i--) t.push(this._markers[i]);
                return t
            },
            getChildCount: function() {
                return this._childCount
            },
            zoomToBounds: function() {
                for (var t, e = this._childClusters.slice(), i = this._group._map, n = i.getBoundsZoom(this._bounds), s = this._zoom + 1, r = i.getZoom(); e.length > 0 && n > s;) {
                    s++;
                    var o = [];
                    for (t = 0; t < e.length; t++) o = o.concat(e[t]._childClusters);
                    e = o
                }
                n > s ? this._group._map.setView(this._latlng, s) : n <= r ? this._group._map.setView(this._latlng, r + 1) : this._group._map.fitBounds(this._bounds)
            },
            getBounds: function() {
                var t = new L.LatLngBounds;
                return t.extend(this._bounds), t
            },
            _updateIcon: function() {
                this._iconNeedsUpdate = !0, this._icon && this.setIcon(this)
            },
            createIcon: function() {
                return this._iconNeedsUpdate && (this._iconObj = this._group.options.iconCreateFunction(this), this._iconNeedsUpdate = !1), this._iconObj.createIcon()
            },
            createShadow: function() {
                return this._iconObj.createShadow()
            },
            _addChild: function(t, e) {
                this._iconNeedsUpdate = !0, this._expandBounds(t), t instanceof L.MarkerCluster ? (e || (this._childClusters.push(t), t.__parent = this), this._childCount += t._childCount) : (e || this._markers.push(t), this._childCount++), this.__parent && this.__parent._addChild(t, !0)
            },
            _expandBounds: function(t) {
                var e, i = t._wLatLng || t._latlng;
                t instanceof L.MarkerCluster ? (this._bounds.extend(t._bounds), e = t._childCount) : (this._bounds.extend(i), e = 1), this._cLatLng || (this._cLatLng = t._cLatLng || i);
                var n = this._childCount + e;
                this._wLatLng ? (this._wLatLng.lat = (i.lat * e + this._wLatLng.lat * this._childCount) / n, this._wLatLng.lng = (i.lng * e + this._wLatLng.lng * this._childCount) / n) : this._latlng = this._wLatLng = new L.LatLng(i.lat, i.lng)
            },
            _addToMap: function(t) {
                t && (this._backupLatlng = this._latlng, this.setLatLng(t)), this._group._featureGroup.addLayer(this)
            },
            _recursivelyAnimateChildrenIn: function(t, e, i) {
                this._recursively(t, 0, i - 1, function(t) {
                    var i, n, s = t._markers;
                    for (i = s.length - 1; i >= 0; i--) n = s[i], n._icon && (n._setPos(e), n.setOpacity(0))
                }, function(t) {
                    var i, n, s = t._childClusters;
                    for (i = s.length - 1; i >= 0; i--) n = s[i], n._icon && (n._setPos(e), n.setOpacity(0))
                })
            },
            _recursivelyAnimateChildrenInAndAddSelfToMap: function(t, e, i) {
                this._recursively(t, i, 0, function(n) {
                    n._recursivelyAnimateChildrenIn(t, n._group._map.latLngToLayerPoint(n.getLatLng()).round(), e), n._isSingleParent() && e - 1 === i ? (n.setOpacity(1), n._recursivelyRemoveChildrenFromMap(t, e)) : n.setOpacity(0), n._addToMap()
                })
            },
            _recursivelyBecomeVisible: function(t, e) {
                this._recursively(t, 0, e, null, function(t) {
                    t.setOpacity(1)
                })
            },
            _recursivelyAddChildrenToMap: function(t, e, i) {
                this._recursively(i, -1, e, function(n) {
                    if (e !== n._zoom)
                        for (var s = n._markers.length - 1; s >= 0; s--) {
                            var r = n._markers[s];
                            i.contains(r._latlng) && (t && (r._backupLatlng = r.getLatLng(), r.setLatLng(t), r.setOpacity && r.setOpacity(0)), n._group._featureGroup.addLayer(r))
                        }
                }, function(e) {
                    e._addToMap(t)
                })
            },
            _recursivelyRestoreChildPositions: function(t) {
                for (var e = this._markers.length - 1; e >= 0; e--) {
                    var i = this._markers[e];
                    i._backupLatlng && (i.setLatLng(i._backupLatlng), delete i._backupLatlng)
                }
                if (t - 1 === this._zoom)
                    for (var n = this._childClusters.length - 1; n >= 0; n--) this._childClusters[n]._restorePosition();
                else
                    for (var s = this._childClusters.length - 1; s >= 0; s--) this._childClusters[s]._recursivelyRestoreChildPositions(t)
            },
            _restorePosition: function() {
                this._backupLatlng && (this.setLatLng(this._backupLatlng), delete this._backupLatlng)
            },
            _recursivelyRemoveChildrenFromMap: function(t, e, i) {
                var n, s;
                this._recursively(t, -1, e - 1, function(t) {
                    for (s = t._markers.length - 1; s >= 0; s--) n = t._markers[s], i && i.contains(n._latlng) || (t._group._featureGroup.removeLayer(n), n.setOpacity && n.setOpacity(1))
                }, function(t) {
                    for (s = t._childClusters.length - 1; s >= 0; s--) n = t._childClusters[s], i && i.contains(n._latlng) || (t._group._featureGroup.removeLayer(n), n.setOpacity && n.setOpacity(1))
                })
            },
            _recursively: function(t, e, i, n, s) {
                var r, o, a = this._childClusters,
                    h = this._zoom;
                if (e > h)
                    for (r = a.length - 1; r >= 0; r--) o = a[r], t.intersects(o._bounds) && o._recursively(t, e, i, n, s);
                else if (n && n(this), s && this._zoom === i && s(this), i > h)
                    for (r = a.length - 1; r >= 0; r--) o = a[r], t.intersects(o._bounds) && o._recursively(t, e, i, n, s)
            },
            _recalculateBounds: function() {
                var t, e = this._markers,
                    i = this._childClusters;
                for (this._bounds = new L.LatLngBounds, delete this._wLatLng, t = e.length - 1; t >= 0; t--) this._expandBounds(e[t]);
                for (t = i.length - 1; t >= 0; t--) this._expandBounds(i[t])
            },
            _isSingleParent: function() {
                return this._childClusters.length > 0 && this._childClusters[0]._childCount === this._childCount
            }
        }), L.DistanceGrid = function(t) {
            this._cellSize = t, this._sqCellSize = t * t, this._grid = {}, this._objectPoint = {}
        }, L.DistanceGrid.prototype = {
            addObject: function(t, e) {
                var i = this._getCoord(e.x),
                    n = this._getCoord(e.y),
                    s = this._grid,
                    r = s[n] = s[n] || {},
                    o = r[i] = r[i] || [],
                    a = L.Util.stamp(t);
                this._objectPoint[a] = e, o.push(t)
            },
            updateObject: function(t, e) {
                this.removeObject(t), this.addObject(t, e)
            },
            removeObject: function(t, e) {
                var i, n, s = this._getCoord(e.x),
                    r = this._getCoord(e.y),
                    o = this._grid,
                    a = o[r] = o[r] || {},
                    h = a[s] = a[s] || [];
                for (delete this._objectPoint[L.Util.stamp(t)], i = 0, n = h.length; i < n; i++)
                    if (h[i] === t) return h.splice(i, 1), 1 === n && delete a[s], !0
            },
            eachObject: function(t, e) {
                var i, n, s, r, o, a, h, _ = this._grid;
                for (i in _) {
                    o = _[i];
                    for (n in o)
                        for (a = o[n], s = 0, r = a.length; s < r; s++) h = t.call(e, a[s]), h && (s--, r--)
                }
            },
            getNearObject: function(t) {
                var e, i, n, s, r, o, a, h, _ = this._getCoord(t.x),
                    u = this._getCoord(t.y),
                    l = this._objectPoint,
                    d = this._sqCellSize,
                    p = null;
                for (e = u - 1; e <= u + 1; e++)
                    if (s = this._grid[e])
                        for (i = _ - 1; i <= _ + 1; i++)
                            if (r = s[i])
                                for (n = 0, o = r.length; n < o; n++) a = r[n], h = this._sqDist(l[L.Util.stamp(a)], t), h < d && (d = h, p = a);
                return p
            },
            _getCoord: function(t) {
                return Math.floor(t / this._cellSize)
            },
            _sqDist: function(t, e) {
                var i = e.x - t.x,
                    n = e.y - t.y;
                return i * i + n * n
            }
        },
        function() {
            L.QuickHull = {
                getDistant: function(t, e) {
                    var i = e[1].lat - e[0].lat,
                        n = e[0].lng - e[1].lng;
                    return n * (t.lat - e[0].lat) + i * (t.lng - e[0].lng)
                },
                findMostDistantPointFromBaseLine: function(t, e) {
                    var i, n, s, r = 0,
                        o = null,
                        a = [];
                    for (i = e.length - 1; i >= 0; i--) n = e[i], s = this.getDistant(n, t), s > 0 && (a.push(n), s > r && (r = s, o = n));
                    return {
                        maxPoint: o,
                        newPoints: a
                    }
                },
                buildConvexHull: function(t, e) {
                    var i = [],
                        n = this.findMostDistantPointFromBaseLine(t, e);
                    return n.maxPoint ? (i = i.concat(this.buildConvexHull([t[0], n.maxPoint], n.newPoints)), i = i.concat(this.buildConvexHull([n.maxPoint, t[1]], n.newPoints))) : [t[0]]
                },
                getConvexHull: function(t) {
                    var e, i = !1,
                        n = !1,
                        s = null,
                        r = null;
                    for (e = t.length - 1; e >= 0; e--) {
                        var o = t[e];
                        (i === !1 || o.lat > i) && (s = o, i = o.lat), (n === !1 || o.lat < n) && (r = o, n = o.lat)
                    }
                    var a = [].concat(this.buildConvexHull([r, s], t), this.buildConvexHull([s, r], t));
                    return a
                }
            }
        }(), L.MarkerCluster.include({
            getConvexHull: function() {
                var t, e, i = this.getAllChildMarkers(),
                    n = [];
                for (e = i.length - 1; e >= 0; e--) t = i[e].getLatLng(), n.push(t);
                return L.QuickHull.getConvexHull(n)
            }
        }), L.MarkerCluster.include({
            _2PI: 2 * Math.PI,
            _circleFootSeparation: 25,
            _circleStartAngle: Math.PI / 6,
            _spiralFootSeparation: 28,
            _spiralLengthStart: 11,
            _spiralLengthFactor: 5,
            _circleSpiralSwitchover: 9,
            spiderfy: function() {
                if (this._group._spiderfied !== this && !this._group._inZoomAnimation) {
                    var t, e = this.getAllChildMarkers(),
                        i = this._group,
                        n = i._map,
                        s = n.latLngToLayerPoint(this._latlng);
                    this._group._unspiderfy(), this._group._spiderfied = this, e.length >= this._circleSpiralSwitchover ? t = this._generatePointsSpiral(e.length, s) : (s.y += 10, t = this._generatePointsCircle(e.length, s)), this._animationSpiderfy(e, t)
                }
            },
            unspiderfy: function(t) {
                this._group._inZoomAnimation || (this._animationUnspiderfy(t), this._group._spiderfied = null)
            },
            _generatePointsCircle: function(t, e) {
                var i, n, s = this._group.options.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + t),
                    r = s / this._2PI,
                    o = this._2PI / t,
                    a = [];
                for (a.length = t, i = t - 1; i >= 0; i--) n = this._circleStartAngle + i * o, a[i] = new L.Point(e.x + r * Math.cos(n), e.y + r * Math.sin(n))._round();
                return a
            },
            _generatePointsSpiral: function(t, e) {
                var i, n = this._group.options.spiderfyDistanceMultiplier * this._spiralLengthStart,
                    s = this._group.options.spiderfyDistanceMultiplier * this._spiralFootSeparation,
                    r = this._group.options.spiderfyDistanceMultiplier * this._spiralLengthFactor,
                    o = 0,
                    a = [];
                for (a.length = t, i = t - 1; i >= 0; i--) o += s / n + 5e-4 * i, a[i] = new L.Point(e.x + n * Math.cos(o), e.y + n * Math.sin(o))._round(), n += this._2PI * r / o;
                return a
            },
            _noanimationUnspiderfy: function() {
                var t, e, i = this._group,
                    n = i._map,
                    s = i._featureGroup,
                    r = this.getAllChildMarkers();
                for (this.setOpacity(1), e = r.length - 1; e >= 0; e--) t = r[e], s.removeLayer(t), t._preSpiderfyLatlng && (t.setLatLng(t._preSpiderfyLatlng), delete t._preSpiderfyLatlng), t.setZIndexOffset && t.setZIndexOffset(0), t._spiderLeg && (n.removeLayer(t._spiderLeg), delete t._spiderLeg);
                i._spiderfied = null
            }
        }), L.MarkerCluster.include(L.DomUtil.TRANSITION ? {
            SVG_ANIMATION: function() {
                return e.createElementNS("http://www.w3.org/2000/svg", "animate").toString().indexOf("SVGAnimate") > -1
            }(),
            _animationSpiderfy: function(t, i) {
                var n, s, r, o, a = this,
                    h = this._group,
                    _ = h._map,
                    u = h._featureGroup,
                    l = _.latLngToLayerPoint(this._latlng);
                for (n = t.length - 1; n >= 0; n--) s = t[n], s.setOpacity ? (s.setZIndexOffset(1e6), s.setOpacity(0), u.addLayer(s), s._setPos(l)) : u.addLayer(s);
                h._forceLayout(), h._animationStart();
                var d = L.Path.SVG ? 0 : .3,
                    p = L.Path.SVG_NS;
                for (n = t.length - 1; n >= 0; n--)
                    if (o = _.layerPointToLatLng(i[n]), s = t[n], s._preSpiderfyLatlng = s._latlng, s.setLatLng(o), s.setOpacity && s.setOpacity(1), r = new L.Polyline([a._latlng, o], {
                            weight: 1.5,
                            color: "#222",
                            opacity: d
                        }), _.addLayer(r), s._spiderLeg = r, L.Path.SVG && this.SVG_ANIMATION) {
                        var c = r._path.getTotalLength();
                        r._path.setAttribute("stroke-dasharray", c + "," + c);
                        var f = e.createElementNS(p, "animate");
                        f.setAttribute("attributeName", "stroke-dashoffset"), f.setAttribute("begin", "indefinite"), f.setAttribute("from", c), f.setAttribute("to", 0), f.setAttribute("dur", .25), r._path.appendChild(f), f.beginElement(), f = e.createElementNS(p, "animate"), f.setAttribute("attributeName", "stroke-opacity"), f.setAttribute("attributeName", "stroke-opacity"), f.setAttribute("begin", "indefinite"), f.setAttribute("from", 0), f.setAttribute("to", .5), f.setAttribute("dur", .25), r._path.appendChild(f), f.beginElement()
                    } if (a.setOpacity(.3), L.Path.SVG)
                    for (this._group._forceLayout(), n = t.length - 1; n >= 0; n--) s = t[n]._spiderLeg, s.options.opacity = .5, s._path.setAttribute("stroke-opacity", .5);
                setTimeout(function() {
                    h._animationEnd(), h.fire("spiderfied")
                }, 200)
            },
            _animationUnspiderfy: function(t) {
                var e, i, n, s = this._group,
                    r = s._map,
                    o = s._featureGroup,
                    a = t ? r._latLngToNewLayerPoint(this._latlng, t.zoom, t.center) : r.latLngToLayerPoint(this._latlng),
                    h = this.getAllChildMarkers(),
                    _ = L.Path.SVG && this.SVG_ANIMATION;
                for (s._animationStart(), this.setOpacity(1), i = h.length - 1; i >= 0; i--) e = h[i], e._preSpiderfyLatlng && (e.setLatLng(e._preSpiderfyLatlng), delete e._preSpiderfyLatlng, e.setOpacity ? (e._setPos(a), e.setOpacity(0)) : o.removeLayer(e), _ && (n = e._spiderLeg._path.childNodes[0], n.setAttribute("to", n.getAttribute("from")), n.setAttribute("from", 0), n.beginElement(), n = e._spiderLeg._path.childNodes[1], n.setAttribute("from", .5), n.setAttribute("to", 0), n.setAttribute("stroke-opacity", 0), n.beginElement(), e._spiderLeg._path.setAttribute("stroke-opacity", 0)));
                setTimeout(function() {
                    var t = 0;
                    for (i = h.length - 1; i >= 0; i--) e = h[i], e._spiderLeg && t++;
                    for (i = h.length - 1; i >= 0; i--) e = h[i], e._spiderLeg && (e.setOpacity && (e.setOpacity(1), e.setZIndexOffset(0)), t > 1 && o.removeLayer(e), r.removeLayer(e._spiderLeg), delete e._spiderLeg);
                    s._animationEnd()
                }, 200)
            }
        } : {
            _animationSpiderfy: function(t, e) {
                var i, n, s, r, o = this._group,
                    a = o._map,
                    h = o._featureGroup;
                for (i = t.length - 1; i >= 0; i--) r = a.layerPointToLatLng(e[i]), n = t[i], n._preSpiderfyLatlng = n._latlng, n.setLatLng(r), n.setZIndexOffset && n.setZIndexOffset(1e6), h.addLayer(n), s = new L.Polyline([this._latlng, r], {
                    weight: 1.5,
                    color: "#222"
                }), a.addLayer(s), n._spiderLeg = s;
                this.setOpacity(.3), o.fire("spiderfied")
            },
            _animationUnspiderfy: function() {
                this._noanimationUnspiderfy()
            }
        }), L.MarkerClusterGroup.include({
            _spiderfied: null,
            _spiderfierOnAdd: function() {
                this._map.on("click", this._unspiderfyWrapper, this), this._map.options.zoomAnimation && this._map.on("zoomstart", this._unspiderfyZoomStart, this), this._map.on("zoomend", this._noanimationUnspiderfy, this), L.Path.SVG && !L.Browser.touch && this._map._initPathRoot()
            },
            _spiderfierOnRemove: function() {
                this._map.off("click", this._unspiderfyWrapper, this), this._map.off("zoomstart", this._unspiderfyZoomStart, this), this._map.off("zoomanim", this._unspiderfyZoomAnim, this), this._unspiderfy()
            },
            _unspiderfyZoomStart: function() {
                this._map && this._map.on("zoomanim", this._unspiderfyZoomAnim, this)
            },
            _unspiderfyZoomAnim: function(t) {
                L.DomUtil.hasClass(this._map._mapPane, "leaflet-touching") || (this._map.off("zoomanim", this._unspiderfyZoomAnim, this), this._unspiderfy(t))
            },
            _unspiderfyWrapper: function() {
                this._unspiderfy()
            },
            _unspiderfy: function(t) {
                this._spiderfied && this._spiderfied.unspiderfy(t)
            },
            _noanimationUnspiderfy: function() {
                this._spiderfied && this._spiderfied._noanimationUnspiderfy()
            },
            _unspiderfyLayer: function(t) {
                t._spiderLeg && (this._featureGroup.removeLayer(t), t.setOpacity(1), t.setZIndexOffset(0), this._map.removeLayer(t._spiderLeg), delete t._spiderLeg)
            }
        })
}(window, document);
! function(t, e) {
    L.drawVersion = "0.2.4-dev", L.drawLocal = {
        draw: {
            toolbar: {
                actions: {
                    title: "Cancel drawing",
                    text: "Cancel"
                },
                undo: {
                    title: "Delete last point drawn",
                    text: "Delete last point"
                },
                buttons: {
                    polyline: "Draw a polyline",
                    polygon: "Draw a polygon",
                    rectangle: "Draw a rectangle",
                    circle: "Draw a circle",
                    marker: "Draw a marker"
                }
            },
            handlers: {
                circle: {
                    tooltip: {
                        start: "Click and drag to draw circle."
                    }
                },
                marker: {
                    tooltip: {
                        start: "Click map to place marker."
                    }
                },
                polygon: {
                    tooltip: {
                        start: "Click to start drawing shape.",
                        cont: "Click to continue drawing shape.",
                        end: "Click first point to close this shape."
                    }
                },
                polyline: {
                    error: "<strong>Error:</strong> shape edges cannot cross!",
                    tooltip: {
                        start: "Click to start drawing line.",
                        cont: "Click to continue drawing line.",
                        end: "Click last point to finish line."
                    }
                },
                rectangle: {
                    tooltip: {
                        start: "Click and drag to draw rectangle."
                    }
                },
                simpleshape: {
                    tooltip: {
                        end: "Release mouse to finish drawing."
                    }
                }
            }
        },
        edit: {
            toolbar: {
                actions: {
                    save: {
                        title: "Save changes.",
                        text: "Save"
                    },
                    cancel: {
                        title: "Cancel editing, discards all changes.",
                        text: "Cancel"
                    }
                },
                buttons: {
                    edit: "Edit layers.",
                    editDisabled: "No layers to edit.",
                    remove: "Delete layers.",
                    removeDisabled: "No layers to delete."
                }
            },
            handlers: {
                edit: {
                    tooltip: {
                        text: "Drag handles, or marker to edit feature.",
                        subtext: "Click cancel to undo changes."
                    }
                },
                remove: {
                    tooltip: {
                        text: "Click on a feature to remove"
                    }
                }
            }
        }
    }, L.Draw = {}, L.Draw.Feature = L.Handler.extend({
        includes: L.Mixin.Events,
        initialize: function(t, e) {
            this._map = t, this._container = t._container, this._overlayPane = t._panes.overlayPane, this._popupPane = t._panes.popupPane, e && e.shapeOptions && (e.shapeOptions = L.Util.extend({}, this.options.shapeOptions, e.shapeOptions)), L.setOptions(this, e)
        },
        enable: function() {
            this._enabled || (this.fire("enabled", {
                handler: this.type
            }), this._map.fire("draw:drawstart", {
                layerType: this.type
            }), L.Handler.prototype.enable.call(this))
        },
        disable: function() {
            this._enabled && (L.Handler.prototype.disable.call(this), this._map.fire("draw:drawstop", {
                layerType: this.type
            }), this.fire("disabled", {
                handler: this.type
            }))
        },
        addHooks: function() {
            var t = this._map;
            t && (L.DomUtil.disableTextSelection(), t.getContainer().focus(), this._tooltip = new L.Tooltip(this._map), L.DomEvent.on(this._container, "keyup", this._cancelDrawing, this))
        },
        removeHooks: function() {
            this._map && (L.DomUtil.enableTextSelection(), this._tooltip.dispose(), this._tooltip = null, L.DomEvent.off(this._container, "keyup", this._cancelDrawing, this))
        },
        setOptions: function(t) {
            L.setOptions(this, t)
        },
        _fireCreatedEvent: function(t) {
            this._map.fire("draw:created", {
                layer: t,
                layerType: this.type
            })
        },
        _cancelDrawing: function(t) {
            27 === t.keyCode && this.disable()
        }
    }), L.Draw.Polyline = L.Draw.Feature.extend({
        statics: {
            TYPE: "polyline"
        },
        Poly: L.Polyline,
        options: {
            allowIntersection: !0,
            repeatMode: !1,
            drawError: {
                color: "#b00b00",
                timeout: 2500
            },
            icon: new L.DivIcon({
                iconSize: new L.Point(8, 8),
                className: "leaflet-div-icon leaflet-editing-icon"
            }),
            guidelineDistance: 20,
            maxGuideLineLength: 4e3,
            shapeOptions: {
                stroke: !0,
                color: "#f06eaa",
                weight: 4,
                opacity: .5,
                fill: !1,
                clickable: !0
            },
            metric: !0,
            showLength: !0,
            zIndexOffset: 2e3
        },
        initialize: function(t, e) {
            this.options.drawError.message = L.drawLocal.draw.handlers.polyline.error, e && e.drawError && (e.drawError = L.Util.extend({}, this.options.drawError, e.drawError)), this.type = L.Draw.Polyline.TYPE, L.Draw.Feature.prototype.initialize.call(this, t, e)
        },
        addHooks: function() {
            L.Draw.Feature.prototype.addHooks.call(this), this._map && (this._markers = [], this._markerGroup = new L.LayerGroup, this._map.addLayer(this._markerGroup), this._poly = new L.Polyline([], this.options.shapeOptions), this._tooltip.updateContent(this._getTooltipText()), this._mouseMarker || (this._mouseMarker = L.marker(this._map.getCenter(), {
                icon: L.divIcon({
                    className: "leaflet-mouse-marker",
                    iconAnchor: [20, 20],
                    iconSize: [40, 40]
                }),
                opacity: 0,
                zIndexOffset: this.options.zIndexOffset
            })), this._mouseMarker.on("mousedown", this._onMouseDown, this).addTo(this._map), this._map.on("mousemove", this._onMouseMove, this).on("mouseup", this._onMouseUp, this).on("zoomend", this._onZoomEnd, this))
        },
        removeHooks: function() {
            L.Draw.Feature.prototype.removeHooks.call(this), this._clearHideErrorTimeout(), this._cleanUpShape(), this._map.removeLayer(this._markerGroup), delete this._markerGroup, delete this._markers, this._map.removeLayer(this._poly), delete this._poly, this._mouseMarker.off("mousedown", this._onMouseDown, this).off("mouseup", this._onMouseUp, this), this._map.removeLayer(this._mouseMarker), delete this._mouseMarker, this._clearGuides(), this._map.off("mousemove", this._onMouseMove, this).off("zoomend", this._onZoomEnd, this)
        },
        deleteLastVertex: function() {
            if (!(this._markers.length <= 1)) {
                var t = this._markers.pop(),
                    e = this._poly,
                    i = this._poly.spliceLatLngs(e.getLatLngs().length - 1, 1)[0];
                this._markerGroup.removeLayer(t), e.getLatLngs().length < 2 && this._map.removeLayer(e), this._vertexChanged(i, !1)
            }
        },
        addVertex: function(t) {
            var e = this._markers.length;
            return e > 0 && !this.options.allowIntersection && this._poly.newLatLngIntersects(t) ? void this._showErrorTooltip() : (this._errorShown && this._hideErrorTooltip(), this._markers.push(this._createMarker(t)), this._poly.addLatLng(t), 2 === this._poly.getLatLngs().length && this._map.addLayer(this._poly), void this._vertexChanged(t, !0))
        },
        _finishShape: function() {
            var t = this._poly.newLatLngIntersects(this._poly.getLatLngs()[0], !0);
            return !this.options.allowIntersection && t || !this._shapeIsValid() ? void this._showErrorTooltip() : (this._fireCreatedEvent(), this.disable(), void(this.options.repeatMode && this.enable()))
        },
        _shapeIsValid: function() {
            return !0
        },
        _onZoomEnd: function() {
            this._updateGuide()
        },
        _onMouseMove: function(t) {
            var e = t.layerPoint,
                i = t.latlng;
            this._currentLatLng = i, this._updateTooltip(i), this._updateGuide(e), this._mouseMarker.setLatLng(i), L.DomEvent.preventDefault(t.originalEvent)
        },
        _vertexChanged: function(t, e) {
            this._updateFinishHandler(), this._updateRunningMeasure(t, e), this._clearGuides(), this._updateTooltip()
        },
        _onMouseDown: function(t) {
            var e = t.originalEvent;
            this._mouseDownOrigin = L.point(e.clientX, e.clientY)
        },
        _onMouseUp: function(e) {
            if (this._mouseDownOrigin) {
                var i = L.point(e.originalEvent.clientX, e.originalEvent.clientY).distanceTo(this._mouseDownOrigin);
                Math.abs(i) < 9 * (t.devicePixelRatio || 1) && this.addVertex(e.latlng)
            }
            this._mouseDownOrigin = null
        },
        _updateFinishHandler: function() {
            var t = this._markers.length;
            t > 1 && this._markers[t - 1].on("click", this._finishShape, this), t > 2 && this._markers[t - 2].off("click", this._finishShape, this)
        },
        _createMarker: function(t) {
            var e = new L.Marker(t, {
                icon: this.options.icon,
                zIndexOffset: 2 * this.options.zIndexOffset
            });
            return this._markerGroup.addLayer(e), e
        },
        _updateGuide: function(t) {
            var e = this._markers.length;
            e > 0 && (t = t || this._map.latLngToLayerPoint(this._currentLatLng), this._clearGuides(), this._drawGuide(this._map.latLngToLayerPoint(this._markers[e - 1].getLatLng()), t))
        },
        _updateTooltip: function(t) {
            var e = this._getTooltipText();
            t && this._tooltip.updatePosition(t), this._errorShown || this._tooltip.updateContent(e)
        },
        _drawGuide: function(t, e) {
            var i, o, a, s = Math.floor(Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2))),
                r = this.options.guidelineDistance,
                n = this.options.maxGuideLineLength,
                l = s > n ? s - n : r;
            for (this._guidesContainer || (this._guidesContainer = L.DomUtil.create("div", "leaflet-draw-guides", this._overlayPane)); s > l; l += this.options.guidelineDistance) i = l / s, o = {
                x: Math.floor(t.x * (1 - i) + i * e.x),
                y: Math.floor(t.y * (1 - i) + i * e.y)
            }, a = L.DomUtil.create("div", "leaflet-draw-guide-dash", this._guidesContainer), a.style.backgroundColor = this._errorShown ? this.options.drawError.color : this.options.shapeOptions.color, L.DomUtil.setPosition(a, o)
        },
        _updateGuideColor: function(t) {
            if (this._guidesContainer)
                for (var e = 0, i = this._guidesContainer.childNodes.length; i > e; e++) this._guidesContainer.childNodes[e].style.backgroundColor = t
        },
        _clearGuides: function() {
            if (this._guidesContainer)
                for (; this._guidesContainer.firstChild;) this._guidesContainer.removeChild(this._guidesContainer.firstChild)
        },
        _getTooltipText: function() {
            var t, e, i = this.options.showLength;
            return 0 === this._markers.length ? t = {
                text: L.drawLocal.draw.handlers.polyline.tooltip.start
            } : (e = i ? this._getMeasurementString() : "", t = 1 === this._markers.length ? {
                text: L.drawLocal.draw.handlers.polyline.tooltip.cont,
                subtext: e
            } : {
                text: L.drawLocal.draw.handlers.polyline.tooltip.end,
                subtext: e
            }), t
        },
        _updateRunningMeasure: function(t, e) {
            var i, o, a = this._markers.length;
            1 === this._markers.length ? this._measurementRunningTotal = 0 : (i = a - (e ? 2 : 1), o = t.distanceTo(this._markers[i].getLatLng()), this._measurementRunningTotal += o * (e ? 1 : -1))
        },
        _getMeasurementString: function() {
            var t, e = this._currentLatLng,
                i = this._markers[this._markers.length - 1].getLatLng();
            return t = this._measurementRunningTotal + e.distanceTo(i), L.GeometryUtil.readableDistance(t, this.options.metric)
        },
        _showErrorTooltip: function() {
            this._errorShown = !0, this._tooltip.showAsError().updateContent({
                text: this.options.drawError.message
            }), this._updateGuideColor(this.options.drawError.color), this._poly.setStyle({
                color: this.options.drawError.color
            }), this._clearHideErrorTimeout(), this._hideErrorTimeout = setTimeout(L.Util.bind(this._hideErrorTooltip, this), this.options.drawError.timeout)
        },
        _hideErrorTooltip: function() {
            this._errorShown = !1, this._clearHideErrorTimeout(), this._tooltip.removeError().updateContent(this._getTooltipText()), this._updateGuideColor(this.options.shapeOptions.color), this._poly.setStyle({
                color: this.options.shapeOptions.color
            })
        },
        _clearHideErrorTimeout: function() {
            this._hideErrorTimeout && (clearTimeout(this._hideErrorTimeout), this._hideErrorTimeout = null)
        },
        _cleanUpShape: function() {
            this._markers.length > 1 && this._markers[this._markers.length - 1].off("click", this._finishShape, this)
        },
        _fireCreatedEvent: function() {
            var t = new this.Poly(this._poly.getLatLngs(), this.options.shapeOptions);
            L.Draw.Feature.prototype._fireCreatedEvent.call(this, t)
        }
    }), L.Draw.Polygon = L.Draw.Polyline.extend({
        statics: {
            TYPE: "polygon"
        },
        Poly: L.Polygon,
        options: {
            showArea: !1,
            shapeOptions: {
                stroke: !0,
                color: "#f06eaa",
                weight: 4,
                opacity: .5,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            }
        },
        initialize: function(t, e) {
            L.Draw.Polyline.prototype.initialize.call(this, t, e), this.type = L.Draw.Polygon.TYPE
        },
        _updateFinishHandler: function() {
            var t = this._markers.length;
            1 === t && this._markers[0].on("click", this._finishShape, this), t > 2 && (this._markers[t - 1].on("dblclick", this._finishShape, this), t > 3 && this._markers[t - 2].off("dblclick", this._finishShape, this))
        },
        _getTooltipText: function() {
            var t, e;
            return 0 === this._markers.length ? t = L.drawLocal.draw.handlers.polygon.tooltip.start : this._markers.length < 3 ? t = L.drawLocal.draw.handlers.polygon.tooltip.cont : (t = L.drawLocal.draw.handlers.polygon.tooltip.end, e = this._getMeasurementString()), {
                text: t,
                subtext: e
            }
        },
        _getMeasurementString: function() {
            var t = this._area;
            return t ? L.GeometryUtil.readableArea(t, this.options.metric) : null
        },
        _shapeIsValid: function() {
            return this._markers.length >= 3
        },
        _vertexChanged: function(t, e) {
            var i;
            !this.options.allowIntersection && this.options.showArea && (i = this._poly.getLatLngs(), this._area = L.GeometryUtil.geodesicArea(i)), L.Draw.Polyline.prototype._vertexChanged.call(this, t, e)
        },
        _cleanUpShape: function() {
            var t = this._markers.length;
            t > 0 && (this._markers[0].off("click", this._finishShape, this), t > 2 && this._markers[t - 1].off("dblclick", this._finishShape, this))
        }
    }), L.SimpleShape = {}, L.Draw.SimpleShape = L.Draw.Feature.extend({
        options: {
            repeatMode: !1
        },
        initialize: function(t, e) {
            this._endLabelText = L.drawLocal.draw.handlers.simpleshape.tooltip.end, L.Draw.Feature.prototype.initialize.call(this, t, e)
        },
        addHooks: function() {
            L.Draw.Feature.prototype.addHooks.call(this), this._map && (this._mapDraggable = this._map.dragging.enabled(), this._mapDraggable && this._map.dragging.disable(), this._container.style.cursor = "crosshair", this._tooltip.updateContent({
                text: this._initialLabelText
            }), this._map.on("mousedown", this._onMouseDown, this).on("mousemove", this._onMouseMove, this))
        },
        removeHooks: function() {
            L.Draw.Feature.prototype.removeHooks.call(this), this._map && (this._mapDraggable && this._map.dragging.enable(), this._container.style.cursor = "", this._map.off("mousedown", this._onMouseDown, this).off("mousemove", this._onMouseMove, this), L.DomEvent.off(e, "mouseup", this._onMouseUp, this), this._shape && (this._map.removeLayer(this._shape), delete this._shape)), this._isDrawing = !1
        },
        _onMouseDown: function(t) {
            this._isDrawing = !0, this._startLatLng = t.latlng, L.DomEvent.on(e, "mouseup", this._onMouseUp, this).preventDefault(t.originalEvent)
        },
        _onMouseMove: function(t) {
            var e = t.latlng;
            this._tooltip.updatePosition(e), this._isDrawing && (this._tooltip.updateContent({
                text: this._endLabelText
            }), this._drawShape(e))
        },
        _onMouseUp: function() {
            this._shape && this._fireCreatedEvent(), this.disable(), this.options.repeatMode && this.enable()
        }
    }), L.Draw.Rectangle = L.Draw.SimpleShape.extend({
        statics: {
            TYPE: "rectangle"
        },
        options: {
            shapeOptions: {
                stroke: !0,
                color: "#f06eaa",
                weight: 4,
                opacity: .5,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            }
        },
        initialize: function(t, e) {
            this.type = L.Draw.Rectangle.TYPE, this._initialLabelText = L.drawLocal.draw.handlers.rectangle.tooltip.start, L.Draw.SimpleShape.prototype.initialize.call(this, t, e)
        },
        _drawShape: function(t) {
            this._shape ? this._shape.setBounds(new L.LatLngBounds(this._startLatLng, t)) : (this._shape = new L.Rectangle(new L.LatLngBounds(this._startLatLng, t), this.options.shapeOptions), this._map.addLayer(this._shape))
        },
        _fireCreatedEvent: function() {
            var t = new L.Rectangle(this._shape.getBounds(), this.options.shapeOptions);
            L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, t)
        }
    }), L.Draw.Circle = L.Draw.SimpleShape.extend({
        statics: {
            TYPE: "circle"
        },
        options: {
            shapeOptions: {
                stroke: !0,
                color: "#f06eaa",
                weight: 4,
                opacity: .5,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            },
            showRadius: !0,
            metric: !0
        },
        initialize: function(t, e) {
            this.type = L.Draw.Circle.TYPE, this._initialLabelText = L.drawLocal.draw.handlers.circle.tooltip.start, L.Draw.SimpleShape.prototype.initialize.call(this, t, e)
        },
        _drawShape: function(t) {
            this._shape ? this._shape.setRadius(this._startLatLng.distanceTo(t)) : (this._shape = new L.Circle(this._startLatLng, this._startLatLng.distanceTo(t), this.options.shapeOptions), this._map.addLayer(this._shape))
        },
        _fireCreatedEvent: function() {
            var t = new L.Circle(this._startLatLng, this._shape.getRadius(), this.options.shapeOptions);
            L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, t)
        },
        _onMouseMove: function(t) {
            var e, i = t.latlng,
                o = this.options.showRadius,
                a = this.options.metric;
            this._tooltip.updatePosition(i), this._isDrawing && (this._drawShape(i), e = this._shape.getRadius().toFixed(1), this._tooltip.updateContent({
                text: this._endLabelText,
                subtext: o ? "Radius: " + L.GeometryUtil.readableDistance(e, a) : ""
            }))
        }
    }), L.Draw.Marker = L.Draw.Feature.extend({
        statics: {
            TYPE: "marker"
        },
        options: {
            icon: new L.Icon.Default,
            repeatMode: !1,
            zIndexOffset: 2e3
        },
        initialize: function(t, e) {
            this.type = L.Draw.Marker.TYPE, L.Draw.Feature.prototype.initialize.call(this, t, e)
        },
        addHooks: function() {
            L.Draw.Feature.prototype.addHooks.call(this), this._map && (this._tooltip.updateContent({
                text: L.drawLocal.draw.handlers.marker.tooltip.start
            }), this._mouseMarker || (this._mouseMarker = L.marker(this._map.getCenter(), {
                icon: L.divIcon({
                    className: "leaflet-mouse-marker",
                    iconAnchor: [20, 20],
                    iconSize: [40, 40]
                }),
                opacity: 0,
                zIndexOffset: this.options.zIndexOffset
            })), this._mouseMarker.on("click", this._onClick, this).addTo(this._map), this._map.on("mousemove", this._onMouseMove, this))
        },
        removeHooks: function() {
            L.Draw.Feature.prototype.removeHooks.call(this), this._map && (this._marker && (this._marker.off("click", this._onClick, this), this._map.off("click", this._onClick, this).removeLayer(this._marker), delete this._marker), this._mouseMarker.off("click", this._onClick, this), this._map.removeLayer(this._mouseMarker), delete this._mouseMarker, this._map.off("mousemove", this._onMouseMove, this))
        },
        _onMouseMove: function(t) {
            var e = t.latlng;
            this._tooltip.updatePosition(e), this._mouseMarker.setLatLng(e), this._marker ? (e = this._mouseMarker.getLatLng(), this._marker.setLatLng(e)) : (this._marker = new L.Marker(e, {
                icon: this.options.icon,
                zIndexOffset: this.options.zIndexOffset
            }), this._marker.on("click", this._onClick, this), this._map.on("click", this._onClick, this).addLayer(this._marker))
        },
        _onClick: function() {
            this._fireCreatedEvent(), this.disable(), this.options.repeatMode && this.enable()
        },
        _fireCreatedEvent: function() {
            var t = new L.Marker(this._marker.getLatLng(), {
                icon: this.options.icon
            });
            L.Draw.Feature.prototype._fireCreatedEvent.call(this, t)
        }
    }), L.Edit = L.Edit || {}, L.Edit.Poly = L.Handler.extend({
        options: {
            icon: new L.DivIcon({
                iconSize: new L.Point(8, 8),
                className: "leaflet-div-icon leaflet-editing-icon"
            })
        },
        initialize: function(t, e) {
            this._poly = t, L.setOptions(this, e)
        },
        addHooks: function() {
            this._poly._map && (this._markerGroup || this._initMarkers(), this._poly._map.addLayer(this._markerGroup))
        },
        removeHooks: function() {
            this._poly._map && (this._poly._map.removeLayer(this._markerGroup), delete this._markerGroup, delete this._markers)
        },
        updateMarkers: function() {
            this._markerGroup.clearLayers(), this._initMarkers()
        },
        _initMarkers: function() {
            this._markerGroup || (this._markerGroup = new L.LayerGroup), this._markers = [];
            var t, e, i, o, a = this._poly._latlngs;
            for (t = 0, i = a.length; i > t; t++) o = this._createMarker(a[t], t), o.on("click", this._onMarkerClick, this), this._markers.push(o);
            var s, r;
            for (t = 0, e = i - 1; i > t; e = t++)(0 !== t || L.Polygon && this._poly instanceof L.Polygon) && (s = this._markers[e], r = this._markers[t], this._createMiddleMarker(s, r), this._updatePrevNext(s, r))
        },
        _createMarker: function(t, e) {
            var i = new L.Marker(t, {
                draggable: !0,
                icon: this.options.icon
            });
            return i._origLatLng = t, i._index = e, i.on("drag", this._onMarkerDrag, this), i.on("dragend", this._fireEdit, this), this._markerGroup.addLayer(i), i
        },
        _removeMarker: function(t) {
            var e = t._index;
            this._markerGroup.removeLayer(t), this._markers.splice(e, 1), this._poly.spliceLatLngs(e, 1), this._updateIndexes(e, -1), t.off("drag", this._onMarkerDrag, this).off("dragend", this._fireEdit, this).off("click", this._onMarkerClick, this)
        },
        _fireEdit: function() {
            this._poly.edited = !0, this._poly.fire("edit")
        },
        _onMarkerDrag: function(t) {
            var e = t.target;
            L.extend(e._origLatLng, e._latlng), e._middleLeft && e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev, e)), e._middleRight && e._middleRight.setLatLng(this._getMiddleLatLng(e, e._next)), this._poly.redraw()
        },
        _onMarkerClick: function(t) {
            var e = L.Polygon && this._poly instanceof L.Polygon ? 4 : 3,
                i = t.target;
            this._poly._latlngs.length < e || (this._removeMarker(i), this._updatePrevNext(i._prev, i._next), i._middleLeft && this._markerGroup.removeLayer(i._middleLeft), i._middleRight && this._markerGroup.removeLayer(i._middleRight), i._prev && i._next ? this._createMiddleMarker(i._prev, i._next) : i._prev ? i._next || (i._prev._middleRight = null) : i._next._middleLeft = null, this._fireEdit())
        },
        _updateIndexes: function(t, e) {
            this._markerGroup.eachLayer(function(i) {
                i._index > t && (i._index += e)
            })
        },
        _createMiddleMarker: function(t, e) {
            var i, o, a, s = this._getMiddleLatLng(t, e),
                r = this._createMarker(s);
            r.setOpacity(.6), t._middleRight = e._middleLeft = r, o = function() {
                var o = e._index;
                r._index = o, r.off("click", i, this).on("click", this._onMarkerClick, this), s.lat = r.getLatLng().lat, s.lng = r.getLatLng().lng, this._poly.spliceLatLngs(o, 0, s), this._markers.splice(o, 0, r), r.setOpacity(1), this._updateIndexes(o, 1), e._index++, this._updatePrevNext(t, r), this._updatePrevNext(r, e), this._poly.fire("editstart")
            }, a = function() {
                r.off("dragstart", o, this), r.off("dragend", a, this), this._createMiddleMarker(t, r), this._createMiddleMarker(r, e)
            }, i = function() {
                o.call(this), a.call(this), this._fireEdit()
            }, r.on("click", i, this).on("dragstart", o, this).on("dragend", a, this), this._markerGroup.addLayer(r)
        },
        _updatePrevNext: function(t, e) {
            t && (t._next = e), e && (e._prev = t)
        },
        _getMiddleLatLng: function(t, e) {
            var i = this._poly._map,
                o = i.project(t.getLatLng()),
                a = i.project(e.getLatLng());
            return i.unproject(o._add(a)._divideBy(2))
        }
    }), L.Polyline.addInitHook(function() {
        this.editing || (L.Edit.Poly && (this.editing = new L.Edit.Poly(this), this.options.editable && this.editing.enable()), this.on("add", function() {
            this.editing && this.editing.enabled() && this.editing.addHooks()
        }), this.on("remove", function() {
            this.editing && this.editing.enabled() && this.editing.removeHooks()
        }))
    }), L.Edit = L.Edit || {}, L.Edit.SimpleShape = L.Handler.extend({
        options: {
            moveIcon: new L.DivIcon({
                iconSize: new L.Point(8, 8),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-edit-move"
            }),
            resizeIcon: new L.DivIcon({
                iconSize: new L.Point(8, 8),
                className: "leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"
            })
        },
        initialize: function(t, e) {
            this._shape = t, L.Util.setOptions(this, e)
        },
        addHooks: function() {
            this._shape._map && (this._map = this._shape._map, this._markerGroup || this._initMarkers(), this._map.addLayer(this._markerGroup))
        },
        removeHooks: function() {
            if (this._shape._map) {
                this._unbindMarker(this._moveMarker);
                for (var t = 0, e = this._resizeMarkers.length; e > t; t++) this._unbindMarker(this._resizeMarkers[t]);
                this._resizeMarkers = null, this._map.removeLayer(this._markerGroup), delete this._markerGroup
            }
            this._map = null
        },
        updateMarkers: function() {
            this._markerGroup.clearLayers(), this._initMarkers()
        },
        _initMarkers: function() {
            this._markerGroup || (this._markerGroup = new L.LayerGroup), this._createMoveMarker(), this._createResizeMarker()
        },
        _createMoveMarker: function() {},
        _createResizeMarker: function() {},
        _createMarker: function(t, e) {
            var i = new L.Marker(t, {
                draggable: !0,
                icon: e,
                zIndexOffset: 10
            });
            return this._bindMarker(i), this._markerGroup.addLayer(i), i
        },
        _bindMarker: function(t) {
            t.on("dragstart", this._onMarkerDragStart, this).on("drag", this._onMarkerDrag, this).on("dragend", this._onMarkerDragEnd, this)
        },
        _unbindMarker: function(t) {
            t.off("dragstart", this._onMarkerDragStart, this).off("drag", this._onMarkerDrag, this).off("dragend", this._onMarkerDragEnd, this)
        },
        _onMarkerDragStart: function(t) {
            var e = t.target;
            e.setOpacity(0), this._shape.fire("editstart")
        },
        _fireEdit: function() {
            this._shape.edited = !0, this._shape.fire("edit")
        },
        _onMarkerDrag: function(t) {
            var e = t.target,
                i = e.getLatLng();
            e === this._moveMarker ? this._move(i) : this._resize(i), this._shape.redraw()
        },
        _onMarkerDragEnd: function(t) {
            var e = t.target;
            e.setOpacity(1), this._fireEdit()
        },
        _move: function() {},
        _resize: function() {}
    }), L.Edit = L.Edit || {}, L.Edit.Rectangle = L.Edit.SimpleShape.extend({
        _createMoveMarker: function() {
            var t = this._shape.getBounds(),
                e = t.getCenter();
            this._moveMarker = this._createMarker(e, this.options.moveIcon)
        },
        _createResizeMarker: function() {
            var t = this._getCorners();
            this._resizeMarkers = [];
            for (var e = 0, i = t.length; i > e; e++) this._resizeMarkers.push(this._createMarker(t[e], this.options.resizeIcon)), this._resizeMarkers[e]._cornerIndex = e
        },
        _onMarkerDragStart: function(t) {
            L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this, t);
            var e = this._getCorners(),
                i = t.target,
                o = i._cornerIndex;
            this._oppositeCorner = e[(o + 2) % 4], this._toggleCornerMarkers(0, o)
        },
        _onMarkerDragEnd: function(t) {
            var e, i, o = t.target;
            o === this._moveMarker && (e = this._shape.getBounds(), i = e.getCenter(), o.setLatLng(i)), this._toggleCornerMarkers(1), this._repositionCornerMarkers(), L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this, t)
        },
        _move: function(t) {
            for (var e, i = this._shape.getLatLngs(), o = this._shape.getBounds(), a = o.getCenter(), s = [], r = 0, n = i.length; n > r; r++) e = [i[r].lat - a.lat, i[r].lng - a.lng], s.push([t.lat + e[0], t.lng + e[1]]);
            this._shape.setLatLngs(s), this._repositionCornerMarkers()
        },
        _resize: function(t) {
            var e;
            this._shape.setBounds(L.latLngBounds(t, this._oppositeCorner)), e = this._shape.getBounds(), this._moveMarker.setLatLng(e.getCenter())
        },
        _getCorners: function() {
            var t = this._shape.getBounds(),
                e = t.getNorthWest(),
                i = t.getNorthEast(),
                o = t.getSouthEast(),
                a = t.getSouthWest();
            return [e, i, o, a]
        },
        _toggleCornerMarkers: function(t) {
            for (var e = 0, i = this._resizeMarkers.length; i > e; e++) this._resizeMarkers[e].setOpacity(t)
        },
        _repositionCornerMarkers: function() {
            for (var t = this._getCorners(), e = 0, i = this._resizeMarkers.length; i > e; e++) this._resizeMarkers[e].setLatLng(t[e])
        }
    }), L.Rectangle.addInitHook(function() {
        L.Edit.Rectangle && (this.editing = new L.Edit.Rectangle(this), this.options.editable && this.editing.enable())
    }), L.Edit = L.Edit || {}, L.Edit.Circle = L.Edit.SimpleShape.extend({
        _createMoveMarker: function() {
            var t = this._shape.getLatLng();
            this._moveMarker = this._createMarker(t, this.options.moveIcon)
        },
        _createResizeMarker: function() {
            var t = this._shape.getLatLng(),
                e = this._getResizeMarkerPoint(t);
            this._resizeMarkers = [], this._resizeMarkers.push(this._createMarker(e, this.options.resizeIcon))
        },
        _getResizeMarkerPoint: function(t) {
            var e = this._shape._radius * Math.cos(Math.PI / 4),
                i = this._map.project(t);
            return this._map.unproject([i.x + e, i.y - e])
        },
        _move: function(t) {
            var e = this._getResizeMarkerPoint(t);
            this._resizeMarkers[0].setLatLng(e), this._shape.setLatLng(t)
        },
        _resize: function(t) {
            var e = this._moveMarker.getLatLng(),
                i = e.distanceTo(t);
            this._shape.setRadius(i)
        }
    }), L.Circle.addInitHook(function() {
        L.Edit.Circle && (this.editing = new L.Edit.Circle(this), this.options.editable && this.editing.enable()), this.on("add", function() {
            this.editing && this.editing.enabled() && this.editing.addHooks()
        }), this.on("remove", function() {
            this.editing && this.editing.enabled() && this.editing.removeHooks()
        })
    }), L.LatLngUtil = {
        cloneLatLngs: function(t) {
            for (var e = [], i = 0, o = t.length; o > i; i++) e.push(this.cloneLatLng(t[i]));
            return e
        },
        cloneLatLng: function(t) {
            return L.latLng(t.lat, t.lng)
        }
    }, L.GeometryUtil = L.extend(L.GeometryUtil || {}, {
        geodesicArea: function(t) {
            var e, i, o = t.length,
                a = 0,
                s = L.LatLng.DEG_TO_RAD;
            if (o > 2) {
                for (var r = 0; o > r; r++) e = t[r], i = t[(r + 1) % o], a += (i.lng - e.lng) * s * (2 + Math.sin(e.lat * s) + Math.sin(i.lat * s));
                a = 6378137 * a * 6378137 / 2
            }
            return Math.abs(a)
        },
        readableArea: function(t, e) {
            var i;
            return e ? i = t >= 1e4 ? (1e-4 * t).toFixed(2) + " ha" : t.toFixed(2) + " m&sup2;" : (t *= .836127, i = t >= 3097600 ? (t / 3097600).toFixed(2) + " mi&sup2;" : t >= 4840 ? (t / 4840).toFixed(2) + " acres" : Math.ceil(t) + " yd&sup2;"), i
        },
        readableDistance: function(t, e) {
            var i;
            return e ? i = t > 1e3 ? (t / 1e3).toFixed(2) + " km" : Math.ceil(t) + " m" : (t *= 1.09361, i = t > 1760 ? (t / 1760).toFixed(2) + " miles" : Math.ceil(t) + " yd"), i
        }
    }), L.Util.extend(L.LineUtil, {
        segmentsIntersect: function(t, e, i, o) {
            return this._checkCounterclockwise(t, i, o) !== this._checkCounterclockwise(e, i, o) && this._checkCounterclockwise(t, e, i) !== this._checkCounterclockwise(t, e, o)
        },
        _checkCounterclockwise: function(t, e, i) {
            return (i.y - t.y) * (e.x - t.x) > (e.y - t.y) * (i.x - t.x)
        }
    }), L.Polyline.include({
        intersects: function() {
            var t, e, i, o = this._originalPoints,
                a = o ? o.length : 0;
            if (this._tooFewPointsForIntersection()) return !1;
            for (t = a - 1; t >= 3; t--)
                if (e = o[t - 1], i = o[t], this._lineSegmentsIntersectsRange(e, i, t - 2)) return !0;
            return !1
        },
        newLatLngIntersects: function(t, e) {
            return !!this._map && this.newPointIntersects(this._map.latLngToLayerPoint(t), e)
        },
        newPointIntersects: function(t, e) {
            var i = this._originalPoints,
                o = i ? i.length : 0,
                a = i ? i[o - 1] : null,
                s = o - 2;
            return !this._tooFewPointsForIntersection(1) && this._lineSegmentsIntersectsRange(a, t, s, e ? 1 : 0)
        },
        _tooFewPointsForIntersection: function(t) {
            var e = this._originalPoints,
                i = e ? e.length : 0;
            return i += t || 0, !this._originalPoints || 3 >= i
        },
        _lineSegmentsIntersectsRange: function(t, e, i, o) {
            var a, s, r = this._originalPoints;
            o = o || 0;
            for (var n = i; n > o; n--)
                if (a = r[n - 1], s = r[n], L.LineUtil.segmentsIntersect(t, e, a, s)) return !0;
            return !1
        }
    }), L.Polygon.include({
        intersects: function() {
            var t, e, i, o, a, s = this._originalPoints;
            return !this._tooFewPointsForIntersection() && (!!(t = L.Polyline.prototype.intersects.call(this)) || (e = s.length, i = s[0], o = s[e - 1], a = e - 2, this._lineSegmentsIntersectsRange(o, i, a, 1)))
        }
    }), L.Control.Draw = L.Control.extend({
        options: {
            position: "topleft",
            draw: {},
            edit: !1
        },
        initialize: function(t) {
            if (L.version < "0.7") throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");
            L.Control.prototype.initialize.call(this, t);
            var e, i;
            this._toolbars = {}, L.DrawToolbar && this.options.draw && (i = new L.DrawToolbar(this.options.draw), e = L.stamp(i), this._toolbars[e] = i, this._toolbars[e].on("enable", this._toolbarEnabled, this)), L.EditToolbar && this.options.edit && (i = new L.EditToolbar(this.options.edit), e = L.stamp(i), this._toolbars[e] = i, this._toolbars[e].on("enable", this._toolbarEnabled, this))
        },
        onAdd: function(t) {
            var e, i = L.DomUtil.create("div", "leaflet-draw"),
                o = !1,
                a = "leaflet-draw-toolbar-top";
            for (var s in this._toolbars) this._toolbars.hasOwnProperty(s) && (e = this._toolbars[s].addToolbar(t), e && (o || (L.DomUtil.hasClass(e, a) || L.DomUtil.addClass(e.childNodes[0], a), o = !0), i.appendChild(e)));
            return i
        },
        onRemove: function() {
            for (var t in this._toolbars) this._toolbars.hasOwnProperty(t) && this._toolbars[t].removeToolbar()
        },
        setDrawingOptions: function(t) {
            for (var e in this._toolbars) this._toolbars[e] instanceof L.DrawToolbar && this._toolbars[e].setOptions(t)
        },
        _toolbarEnabled: function(t) {
            var e = "" + L.stamp(t.target);
            for (var i in this._toolbars) this._toolbars.hasOwnProperty(i) && i !== e && this._toolbars[i].disable()
        }
    }), L.Map.mergeOptions({
        drawControlTooltips: !0,
        drawControl: !1
    }), L.Map.addInitHook(function() {
        this.options.drawControl && (this.drawControl = new L.Control.Draw, this.addControl(this.drawControl))
    }), L.Toolbar = L.Class.extend({
        includes: [L.Mixin.Events],
        initialize: function(t) {
            L.setOptions(this, t), this._modes = {}, this._actionButtons = [], this._activeMode = null
        },
        enabled: function() {
            return null !== this._activeMode
        },
        disable: function() {
            this.enabled() && this._activeMode.handler.disable()
        },
        addToolbar: function(t) {
            var e, i = L.DomUtil.create("div", "leaflet-draw-section"),
                o = 0,
                a = this._toolbarClass || "",
                s = this.getModeHandlers(t);
            for (this._toolbarContainer = L.DomUtil.create("div", "leaflet-draw-toolbar leaflet-bar"), this._map = t, e = 0; e < s.length; e++) s[e].enabled && this._initModeHandler(s[e].handler, this._toolbarContainer, o++, a, s[e].title);
            return o ? (this._lastButtonIndex = --o, this._actionsContainer = L.DomUtil.create("ul", "leaflet-draw-actions"), i.appendChild(this._toolbarContainer), i.appendChild(this._actionsContainer), i) : void 0
        },
        removeToolbar: function() {
            for (var t in this._modes) this._modes.hasOwnProperty(t) && (this._disposeButton(this._modes[t].button, this._modes[t].handler.enable, this._modes[t].handler), this._modes[t].handler.disable(), this._modes[t].handler.off("enabled", this._handlerActivated, this).off("disabled", this._handlerDeactivated, this));
            this._modes = {};
            for (var e = 0, i = this._actionButtons.length; i > e; e++) this._disposeButton(this._actionButtons[e].button, this._actionButtons[e].callback, this);
            this._actionButtons = [], this._actionsContainer = null
        },
        _initModeHandler: function(t, e, i, o, a) {
            var s = t.type;
            this._modes[s] = {}, this._modes[s].handler = t, this._modes[s].button = this._createButton({
                title: a,
                className: o + "-" + s,
                container: e,
                callback: this._modes[s].handler.enable,
                context: this._modes[s].handler
            }), this._modes[s].buttonIndex = i, this._modes[s].handler.on("enabled", this._handlerActivated, this).on("disabled", this._handlerDeactivated, this)
        },
        _createButton: function(t) {
            var e = L.DomUtil.create("a", t.className || "", t.container);
            return e.href = "#", t.text && (e.innerHTML = t.text), t.title && (e.title = t.title), L.DomEvent.on(e, "click", L.DomEvent.stopPropagation).on(e, "mousedown", L.DomEvent.stopPropagation).on(e, "dblclick", L.DomEvent.stopPropagation).on(e, "click", L.DomEvent.preventDefault).on(e, "click", t.callback, t.context), e
        },
        _disposeButton: function(t, e) {
            L.DomEvent.off(t, "click", L.DomEvent.stopPropagation).off(t, "mousedown", L.DomEvent.stopPropagation).off(t, "dblclick", L.DomEvent.stopPropagation).off(t, "click", L.DomEvent.preventDefault).off(t, "click", e)
        },
        _handlerActivated: function(t) {
            this.disable(), this._activeMode = this._modes[t.handler], L.DomUtil.addClass(this._activeMode.button, "leaflet-draw-toolbar-button-enabled"), this._showActionsToolbar(), this.fire("enable")
        },
        _handlerDeactivated: function() {
            this._hideActionsToolbar(), L.DomUtil.removeClass(this._activeMode.button, "leaflet-draw-toolbar-button-enabled"), this._activeMode = null, this.fire("disable")
        },
        _createActions: function(t) {
            var e, i, o, a, s = this._actionsContainer,
                r = this.getActions(t),
                n = r.length;
            for (i = 0, o = this._actionButtons.length; o > i; i++) this._disposeButton(this._actionButtons[i].button, this._actionButtons[i].callback);
            for (this._actionButtons = []; s.firstChild;) s.removeChild(s.firstChild);
            for (var l = 0; n > l; l++) "enabled" in r[l] && !r[l].enabled || (e = L.DomUtil.create("li", "", s), a = this._createButton({
                title: r[l].title,
                text: r[l].text,
                container: e,
                callback: r[l].callback,
                context: r[l].context
            }), this._actionButtons.push({
                button: a,
                callback: r[l].callback
            }))
        },
        _showActionsToolbar: function() {
            var t = this._activeMode.buttonIndex,
                e = this._lastButtonIndex,
                i = this._activeMode.button.offsetTop - 1;
            this._createActions(this._activeMode.handler), this._actionsContainer.style.top = i + "px", 0 === t && (L.DomUtil.addClass(this._toolbarContainer, "leaflet-draw-toolbar-notop"), L.DomUtil.addClass(this._actionsContainer, "leaflet-draw-actions-top")),
                t === e && (L.DomUtil.addClass(this._toolbarContainer, "leaflet-draw-toolbar-nobottom"), L.DomUtil.addClass(this._actionsContainer, "leaflet-draw-actions-bottom")), this._actionsContainer.style.display = "block"
        },
        _hideActionsToolbar: function() {
            this._actionsContainer.style.display = "none", L.DomUtil.removeClass(this._toolbarContainer, "leaflet-draw-toolbar-notop"), L.DomUtil.removeClass(this._toolbarContainer, "leaflet-draw-toolbar-nobottom"), L.DomUtil.removeClass(this._actionsContainer, "leaflet-draw-actions-top"), L.DomUtil.removeClass(this._actionsContainer, "leaflet-draw-actions-bottom")
        }
    }), L.Tooltip = L.Class.extend({
        initialize: function(t) {
            this._map = t, this._popupPane = t._panes.popupPane, this._container = t.options.drawControlTooltips ? L.DomUtil.create("div", "leaflet-draw-tooltip", this._popupPane) : null, this._singleLineLabel = !1
        },
        dispose: function() {
            this._container && (this._popupPane.removeChild(this._container), this._container = null)
        },
        updateContent: function(t) {
            return this._container ? (t.subtext = t.subtext || "", 0 !== t.subtext.length || this._singleLineLabel ? t.subtext.length > 0 && this._singleLineLabel && (L.DomUtil.removeClass(this._container, "leaflet-draw-tooltip-single"), this._singleLineLabel = !1) : (L.DomUtil.addClass(this._container, "leaflet-draw-tooltip-single"), this._singleLineLabel = !0), this._container.innerHTML = (t.subtext.length > 0 ? '<span class="leaflet-draw-tooltip-subtext">' + t.subtext + "</span><br />" : "") + "<span>" + t.text + "</span>", this) : this
        },
        updatePosition: function(t) {
            var e = this._map.latLngToLayerPoint(t),
                i = this._container;
            return this._container && (i.style.visibility = "inherit", L.DomUtil.setPosition(i, e)), this
        },
        showAsError: function() {
            return this._container && L.DomUtil.addClass(this._container, "leaflet-error-draw-tooltip"), this
        },
        removeError: function() {
            return this._container && L.DomUtil.removeClass(this._container, "leaflet-error-draw-tooltip"), this
        }
    }), L.DrawToolbar = L.Toolbar.extend({
        options: {
            polyline: {},
            polygon: {},
            rectangle: {},
            circle: {},
            marker: {}
        },
        initialize: function(t) {
            for (var e in this.options) this.options.hasOwnProperty(e) && t[e] && (t[e] = L.extend({}, this.options[e], t[e]));
            this._toolbarClass = "leaflet-draw-draw", L.Toolbar.prototype.initialize.call(this, t)
        },
        getModeHandlers: function(t) {
            return [{
                enabled: this.options.polyline,
                handler: new L.Draw.Polyline(t, this.options.polyline),
                title: L.drawLocal.draw.toolbar.buttons.polyline
            }, {
                enabled: this.options.polygon,
                handler: new L.Draw.Polygon(t, this.options.polygon),
                title: L.drawLocal.draw.toolbar.buttons.polygon
            }, {
                enabled: this.options.rectangle,
                handler: new L.Draw.Rectangle(t, this.options.rectangle),
                title: L.drawLocal.draw.toolbar.buttons.rectangle
            }, {
                enabled: this.options.circle,
                handler: new L.Draw.Circle(t, this.options.circle),
                title: L.drawLocal.draw.toolbar.buttons.circle
            }, {
                enabled: this.options.marker,
                handler: new L.Draw.Marker(t, this.options.marker),
                title: L.drawLocal.draw.toolbar.buttons.marker
            }]
        },
        getActions: function(t) {
            return [{
                enabled: t.deleteLastVertex,
                title: L.drawLocal.draw.toolbar.undo.title,
                text: L.drawLocal.draw.toolbar.undo.text,
                callback: t.deleteLastVertex,
                context: t
            }, {
                title: L.drawLocal.draw.toolbar.actions.title,
                text: L.drawLocal.draw.toolbar.actions.text,
                callback: this.disable,
                context: this
            }]
        },
        setOptions: function(t) {
            L.setOptions(this, t);
            for (var e in this._modes) this._modes.hasOwnProperty(e) && t.hasOwnProperty(e) && this._modes[e].handler.setOptions(t[e])
        }
    }), L.EditToolbar = L.Toolbar.extend({
        options: {
            edit: {
                selectedPathOptions: {
                    color: "#fe57a1",
                    opacity: .6,
                    dashArray: "10, 10",
                    fill: !0,
                    fillColor: "#fe57a1",
                    fillOpacity: .1
                }
            },
            remove: {},
            featureGroup: null
        },
        initialize: function(t) {
            t.edit && ("undefined" == typeof t.edit.selectedPathOptions && (t.edit.selectedPathOptions = this.options.edit.selectedPathOptions), t.edit = L.extend({}, this.options.edit, t.edit)), t.remove && (t.remove = L.extend({}, this.options.remove, t.remove)), this._toolbarClass = "leaflet-draw-edit", L.Toolbar.prototype.initialize.call(this, t), this._selectedFeatureCount = 0
        },
        getModeHandlers: function(t) {
            var e = this.options.featureGroup;
            return [{
                enabled: this.options.edit,
                handler: new L.EditToolbar.Edit(t, {
                    featureGroup: e,
                    selectedPathOptions: this.options.edit.selectedPathOptions
                }),
                title: L.drawLocal.edit.toolbar.buttons.edit
            }, {
                enabled: this.options.remove,
                handler: new L.EditToolbar.Delete(t, {
                    featureGroup: e
                }),
                title: L.drawLocal.edit.toolbar.buttons.remove
            }]
        },
        getActions: function() {
            return [{
                title: L.drawLocal.edit.toolbar.actions.save.title,
                text: L.drawLocal.edit.toolbar.actions.save.text,
                callback: this._save,
                context: this
            }, {
                title: L.drawLocal.edit.toolbar.actions.cancel.title,
                text: L.drawLocal.edit.toolbar.actions.cancel.text,
                callback: this.disable,
                context: this
            }]
        },
        addToolbar: function(t) {
            var e = L.Toolbar.prototype.addToolbar.call(this, t);
            return this._checkDisabled(), this.options.featureGroup.on("layeradd layerremove", this._checkDisabled, this), e
        },
        removeToolbar: function() {
            this.options.featureGroup.off("layeradd layerremove", this._checkDisabled, this), L.Toolbar.prototype.removeToolbar.call(this)
        },
        disable: function() {
            this.enabled() && (this._activeMode.handler.revertLayers(), L.Toolbar.prototype.disable.call(this))
        },
        _save: function() {
            this._activeMode.handler.save(), this._activeMode.handler.disable()
        },
        _checkDisabled: function() {
            var t, e = this.options.featureGroup,
                i = 0 !== e.getLayers().length;
            this.options.edit && (t = this._modes[L.EditToolbar.Edit.TYPE].button, i ? L.DomUtil.removeClass(t, "leaflet-disabled") : L.DomUtil.addClass(t, "leaflet-disabled"), t.setAttribute("title", i ? L.drawLocal.edit.toolbar.buttons.edit : L.drawLocal.edit.toolbar.buttons.editDisabled)), this.options.remove && (t = this._modes[L.EditToolbar.Delete.TYPE].button, i ? L.DomUtil.removeClass(t, "leaflet-disabled") : L.DomUtil.addClass(t, "leaflet-disabled"), t.setAttribute("title", i ? L.drawLocal.edit.toolbar.buttons.remove : L.drawLocal.edit.toolbar.buttons.removeDisabled))
        }
    }), L.EditToolbar.Edit = L.Handler.extend({
        statics: {
            TYPE: "edit"
        },
        includes: L.Mixin.Events,
        initialize: function(t, e) {
            if (L.Handler.prototype.initialize.call(this, t), this._selectedPathOptions = e.selectedPathOptions, this._featureGroup = e.featureGroup, !(this._featureGroup instanceof L.FeatureGroup)) throw new Error("options.featureGroup must be a L.FeatureGroup");
            this._uneditedLayerProps = {}, this.type = L.EditToolbar.Edit.TYPE
        },
        enable: function() {
            !this._enabled && this._hasAvailableLayers() && (this.fire("enabled", {
                handler: this.type
            }), this._map.fire("draw:editstart", {
                handler: this.type
            }), L.Handler.prototype.enable.call(this), this._featureGroup.on("layeradd", this._enableLayerEdit, this).on("layerremove", this._disableLayerEdit, this))
        },
        disable: function() {
            this._enabled && (this._featureGroup.off("layeradd", this._enableLayerEdit, this).off("layerremove", this._disableLayerEdit, this), L.Handler.prototype.disable.call(this), this._map.fire("draw:editstop", {
                handler: this.type
            }), this.fire("disabled", {
                handler: this.type
            }))
        },
        addHooks: function() {
            var t = this._map;
            t && (t.getContainer().focus(), this._featureGroup.eachLayer(this._enableLayerEdit, this), this._tooltip = new L.Tooltip(this._map), this._tooltip.updateContent({
                text: L.drawLocal.edit.handlers.edit.tooltip.text,
                subtext: L.drawLocal.edit.handlers.edit.tooltip.subtext
            }), this._map.on("mousemove", this._onMouseMove, this))
        },
        removeHooks: function() {
            this._map && (this._featureGroup.eachLayer(this._disableLayerEdit, this), this._uneditedLayerProps = {}, this._tooltip.dispose(), this._tooltip = null, this._map.off("mousemove", this._onMouseMove, this))
        },
        revertLayers: function() {
            this._featureGroup.eachLayer(function(t) {
                this._revertLayer(t)
            }, this)
        },
        save: function() {
            var t = new L.LayerGroup;
            this._featureGroup.eachLayer(function(e) {
                e.edited && (t.addLayer(e), e.edited = !1)
            }), this._map.fire("draw:edited", {
                layers: t
            })
        },
        _backupLayer: function(t) {
            var e = L.Util.stamp(t);
            this._uneditedLayerProps[e] || (t instanceof L.Polyline || t instanceof L.Polygon || t instanceof L.Rectangle ? this._uneditedLayerProps[e] = {
                latlngs: L.LatLngUtil.cloneLatLngs(t.getLatLngs())
            } : t instanceof L.Circle ? this._uneditedLayerProps[e] = {
                latlng: L.LatLngUtil.cloneLatLng(t.getLatLng()),
                radius: t.getRadius()
            } : t instanceof L.Marker && (this._uneditedLayerProps[e] = {
                latlng: L.LatLngUtil.cloneLatLng(t.getLatLng())
            }))
        },
        _revertLayer: function(t) {
            var e = L.Util.stamp(t);
            t.edited = !1, this._uneditedLayerProps.hasOwnProperty(e) && (t instanceof L.Polyline || t instanceof L.Polygon || t instanceof L.Rectangle ? t.setLatLngs(this._uneditedLayerProps[e].latlngs) : t instanceof L.Circle ? (t.setLatLng(this._uneditedLayerProps[e].latlng), t.setRadius(this._uneditedLayerProps[e].radius)) : t instanceof L.Marker && t.setLatLng(this._uneditedLayerProps[e].latlng))
        },
        _toggleMarkerHighlight: function(t) {
            if (t._icon) {
                var e = t._icon;
                e.style.display = "none", L.DomUtil.hasClass(e, "leaflet-edit-marker-selected") ? (L.DomUtil.removeClass(e, "leaflet-edit-marker-selected"), this._offsetMarker(e, -4)) : (L.DomUtil.addClass(e, "leaflet-edit-marker-selected"), this._offsetMarker(e, 4)), e.style.display = ""
            }
        },
        _offsetMarker: function(t, e) {
            var i = parseInt(t.style.marginTop, 10) - e,
                o = parseInt(t.style.marginLeft, 10) - e;
            t.style.marginTop = i + "px", t.style.marginLeft = o + "px"
        },
        _enableLayerEdit: function(t) {
            var e, i = t.layer || t.target || t,
                o = i instanceof L.Marker;
            (!o || i._icon) && (this._backupLayer(i), this._selectedPathOptions && (e = L.Util.extend({}, this._selectedPathOptions), o ? this._toggleMarkerHighlight(i) : (i.options.previousOptions = L.Util.extend({
                dashArray: null
            }, i.options), i instanceof L.Circle || i instanceof L.Polygon || i instanceof L.Rectangle || (e.fill = !1), i.setStyle(e))), o ? (i.dragging.enable(), i.on("dragend", this._onMarkerDragEnd)) : i.editing.enable())
        },
        _disableLayerEdit: function(t) {
            var e = t.layer || t.target || t;
            e.edited = !1, this._selectedPathOptions && (e instanceof L.Marker ? this._toggleMarkerHighlight(e) : (e.setStyle(e.options.previousOptions), delete e.options.previousOptions)), e instanceof L.Marker ? (e.dragging.disable(), e.off("dragend", this._onMarkerDragEnd, this)) : e.editing.disable()
        },
        _onMarkerDragEnd: function(t) {
            var e = t.target;
            e.edited = !0
        },
        _onMouseMove: function(t) {
            this._tooltip.updatePosition(t.latlng)
        },
        _hasAvailableLayers: function() {
            return 0 !== this._featureGroup.getLayers().length
        }
    }), L.EditToolbar.Delete = L.Handler.extend({
        statics: {
            TYPE: "remove"
        },
        includes: L.Mixin.Events,
        initialize: function(t, e) {
            if (L.Handler.prototype.initialize.call(this, t), L.Util.setOptions(this, e), this._deletableLayers = this.options.featureGroup, !(this._deletableLayers instanceof L.FeatureGroup)) throw new Error("options.featureGroup must be a L.FeatureGroup");
            this.type = L.EditToolbar.Delete.TYPE
        },
        enable: function() {
            !this._enabled && this._hasAvailableLayers() && (this.fire("enabled", {
                handler: this.type
            }), this._map.fire("draw:deletestart", {
                handler: this.type
            }), L.Handler.prototype.enable.call(this), this._deletableLayers.on("layeradd", this._enableLayerDelete, this).on("layerremove", this._disableLayerDelete, this))
        },
        disable: function() {
            this._enabled && (this._deletableLayers.off("layeradd", this._enableLayerDelete, this).off("layerremove", this._disableLayerDelete, this), L.Handler.prototype.disable.call(this), this._map.fire("draw:deletestop", {
                handler: this.type
            }), this.fire("disabled", {
                handler: this.type
            }))
        },
        addHooks: function() {
            var t = this._map;
            t && (t.getContainer().focus(), this._deletableLayers.eachLayer(this._enableLayerDelete, this), this._deletedLayers = new L.layerGroup, this._tooltip = new L.Tooltip(this._map), this._tooltip.updateContent({
                text: L.drawLocal.edit.handlers.remove.tooltip.text
            }), this._map.on("mousemove", this._onMouseMove, this))
        },
        removeHooks: function() {
            this._map && (this._deletableLayers.eachLayer(this._disableLayerDelete, this), this._deletedLayers = null, this._tooltip.dispose(), this._tooltip = null, this._map.off("mousemove", this._onMouseMove, this))
        },
        revertLayers: function() {
            this._deletedLayers.eachLayer(function(t) {
                this._deletableLayers.addLayer(t)
            }, this)
        },
        save: function() {
            this._map.fire("draw:deleted", {
                layers: this._deletedLayers
            })
        },
        _enableLayerDelete: function(t) {
            var e = t.layer || t.target || t;
            e.on("click", this._removeLayer, this)
        },
        _disableLayerDelete: function(t) {
            var e = t.layer || t.target || t;
            e.off("click", this._removeLayer, this), this._deletedLayers.removeLayer(e)
        },
        _removeLayer: function(t) {
            var e = t.layer || t.target || t;
            this._deletableLayers.removeLayer(e), this._deletedLayers.addLayer(e)
        },
        _onMouseMove: function(t) {
            this._tooltip.updatePosition(t.latlng)
        },
        _hasAvailableLayers: function() {
            return 0 !== this._deletableLayers.getLayers().length
        }
    })
}(window, document);
L.Edit = L.Edit || {}, L.Edit.Poly = L.Handler.extend({
    options: {
        allowIntersection: !1,
        icon: new L.DivIcon({
            iconSize: new L.Point(8, 8),
            className: "leaflet-div-icon leaflet-editing-icon"
        })
    },
    initialize: function(t, e) {
        this._poly = t, L.setOptions(this, e)
    },
    addHooks: function() {
        this._poly._map && (this._markerGroup || this._initMarkers(), this._poly._map.addLayer(this._markerGroup))
    },
    removeHooks: function() {
        this._poly._map && (this._poly._map.removeLayer(this._markerGroup), delete this._markerGroup, delete this._markers)
    },
    updateMarkers: function() {
        this._markerGroup.clearLayers(), this._initMarkers()
    },
    _initMarkers: function() {
        this._markerGroup || (this._markerGroup = new L.LayerGroup), this._markers = [];
        var t, e, i, r, n = this._poly._latlngs;
        for (t = 0, i = n.length; t < i; t++) r = this._createMarker(n[t], t), r.on("click", this._onMarkerClick, this), this._markers.push(r);
        var a, s;
        for (t = 0, e = i - 1; t < i; e = t++)(0 !== t || L.Polygon && this._poly instanceof L.Polygon) && (a = this._markers[e], s = this._markers[t], this._createMiddleMarker(a, s), this._updatePrevNext(a, s))
    },
    _createMarker: function(t, e) {
        var i = new L.Marker(t, {
            draggable: !0,
            icon: this.options.icon
        });
        return i._origLatLng = t, i._index = e, i.on("drag", this._onMarkerDrag, this), i.on("dragend", this._onMarkerDragEnd, this), i.on("dragstart", this._onMarkerDragStart, this), this._markerGroup.addLayer(i), i
    },
    _removeMarker: function(t) {
        var e = t._index;
        this._markerGroup.removeLayer(t), this._markers.splice(e, 1), this._poly.spliceLatLngs(e, 1), this._updateIndexes(e, -1), t.off("drag", this._onMarkerDrag, this).off("dragend", this._onMarkerDragEnd, this).off("dragstart", this._onMarkerDragStart, this).off("click", this._onMarkerClick, this)
    },
    _fireEdit: function() {
        this._poly.edited = !0, this._poly.fire("edit")
    },
    _onMarkerDragStart: function(t) {
        var e = t.target;
        e._srcLatLng = {}, L.extend(e._srcLatLng, e._latlng)
    },
    _onMarkerDragEnd: function(t) {
        if (this.options.allowIntersection) return void this._fireEdit();
        var e, i, r, n = t.target,
            a = this._poly.getLatLngs(),
            s = !1;
        for (e in a)
            if (a.hasOwnProperty(e) && (i = a[e], this._poly.intersects(n.getLatLng()))) {
                s = !0, r = new L.LatLng(n._srcLatLng.lat, n._srcLatLng.lng), L.extend(n._origLatLng, r), n.setLatLng(r);
                break
            } return s ? (this._poly.redraw(), void this.updateMarkers()) : void this._fireEdit()
    },
    _onMarkerDrag: function(t) {
        var e = t.target;
        L.extend(e._origLatLng, e._latlng), e._middleLeft && e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev, e)), e._middleRight && e._middleRight.setLatLng(this._getMiddleLatLng(e, e._next)), this._poly.redraw()
    },
    _onMarkerClick: function(t) {
        var e = L.Polygon && this._poly instanceof L.Polygon ? 4 : 3,
            i = t.target;
        this._poly._latlngs.length < e || (this._removeMarker(i), this._updatePrevNext(i._prev, i._next), i._middleLeft && this._markerGroup.removeLayer(i._middleLeft), i._middleRight && this._markerGroup.removeLayer(i._middleRight), i._prev && i._next ? this._createMiddleMarker(i._prev, i._next) : i._prev ? i._next || (i._prev._middleRight = null) : i._next._middleLeft = null, this._fireEdit())
    },
    _updateIndexes: function(t, e) {
        this._markerGroup.eachLayer(function(i) {
            i._index > t && (i._index += e)
        })
    },
    _createMiddleMarker: function(t, e) {
        var i, r, n, a = this._getMiddleLatLng(t, e),
            s = this._createMarker(a);
        s.setOpacity(.6), t._middleRight = e._middleLeft = s, r = function() {
            var r = e._index;
            s._index = r, s.off("click", i, this).on("click", this._onMarkerClick, this), a.lat = s.getLatLng().lat, a.lng = s.getLatLng().lng, this._poly.spliceLatLngs(r, 0, a), this._markers.splice(r, 0, s), s.setOpacity(1), this._updateIndexes(r, 1), e._index++, this._updatePrevNext(t, s), this._updatePrevNext(s, e), this._poly.fire("editstart")
        }, n = function() {
            s.off("dragstart", r, this), s.off("dragend", n, this), this._createMiddleMarker(t, s), this._createMiddleMarker(s, e)
        }, i = function() {
            r.call(this), n.call(this), this._fireEdit()
        }, s.on("click", i, this).on("dragstart", r, this).on("dragend", n, this), this._markerGroup.addLayer(s)
    },
    _updatePrevNext: function(t, e) {
        t && (t._next = e), e && (e._prev = t)
    },
    _getMiddleLatLng: function(t, e) {
        var i = this._poly._map,
            r = i.project(t.getLatLng()),
            n = i.project(e.getLatLng());
        return i.unproject(r._add(n)._divideBy(2))
    }
}), L.Polyline.addInitHook(function() {
    this.editing || (L.Edit.Poly && (this.editing = new L.Edit.Poly(this), this.options.editable && this.editing.enable()), this.on("add", function() {
        this.editing && this.editing.enabled() && this.editing.addHooks()
    }), this.on("remove", function() {
        this.editing && this.editing.enabled() && this.editing.removeHooks()
    }))
});
L.DrawTouch = L.Class.extend({
    includes: L.Mixin.Events,
    initialize: function(t) {
        this._map = t
    },
    enable: function() {
        this._enabled || (this._map && L.DomEvent.addListener(this._map._container, "touchstart", this._onTouchStart, this), this._enabled = !0)
    },
    disable: function() {
        this._enabled && (this._map && L.DomEvent.removeListener(this._map._container, "touchstart", this._onTouchStart, this), this._enabled = !1)
    },
    _normaliseEvent: function(t) {
        L.DomUtil.disableImageDrag(), L.DomUtil.disableTextSelection();
        var n = t.touches ? t.touches[0] : t,
            e = this._map.mouseEventToContainerPoint(n),
            i = this._map.mouseEventToLayerPoint(n),
            o = this._map.layerPointToLatLng(i);
        return {
            latlng: o,
            layerPoint: i,
            containerPoint: e,
            clientX: n.clientX,
            clientY: n.clientY,
            originalEvent: t
        }
    },
    _onTouchStart: function(t) {
        1 === t.touches.length && (this.fire("down", this._normaliseEvent(t)), L.DomEvent.addListener(this._map._container, "touchmove", this._onTouchMove, this), L.DomEvent.addListener(this._map._container, "touchend", this._onTouchEnd, this))
    },
    _onTouchMove: function(t) {
        this.fire("move", this._normaliseEvent(t))
    },
    _onTouchEnd: function() {
        this.fire("up"), L.DomEvent.removeListener(this._map._container, "touchmove", this._onTouchMove, this), L.DomEvent.removeListener(this._map._container, "touchend", this._onTouchEnd, this)
    }
});
L.Draw = {}, L.Draw.Feature = L.Handler.extend({
    includes: L.Mixin.Events,
    initialize: function(e, t) {
        this._map = e, this._container = e._container, this._overlayPane = e._panes.overlayPane, this._popupPane = e._panes.popupPane, t && t.shapeOptions && (t.shapeOptions = L.Util.extend({}, this.options.shapeOptions, t.shapeOptions)), L.setOptions(this, t)
    },
    enable: function() {
        this._enabled || (this.fire("enabled", {
            handler: this.type
        }), this._map.fire("draw:drawstart", {
            layerType: this.type
        }), L.Handler.prototype.enable.call(this))
    },
    disable: function() {
        this._enabled && (L.Handler.prototype.disable.call(this), this._map.fire("draw:drawstop", {
            layerType: this.type
        }), this.fire("disabled", {
            handler: this.type
        }))
    },
    addHooks: function() {
        var e = this._map;
        e && (L.DomUtil.disableTextSelection(), e.getContainer().focus(), this._tooltip = new L.Tooltip(this._map), L.DomEvent.on(this._container, "keyup", this._cancelDrawing, this))
    },
    removeHooks: function() {
        this._map && (L.DomUtil.enableTextSelection(), this._tooltip.dispose(), this._tooltip = null, L.DomEvent.off(this._container, "keyup", this._cancelDrawing, this))
    },
    setOptions: function(e) {
        L.setOptions(this, e)
    },
    _fireCreatedEvent: function(e) {
        this._map.fire("draw:created", {
            layer: e,
            layerType: this.type
        })
    },
    _cancelDrawing: function(e) {
        27 === e.keyCode && this.disable()
    }
});
L.Draw.Polyline = L.Draw.Feature.extend({
    statics: {
        TYPE: "polyline"
    },
    Poly: L.Polyline,
    options: {
        allowIntersection: !0,
        repeatMode: !1,
        drawError: {
            color: "#b00b00",
            timeout: 2500
        },
        icon: new L.DivIcon({
            iconSize: new L.Point(10, 10),
            className: "leaflet-div-icon leaflet-editing-icon"
        }),
        guidelineDistance: 20,
        maxGuideLineLength: 4e3,
        shapeOptions: {
            stroke: !0,
            color: "#f06eaa",
            weight: 4,
            opacity: .5,
            fill: !1,
            clickable: !0
        },
        metric: !0,
        zIndexOffset: 2e3
    },
    initialize: function(e, i) {
        i && i.drawError && (i.drawError = L.Util.extend({}, this.options.drawError, i.drawError)), this.type = L.Draw.Polyline.TYPE, L.Draw.Feature.prototype.initialize.call(this, e, i)
    },
    addHooks: function() {
        L.Draw.Feature.prototype.addHooks.call(this), this._map && (this._markers = [], this._markerGroup = new L.LayerGroup, this._map.addLayer(this._markerGroup), this._poly = new L.Polyline([], this.options.shapeOptions), this._mouseMarker || (this._mouseMarker = L.marker(this._map.getCenter(), {
            icon: L.divIcon({
                className: "leaflet-mouse-marker",
                iconAnchor: [20, 20],
                iconSize: [40, 40]
            }),
            opacity: 0,
            zIndexOffset: this.options.zIndexOffset
        })), this._mouseMarker.on("mousedown", this._onMouseDown, this).addTo(this._map), this._map.on("mousemove", this._onMouseMove, this).on("mouseup", this._onMouseUp, this).on("zoomend", this._onZoomEnd, this))
    },
    removeHooks: function() {
        L.Draw.Feature.prototype.removeHooks.call(this), this._clearHideErrorTimeout(), this._cleanUpShape(), this._map.removeLayer(this._markerGroup), delete this._markerGroup, delete this._markers, this._map.removeLayer(this._poly), delete this._poly, this._mouseMarker.off("mousedown", this._onMouseDown, this).off("mouseup", this._onMouseUp, this), this._map.removeLayer(this._mouseMarker), delete this._mouseMarker, this._clearGuides(), this._map.off("mousemove", this._onMouseMove, this).off("zoomend", this._onZoomEnd, this)
    },
    deleteLastVertex: function() {
        if (!(this._markers.length <= 1)) {
            var e = this._markers.pop(),
                i = this._poly,
                t = this._poly.spliceLatLngs(i.getLatLngs().length - 1, 1)[0];
            this._markerGroup.removeLayer(e), i.getLatLngs().length < 2 && this._map.removeLayer(i), this._vertexChanged(t, !1)
        }
    },
    addVertex: function(e) {
        this._markers.push(this._createMarker(e)), this._poly.addLatLng(e), 2 === this._poly.getLatLngs().length && this._map.addLayer(this._poly), this._vertexChanged(e, !0)
    },
    _finishShape: function() {
        this._fireCreatedEvent(), this.disable(), this.options.repeatMode && this.enable()
    },
    _shapeIsValid: function() {
        return !0
    },
    _onZoomEnd: function() {
        this._updateGuide()
    },
    _onMouseMove: function(e) {
        var i = e.layerPoint,
            t = e.latlng;
        this._currentLatLng = t, this._updateGuide(i), this._mouseMarker.setLatLng(t), L.DomEvent.preventDefault(e.originalEvent)
    },
    _vertexChanged: function() {
        this._updateFinishHandler(), this._clearGuides()
    },
    _onMouseDown: function(e) {
        var i = e.originalEvent;
        this._mouseDownOrigin = L.point(i.clientX, i.clientY)
    },
    _onMouseUp: function(e) {
        if (this._mouseDownOrigin) {
            var i = L.point(e.originalEvent.clientX, e.originalEvent.clientY).distanceTo(this._mouseDownOrigin);
            Math.abs(i) < 9 * (window.devicePixelRatio || 1) && this.addVertex(e.latlng)
        }
        this._mouseDownOrigin = null
    },
    _updateFinishHandler: function() {
        var e = this._markers.length;
        e > 1 && this._markers[e - 1].on("click", this._finishShape, this), e > 2 && this._markers[e - 2].off("click", this._finishShape, this)
    },
    _createMarker: function(e) {
        var i = new L.Marker(e, {
            icon: this.options.icon,
            zIndexOffset: 2 * this.options.zIndexOffset
        });
        return this._markerGroup.addLayer(i), i
    },
    _updateGuide: function(e) {
        var i = this._markers.length;
        i > 0 && (e = e || this._map.latLngToLayerPoint(this._currentLatLng), this._clearGuides(), this._drawGuide(this._map.latLngToLayerPoint(this._markers[i - 1].getLatLng()), e))
    },
    _drawGuide: function(e, i) {
        var t, o, s, r = Math.floor(Math.sqrt(Math.pow(i.x - e.x, 2) + Math.pow(i.y - e.y, 2))),
            n = this.options.guidelineDistance,
            a = this.options.maxGuideLineLength,
            h = r > a ? r - a : n;
        for (this._guidesContainer || (this._guidesContainer = L.DomUtil.create("div", "leaflet-draw-guides", this._overlayPane)); h < r; h += this.options.guidelineDistance) t = h / r, o = {
            x: Math.floor(e.x * (1 - t) + t * i.x),
            y: Math.floor(e.y * (1 - t) + t * i.y)
        }, s = L.DomUtil.create("div", "leaflet-draw-guide-dash", this._guidesContainer), s.style.backgroundColor = this._errorShown ? this.options.drawError.color : this.options.shapeOptions.color, L.DomUtil.setPosition(s, o)
    },
    _updateGuideColor: function(e) {
        if (this._guidesContainer)
            for (var i = 0, t = this._guidesContainer.childNodes.length; i < t; i++) this._guidesContainer.childNodes[i].style.backgroundColor = e
    },
    _clearGuides: function() {
        if (this._guidesContainer)
            for (; this._guidesContainer.firstChild;) this._guidesContainer.removeChild(this._guidesContainer.firstChild)
    },
    _clearHideErrorTimeout: function() {
        this._hideErrorTimeout && (clearTimeout(this._hideErrorTimeout), this._hideErrorTimeout = null)
    },
    _cleanUpShape: function() {
        this._markers.length > 1 && this._markers[this._markers.length - 1].off("click", this._finishShape, this)
    },
    _fireCreatedEvent: function() {
        var e = new this.Poly(this._poly.getLatLngs(), this.options.shapeOptions);
        L.Draw.Feature.prototype._fireCreatedEvent.call(this, e)
    }
});
L.Draw.Polygon = L.Draw.Polyline.extend({
    statics: {
        TYPE: "polygon"
    },
    Poly: L.Polygon,
    options: {
        showArea: !1,
        shapeOptions: {
            stroke: !0,
            color: "#f06eaa",
            weight: 4,
            opacity: .5,
            fill: !0,
            fillColor: null,
            fillOpacity: .2,
            clickable: !0
        }
    },
    initialize: function(t, i) {
        L.Draw.Polyline.prototype.initialize.call(this, t, i), this.type = L.Draw.Polygon.TYPE
    },
    _updateFinishHandler: function() {
        var t = this._markers.length;
        1 === t && this._markers[0].on("click", this._finishShape, this), t > 2 && (this._markers[t - 1].on("dblclick", this._finishShape, this), t > 3 && this._markers[t - 2].off("dblclick", this._finishShape, this))
    },
    _getTooltipText: function() {
        var t, i;
        return 0 === this._markers.length ? t = L.drawLocal.draw.handlers.polygon.tooltip.start : this._markers.length < 3 ? t = L.drawLocal.draw.handlers.polygon.tooltip.cont : (t = L.drawLocal.draw.handlers.polygon.tooltip.end, i = this._getMeasurementString()), {
            text: t,
            subtext: i
        }
    },
    _getMeasurementString: function() {
        var t = this._area;
        return t ? L.GeometryUtil.readableArea(t, this.options.metric) : null
    },
    _shapeIsValid: function() {
        return this._markers.length >= 3
    },
    _vertexChanged: function(t, i) {
        var e;
        !this.options.allowIntersection && this.options.showArea && (e = this._poly.getLatLngs(), this._area = L.GeometryUtil.geodesicArea(e)), L.Draw.Polyline.prototype._vertexChanged.call(this, t, i)
    },
    _cleanUpShape: function() {
        var t = this._markers.length;
        t > 0 && (this._markers[0].off("click", this._finishShape, this), t > 2 && this._markers[t - 1].off("dblclick", this._finishShape, this))
    }
});
L.Draw.PolygonTouch = L.Draw.Polygon.extend({
    initialize: function(t, o) {
        L.Draw.Polygon.prototype.initialize.call(this, t, o)
    },
    addHooks: function() {
        L.Draw.Polygon.prototype.addHooks.call(this), this._touchable || (this._touchable = new L.DrawTouch(this._map)), this._map && this._touchable.on({
            down: this._onTouchStart,
            move: this._onTouchMove,
            up: this._onTouchEnd
        }, this).enable()
    },
    removeHooks: function() {
        L.Draw.Polygon.prototype.removeHooks.call(this), this._map && this._map && this._touchable.off({
            down: this._onTouchStart,
            move: this._onTouchMove,
            up: this._onTouchEnd
        }, this).disable()
    },
    _updateFinishHandler: function() {
        L.Draw.Polygon.prototype._updateFinishHandler.call(this);
        var t, o, i = this._markers.length,
            n = this._map.containerPointToLatLng([0, 0]).distanceTo(this._map.containerPointToLatLng([0, 1]));
        i > 2 && (t = this._markers[0].getLatLng().distanceTo(this._markers[i - 1].getLatLng()), o = Math.floor(t / n), o < 12 * (window.devicePixelRatio || 1) && (this.deleteLastVertex(), this._finishShape()))
    },
    _onTouchStart: function(t) {
        this._currentLatLng = t.latlng, this._touchOriginPoint = L.point(t.clientX, t.clientY), this._map.off("mousemove", this._onMouseMove, this)
    },
    _onTouchMove: function(t) {
        this._touchOriginPoint && (this._touchEndPoint = L.point(t.clientX, t.clientY))
    },
    _onTouchEnd: function() {
        if (this._touchOriginPoint)
            if (this._touchEndPoint) {
                var t = L.point(this._touchEndPoint).distanceTo(this._touchOriginPoint);
                Math.abs(t) < 9 * (window.devicePixelRatio || 1) && this.addVertex(this._currentLatLng)
            } else this.addVertex(this._currentLatLng);
        this._map.on("mousemove", this._onMouseMove, this), this._touchOriginPoint = null, this._touchEndPoint = null
    }
});
var MapManager = function(e) {
    this.DEBUG = !1, this.MAPBOX_ID_ROADMAP = "zipperagent.k3f0npic", this.MAPBOX_ID_SATELLITE = "zipperagent.k3f132cj", this.MAPBOX_ID_HYBRID = "zipperagent.k767gpl3", this.MAPBOX_ID_TERRAIN = "zipperagent.k3f11f54", this.MAPQUEST_KEY = "Gmjtd%7Cluurn96bng%2Cb5%3Do5-lrba1", this.MAPBOX_ACCESS_TOKEN, this.containerId, this.markerAjaxUrl, this.detailAjaxUrl, this.map, this.clusterMarkers = !1, this.markerLayer = null, this.cachedMarkers, this.cachedAreas, this.ajaxRequest
};
MapManager.prototype.debug = function(e) {
    this.DEBUG && console.log(e)
}, MapManager.prototype.createMap = function(e, a) {
    var t = "//api.tiles.mapbox.com/v4/{mapboxId}/{z}/{x}/{y}.png?access_token=" + this.MAPBOX_ACCESS_TOKEN,
        r = '<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox</a> <a href="http://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap</a> <a href="http://developer.mapquest.com/web/info/terms-of-use" target="_blank">&copy; MapQuest</a>',
        i = new L.TileLayer(t, {
            mapboxId: this.MAPBOX_ID_ROADMAP,
            attribution: r,
            maxZoom: 18
        }),
        n = new L.TileLayer(t, {
            mapboxId: this.MAPBOX_ID_SATELLITE,
            attribution: r,
            maxZoom: 18
        }),
        o = new L.TileLayer(t, {
            mapboxId: this.MAPBOX_ID_HYBRID,
            attribution: r,
            maxZoom: 18
        }),
        s = new L.TileLayer(t, {
            mapboxId: this.MAPBOX_ID_TERRAIN,
            attribution: r,
            maxZoom: 18
        });
    switch (e) {
        case "G_NORMAL_MAP":
        case "ROADMAP":
        default:
            defaultLayer = i;
            break;
        case "G_SATELLITE_MAP":
        case "SATELLITE":
            defaultLayer = n;
            break;
        case "G_HYBRID_MAP":
        case "HYBRID":
            defaultLayer = o;
            break;
        case "G_PHYSICAL_MAP":
        case "TERRAIN":
            defaultLayer = s
    }
    if (this.map = new L.Map(this.containerId, {
            scrollWheelZoom: !1,
            touchZoom: !1,
            layers: [defaultLayer]
        }), this.map.attributionControl.setPrefix(""), a) {
        var p = {
            Map: i,
            Satellite: n,
            Hybrid: o,
            Terrain: s
        };
        L.control.layers(p).addTo(this.map)
    }
}, MapManager.prototype.centerMap = function(e, a) {
    null === a ? this.map.setView(e) : this.map.setView(e, a)
}, MapManager.prototype.fitBounds = function(e) {
    1 === e.length ? this.map.setView(e[0], 15) : this.map.fitBounds(e, {
        padding: [5, 5]
    })
}, MapManager.prototype.centerMapToMarker = function(e) {
    var a = e.getLatLng();
    this.map.setView(a), e.getPopup()._isOpen && this.map.panBy([0, -75])
}, MapManager.prototype.resetCachedAreas = function() {
    delete this.cachedAreas, this.cachedAreas = []
}, MapManager.prototype.isCachedArea = function() {
    return !1
}, MapManager.prototype.setCachedArea = function() {
    this.cachedAreas.push(this.map.getBounds())
}, MapManager.prototype.resetMarkerCache = function() {
    delete this.cachedMarkers, this.cachedMarkers = []
}, MapManager.prototype.isCachedMarker = function(e, a) {
    return void 0 !== this.cachedMarkers[e + "-" + a]
}, MapManager.prototype.setCachedMarker = function(e, a, t) {
    this.cachedMarkers[e + "-" + a] = t
}, MapManager.prototype.resetMarkerLayer = function() {
    null !== this.markerLayer && (this.map.removeLayer(this.markerLayer), delete this.markerLayer), this.resetMarkerCache(), this.resetCachedAreas(), this.clusterMarkers ? this.markerLayer = new L.MarkerClusterGroup({
        showCoverageOnHover: !1,
        maxClusterRadius: 80
    }) : this.markerLayer = new L.LayerGroup, this.map.addLayer(this.markerLayer), this.updateCountText()
}, MapManager.prototype.abortAjaxRequest = function() {
    void 0 !== this.ajaxRequest && void 0 !== this.ajaxRequest.abort() && this.ajaxRequest.abort()
}, MapManager.prototype.updateCountText = function() {
    var e = 0,
        a = this.map.getBounds();
    this.markerLayer.eachLayer(function(t) {
        a.contains(t.getLatLng()) && e++
    }), jQuery(".zpa-map-results-count").html(e + " listings found")
}, MapManager.prototype.updateMarkerLayer = function() {
    data = this.getMarkerRequestData();
    var e = this;
    this.isCachedArea() || (this.ajaxRequest = jQuery.ajax({
        type: "GET",
        url: this.markerAjaxUrl,
        data: data,
        dataType: "jsonp"
    }).done(function(a) {
        if (a.data.length > 0) {
            for (var t in a.data) {
                var r = a.data[t],
                    i = new L.LatLng(r.latitude, r.longitude),
                    n = r.boardId,
                    o = r.listingNumber,
                    s = r.propertyType;
                e.addMarkerForMapSearch(i, n, o, s)
            }
            a.length < 1e3 && e.setCachedArea(), e.updateCountText()
        }
    }))
}, MapManager.prototype.getMarkerRequestData = function() {
    var e = this.map.getBounds().getSouthWest(),
        a = this.map.getBounds().getNorthEast(),
        t = this.map.getZoom(),
        r = this.map.getCenter().lat,
        i = this.map.getCenter().lng,
        n = {
            swlat: e.lat,
            swlong: e.lng,
            nelat: a.lat,
            nelong: a.lng,
            mapZoomLevel: t,
            centerLat: r,
            centerLong: i
        };
    return $location = jQuery("#zpa-refine-map-search-form input[name=location]"), $location.val() && (n.location = $location.val()), $minPrice = jQuery("#zpa-refine-map-search-form input[name=minPrice]"), $minPrice.val() && (n.minPrice = $minPrice.val()), $maxPrice = jQuery("#zpa-refine-map-search-form input[name=maxPrice]"), $maxPrice.val() && (n.maxPrice = $maxPrice.val()), $bedRooms = jQuery("#zpa-refine-map-search-form select[name=bedRooms]"), $bedRooms.val() && (n.bedRooms = $bedRooms.val()), $bathRooms = jQuery("#zpa-refine-map-search-form select[name=bathRooms]"), $bathRooms.val() && (n.bathRooms = $bathRooms.val()), propertyType = jQuery('#zpa-refine-map-search-form input:checkbox[name="propertyType"]:checked').map(function() {
        return jQuery(this).val()
    }).get().join(","), 0 !== propertyType.length && (n.propertyType = propertyType), n
}, MapManager.prototype.addMarkerForMapSearch = function(e, a, t, r) {
    if (!this.isCachedMarker(a, t)) {
        var i = this.getPropertyTypeSpecificMarkerIconHtml(r),
            n = new L.Point(24, 24),
            o = new L.Point(12, 30),
            s = new L.DivIcon({
                html: i,
                iconSize: n,
                iconAnchor: o
            }),
            p = new L.Marker(e, {
                icon: s
            });
        if (void 0 !== p) {
            this.markerLayer.addLayer(p), this.setCachedMarker(a, t, p);
            var l = this;
            p.on("click", function(e) {
                l.openInfoWindow(this, a, t)
            })
        }
    }
}, MapManager.prototype.getPropertyTypeSpecificMarkerIconHtml = function(e) {
    var a;
    switch (e) {
        case "SFR":
            a = '<div class="zpa-map-icon zpa-map-icon-house"><i class="fa fa-home"></i></div>';
            break;
        case "CND":
            a = '<div class="zpa-map-icon zpa-map-icon-condo"><i class="glyphicon glyphicon-credit-card"></i></div>';
            break;
        case "LL":
            a = '<div class="zpa-map-icon zpa-map-icon-land"><i class="glyphicon glyphicon-tree-conifer"></i></div>';
            break;
        case "COM":
            a = '<div class="zpa-map-icon zpa-map-icon-commercial"><i class="fa fa-tag"></i></div>';
            break;
        case "RI":
            a = '<div class="zpa-map-icon zpa-map-icon-multiunit"><i class="glyphicon glyphicon-th-large"></i></div>';
            break;
        case "MH":
            a = '<div class="zpa-map-icon zpa-map-icon-mobilehome"><i class="fa fa-road"></i></div>';
            break;
        case "FRM":
            a = '<div class="zpa-map-icon zpa-map-icon-house"><i class="fa fa-leaf"></i></div>';
            break;
        case "RNT":
            a = '<div class="zpa-map-icon zpa-map-icon-rental"><i class="fa fa-building-o"></i></div>';
            break;
        default:
            a = '<div class="zpa-map-icon zpa-map-icon-house"><i class="fa fa-home"></i></div>'
    }
    return a
}, MapManager.prototype.getNumericMarkerIconHtml = function(e) {
    return '<div class="zpa-map-icon">' + e + "</div>"
}, MapManager.prototype.addMarkerForResultsOrDetail = function(e, a, t, r) {
    var i = new L.Point(24, 24),
        n = new L.Point(12, 30),
        o = this.getNumericMarkerIconHtml(r),
        s = new L.DivIcon({
            html: o,
            iconSize: i,
            iconAnchor: n
        }),
        p = new L.Marker(a, {
            icon: s
        });
    if (this.markerLayer.addLayer(p), "results" === e) {
        var l = (new L.Popup).setContent(t);
        p.bindPopup(l, {
            offset: [0, -35]
        });
        var c = this;
        jQuery('[data-map-icon="' + r + '"]').click(function() {
            p.togglePopup(), c.centerMapToMarker(p), jQuery("html, body").animate({
                scrollTop: jQuery("#" + c.containerId).offset().top - 50
            }, 250)
        })
    }
}, MapManager.prototype.openInfoWindow = function(e, a, t) {
    if (void 0 === e.getPopup()) {
        var r = {
                boardId: a,
                listingNumber: t
            },
            i = this;
        this.abortAjaxRequest(), this.ajaxRequest = jQuery.ajax({
            type: "GET",
            url: i.detailAjaxUrl,
            dataType: "jsonp",
            data: r
        }).done(function(a) {
            var t = (new L.Popup).setContent(a[0].content);
            e.bindPopup(t, {
                offset: [0, -35]
            }).openPopup(), i.centerMapToMarker(e)
        })
    }
}, MapManager.prototype.getGeoData = function(e, a) {
    var t = jQuery.trim(e.term),
        r = this,
        i = "//www.mapquestapi.com/geocoding/v1/address?key=" + this.MAPQUEST_KEY + "&location=" + encodeURIComponent(t);
    this.abortAjaxRequest(), this.ajaxRequest = jQuery.ajax({
        type: "GET",
        url: i,
        dataType: "jsonp"
    }).done(function(e) {
        var t = r.map.getCenter(),
            i = [];
        for (var n in e.results[0].locations) {
            var o = e.results[0].locations[n],
                s = r.generateLabel(o);
            null !== s && i.push({
                label: s,
                value: {
                    latLng: new L.LatLng(o.latLng.lat, o.latLng.lng)
                }
            })
        }
        i = i.sort(function(e, a) {
            return t.distanceTo(e.value.latLng) - t.distanceTo(a.value.latLng)
        }), a(i)
    })
}, MapManager.prototype.generateLabel = function(e) {
    var a = !0,
        t = "";
    return 0 !== e.street.length && (t += e.street + ", "), 0 !== e.adminArea6.length && (t += e.adminArea6 + ", "), 0 !== e.adminArea5.length ? t += e.adminArea5 + ", " : a = !1, 0 !== e.adminArea3.length ? t += e.adminArea3 + ", " : a = !1, 0 === e.adminArea1.length || "US" !== e.adminArea1 && "CA" !== e.adminArea1 ? a = !1 : t += e.adminArea1, a ? t : null
}, MapManager.prototype.geocodeAddress = function(e, a, t) {
    this.abortAjaxRequest(), this.ajaxRequest = jQuery.ajax({
        url: a,
        data: {
            address: e
        },
        dataType: "jsonp",
        crossDomain: !0
    }).done(function(e) {
        lat = e.features[0].geometry.coordinates[1], lng = e.features[0].geometry.coordinates[0], latLng = new L.LatLng(lat, lng), t(latLng)
    })
}, MapManager.prototype.getDefaultCenter = function() {
    return new L.LatLng(39.8282, (-98.5795))
}, MapManager.prototype.toggleRefineForm = function() {
    jQuery(".zpa-mapsearch-refine-overlay").toggle(), jQuery(".zpa-map-search-refine-link").toggle()
}, MapManager.prototype.getPolygonPaths = function(e) {
    var a = [],
        t = "^POLYGON ?\\(\\(",
        r = "\\)\\)$";
    if (e) {
        e = e.replace(new RegExp(t), ""), e = e.replace(new RegExp(r), "");
        for (var i = e.split(","), n = 0; n < i.length; n++)
            if (n + 1 < i.length) {
                var o = i[n].trim();
                if (void 0 != o) {
                    var s = o.split(" "),
                        p = s[0],
                        l = s[1],
                        c = new L.LatLng(l, p);
                    a.push(c)
                }
            }
    }
    return a
}, MapManager.prototype.addPolygonToMap = function(e) {
    var a = {
        stroke: !0,
        color: "#000000",
        weight: 4,
        opacity: 1,
        fill: !0,
        fillColor: null,
        fillOpacity: .2,
        clickable: !0
    };
    if (null != this.markerLayer) {
        var t = new L.polygon(e, a);
        t.addTo(this.markerLayer)
    }
}, MapManager.prototype.initializeMapSearch = function(e, a, t, r, i, n, o, s, p, l) {
    this.containerId = e, this.markerAjaxUrl = o, this.detailAjaxUrl = s, this.MAPBOX_ACCESS_TOKEN = l;
    var p = p;
    this.createMap(n);
    var c, h = this,
        u = function(e) {
            h.centerMap(e, a), h.clusterMarkers = !0, h.resetMarkerLayer(), h.updateMarkerLayer(o), h.map.on("moveend", function() {
                h.updateCountText(), h.updateMarkerLayer()
            }), jQuery("#zpa-location").autocomplete({
                source: function(e, a) {
                    h.getGeoData(e, a)
                },
                select: function(e, a) {
                    e.preventDefault(), jQuery("#zpa-location").val(a.item.label), h.centerMap(a.item.value.latLng)
                },
                focus: function(e, a) {
                    e.preventDefault()
                }
            }), jQuery(".zpa-map-search-refine-link, #zpa-refine-search-close").click(function() {
                h.toggleRefineForm()
            }), jQuery("#zpa-main-search-form-submit").click(function() {
                h.toggleRefineForm(), h.resetMarkerLayer(), h.updateMarkerLayer()
            })
        };
    0 !== r.length && 0 !== i.length && 0 !== r && 0 !== i ? (c = new L.latLng(r, i), u(c)) : 0 !== t.length ? this.geocodeAddress(t, p, u) : (c = this.getDefaultCenter(), u(c))
}, MapManager.prototype.initializeResultsOrDetailMap = function(e, a, t, r, i, n) {
    if (!(!a.length > 0)) {
        this.containerId = e, this.MAPBOX_ACCESS_TOKEN = r;
        var o = this,
            i = i,
            s = function() {
                for (var e in a) {
                    var t = a[e];
                    if (0 === t.latitude.length || 0 === t.longitude.length || 0 === t.latitude || 0 === t.longitude) return t
                }
                return null
            },
            p = function() {
                var e = s();
                if (null !== e) o.debug("listing #" + e.number + ": invalid lat lng"), o.geocodeAddress(e.address, i, function(a) {
                    o.debug("listing #" + e.number + ": updating listing lat lng"), e.latitude = a.lat, e.longitude = a.lng, p()
                });
                else {
                    o.createMap("ROADMAP", !0), listingCoordinates = [];
                    for (var r in a) {
                        var e = a[r],
                            l = new L.LatLng(e.latitude, e.longitude);
                        listingCoordinates.push(l)
                    }
                    var c = o.getPolygonPaths(n);
                    c.length > 0 ? o.fitBounds(c) : o.fitBounds(listingCoordinates), o.resetMarkerLayer();
                    for (var r in a) {
                        var e = a[r];
                        o.debug("listing #" + e.number + ": adding marker");
                        var l = new L.LatLng(e.latitude, e.longitude);
                        o.addMarkerForResultsOrDetail(t, l, e.message, e.number)
                    }
                    c.length > 0 && o.addPolygonToMap(c)
                }
            };
        p()
    }
}, MapManager.prototype.initializeResultsMap = function(e, a, t, r, i) {
    var n = "results";
    this.initializeResultsOrDetailMap(e, a, n, t, r, i)
}, MapManager.prototype.initializeDetailMap = function(e, a, t, r) {
    var i = "detail",
        n = "";
    this.initializeResultsOrDetailMap(e, a, i, t, r, n)
};
var PolygonMapManager = function() {
    this.containerId, this.mapBoxToken, this.mapBoxIdRoadMap = "zipperagent.k3f0npic", this.map, this.ajaxRequest, this.shapeLayer = null, this.polygon, this.geocodeAddress = function(e, t, a) {
        this.abortAjaxRequest(), t += "?address=" + encodeURIComponent(e), this.ajaxRequest = jQuery.ajax({
            type: "GET",
            url: t,
            dataType: "jsonp"
        }).done(function(e) {
            lat = e.features[0].geometry.coordinates[1], lng = e.features[0].geometry.coordinates[0], latLng = new L.LatLng(lat, lng), a(latLng)
        })
    }, this.abortAjaxRequest = function() {
        void 0 !== this.ajaxRequest && void 0 !== this.ajaxRequest.abort() && this.ajaxRequest.abort()
    }, this.createMap = function() {
        var e = "//api.tiles.mapbox.com/v4/" + this.mapBoxIdRoadMap + "/{z}/{x}/{y}.png?access_token=" + this.mapBoxToken,
            t = '<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox</a> <a href="http://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap</a> <a href="http://developer.mapquest.com/web/info/terms-of-use" target="_blank">&copy; MapQuest</a>',
            a = new L.TileLayer(e, {
                maxZoom: 18,
                attribution: t
            });
        this.map = new L.Map(this.containerId, {
            scrollWheelZoom: !1,
            layers: [a]
        }), this.map.attributionControl.setPrefix("")
    }, this.centerMap = function(e, t, a, o, n) {
        var i = this;
        if (e) {
            var r = i.getPolygonBounds(e);
            i.map.setView(r.getCenter(), 10), setTimeout(function() {
                i.map.fitBounds(r), n()
            }, 1e3)
        } else i.geocodeAddress(t, o, function(e) {
            null === a ? i.map.setView(e) : i.map.setView(e, a), n()
        })
    }, this.addPolygon = function(e) {
        var t = {
                stroke: !0,
                color: "#000000",
                weight: 4,
                opacity: 1,
                fill: !0,
                fillColor: null,
                fillOpacity: .2,
                clickable: !0
            },
            a = {
                allowIntersection: !1,
                drawError: {
                    color: "#b00b00",
                    timeout: 3e3,
                    message: "<strong>Oh snap!<strong> you can't draw that!"
                },
                shapeOptions: t
            };
        this.shapeLayer = new L.FeatureGroup, this.map.addLayer(this.shapeLayer), null != e && e.length > 0 ? (this.polygon = new L.Polygon(e, t).addTo(this.shapeLayer), this.shapeLayer.eachLayer(function(e) {
            e.editing.enable()
        })) : (this.polygon = new L.Draw.PolygonTouch(this.map, a), this.polygon.enable())
    }, this.updateBoundaryFormField = function() {
        var e = this,
            t = null;
        if (null !== this.shapeLayer) {
            this.shapeLayer.eachLayer(function(e) {
                t = e.toGeoJSON()
            });
            var a = e.polygonToWkt(t);
            null != a && jQuery("#zpa-boundary").val(a).trigger("change")
        }
    }, this.polygonToWkt = function(e) {
        for (var t = e.geometry.coordinates[0], a = "POLYGON ((", o = (t[0], 0); o < t.length; o++) {
            var n = t[o];
            a += n[0] + " " + n[1] + ", "
        }
        return o > 100 ? (alert("Too many points drawn. Please remove " + (o - 100) + " points."), null) : (a = a.slice(0, -2), a += "))")
    }, this.getPolygonBounds = function(e) {
        for (var t = new L.LatLngBounds, a = 0; a < e.length; a++) t.extend(e[a]);
        return t
    }, this.getPolygonPaths = function(e) {
        var t = [],
            a = "^POLYGON ?\\(\\(",
            o = "\\)\\)$";
        if (!e || 0 === e.length) return null;
        e = e.replace(new RegExp(a), ""), e = e.replace(new RegExp(o), "");
        for (var n = e.split(","), i = 0; i < n.length; i++)
            if (i + 1 < n.length) {
                var r = n[i].trim();
                if (void 0 != r) {
                    var s = r.split(" "),
                        l = s[0],
                        p = s[1],
                        h = new L.LatLng(p, l);
                    t.push(h)
                }
            } return t
    }, this.addResetControl = function() {
        var e = L.Control.extend({
            options: {
                position: "topright"
            },
            onAdd: function() {
                var e = L.DomUtil.create("div", "zpa-polygon-reset");
                return e.innerHTML = "Start Over", e
            }
        });
        this.map.addControl(new e)
    }, this.reset = function() {
        var e = this;
        if (null != e.shapeLayer) {
            e.shapeLayer.eachLayer(function(t) {
                e.shapeLayer.removeLayer(t)
            }), void 0 !== e.polygon && void 0 !== e.polygon.disable && (e.polygon.disable(), delete e.polygon), jQuery("#zpa-boundary").val("").trigger("change");
            var t = null;
            e.addPolygon(t)
        }
    }, this.updateMapLayer = function(e) {
        var t = e.layer;
        t.editing.enable(), this.shapeLayer.addLayer(t)
    }, this.initializeMapWithPolygon = function(e, t, a, o, n, i) {
        this.containerId = e, this.mapBoxToken = t;
        var r = this,
            s = r.getPolygonPaths(i);
        r.createMap(), r.centerMap(s, a, o, n, function() {
            r.addResetControl(), r.map.on("draw:created", function(e) {
                r.updateMapLayer(e), r.updateBoundaryFormField()
            }), r.addPolygon(s), r.polygon.on("edit", function(e) {
                r.updateBoundaryFormField()
            }), jQuery(".zpa-polygon-reset").on("click", function() {
                r.reset()
            })
        })
    }
};
! function() {
    function n(n) {
        return n && (n.ownerDocument || n.document || n).documentElement
    }

    function t(n) {
        return n && (n.ownerDocument && n.ownerDocument.defaultView || n.document && n || n.defaultView)
    }

    function e(n, t) {
        return t > n ? -1 : n > t ? 1 : n >= t ? 0 : NaN
    }

    function r(n) {
        return null === n ? NaN : +n
    }

    function i(n) {
        return !isNaN(n)
    }

    function u(n) {
        return {
            left: function(t, e, r, i) {
                for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); i > r;) {
                    var u = r + i >>> 1;
                    n(t[u], e) < 0 ? r = u + 1 : i = u
                }
                return r
            },
            right: function(t, e, r, i) {
                for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); i > r;) {
                    var u = r + i >>> 1;
                    n(t[u], e) > 0 ? i = u : r = u + 1
                }
                return r
            }
        }
    }

    function o(n) {
        return n.length
    }

    function a(n) {
        for (var t = 1; n * t % 1;) t *= 10;
        return t
    }

    function c(n, t) {
        for (var e in t) Object.defineProperty(n.prototype, e, {
            value: t[e],
            enumerable: !1
        })
    }

    function l() {
        this._ = Object.create(null)
    }

    function f(n) {
        return (n += "") === ho || n[0] === po ? po + n : n
    }

    function s(n) {
        return (n += "")[0] === po ? n.slice(1) : n
    }

    function h(n) {
        return f(n) in this._
    }

    function p(n) {
        return (n = f(n)) in this._ && delete this._[n]
    }

    function g() {
        var n = [];
        for (var t in this._) n.push(s(t));
        return n
    }

    function v() {
        var n = 0;
        for (var t in this._) ++n;
        return n
    }

    function d() {
        for (var n in this._) return !1;
        return !0
    }

    function y() {
        this._ = Object.create(null)
    }

    function m(n) {
        return n
    }

    function M(n, t, e) {
        return function() {
            var r = e.apply(t, arguments);
            return r === t ? n : r
        }
    }

    function x(n, t) {
        if (t in n) return t;
        t = t.charAt(0).toUpperCase() + t.slice(1);
        for (var e = 0, r = go.length; r > e; ++e) {
            var i = go[e] + t;
            if (i in n) return i
        }
    }

    function b() {}

    function _() {}

    function w(n) {
        function t() {
            for (var t, r = e, i = -1, u = r.length; ++i < u;)(t = r[i].on) && t.apply(this, arguments);
            return n
        }
        var e = [],
            r = new l;
        return t.on = function(t, i) {
            var u, o = r.get(t);
            return arguments.length < 2 ? o && o.on : (o && (o.on = null, e = e.slice(0, u = e.indexOf(o)).concat(e.slice(u + 1)), r.remove(t)), i && e.push(r.set(t, {
                on: i
            })), n)
        }, t
    }

    function S() {
        to.event.preventDefault()
    }

    function k() {
        for (var n, t = to.event; n = t.sourceEvent;) t = n;
        return t
    }

    function N(n) {
        for (var t = new _, e = 0, r = arguments.length; ++e < r;) t[arguments[e]] = w(t);
        return t.of = function(e, r) {
            return function(i) {
                try {
                    var u = i.sourceEvent = to.event;
                    i.target = n, to.event = i, t[i.type].apply(e, r)
                } finally {
                    to.event = u
                }
            }
        }, t
    }

    function E(n) {
        return yo(n, bo), n
    }

    function A(n) {
        return "function" == typeof n ? n : function() {
            return mo(n, this)
        }
    }

    function C(n) {
        return "function" == typeof n ? n : function() {
            return Mo(n, this)
        }
    }

    function z(n, t) {
        function e() {
            this.removeAttribute(n)
        }

        function r() {
            this.removeAttributeNS(n.space, n.local)
        }

        function i() {
            this.setAttribute(n, t)
        }

        function u() {
            this.setAttributeNS(n.space, n.local, t)
        }

        function o() {
            var e = t.apply(this, arguments);
            null == e ? this.removeAttribute(n) : this.setAttribute(n, e)
        }

        function a() {
            var e = t.apply(this, arguments);
            null == e ? this.removeAttributeNS(n.space, n.local) : this.setAttributeNS(n.space, n.local, e)
        }
        return n = to.ns.qualify(n), null == t ? n.local ? r : e : "function" == typeof t ? n.local ? a : o : n.local ? u : i
    }

    function q(n) {
        return n.trim().replace(/\s+/g, " ")
    }

    function L(n) {
        return new RegExp("(?:^|\\s+)" + to.requote(n) + "(?:\\s+|$)", "g")
    }

    function T(n) {
        return (n + "").trim().split(/^|\s+/)
    }

    function R(n, t) {
        function e() {
            for (var e = -1; ++e < i;) n[e](this, t)
        }

        function r() {
            for (var e = -1, r = t.apply(this, arguments); ++e < i;) n[e](this, r)
        }
        n = T(n).map(D);
        var i = n.length;
        return "function" == typeof t ? r : e
    }

    function D(n) {
        var t = L(n);
        return function(e, r) {
            if (i = e.classList) return r ? i.add(n) : i.remove(n);
            var i = e.getAttribute("class") || "";
            r ? (t.lastIndex = 0, t.test(i) || e.setAttribute("class", q(i + " " + n))) : e.setAttribute("class", q(i.replace(t, " ")))
        }
    }

    function P(n, t, e) {
        function r() {
            this.style.removeProperty(n)
        }

        function i() {
            this.style.setProperty(n, t, e)
        }

        function u() {
            var r = t.apply(this, arguments);
            null == r ? this.style.removeProperty(n) : this.style.setProperty(n, r, e)
        }
        return null == t ? r : "function" == typeof t ? u : i
    }

    function U(n, t) {
        function e() {
            delete this[n]
        }

        function r() {
            this[n] = t
        }

        function i() {
            var e = t.apply(this, arguments);
            null == e ? delete this[n] : this[n] = e
        }
        return null == t ? e : "function" == typeof t ? i : r
    }

    function j(n) {
        function t() {
            var t = this.ownerDocument,
                e = this.namespaceURI;
            return e ? t.createElementNS(e, n) : t.createElement(n)
        }

        function e() {
            return this.ownerDocument.createElementNS(n.space, n.local)
        }
        return "function" == typeof n ? n : (n = to.ns.qualify(n)).local ? e : t
    }

    function F() {
        var n = this.parentNode;
        n && n.removeChild(this)
    }

    function H(n) {
        return {
            __data__: n
        }
    }

    function O(n) {
        return function() {
            return xo(this, n)
        }
    }

    function I(n) {
        return arguments.length || (n = e),
            function(t, e) {
                return t && e ? n(t.__data__, e.__data__) : !t - !e
            }
    }

    function Y(n, t) {
        for (var e = 0, r = n.length; r > e; e++)
            for (var i, u = n[e], o = 0, a = u.length; a > o; o++)(i = u[o]) && t(i, o, e);
        return n
    }

    function Z(n) {
        return yo(n, wo), n
    }

    function V(n) {
        var t, e;
        return function(r, i, u) {
            var o, a = n[u].update,
                c = a.length;
            for (u != e && (e = u, t = 0), i >= t && (t = i + 1); !(o = a[t]) && ++t < c;);
            return o
        }
    }

    function X(n, t, e) {
        function r() {
            var t = this[o];
            t && (this.removeEventListener(n, t, t.$), delete this[o])
        }

        function i() {
            var i = c(t, ro(arguments));
            r.call(this), this.addEventListener(n, this[o] = i, i.$ = e), i._ = t
        }

        function u() {
            var t, e = new RegExp("^__on([^.]+)" + to.requote(n) + "$");
            for (var r in this)
                if (t = r.match(e)) {
                    var i = this[r];
                    this.removeEventListener(t[1], i, i.$), delete this[r]
                }
        }
        var o = "__on" + n,
            a = n.indexOf("."),
            c = $;
        a > 0 && (n = n.slice(0, a));
        var l = So.get(n);
        return l && (n = l, c = B), a ? t ? i : r : t ? b : u
    }

    function $(n, t) {
        return function(e) {
            var r = to.event;
            to.event = e, t[0] = this.__data__;
            try {
                n.apply(this, t)
            } finally {
                to.event = r
            }
        }
    }

    function B(n, t) {
        var e = $(n, t);
        return function(n) {
            var t = this,
                r = n.relatedTarget;
            r && (r === t || 8 & r.compareDocumentPosition(t)) || e.call(t, n)
        }
    }

    function W(e) {
        var r = ".dragsuppress-" + ++No,
            i = "click" + r,
            u = to.select(t(e)).on("touchmove" + r, S).on("dragstart" + r, S).on("selectstart" + r, S);
        if (null == ko && (ko = !("onselectstart" in e) && x(e.style, "userSelect")), ko) {
            var o = n(e).style,
                a = o[ko];
            o[ko] = "none"
        }
        return function(n) {
            if (u.on(r, null), ko && (o[ko] = a), n) {
                var t = function() {
                    u.on(i, null)
                };
                u.on(i, function() {
                    S(), t()
                }, !0), setTimeout(t, 0)
            }
        }
    }

    function J(n, e) {
        e.changedTouches && (e = e.changedTouches[0]);
        var r = n.ownerSVGElement || n;
        if (r.createSVGPoint) {
            var i = r.createSVGPoint();
            if (0 > Eo) {
                var u = t(n);
                if (u.scrollX || u.scrollY) {
                    r = to.select("body").append("svg").style({
                        position: "absolute",
                        top: 0,
                        left: 0,
                        margin: 0,
                        padding: 0,
                        border: "none"
                    }, "important");
                    var o = r[0][0].getScreenCTM();
                    Eo = !(o.f || o.e), r.remove()
                }
            }
            return Eo ? (i.x = e.pageX, i.y = e.pageY) : (i.x = e.clientX, i.y = e.clientY), i = i.matrixTransform(n.getScreenCTM().inverse()), [i.x, i.y]
        }
        var a = n.getBoundingClientRect();
        return [e.clientX - a.left - n.clientLeft, e.clientY - a.top - n.clientTop]
    }

    function G() {
        return to.event.changedTouches[0].identifier
    }

    function K(n) {
        return n > 0 ? 1 : 0 > n ? -1 : 0
    }

    function Q(n, t, e) {
        return (t[0] - n[0]) * (e[1] - n[1]) - (t[1] - n[1]) * (e[0] - n[0])
    }

    function nn(n) {
        return n > 1 ? 0 : -1 > n ? zo : Math.acos(n)
    }

    function tn(n) {
        return n > 1 ? To : -1 > n ? -To : Math.asin(n)
    }

    function en(n) {
        return ((n = Math.exp(n)) - 1 / n) / 2
    }

    function rn(n) {
        return ((n = Math.exp(n)) + 1 / n) / 2
    }

    function un(n) {
        return ((n = Math.exp(2 * n)) - 1) / (n + 1)
    }

    function on(n) {
        return (n = Math.sin(n / 2)) * n
    }

    function an() {}

    function cn(n, t, e) {
        return this instanceof cn ? (this.h = +n, this.s = +t, void(this.l = +e)) : arguments.length < 2 ? n instanceof cn ? new cn(n.h, n.s, n.l) : _n("" + n, wn, cn) : new cn(n, t, e)
    }

    function ln(n, t, e) {
        function r(n) {
            return n > 360 ? n -= 360 : 0 > n && (n += 360), 60 > n ? u + (o - u) * n / 60 : 180 > n ? o : 240 > n ? u + (o - u) * (240 - n) / 60 : u
        }

        function i(n) {
            return Math.round(255 * r(n))
        }
        var u, o;
        return n = isNaN(n) ? 0 : (n %= 360) < 0 ? n + 360 : n, t = isNaN(t) ? 0 : 0 > t ? 0 : t > 1 ? 1 : t, e = 0 > e ? 0 : e > 1 ? 1 : e, o = .5 >= e ? e * (1 + t) : e + t - e * t, u = 2 * e - o, new mn(i(n + 120), i(n), i(n - 120))
    }

    function fn(n, t, e) {
        return this instanceof fn ? (this.h = +n, this.c = +t, void(this.l = +e)) : arguments.length < 2 ? n instanceof fn ? new fn(n.h, n.c, n.l) : n instanceof hn ? gn(n.l, n.a, n.b) : gn((n = Sn((n = to.rgb(n)).r, n.g, n.b)).l, n.a, n.b) : new fn(n, t, e)
    }

    function sn(n, t, e) {
        return isNaN(n) && (n = 0), isNaN(t) && (t = 0), new hn(e, Math.cos(n *= Ro) * t, Math.sin(n) * t)
    }

    function hn(n, t, e) {
        return this instanceof hn ? (this.l = +n, this.a = +t, void(this.b = +e)) : arguments.length < 2 ? n instanceof hn ? new hn(n.l, n.a, n.b) : n instanceof fn ? sn(n.h, n.c, n.l) : Sn((n = mn(n)).r, n.g, n.b) : new hn(n, t, e)
    }

    function pn(n, t, e) {
        var r = (n + 16) / 116,
            i = r + t / 500,
            u = r - e / 200;
        return i = vn(i) * Vo, r = vn(r) * Xo, u = vn(u) * $o, new mn(yn(3.2404542 * i - 1.5371385 * r - .4985314 * u), yn(-.969266 * i + 1.8760108 * r + .041556 * u), yn(.0556434 * i - .2040259 * r + 1.0572252 * u))
    }

    function gn(n, t, e) {
        return n > 0 ? new fn(Math.atan2(e, t) * Do, Math.sqrt(t * t + e * e), n) : new fn(NaN, NaN, n)
    }

    function vn(n) {
        return n > .206893034 ? n * n * n : (n - 4 / 29) / 7.787037
    }

    function dn(n) {
        return n > .008856 ? Math.pow(n, 1 / 3) : 7.787037 * n + 4 / 29
    }

    function yn(n) {
        return Math.round(255 * (.00304 >= n ? 12.92 * n : 1.055 * Math.pow(n, 1 / 2.4) - .055))
    }

    function mn(n, t, e) {
        return this instanceof mn ? (this.r = ~~n, this.g = ~~t, void(this.b = ~~e)) : arguments.length < 2 ? n instanceof mn ? new mn(n.r, n.g, n.b) : _n("" + n, mn, ln) : new mn(n, t, e)
    }

    function Mn(n) {
        return new mn(n >> 16, n >> 8 & 255, 255 & n)
    }

    function xn(n) {
        return Mn(n) + ""
    }

    function bn(n) {
        return 16 > n ? "0" + Math.max(0, n).toString(16) : Math.min(255, n).toString(16)
    }

    function _n(n, t, e) {
        n = n.toLowerCase();
        var r, i, u, o = 0,
            a = 0,
            c = 0;
        if (r = /([a-z]+)\((.*)\)/.exec(n)) switch (i = r[2].split(","), r[1]) {
            case "hsl":
                return e(parseFloat(i[0]), parseFloat(i[1]) / 100, parseFloat(i[2]) / 100);
            case "rgb":
                return t(Nn(i[0]), Nn(i[1]), Nn(i[2]))
        }
        return (u = Jo.get(n)) ? t(u.r, u.g, u.b) : (null == n || "#" !== n.charAt(0) || isNaN(u = parseInt(n.slice(1), 16)) || (4 === n.length ? (o = (3840 & u) >> 4, o = o >> 4 | o, a = 240 & u, a = a >> 4 | a, c = 15 & u, c = c << 4 | c) : 7 === n.length && (o = (16711680 & u) >> 16, a = (65280 & u) >> 8, c = 255 & u)), t(o, a, c))
    }

    function wn(n, t, e) {
        var r, i, u = Math.min(n /= 255, t /= 255, e /= 255),
            o = Math.max(n, t, e),
            a = o - u,
            c = (o + u) / 2;
        return a ? (i = .5 > c ? a / (o + u) : a / (2 - o - u), r = n == o ? (t - e) / a + (e > t ? 6 : 0) : t == o ? (e - n) / a + 2 : (n - t) / a + 4, r *= 60) : (r = NaN, i = c > 0 && 1 > c ? 0 : r), new cn(r, i, c)
    }

    function Sn(n, t, e) {
        n = kn(n), t = kn(t), e = kn(e);
        var r = dn((.4124564 * n + .3575761 * t + .1804375 * e) / Vo),
            i = dn((.2126729 * n + .7151522 * t + .072175 * e) / Xo),
            u = dn((.0193339 * n + .119192 * t + .9503041 * e) / $o);
        return hn(116 * i - 16, 500 * (r - i), 200 * (i - u))
    }

    function kn(n) {
        return (n /= 255) <= .04045 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4)
    }

    function Nn(n) {
        var t = parseFloat(n);
        return "%" === n.charAt(n.length - 1) ? Math.round(2.55 * t) : t
    }

    function En(n) {
        return "function" == typeof n ? n : function() {
            return n
        }
    }

    function An(n) {
        return function(t, e, r) {
            return 2 === arguments.length && "function" == typeof e && (r = e, e = null), Cn(t, e, n, r)
        }
    }

    function Cn(n, t, e, r) {
        function i() {
            var n, t = c.status;
            if (!t && qn(c) || t >= 200 && 300 > t || 304 === t) {
                try {
                    n = e.call(u, c)
                } catch (n) {
                    return void o.error.call(u, n)
                }
                o.load.call(u, n)
            } else o.error.call(u, c)
        }
        var u = {},
            o = to.dispatch("beforesend", "progress", "load", "error"),
            a = {},
            c = new XMLHttpRequest,
            l = null;
        return !this.XDomainRequest || "withCredentials" in c || !/^(http(s)?:)?\/\//.test(n) || (c = new XDomainRequest), "onload" in c ? c.onload = c.onerror = i : c.onreadystatechange = function() {
            c.readyState > 3 && i()
        }, c.onprogress = function(n) {
            var t = to.event;
            to.event = n;
            try {
                o.progress.call(u, c)
            } finally {
                to.event = t
            }
        }, u.header = function(n, t) {
            return n = (n + "").toLowerCase(), arguments.length < 2 ? a[n] : (null == t ? delete a[n] : a[n] = t + "", u)
        }, u.mimeType = function(n) {
            return arguments.length ? (t = null == n ? null : n + "", u) : t
        }, u.responseType = function(n) {
            return arguments.length ? (l = n, u) : l
        }, u.response = function(n) {
            return e = n, u
        }, ["get", "post"].forEach(function(n) {
            u[n] = function() {
                return u.send.apply(u, [n].concat(ro(arguments)))
            }
        }), u.send = function(e, r, i) {
            if (2 === arguments.length && "function" == typeof r && (i = r, r = null), c.open(e, n, !0), null == t || "accept" in a || (a.accept = t + ",*/*"), c.setRequestHeader)
                for (var f in a) c.setRequestHeader(f, a[f]);
            return null != t && c.overrideMimeType && c.overrideMimeType(t), null != l && (c.responseType = l), null != i && u.on("error", i).on("load", function(n) {
                i(null, n)
            }), o.beforesend.call(u, c), c.send(null == r ? null : r), u
        }, u.abort = function() {
            return c.abort(), u
        }, to.rebind(u, o, "on"), null == r ? u : u.get(zn(r))
    }

    function zn(n) {
        return 1 === n.length ? function(t, e) {
            n(null == t ? e : null)
        } : n
    }

    function qn(n) {
        var t = n.responseType;
        return t && "text" !== t ? n.response : n.responseText
    }

    function Ln() {
        var n = Tn(),
            t = Rn() - n;
        t > 24 ? (isFinite(t) && (clearTimeout(na), na = setTimeout(Ln, t)), Qo = 0) : (Qo = 1, ea(Ln))
    }

    function Tn() {
        var n = Date.now();
        for (ta = Go; ta;) n >= ta.t && (ta.f = ta.c(n - ta.t)), ta = ta.n;
        return n
    }

    function Rn() {
        for (var n, t = Go, e = 1 / 0; t;) t.f ? t = n ? n.n = t.n : Go = t.n : (t.t < e && (e = t.t), t = (n = t).n);
        return Ko = n, e
    }

    function Dn(n, t) {
        return t - (n ? Math.ceil(Math.log(n) / Math.LN10) : 1)
    }

    function Pn(n, t) {
        var e = Math.pow(10, 3 * so(8 - t));
        return {
            scale: t > 8 ? function(n) {
                return n / e
            } : function(n) {
                return n * e
            },
            symbol: n
        }
    }

    function Un(n) {
        var t = n.decimal,
            e = n.thousands,
            r = n.grouping,
            i = n.currency,
            u = r && e ? function(n, t) {
                for (var i = n.length, u = [], o = 0, a = r[0], c = 0; i > 0 && a > 0 && (c + a + 1 > t && (a = Math.max(1, t - c)), u.push(n.substring(i -= a, i + a)), !((c += a + 1) > t));) a = r[o = (o + 1) % r.length];
                return u.reverse().join(e)
            } : m;
        return function(n) {
            var e = ia.exec(n),
                r = e[1] || " ",
                o = e[2] || ">",
                a = e[3] || "-",
                c = e[4] || "",
                l = e[5],
                f = +e[6],
                s = e[7],
                h = e[8],
                p = e[9],
                g = 1,
                v = "",
                d = "",
                y = !1,
                m = !0;
            switch (h && (h = +h.substring(1)), (l || "0" === r && "=" === o) && (l = r = "0", o = "="), p) {
                case "n":
                    s = !0, p = "g";
                    break;
                case "%":
                    g = 100, d = "%", p = "f";
                    break;
                case "p":
                    g = 100, d = "%", p = "r";
                    break;
                case "b":
                case "o":
                case "x":
                case "X":
                    "#" === c && (v = "0" + p.toLowerCase());
                case "c":
                    m = !1;
                case "d":
                    y = !0, h = 0;
                    break;
                case "s":
                    g = -1, p = "r"
            }
            "$" === c && (v = i[0], d = i[1]), "r" != p || h || (p = "g"), null != h && ("g" == p ? h = Math.max(1, Math.min(21, h)) : ("e" == p || "f" == p) && (h = Math.max(0, Math.min(20, h)))), p = ua.get(p) || jn;
            var M = l && s;
            return function(n) {
                var e = d;
                if (y && n % 1) return "";
                var i = 0 > n || 0 === n && 0 > 1 / n ? (n = -n, "-") : "-" === a ? "" : a;
                if (0 > g) {
                    var c = to.formatPrefix(n, h);
                    n = c.scale(n), e = c.symbol + d
                } else n *= g;
                n = p(n, h);
                var x, b, _ = n.lastIndexOf(".");
                if (0 > _) {
                    var w = m ? n.lastIndexOf("e") : -1;
                    0 > w ? (x = n, b = "") : (x = n.substring(0, w), b = n.substring(w))
                } else x = n.substring(0, _), b = t + n.substring(_ + 1);
                !l && s && (x = u(x, 1 / 0));
                var S = v.length + x.length + b.length + (M ? 0 : i.length),
                    k = f > S ? new Array(S = f - S + 1).join(r) : "";
                return M && (x = u(k + x, k.length ? f - b.length : 1 / 0)), i += v, n = x + b, ("<" === o ? i + n + k : ">" === o ? k + i + n : "^" === o ? k.substring(0, S >>= 1) + i + n + k.substring(S) : i + (M ? n : k + n)) + e
            }
        }
    }

    function jn(n) {
        return n + ""
    }

    function Fn() {
        this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
    }

    function Hn(n, t, e) {
        function r(t) {
            var e = n(t),
                r = u(e, 1);
            return r - t > t - e ? e : r
        }

        function i(e) {
            return t(e = n(new aa(e - 1)), 1), e
        }

        function u(n, e) {
            return t(n = new aa((+n)), e), n
        }

        function o(n, r, u) {
            var o = i(n),
                a = [];
            if (u > 1)
                for (; r > o;) e(o) % u || a.push(new Date((+o))), t(o, 1);
            else
                for (; r > o;) a.push(new Date((+o))), t(o, 1);
            return a
        }

        function a(n, t, e) {
            try {
                aa = Fn;
                var r = new Fn;
                return r._ = n, o(r, t, e)
            } finally {
                aa = Date
            }
        }
        n.floor = n, n.round = r, n.ceil = i, n.offset = u, n.range = o;
        var c = n.utc = On(n);
        return c.floor = c, c.round = On(r), c.ceil = On(i), c.offset = On(u), c.range = a, n
    }

    function On(n) {
        return function(t, e) {
            try {
                aa = Fn;
                var r = new Fn;
                return r._ = t, n(r, e)._
            } finally {
                aa = Date
            }
        }
    }

    function In(n) {
        function t(n) {
            function t(t) {
                for (var e, i, u, o = [], a = -1, c = 0; ++a < r;) 37 === n.charCodeAt(a) && (o.push(n.slice(c, a)), null != (i = la[e = n.charAt(++a)]) && (e = n.charAt(++a)), (u = A[e]) && (e = u(t, null == i ? "e" === e ? " " : "0" : i)), o.push(e), c = a + 1);
                return o.push(n.slice(c, a)), o.join("")
            }
            var r = n.length;
            return t.parse = function(t) {
                var r = {
                        y: 1900,
                        m: 0,
                        d: 1,
                        H: 0,
                        M: 0,
                        S: 0,
                        L: 0,
                        Z: null
                    },
                    i = e(r, n, t, 0);
                if (i != t.length) return null;
                "p" in r && (r.H = r.H % 12 + 12 * r.p);
                var u = null != r.Z && aa !== Fn,
                    o = new(u ? Fn : aa);
                return "j" in r ? o.setFullYear(r.y, 0, r.j) : "w" in r && ("W" in r || "U" in r) ? (o.setFullYear(r.y, 0, 1), o.setFullYear(r.y, 0, "W" in r ? (r.w + 6) % 7 + 7 * r.W - (o.getDay() + 5) % 7 : r.w + 7 * r.U - (o.getDay() + 6) % 7)) : o.setFullYear(r.y, r.m, r.d), o.setHours(r.H + (r.Z / 100 | 0), r.M + r.Z % 100, r.S, r.L), u ? o._ : o
            }, t.toString = function() {
                return n
            }, t
        }

        function e(n, t, e, r) {
            for (var i, u, o, a = 0, c = t.length, l = e.length; c > a;) {
                if (r >= l) return -1;
                if (i = t.charCodeAt(a++), 37 === i) {
                    if (o = t.charAt(a++), u = C[o in la ? t.charAt(a++) : o], !u || (r = u(n, e, r)) < 0) return -1
                } else if (i != e.charCodeAt(r++)) return -1
            }
            return r
        }

        function r(n, t, e) {
            _.lastIndex = 0;
            var r = _.exec(t.slice(e));
            return r ? (n.w = w.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function i(n, t, e) {
            x.lastIndex = 0;
            var r = x.exec(t.slice(e));
            return r ? (n.w = b.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function u(n, t, e) {
            N.lastIndex = 0;
            var r = N.exec(t.slice(e));
            return r ? (n.m = E.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function o(n, t, e) {
            S.lastIndex = 0;
            var r = S.exec(t.slice(e));
            return r ? (n.m = k.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function a(n, t, r) {
            return e(n, A.c.toString(), t, r)
        }

        function c(n, t, r) {
            return e(n, A.x.toString(), t, r)
        }

        function l(n, t, r) {
            return e(n, A.X.toString(), t, r)
        }

        function f(n, t, e) {
            var r = M.get(t.slice(e, e += 2).toLowerCase());
            return null == r ? -1 : (n.p = r, e)
        }
        var s = n.dateTime,
            h = n.date,
            p = n.time,
            g = n.periods,
            v = n.days,
            d = n.shortDays,
            y = n.months,
            m = n.shortMonths;
        t.utc = function(n) {
            function e(n) {
                try {
                    aa = Fn;
                    var t = new aa;
                    return t._ = n, r(t)
                } finally {
                    aa = Date
                }
            }
            var r = t(n);
            return e.parse = function(n) {
                try {
                    aa = Fn;
                    var t = r.parse(n);
                    return t && t._
                } finally {
                    aa = Date
                }
            }, e.toString = r.toString, e
        }, t.multi = t.utc.multi = ct;
        var M = to.map(),
            x = Zn(v),
            b = Vn(v),
            _ = Zn(d),
            w = Vn(d),
            S = Zn(y),
            k = Vn(y),
            N = Zn(m),
            E = Vn(m);
        g.forEach(function(n, t) {
            M.set(n.toLowerCase(), t)
        });
        var A = {
                a: function(n) {
                    return d[n.getDay()]
                },
                A: function(n) {
                    return v[n.getDay()]
                },
                b: function(n) {
                    return m[n.getMonth()]
                },
                B: function(n) {
                    return y[n.getMonth()]
                },
                c: t(s),
                d: function(n, t) {
                    return Yn(n.getDate(), t, 2)
                },
                e: function(n, t) {
                    return Yn(n.getDate(), t, 2)
                },
                H: function(n, t) {
                    return Yn(n.getHours(), t, 2)
                },
                I: function(n, t) {
                    return Yn(n.getHours() % 12 || 12, t, 2)
                },
                j: function(n, t) {
                    return Yn(1 + oa.dayOfYear(n), t, 3)
                },
                L: function(n, t) {
                    return Yn(n.getMilliseconds(), t, 3)
                },
                m: function(n, t) {
                    return Yn(n.getMonth() + 1, t, 2)
                },
                M: function(n, t) {
                    return Yn(n.getMinutes(), t, 2)
                },
                p: function(n) {
                    return g[+(n.getHours() >= 12)]
                },
                S: function(n, t) {
                    return Yn(n.getSeconds(), t, 2)
                },
                U: function(n, t) {
                    return Yn(oa.sundayOfYear(n), t, 2)
                },
                w: function(n) {
                    return n.getDay()
                },
                W: function(n, t) {
                    return Yn(oa.mondayOfYear(n), t, 2)
                },
                x: t(h),
                X: t(p),
                y: function(n, t) {
                    return Yn(n.getFullYear() % 100, t, 2)
                },
                Y: function(n, t) {
                    return Yn(n.getFullYear() % 1e4, t, 4)
                },
                Z: ot,
                "%": function() {
                    return "%"
                }
            },
            C = {
                a: r,
                A: i,
                b: u,
                B: o,
                c: a,
                d: nt,
                e: nt,
                H: et,
                I: et,
                j: tt,
                L: ut,
                m: Qn,
                M: rt,
                p: f,
                S: it,
                U: $n,
                w: Xn,
                W: Bn,
                x: c,
                X: l,
                y: Jn,
                Y: Wn,
                Z: Gn,
                "%": at
            };
        return t
    }

    function Yn(n, t, e) {
        var r = 0 > n ? "-" : "",
            i = (r ? -n : n) + "",
            u = i.length;
        return r + (e > u ? new Array(e - u + 1).join(t) + i : i)
    }

    function Zn(n) {
        return new RegExp("^(?:" + n.map(to.requote).join("|") + ")", "i")
    }

    function Vn(n) {
        for (var t = new l, e = -1, r = n.length; ++e < r;) t.set(n[e].toLowerCase(), e);
        return t
    }

    function Xn(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 1));
        return r ? (n.w = +r[0], e + r[0].length) : -1
    }

    function $n(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e));
        return r ? (n.U = +r[0], e + r[0].length) : -1
    }

    function Bn(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e));
        return r ? (n.W = +r[0], e + r[0].length) : -1
    }

    function Wn(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 4));
        return r ? (n.y = +r[0], e + r[0].length) : -1
    }

    function Jn(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 2));
        return r ? (n.y = Kn(+r[0]), e + r[0].length) : -1
    }

    function Gn(n, t, e) {
        return /^[+-]\d{4}$/.test(t = t.slice(e, e + 5)) ? (n.Z = -t, e + 5) : -1
    }

    function Kn(n) {
        return n + (n > 68 ? 1900 : 2e3)
    }

    function Qn(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 2));
        return r ? (n.m = r[0] - 1, e + r[0].length) : -1
    }

    function nt(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 2));
        return r ? (n.d = +r[0], e + r[0].length) : -1
    }

    function tt(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 3));
        return r ? (n.j = +r[0], e + r[0].length) : -1
    }

    function et(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 2));
        return r ? (n.H = +r[0], e + r[0].length) : -1
    }

    function rt(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 2));
        return r ? (n.M = +r[0], e + r[0].length) : -1
    }

    function it(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 2));
        return r ? (n.S = +r[0], e + r[0].length) : -1
    }

    function ut(n, t, e) {
        fa.lastIndex = 0;
        var r = fa.exec(t.slice(e, e + 3));
        return r ? (n.L = +r[0], e + r[0].length) : -1
    }

    function ot(n) {
        var t = n.getTimezoneOffset(),
            e = t > 0 ? "-" : "+",
            r = so(t) / 60 | 0,
            i = so(t) % 60;
        return e + Yn(r, "0", 2) + Yn(i, "0", 2)
    }

    function at(n, t, e) {
        sa.lastIndex = 0;
        var r = sa.exec(t.slice(e, e + 1));
        return r ? e + r[0].length : -1
    }

    function ct(n) {
        for (var t = n.length, e = -1; ++e < t;) n[e][0] = this(n[e][0]);
        return function(t) {
            for (var e = 0, r = n[e]; !r[1](t);) r = n[++e];
            return r[0](t)
        }
    }

    function lt() {}

    function ft(n, t, e) {
        var r = e.s = n + t,
            i = r - n,
            u = r - i;
        e.t = n - u + (t - i)
    }

    function st(n, t) {
        n && va.hasOwnProperty(n.type) && va[n.type](n, t)
    }

    function ht(n, t, e) {
        var r, i = -1,
            u = n.length - e;
        for (t.lineStart(); ++i < u;) r = n[i], t.point(r[0], r[1], r[2]);
        t.lineEnd()
    }

    function pt(n, t) {
        var e = -1,
            r = n.length;
        for (t.polygonStart(); ++e < r;) ht(n[e], t, 1);
        t.polygonEnd()
    }

    function gt() {
        function n(n, t) {
            n *= Ro, t = t * Ro / 2 + zo / 4;
            var e = n - r,
                o = e >= 0 ? 1 : -1,
                a = o * e,
                c = Math.cos(t),
                l = Math.sin(t),
                f = u * l,
                s = i * c + f * Math.cos(a),
                h = f * o * Math.sin(a);
            ya.add(Math.atan2(h, s)), r = n, i = c, u = l
        }
        var t, e, r, i, u;
        ma.point = function(o, a) {
            ma.point = n, r = (t = o) * Ro, i = Math.cos(a = (e = a) * Ro / 2 + zo / 4), u = Math.sin(a)
        }, ma.lineEnd = function() {
            n(t, e)
        }
    }

    function vt(n) {
        var t = n[0],
            e = n[1],
            r = Math.cos(e);
        return [r * Math.cos(t), r * Math.sin(t), Math.sin(e)]
    }

    function dt(n, t) {
        return n[0] * t[0] + n[1] * t[1] + n[2] * t[2]
    }

    function yt(n, t) {
        return [n[1] * t[2] - n[2] * t[1], n[2] * t[0] - n[0] * t[2], n[0] * t[1] - n[1] * t[0]]
    }

    function mt(n, t) {
        n[0] += t[0], n[1] += t[1], n[2] += t[2]
    }

    function Mt(n, t) {
        return [n[0] * t, n[1] * t, n[2] * t]
    }

    function xt(n) {
        var t = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]);
        n[0] /= t, n[1] /= t, n[2] /= t
    }

    function bt(n) {
        return [Math.atan2(n[1], n[0]), tn(n[2])]
    }

    function _t(n, t) {
        return so(n[0] - t[0]) < Ao && so(n[1] - t[1]) < Ao
    }

    function wt(n, t) {
        n *= Ro;
        var e = Math.cos(t *= Ro);
        St(e * Math.cos(n), e * Math.sin(n), Math.sin(t))
    }

    function St(n, t, e) {
        ++Ma, ba += (n - ba) / Ma, _a += (t - _a) / Ma, wa += (e - wa) / Ma
    }

    function kt() {
        function n(n, i) {
            n *= Ro;
            var u = Math.cos(i *= Ro),
                o = u * Math.cos(n),
                a = u * Math.sin(n),
                c = Math.sin(i),
                l = Math.atan2(Math.sqrt((l = e * c - r * a) * l + (l = r * o - t * c) * l + (l = t * a - e * o) * l), t * o + e * a + r * c);
            xa += l, Sa += l * (t + (t = o)), ka += l * (e + (e = a)), Na += l * (r + (r = c)), St(t, e, r)
        }
        var t, e, r;
        za.point = function(i, u) {
            i *= Ro;
            var o = Math.cos(u *= Ro);
            t = o * Math.cos(i), e = o * Math.sin(i), r = Math.sin(u), za.point = n, St(t, e, r)
        }
    }

    function Nt() {
        za.point = wt
    }

    function Et() {
        function n(n, t) {
            n *= Ro;
            var e = Math.cos(t *= Ro),
                o = e * Math.cos(n),
                a = e * Math.sin(n),
                c = Math.sin(t),
                l = i * c - u * a,
                f = u * o - r * c,
                s = r * a - i * o,
                h = Math.sqrt(l * l + f * f + s * s),
                p = r * o + i * a + u * c,
                g = h && -nn(p) / h,
                v = Math.atan2(h, p);
            Ea += g * l, Aa += g * f, Ca += g * s, xa += v, Sa += v * (r + (r = o)), ka += v * (i + (i = a)), Na += v * (u + (u = c)), St(r, i, u)
        }
        var t, e, r, i, u;
        za.point = function(o, a) {
            t = o, e = a, za.point = n, o *= Ro;
            var c = Math.cos(a *= Ro);
            r = c * Math.cos(o), i = c * Math.sin(o), u = Math.sin(a), St(r, i, u)
        }, za.lineEnd = function() {
            n(t, e), za.lineEnd = Nt, za.point = wt
        }
    }

    function At(n, t) {
        function e(e, r) {
            return e = n(e, r), t(e[0], e[1])
        }
        return n.invert && t.invert && (e.invert = function(e, r) {
            return e = t.invert(e, r), e && n.invert(e[0], e[1])
        }), e
    }

    function Ct() {
        return !0
    }

    function zt(n, t, e, r, i) {
        var u = [],
            o = [];
        if (n.forEach(function(n) {
                if (!((t = n.length - 1) <= 0)) {
                    var t, e = n[0],
                        r = n[t];
                    if (_t(e, r)) {
                        i.lineStart();
                        for (var a = 0; t > a; ++a) i.point((e = n[a])[0], e[1]);
                        return void i.lineEnd()
                    }
                    var c = new Lt(e, n, null, (!0)),
                        l = new Lt(e, null, c, (!1));
                    c.o = l, u.push(c), o.push(l), c = new Lt(r, n, null, (!1)), l = new Lt(r, null, c, (!0)), c.o = l, u.push(c), o.push(l)
                }
            }), o.sort(t), qt(u), qt(o), u.length) {
            for (var a = 0, c = e, l = o.length; l > a; ++a) o[a].e = c = !c;
            for (var f, s, h = u[0];;) {
                for (var p = h, g = !0; p.v;)
                    if ((p = p.n) === h) return;
                f = p.z, i.lineStart();
                do {
                    if (p.v = p.o.v = !0, p.e) {
                        if (g)
                            for (var a = 0, l = f.length; l > a; ++a) i.point((s = f[a])[0], s[1]);
                        else r(p.x, p.n.x, 1, i);
                        p = p.n
                    } else {
                        if (g) {
                            f = p.p.z;
                            for (var a = f.length - 1; a >= 0; --a) i.point((s = f[a])[0], s[1])
                        } else r(p.x, p.p.x, -1, i);
                        p = p.p
                    }
                    p = p.o, f = p.z, g = !g
                } while (!p.v);
                i.lineEnd()
            }
        }
    }

    function qt(n) {
        if (t = n.length) {
            for (var t, e, r = 0, i = n[0]; ++r < t;) i.n = e = n[r], e.p = i, i = e;
            i.n = e = n[0], e.p = i
        }
    }

    function Lt(n, t, e, r) {
        this.x = n, this.z = t, this.o = e, this.e = r, this.v = !1, this.n = this.p = null
    }

    function Tt(n, t, e, r) {
        return function(i, u) {
            function o(t, e) {
                var r = i(t, e);
                n(t = r[0], e = r[1]) && u.point(t, e)
            }

            function a(n, t) {
                var e = i(n, t);
                d.point(e[0], e[1])
            }

            function c() {
                m.point = a, d.lineStart()
            }

            function l() {
                m.point = o, d.lineEnd()
            }

            function f(n, t) {
                v.push([n, t]);
                var e = i(n, t);
                x.point(e[0], e[1])
            }

            function s() {
                x.lineStart(), v = []
            }

            function h() {
                f(v[0][0], v[0][1]), x.lineEnd();
                var n, t = x.clean(),
                    e = M.buffer(),
                    r = e.length;
                if (v.pop(), g.push(v), v = null, r)
                    if (1 & t) {
                        n = e[0];
                        var i, r = n.length - 1,
                            o = -1;
                        if (r > 0) {
                            for (b || (u.polygonStart(), b = !0), u.lineStart(); ++o < r;) u.point((i = n[o])[0], i[1]);
                            u.lineEnd()
                        }
                    } else r > 1 && 2 & t && e.push(e.pop().concat(e.shift())), p.push(e.filter(Rt))
            }
            var p, g, v, d = t(u),
                y = i.invert(r[0], r[1]),
                m = {
                    point: o,
                    lineStart: c,
                    lineEnd: l,
                    polygonStart: function() {
                        m.point = f, m.lineStart = s, m.lineEnd = h, p = [], g = []
                    },
                    polygonEnd: function() {
                        m.point = o, m.lineStart = c, m.lineEnd = l, p = to.merge(p);
                        var n = Ht(y, g);
                        p.length ? (b || (u.polygonStart(), b = !0), zt(p, Pt, n, e, u)) : n && (b || (u.polygonStart(), b = !0), u.lineStart(), e(null, null, 1, u), u.lineEnd()), b && (u.polygonEnd(), b = !1), p = g = null
                    },
                    sphere: function() {
                        u.polygonStart(), u.lineStart(), e(null, null, 1, u), u.lineEnd(), u.polygonEnd()
                    }
                },
                M = Dt(),
                x = t(M),
                b = !1;
            return m
        }
    }

    function Rt(n) {
        return n.length > 1
    }

    function Dt() {
        var n, t = [];
        return {
            lineStart: function() {
                t.push(n = [])
            },
            point: function(t, e) {
                n.push([t, e])
            },
            lineEnd: b,
            buffer: function() {
                var e = t;
                return t = [], n = null, e
            },
            rejoin: function() {
                t.length > 1 && t.push(t.pop().concat(t.shift()))
            }
        }
    }

    function Pt(n, t) {
        return ((n = n.x)[0] < 0 ? n[1] - To - Ao : To - n[1]) - ((t = t.x)[0] < 0 ? t[1] - To - Ao : To - t[1])
    }

    function Ut(n) {
        var t, e = NaN,
            r = NaN,
            i = NaN;
        return {
            lineStart: function() {
                n.lineStart(), t = 1
            },
            point: function(u, o) {
                var a = u > 0 ? zo : -zo,
                    c = so(u - e);
                so(c - zo) < Ao ? (n.point(e, r = (r + o) / 2 > 0 ? To : -To), n.point(i, r), n.lineEnd(), n.lineStart(), n.point(a, r), n.point(u, r), t = 0) : i !== a && c >= zo && (so(e - i) < Ao && (e -= i * Ao), so(u - a) < Ao && (u -= a * Ao), r = jt(e, r, u, o), n.point(i, r), n.lineEnd(), n.lineStart(), n.point(a, r), t = 0), n.point(e = u, r = o), i = a
            },
            lineEnd: function() {
                n.lineEnd(), e = r = NaN
            },
            clean: function() {
                return 2 - t
            }
        }
    }

    function jt(n, t, e, r) {
        var i, u, o = Math.sin(n - e);
        return so(o) > Ao ? Math.atan((Math.sin(t) * (u = Math.cos(r)) * Math.sin(e) - Math.sin(r) * (i = Math.cos(t)) * Math.sin(n)) / (i * u * o)) : (t + r) / 2
    }

    function Ft(n, t, e, r) {
        var i;
        if (null == n) i = e * To, r.point(-zo, i), r.point(0, i), r.point(zo, i), r.point(zo, 0), r.point(zo, -i), r.point(0, -i), r.point(-zo, -i), r.point(-zo, 0), r.point(-zo, i);
        else if (so(n[0] - t[0]) > Ao) {
            var u = n[0] < t[0] ? zo : -zo;
            i = e * u / 2, r.point(-u, i), r.point(0, i), r.point(u, i)
        } else r.point(t[0], t[1])
    }

    function Ht(n, t) {
        var e = n[0],
            r = n[1],
            i = [Math.sin(e), -Math.cos(e), 0],
            u = 0,
            o = 0;
        ya.reset();
        for (var a = 0, c = t.length; c > a; ++a) {
            var l = t[a],
                f = l.length;
            if (f)
                for (var s = l[0], h = s[0], p = s[1] / 2 + zo / 4, g = Math.sin(p), v = Math.cos(p), d = 1;;) {
                    d === f && (d = 0), n = l[d];
                    var y = n[0],
                        m = n[1] / 2 + zo / 4,
                        M = Math.sin(m),
                        x = Math.cos(m),
                        b = y - h,
                        _ = b >= 0 ? 1 : -1,
                        w = _ * b,
                        S = w > zo,
                        k = g * M;
                    if (ya.add(Math.atan2(k * _ * Math.sin(w), v * x + k * Math.cos(w))), u += S ? b + _ * qo : b, S ^ h >= e ^ y >= e) {
                        var N = yt(vt(s), vt(n));
                        xt(N);
                        var E = yt(i, N);
                        xt(E);
                        var A = (S ^ b >= 0 ? -1 : 1) * tn(E[2]);
                        (r > A || r === A && (N[0] || N[1])) && (o += S ^ b >= 0 ? 1 : -1)
                    }
                    if (!d++) break;
                    h = y, g = M, v = x, s = n
                }
        }
        return (-Ao > u || Ao > u && 0 > ya) ^ 1 & o
    }

    function Ot(n) {
        function t(n, t) {
            return Math.cos(n) * Math.cos(t) > u
        }

        function e(n) {
            var e, u, c, l, f;
            return {
                lineStart: function() {
                    l = c = !1, f = 1
                },
                point: function(s, h) {
                    var p, g = [s, h],
                        v = t(s, h),
                        d = o ? v ? 0 : i(s, h) : v ? i(s + (0 > s ? zo : -zo), h) : 0;
                    if (!e && (l = c = v) && n.lineStart(), v !== c && (p = r(e, g), (_t(e, p) || _t(g, p)) && (g[0] += Ao, g[1] += Ao, v = t(g[0], g[1]))), v !== c) f = 0, v ? (n.lineStart(), p = r(g, e), n.point(p[0], p[1])) : (p = r(e, g), n.point(p[0], p[1]), n.lineEnd()), e = p;
                    else if (a && e && o ^ v) {
                        var y;
                        d & u || !(y = r(g, e, !0)) || (f = 0, o ? (n.lineStart(), n.point(y[0][0], y[0][1]), n.point(y[1][0], y[1][1]), n.lineEnd()) : (n.point(y[1][0], y[1][1]), n.lineEnd(), n.lineStart(), n.point(y[0][0], y[0][1])))
                    }!v || e && _t(e, g) || n.point(g[0], g[1]), e = g, c = v, u = d
                },
                lineEnd: function() {
                    c && n.lineEnd(), e = null
                },
                clean: function() {
                    return f | (l && c) << 1
                }
            }
        }

        function r(n, t, e) {
            var r = vt(n),
                i = vt(t),
                o = [1, 0, 0],
                a = yt(r, i),
                c = dt(a, a),
                l = a[0],
                f = c - l * l;
            if (!f) return !e && n;
            var s = u * c / f,
                h = -u * l / f,
                p = yt(o, a),
                g = Mt(o, s),
                v = Mt(a, h);
            mt(g, v);
            var d = p,
                y = dt(g, d),
                m = dt(d, d),
                M = y * y - m * (dt(g, g) - 1);
            if (!(0 > M)) {
                var x = Math.sqrt(M),
                    b = Mt(d, (-y - x) / m);
                if (mt(b, g), b = bt(b), !e) return b;
                var _, w = n[0],
                    S = t[0],
                    k = n[1],
                    N = t[1];
                w > S && (_ = w, w = S, S = _);
                var E = S - w,
                    A = so(E - zo) < Ao,
                    C = A || Ao > E;
                if (!A && k > N && (_ = k, k = N, N = _), C ? A ? k + N > 0 ^ b[1] < (so(b[0] - w) < Ao ? k : N) : k <= b[1] && b[1] <= N : E > zo ^ (w <= b[0] && b[0] <= S)) {
                    var z = Mt(d, (-y + x) / m);
                    return mt(z, g), [b, bt(z)]
                }
            }
        }

        function i(t, e) {
            var r = o ? n : zo - n,
                i = 0;
            return -r > t ? i |= 1 : t > r && (i |= 2), -r > e ? i |= 4 : e > r && (i |= 8), i
        }
        var u = Math.cos(n),
            o = u > 0,
            a = so(u) > Ao,
            c = ge(n, 6 * Ro);
        return Tt(t, e, c, o ? [0, -n] : [-zo, n - zo])
    }

    function It(n, t, e, r) {
        return function(i) {
            var u, o = i.a,
                a = i.b,
                c = o.x,
                l = o.y,
                f = a.x,
                s = a.y,
                h = 0,
                p = 1,
                g = f - c,
                v = s - l;
            if (u = n - c, g || !(u > 0)) {
                if (u /= g, 0 > g) {
                    if (h > u) return;
                    p > u && (p = u)
                } else if (g > 0) {
                    if (u > p) return;
                    u > h && (h = u)
                }
                if (u = e - c, g || !(0 > u)) {
                    if (u /= g, 0 > g) {
                        if (u > p) return;
                        u > h && (h = u)
                    } else if (g > 0) {
                        if (h > u) return;
                        p > u && (p = u)
                    }
                    if (u = t - l, v || !(u > 0)) {
                        if (u /= v, 0 > v) {
                            if (h > u) return;
                            p > u && (p = u)
                        } else if (v > 0) {
                            if (u > p) return;
                            u > h && (h = u)
                        }
                        if (u = r - l, v || !(0 > u)) {
                            if (u /= v, 0 > v) {
                                if (u > p) return;
                                u > h && (h = u)
                            } else if (v > 0) {
                                if (h > u) return;
                                p > u && (p = u)
                            }
                            return h > 0 && (i.a = {
                                x: c + h * g,
                                y: l + h * v
                            }), 1 > p && (i.b = {
                                x: c + p * g,
                                y: l + p * v
                            }), i
                        }
                    }
                }
            }
        }
    }

    function Yt(n, t, e, r) {
        function i(r, i) {
            return so(r[0] - n) < Ao ? i > 0 ? 0 : 3 : so(r[0] - e) < Ao ? i > 0 ? 2 : 1 : so(r[1] - t) < Ao ? i > 0 ? 1 : 0 : i > 0 ? 3 : 2
        }

        function u(n, t) {
            return o(n.x, t.x)
        }

        function o(n, t) {
            var e = i(n, 1),
                r = i(t, 1);
            return e !== r ? e - r : 0 === e ? t[1] - n[1] : 1 === e ? n[0] - t[0] : 2 === e ? n[1] - t[1] : t[0] - n[0]
        }
        return function(a) {
            function c(n) {
                for (var t = 0, e = d.length, r = n[1], i = 0; e > i; ++i)
                    for (var u, o = 1, a = d[i], c = a.length, l = a[0]; c > o; ++o) u = a[o], l[1] <= r ? u[1] > r && Q(l, u, n) > 0 && ++t : u[1] <= r && Q(l, u, n) < 0 && --t, l = u;
                return 0 !== t
            }

            function l(u, a, c, l) {
                var f = 0,
                    s = 0;
                if (null == u || (f = i(u, c)) !== (s = i(a, c)) || o(u, a) < 0 ^ c > 0) {
                    do l.point(0 === f || 3 === f ? n : e, f > 1 ? r : t); while ((f = (f + c + 4) % 4) !== s)
                } else l.point(a[0], a[1])
            }

            function f(i, u) {
                return i >= n && e >= i && u >= t && r >= u
            }

            function s(n, t) {
                f(n, t) && a.point(n, t)
            }

            function h() {
                C.point = g, d && d.push(y = []), S = !0, w = !1, b = _ = NaN
            }

            function p() {
                v && (g(m, M), x && w && E.rejoin(), v.push(E.buffer())), C.point = s, w && a.lineEnd()
            }

            function g(n, t) {
                n = Math.max(-La, Math.min(La, n)), t = Math.max(-La, Math.min(La, t));
                var e = f(n, t);
                if (d && y.push([n, t]), S) m = n, M = t, x = e, S = !1, e && (a.lineStart(), a.point(n, t));
                else if (e && w) a.point(n, t);
                else {
                    var r = {
                        a: {
                            x: b,
                            y: _
                        },
                        b: {
                            x: n,
                            y: t
                        }
                    };
                    A(r) ? (w || (a.lineStart(), a.point(r.a.x, r.a.y)), a.point(r.b.x, r.b.y), e || a.lineEnd(), k = !1) : e && (a.lineStart(), a.point(n, t), k = !1)
                }
                b = n, _ = t, w = e
            }
            var v, d, y, m, M, x, b, _, w, S, k, N = a,
                E = Dt(),
                A = It(n, t, e, r),
                C = {
                    point: s,
                    lineStart: h,
                    lineEnd: p,
                    polygonStart: function() {
                        a = E, v = [], d = [], k = !0
                    },
                    polygonEnd: function() {
                        a = N, v = to.merge(v);
                        var t = c([n, r]),
                            e = k && t,
                            i = v.length;
                        (e || i) && (a.polygonStart(), e && (a.lineStart(), l(null, null, 1, a), a.lineEnd()), i && zt(v, u, t, l, a), a.polygonEnd()), v = d = y = null
                    }
                };
            return C
        }
    }

    function Zt(n) {
        var t = 0,
            e = zo / 3,
            r = oe(n),
            i = r(t, e);
        return i.parallels = function(n) {
            return arguments.length ? r(t = n[0] * zo / 180, e = n[1] * zo / 180) : [t / zo * 180, e / zo * 180]
        }, i
    }

    function Vt(n, t) {
        function e(n, t) {
            var e = Math.sqrt(u - 2 * i * Math.sin(t)) / i;
            return [e * Math.sin(n *= i), o - e * Math.cos(n)]
        }
        var r = Math.sin(n),
            i = (r + Math.sin(t)) / 2,
            u = 1 + r * (2 * i - r),
            o = Math.sqrt(u) / i;
        return e.invert = function(n, t) {
            var e = o - t;
            return [Math.atan2(n, e) / i, tn((u - (n * n + e * e) * i * i) / (2 * i))]
        }, e
    }

    function Xt() {
        function n(n, t) {
            Ra += i * n - r * t, r = n, i = t
        }
        var t, e, r, i;
        Fa.point = function(u, o) {
            Fa.point = n, t = r = u, e = i = o
        }, Fa.lineEnd = function() {
            n(t, e)
        }
    }

    function $t(n, t) {
        Da > n && (Da = n), n > Ua && (Ua = n), Pa > t && (Pa = t), t > ja && (ja = t)
    }

    function Bt() {
        function n(n, t) {
            o.push("M", n, ",", t, u)
        }

        function t(n, t) {
            o.push("M", n, ",", t), a.point = e
        }

        function e(n, t) {
            o.push("L", n, ",", t)
        }

        function r() {
            a.point = n
        }

        function i() {
            o.push("Z")
        }
        var u = Wt(4.5),
            o = [],
            a = {
                point: n,
                lineStart: function() {
                    a.point = t
                },
                lineEnd: r,
                polygonStart: function() {
                    a.lineEnd = i
                },
                polygonEnd: function() {
                    a.lineEnd = r, a.point = n
                },
                pointRadius: function(n) {
                    return u = Wt(n), a
                },
                result: function() {
                    if (o.length) {
                        var n = o.join("");
                        return o = [], n
                    }
                }
            };
        return a
    }

    function Wt(n) {
        return "m0," + n + "a" + n + "," + n + " 0 1,1 0," + -2 * n + "a" + n + "," + n + " 0 1,1 0," + 2 * n + "z"
    }

    function Jt(n, t) {
        ba += n, _a += t, ++wa
    }

    function Gt() {
        function n(n, r) {
            var i = n - t,
                u = r - e,
                o = Math.sqrt(i * i + u * u);
            Sa += o * (t + n) / 2, ka += o * (e + r) / 2, Na += o, Jt(t = n, e = r)
        }
        var t, e;
        Oa.point = function(r, i) {
            Oa.point = n, Jt(t = r, e = i)
        }
    }

    function Kt() {
        Oa.point = Jt
    }

    function Qt() {
        function n(n, t) {
            var e = n - r,
                u = t - i,
                o = Math.sqrt(e * e + u * u);
            Sa += o * (r + n) / 2, ka += o * (i + t) / 2, Na += o, o = i * n - r * t, Ea += o * (r + n), Aa += o * (i + t), Ca += 3 * o, Jt(r = n, i = t)
        }
        var t, e, r, i;
        Oa.point = function(u, o) {
            Oa.point = n, Jt(t = r = u, e = i = o)
        }, Oa.lineEnd = function() {
            n(t, e)
        }
    }

    function ne(n) {
        function t(t, e) {
            n.moveTo(t + o, e), n.arc(t, e, o, 0, qo)
        }

        function e(t, e) {
            n.moveTo(t, e), a.point = r
        }

        function r(t, e) {
            n.lineTo(t, e)
        }

        function i() {
            a.point = t
        }

        function u() {
            n.closePath()
        }
        var o = 4.5,
            a = {
                point: t,
                lineStart: function() {
                    a.point = e
                },
                lineEnd: i,
                polygonStart: function() {
                    a.lineEnd = u
                },
                polygonEnd: function() {
                    a.lineEnd = i, a.point = t
                },
                pointRadius: function(n) {
                    return o = n, a
                },
                result: b
            };
        return a
    }

    function te(n) {
        function t(n) {
            return (a ? r : e)(n)
        }

        function e(t) {
            return ie(t, function(e, r) {
                e = n(e, r), t.point(e[0], e[1])
            })
        }

        function r(t) {
            function e(e, r) {
                e = n(e, r), t.point(e[0], e[1])
            }

            function r() {
                M = NaN, S.point = u, t.lineStart()
            }

            function u(e, r) {
                var u = vt([e, r]),
                    o = n(e, r);
                i(M, x, m, b, _, w, M = o[0], x = o[1], m = e, b = u[0], _ = u[1], w = u[2], a, t), t.point(M, x)
            }

            function o() {
                S.point = e, t.lineEnd()
            }

            function c() {
                r(), S.point = l, S.lineEnd = f
            }

            function l(n, t) {
                u(s = n, h = t), p = M, g = x, v = b, d = _, y = w, S.point = u
            }

            function f() {
                i(M, x, m, b, _, w, p, g, s, v, d, y, a, t), S.lineEnd = o, o()
            }
            var s, h, p, g, v, d, y, m, M, x, b, _, w, S = {
                point: e,
                lineStart: r,
                lineEnd: o,
                polygonStart: function() {
                    t.polygonStart(), S.lineStart = c
                },
                polygonEnd: function() {
                    t.polygonEnd(), S.lineStart = r
                }
            };
            return S
        }

        function i(t, e, r, a, c, l, f, s, h, p, g, v, d, y) {
            var m = f - t,
                M = s - e,
                x = m * m + M * M;
            if (x > 4 * u && d--) {
                var b = a + p,
                    _ = c + g,
                    w = l + v,
                    S = Math.sqrt(b * b + _ * _ + w * w),
                    k = Math.asin(w /= S),
                    N = so(so(w) - 1) < Ao || so(r - h) < Ao ? (r + h) / 2 : Math.atan2(_, b),
                    E = n(N, k),
                    A = E[0],
                    C = E[1],
                    z = A - t,
                    q = C - e,
                    L = M * z - m * q;
                (L * L / x > u || so((m * z + M * q) / x - .5) > .3 || o > a * p + c * g + l * v) && (i(t, e, r, a, c, l, A, C, N, b /= S, _ /= S, w, d, y), y.point(A, C), i(A, C, N, b, _, w, f, s, h, p, g, v, d, y))
            }
        }
        var u = .5,
            o = Math.cos(30 * Ro),
            a = 16;
        return t.precision = function(n) {
            return arguments.length ? (a = (u = n * n) > 0 && 16, t) : Math.sqrt(u)
        }, t
    }

    function ee(n) {
        var t = te(function(t, e) {
            return n([t * Do, e * Do])
        });
        return function(n) {
            return ae(t(n))
        }
    }

    function re(n) {
        this.stream = n
    }

    function ie(n, t) {
        return {
            point: t,
            sphere: function() {
                n.sphere()
            },
            lineStart: function() {
                n.lineStart()
            },
            lineEnd: function() {
                n.lineEnd()
            },
            polygonStart: function() {
                n.polygonStart()
            },
            polygonEnd: function() {
                n.polygonEnd()
            }
        }
    }

    function ue(n) {
        return oe(function() {
            return n
        })()
    }

    function oe(n) {
        function t(n) {
            return n = a(n[0] * Ro, n[1] * Ro), [n[0] * h + c, l - n[1] * h]
        }

        function e(n) {
            return n = a.invert((n[0] - c) / h, (l - n[1]) / h), n && [n[0] * Do, n[1] * Do]
        }

        function r() {
            a = At(o = fe(y, M, x), u);
            var n = u(v, d);
            return c = p - n[0] * h, l = g + n[1] * h, i()
        }

        function i() {
            return f && (f.valid = !1, f = null), t
        }
        var u, o, a, c, l, f, s = te(function(n, t) {
                return n = u(n, t), [n[0] * h + c, l - n[1] * h]
            }),
            h = 150,
            p = 480,
            g = 250,
            v = 0,
            d = 0,
            y = 0,
            M = 0,
            x = 0,
            b = qa,
            _ = m,
            w = null,
            S = null;
        return t.stream = function(n) {
                return f && (f.valid = !1), f = ae(b(o, s(_(n)))), f.valid = !0, f
            }, t.clipAngle = function(n) {
                return arguments.length ? (b = null == n ? (w = n, qa) : Ot((w = +n) * Ro), i()) : w
            }, t.clipExtent = function(n) {
                return arguments.length ? (S = n, _ = n ? Yt(n[0][0], n[0][1], n[1][0], n[1][1]) : m, i()) : S
            }, t.scale = function(n) {
                return arguments.length ? (h = +n, r()) : h
            }, t.translate = function(n) {
                return arguments.length ? (p = +n[0], g = +n[1], r()) : [p, g]
            }, t.center = function(n) {
                return arguments.length ? (v = n[0] % 360 * Ro, d = n[1] % 360 * Ro, r()) : [v * Do, d * Do]
            }, t.rotate = function(n) {
                return arguments.length ? (y = n[0] % 360 * Ro, M = n[1] % 360 * Ro, x = n.length > 2 ? n[2] % 360 * Ro : 0, r()) : [y * Do, M * Do, x * Do]
            }, to.rebind(t, s, "precision"),
            function() {
                return u = n.apply(this, arguments), t.invert = u.invert && e, r()
            }
    }

    function ae(n) {
        return ie(n, function(t, e) {
            n.point(t * Ro, e * Ro)
        })
    }

    function ce(n, t) {
        return [n, t]
    }

    function le(n, t) {
        return [n > zo ? n - qo : -zo > n ? n + qo : n, t]
    }

    function fe(n, t, e) {
        return n ? t || e ? At(he(n), pe(t, e)) : he(n) : t || e ? pe(t, e) : le
    }

    function se(n) {
        return function(t, e) {
            return t += n, [t > zo ? t - qo : -zo > t ? t + qo : t, e]
        }
    }

    function he(n) {
        var t = se(n);
        return t.invert = se(-n), t
    }

    function pe(n, t) {
        function e(n, t) {
            var e = Math.cos(t),
                a = Math.cos(n) * e,
                c = Math.sin(n) * e,
                l = Math.sin(t),
                f = l * r + a * i;
            return [Math.atan2(c * u - f * o, a * r - l * i), tn(f * u + c * o)]
        }
        var r = Math.cos(n),
            i = Math.sin(n),
            u = Math.cos(t),
            o = Math.sin(t);
        return e.invert = function(n, t) {
            var e = Math.cos(t),
                a = Math.cos(n) * e,
                c = Math.sin(n) * e,
                l = Math.sin(t),
                f = l * u - c * o;
            return [Math.atan2(c * u + l * o, a * r + f * i), tn(f * r - a * i)]
        }, e
    }

    function ge(n, t) {
        var e = Math.cos(n),
            r = Math.sin(n);
        return function(i, u, o, a) {
            var c = o * t;
            null != i ? (i = ve(e, i), u = ve(e, u), (o > 0 ? u > i : i > u) && (i += o * qo)) : (i = n + o * qo, u = n - .5 * c);
            for (var l, f = i; o > 0 ? f > u : u > f; f -= c) a.point((l = bt([e, -r * Math.cos(f), -r * Math.sin(f)]))[0], l[1])
        }
    }

    function ve(n, t) {
        var e = vt(t);
        e[0] -= n, xt(e);
        var r = nn(-e[1]);
        return ((-e[2] < 0 ? -r : r) + 2 * Math.PI - Ao) % (2 * Math.PI)
    }

    function de(n, t, e) {
        var r = to.range(n, t - Ao, e).concat(t);
        return function(n) {
            return r.map(function(t) {
                return [n, t]
            })
        }
    }

    function ye(n, t, e) {
        var r = to.range(n, t - Ao, e).concat(t);
        return function(n) {
            return r.map(function(t) {
                return [t, n]
            })
        }
    }

    function me(n) {
        return n.source
    }

    function Me(n) {
        return n.target
    }

    function xe(n, t, e, r) {
        var i = Math.cos(t),
            u = Math.sin(t),
            o = Math.cos(r),
            a = Math.sin(r),
            c = i * Math.cos(n),
            l = i * Math.sin(n),
            f = o * Math.cos(e),
            s = o * Math.sin(e),
            h = 2 * Math.asin(Math.sqrt(on(r - t) + i * o * on(e - n))),
            p = 1 / Math.sin(h),
            g = h ? function(n) {
                var t = Math.sin(n *= h) * p,
                    e = Math.sin(h - n) * p,
                    r = e * c + t * f,
                    i = e * l + t * s,
                    o = e * u + t * a;
                return [Math.atan2(i, r) * Do, Math.atan2(o, Math.sqrt(r * r + i * i)) * Do]
            } : function() {
                return [n * Do, t * Do]
            };
        return g.distance = h, g
    }

    function be() {
        function n(n, i) {
            var u = Math.sin(i *= Ro),
                o = Math.cos(i),
                a = so((n *= Ro) - t),
                c = Math.cos(a);
            Ia += Math.atan2(Math.sqrt((a = o * Math.sin(a)) * a + (a = r * u - e * o * c) * a), e * u + r * o * c), t = n, e = u, r = o
        }
        var t, e, r;
        Ya.point = function(i, u) {
            t = i * Ro, e = Math.sin(u *= Ro), r = Math.cos(u), Ya.point = n
        }, Ya.lineEnd = function() {
            Ya.point = Ya.lineEnd = b
        }
    }

    function _e(n, t) {
        function e(t, e) {
            var r = Math.cos(t),
                i = Math.cos(e),
                u = n(r * i);
            return [u * i * Math.sin(t), u * Math.sin(e)]
        }
        return e.invert = function(n, e) {
            var r = Math.sqrt(n * n + e * e),
                i = t(r),
                u = Math.sin(i),
                o = Math.cos(i);
            return [Math.atan2(n * u, r * o), Math.asin(r && e * u / r)]
        }, e
    }

    function we(n, t) {
        function e(n, t) {
            o > 0 ? -To + Ao > t && (t = -To + Ao) : t > To - Ao && (t = To - Ao);
            var e = o / Math.pow(i(t), u);
            return [e * Math.sin(u * n), o - e * Math.cos(u * n)]
        }
        var r = Math.cos(n),
            i = function(n) {
                return Math.tan(zo / 4 + n / 2)
            },
            u = n === t ? Math.sin(n) : Math.log(r / Math.cos(t)) / Math.log(i(t) / i(n)),
            o = r * Math.pow(i(n), u) / u;
        return u ? (e.invert = function(n, t) {
            var e = o - t,
                r = K(u) * Math.sqrt(n * n + e * e);
            return [Math.atan2(n, e) / u, 2 * Math.atan(Math.pow(o / r, 1 / u)) - To]
        }, e) : ke
    }

    function Se(n, t) {
        function e(n, t) {
            var e = u - t;
            return [e * Math.sin(i * n), u - e * Math.cos(i * n)]
        }
        var r = Math.cos(n),
            i = n === t ? Math.sin(n) : (r - Math.cos(t)) / (t - n),
            u = r / i + n;
        return so(i) < Ao ? ce : (e.invert = function(n, t) {
            var e = u - t;
            return [Math.atan2(n, e) / i, u - K(i) * Math.sqrt(n * n + e * e)]
        }, e)
    }

    function ke(n, t) {
        return [n, Math.log(Math.tan(zo / 4 + t / 2))]
    }

    function Ne(n) {
        var t, e = ue(n),
            r = e.scale,
            i = e.translate,
            u = e.clipExtent;
        return e.scale = function() {
            var n = r.apply(e, arguments);
            return n === e ? t ? e.clipExtent(null) : e : n
        }, e.translate = function() {
            var n = i.apply(e, arguments);
            return n === e ? t ? e.clipExtent(null) : e : n
        }, e.clipExtent = function(n) {
            var o = u.apply(e, arguments);
            if (o === e) {
                if (t = null == n) {
                    var a = zo * r(),
                        c = i();
                    u([
                        [c[0] - a, c[1] - a],
                        [c[0] + a, c[1] + a]
                    ])
                }
            } else t && (o = null);
            return o
        }, e.clipExtent(null)
    }

    function Ee(n, t) {
        return [Math.log(Math.tan(zo / 4 + t / 2)), -n]
    }

    function Ae(n) {
        return n[0]
    }

    function Ce(n) {
        return n[1]
    }

    function ze(n) {
        for (var t = n.length, e = [0, 1], r = 2, i = 2; t > i; i++) {
            for (; r > 1 && Q(n[e[r - 2]], n[e[r - 1]], n[i]) <= 0;) --r;
            e[r++] = i
        }
        return e.slice(0, r)
    }

    function qe(n, t) {
        return n[0] - t[0] || n[1] - t[1]
    }

    function Le(n, t, e) {
        return (e[0] - t[0]) * (n[1] - t[1]) < (e[1] - t[1]) * (n[0] - t[0])
    }

    function Te(n, t, e, r) {
        var i = n[0],
            u = e[0],
            o = t[0] - i,
            a = r[0] - u,
            c = n[1],
            l = e[1],
            f = t[1] - c,
            s = r[1] - l,
            h = (a * (c - l) - s * (i - u)) / (s * o - a * f);
        return [i + h * o, c + h * f]
    }

    function Re(n) {
        var t = n[0],
            e = n[n.length - 1];
        return !(t[0] - e[0] || t[1] - e[1])
    }

    function De() {
        er(this), this.edge = this.site = this.circle = null
    }

    function Pe(n) {
        var t = tc.pop() || new De;
        return t.site = n, t
    }

    function Ue(n) {
        $e(n), Ka.remove(n), tc.push(n), er(n)
    }

    function je(n) {
        var t = n.circle,
            e = t.x,
            r = t.cy,
            i = {
                x: e,
                y: r
            },
            u = n.P,
            o = n.N,
            a = [n];
        Ue(n);
        for (var c = u; c.circle && so(e - c.circle.x) < Ao && so(r - c.circle.cy) < Ao;) u = c.P, a.unshift(c), Ue(c), c = u;
        a.unshift(c), $e(c);
        for (var l = o; l.circle && so(e - l.circle.x) < Ao && so(r - l.circle.cy) < Ao;) o = l.N, a.push(l), Ue(l), l = o;
        a.push(l), $e(l);
        var f, s = a.length;
        for (f = 1; s > f; ++f) l = a[f], c = a[f - 1], Qe(l.edge, c.site, l.site, i);
        c = a[0], l = a[s - 1], l.edge = Ge(c.site, l.site, null, i), Xe(c), Xe(l)
    }

    function Fe(n) {
        for (var t, e, r, i, u = n.x, o = n.y, a = Ka._; a;)
            if (r = He(a, o) - u, r > Ao) a = a.L;
            else {
                if (i = u - Oe(a, o), !(i > Ao)) {
                    r > -Ao ? (t = a.P, e = a) : i > -Ao ? (t = a, e = a.N) : t = e = a;
                    break
                }
                if (!a.R) {
                    t = a;
                    break
                }
                a = a.R
            } var c = Pe(n);
        if (Ka.insert(t, c), t || e) {
            if (t === e) return $e(t), e = Pe(t.site), Ka.insert(c, e), c.edge = e.edge = Ge(t.site, c.site), Xe(t), void Xe(e);
            if (!e) return void(c.edge = Ge(t.site, c.site));
            $e(t), $e(e);
            var l = t.site,
                f = l.x,
                s = l.y,
                h = n.x - f,
                p = n.y - s,
                g = e.site,
                v = g.x - f,
                d = g.y - s,
                y = 2 * (h * d - p * v),
                m = h * h + p * p,
                M = v * v + d * d,
                x = {
                    x: (d * m - p * M) / y + f,
                    y: (h * M - v * m) / y + s
                };
            Qe(e.edge, l, g, x), c.edge = Ge(l, n, null, x), e.edge = Ge(n, g, null, x), Xe(t), Xe(e)
        }
    }

    function He(n, t) {
        var e = n.site,
            r = e.x,
            i = e.y,
            u = i - t;
        if (!u) return r;
        var o = n.P;
        if (!o) return -1 / 0;
        e = o.site;
        var a = e.x,
            c = e.y,
            l = c - t;
        if (!l) return a;
        var f = a - r,
            s = 1 / u - 1 / l,
            h = f / l;
        return s ? (-h + Math.sqrt(h * h - 2 * s * (f * f / (-2 * l) - c + l / 2 + i - u / 2))) / s + r : (r + a) / 2
    }

    function Oe(n, t) {
        var e = n.N;
        if (e) return He(e, t);
        var r = n.site;
        return r.y === t ? r.x : 1 / 0
    }

    function Ie(n) {
        this.site = n, this.edges = []
    }

    function Ye(n) {
        for (var t, e, r, i, u, o, a, c, l, f, s = n[0][0], h = n[1][0], p = n[0][1], g = n[1][1], v = Ga, d = v.length; d--;)
            if (u = v[d], u && u.prepare())
                for (a = u.edges, c = a.length, o = 0; c > o;) f = a[o].end(), r = f.x, i = f.y, l = a[++o % c].start(), t = l.x, e = l.y, (so(r - t) > Ao || so(i - e) > Ao) && (a.splice(o, 0, new nr(Ke(u.site, f, so(r - s) < Ao && g - i > Ao ? {
                    x: s,
                    y: so(t - s) < Ao ? e : g
                } : so(i - g) < Ao && h - r > Ao ? {
                    x: so(e - g) < Ao ? t : h,
                    y: g
                } : so(r - h) < Ao && i - p > Ao ? {
                    x: h,
                    y: so(t - h) < Ao ? e : p
                } : so(i - p) < Ao && r - s > Ao ? {
                    x: so(e - p) < Ao ? t : s,
                    y: p
                } : null), u.site, null)), ++c)
    }

    function Ze(n, t) {
        return t.angle - n.angle
    }

    function Ve() {
        er(this), this.x = this.y = this.arc = this.site = this.cy = null
    }

    function Xe(n) {
        var t = n.P,
            e = n.N;
        if (t && e) {
            var r = t.site,
                i = n.site,
                u = e.site;
            if (r !== u) {
                var o = i.x,
                    a = i.y,
                    c = r.x - o,
                    l = r.y - a,
                    f = u.x - o,
                    s = u.y - a,
                    h = 2 * (c * s - l * f);
                if (!(h >= -Co)) {
                    var p = c * c + l * l,
                        g = f * f + s * s,
                        v = (s * p - l * g) / h,
                        d = (c * g - f * p) / h,
                        s = d + a,
                        y = ec.pop() || new Ve;
                    y.arc = n, y.site = i, y.x = v + o, y.y = s + Math.sqrt(v * v + d * d), y.cy = s, n.circle = y;
                    for (var m = null, M = nc._; M;)
                        if (y.y < M.y || y.y === M.y && y.x <= M.x) {
                            if (!M.L) {
                                m = M.P;
                                break
                            }
                            M = M.L
                        } else {
                            if (!M.R) {
                                m = M;
                                break
                            }
                            M = M.R
                        } nc.insert(m, y), m || (Qa = y)
                }
            }
        }
    }

    function $e(n) {
        var t = n.circle;
        t && (t.P || (Qa = t.N), nc.remove(t), ec.push(t), er(t), n.circle = null)
    }

    function Be(n) {
        for (var t, e = Ja, r = It(n[0][0], n[0][1], n[1][0], n[1][1]), i = e.length; i--;) t = e[i], (!We(t, n) || !r(t) || so(t.a.x - t.b.x) < Ao && so(t.a.y - t.b.y) < Ao) && (t.a = t.b = null, e.splice(i, 1))
    }

    function We(n, t) {
        var e = n.b;
        if (e) return !0;
        var r, i, u = n.a,
            o = t[0][0],
            a = t[1][0],
            c = t[0][1],
            l = t[1][1],
            f = n.l,
            s = n.r,
            h = f.x,
            p = f.y,
            g = s.x,
            v = s.y,
            d = (h + g) / 2,
            y = (p + v) / 2;
        if (v === p) {
            if (o > d || d >= a) return;
            if (h > g) {
                if (u) {
                    if (u.y >= l) return
                } else u = {
                    x: d,
                    y: c
                };
                e = {
                    x: d,
                    y: l
                }
            } else {
                if (u) {
                    if (u.y < c) return
                } else u = {
                    x: d,
                    y: l
                };
                e = {
                    x: d,
                    y: c
                }
            }
        } else if (r = (h - g) / (v - p), i = y - r * d, -1 > r || r > 1)
            if (h > g) {
                if (u) {
                    if (u.y >= l) return
                } else u = {
                    x: (c - i) / r,
                    y: c
                };
                e = {
                    x: (l - i) / r,
                    y: l
                }
            } else {
                if (u) {
                    if (u.y < c) return
                } else u = {
                    x: (l - i) / r,
                    y: l
                };
                e = {
                    x: (c - i) / r,
                    y: c
                }
            }
        else if (v > p) {
            if (u) {
                if (u.x >= a) return
            } else u = {
                x: o,
                y: r * o + i
            };
            e = {
                x: a,
                y: r * a + i
            }
        } else {
            if (u) {
                if (u.x < o) return
            } else u = {
                x: a,
                y: r * a + i
            };
            e = {
                x: o,
                y: r * o + i
            }
        }
        return n.a = u, n.b = e, !0
    }

    function Je(n, t) {
        this.l = n, this.r = t, this.a = this.b = null
    }

    function Ge(n, t, e, r) {
        var i = new Je(n, t);
        return Ja.push(i), e && Qe(i, n, t, e), r && Qe(i, t, n, r), Ga[n.i].edges.push(new nr(i, n, t)), Ga[t.i].edges.push(new nr(i, t, n)), i
    }

    function Ke(n, t, e) {
        var r = new Je(n, null);
        return r.a = t, r.b = e, Ja.push(r), r
    }

    function Qe(n, t, e, r) {
        n.a || n.b ? n.l === e ? n.b = r : n.a = r : (n.a = r, n.l = t, n.r = e)
    }

    function nr(n, t, e) {
        var r = n.a,
            i = n.b;
        this.edge = n, this.site = t, this.angle = e ? Math.atan2(e.y - t.y, e.x - t.x) : n.l === t ? Math.atan2(i.x - r.x, r.y - i.y) : Math.atan2(r.x - i.x, i.y - r.y)
    }

    function tr() {
        this._ = null
    }

    function er(n) {
        n.U = n.C = n.L = n.R = n.P = n.N = null
    }

    function rr(n, t) {
        var e = t,
            r = t.R,
            i = e.U;
        i ? i.L === e ? i.L = r : i.R = r : n._ = r, r.U = i, e.U = r, e.R = r.L, e.R && (e.R.U = e), r.L = e
    }

    function ir(n, t) {
        var e = t,
            r = t.L,
            i = e.U;
        i ? i.L === e ? i.L = r : i.R = r : n._ = r, r.U = i, e.U = r, e.L = r.R, e.L && (e.L.U = e), r.R = e
    }

    function ur(n) {
        for (; n.L;) n = n.L;
        return n
    }

    function or(n, t) {
        var e, r, i, u = n.sort(ar).pop();
        for (Ja = [], Ga = new Array(n.length), Ka = new tr, nc = new tr;;)
            if (i = Qa, u && (!i || u.y < i.y || u.y === i.y && u.x < i.x))(u.x !== e || u.y !== r) && (Ga[u.i] = new Ie(u), Fe(u), e = u.x, r = u.y), u = n.pop();
            else {
                if (!i) break;
                je(i.arc)
            } t && (Be(t), Ye(t));
        var o = {
            cells: Ga,
            edges: Ja
        };
        return Ka = nc = Ja = Ga = null, o
    }

    function ar(n, t) {
        return t.y - n.y || t.x - n.x
    }

    function cr(n, t, e) {
        return (n.x - e.x) * (t.y - n.y) - (n.x - t.x) * (e.y - n.y)
    }

    function lr(n) {
        return n.x
    }

    function fr(n) {
        return n.y
    }

    function sr() {
        return {
            leaf: !0,
            nodes: [],
            point: null,
            x: null,
            y: null
        }
    }

    function hr(n, t, e, r, i, u) {
        if (!n(t, e, r, i, u)) {
            var o = .5 * (e + i),
                a = .5 * (r + u),
                c = t.nodes;
            c[0] && hr(n, c[0], e, r, o, a), c[1] && hr(n, c[1], o, r, i, a), c[2] && hr(n, c[2], e, a, o, u), c[3] && hr(n, c[3], o, a, i, u)
        }
    }

    function pr(n, t, e, r, i, u, o) {
        var a, c = 1 / 0;
        return function n(l, f, s, h, p) {
            if (!(f > u || s > o || r > h || i > p)) {
                if (g = l.point) {
                    var g, v = t - l.x,
                        d = e - l.y,
                        y = v * v + d * d;
                    if (c > y) {
                        var m = Math.sqrt(c = y);
                        r = t - m, i = e - m, u = t + m, o = e + m, a = g
                    }
                }
                for (var M = l.nodes, x = .5 * (f + h), b = .5 * (s + p), _ = t >= x, w = e >= b, S = w << 1 | _, k = S + 4; k > S; ++S)
                    if (l = M[3 & S]) switch (3 & S) {
                        case 0:
                            n(l, f, s, x, b);
                            break;
                        case 1:
                            n(l, x, s, h, b);
                            break;
                        case 2:
                            n(l, f, b, x, p);
                            break;
                        case 3:
                            n(l, x, b, h, p)
                    }
            }
        }(n, r, i, u, o), a
    }

    function gr(n, t) {
        n = to.rgb(n), t = to.rgb(t);
        var e = n.r,
            r = n.g,
            i = n.b,
            u = t.r - e,
            o = t.g - r,
            a = t.b - i;
        return function(n) {
            return "#" + bn(Math.round(e + u * n)) + bn(Math.round(r + o * n)) + bn(Math.round(i + a * n))
        }
    }

    function vr(n, t) {
        var e, r = {},
            i = {};
        for (e in n) e in t ? r[e] = mr(n[e], t[e]) : i[e] = n[e];
        for (e in t) e in n || (i[e] = t[e]);
        return function(n) {
            for (e in r) i[e] = r[e](n);
            return i
        }
    }

    function dr(n, t) {
        return n = +n, t = +t,
            function(e) {
                return n * (1 - e) + t * e
            }
    }

    function yr(n, t) {
        var e, r, i, u = ic.lastIndex = uc.lastIndex = 0,
            o = -1,
            a = [],
            c = [];
        for (n += "", t += "";
            (e = ic.exec(n)) && (r = uc.exec(t));)(i = r.index) > u && (i = t.slice(u, i), a[o] ? a[o] += i : a[++o] = i), (e = e[0]) === (r = r[0]) ? a[o] ? a[o] += r : a[++o] = r : (a[++o] = null, c.push({
            i: o,
            x: dr(e, r)
        })), u = uc.lastIndex;
        return u < t.length && (i = t.slice(u), a[o] ? a[o] += i : a[++o] = i), a.length < 2 ? c[0] ? (t = c[0].x, function(n) {
            return t(n) + ""
        }) : function() {
            return t
        } : (t = c.length, function(n) {
            for (var e, r = 0; t > r; ++r) a[(e = c[r]).i] = e.x(n);
            return a.join("")
        })
    }

    function mr(n, t) {
        for (var e, r = to.interpolators.length; --r >= 0 && !(e = to.interpolators[r](n, t)););
        return e
    }

    function Mr(n, t) {
        var e, r = [],
            i = [],
            u = n.length,
            o = t.length,
            a = Math.min(n.length, t.length);
        for (e = 0; a > e; ++e) r.push(mr(n[e], t[e]));
        for (; u > e; ++e) i[e] = n[e];
        for (; o > e; ++e) i[e] = t[e];
        return function(n) {
            for (e = 0; a > e; ++e) i[e] = r[e](n);
            return i
        }
    }

    function xr(n) {
        return function(t) {
            return 0 >= t ? 0 : t >= 1 ? 1 : n(t)
        }
    }

    function br(n) {
        return function(t) {
            return 1 - n(1 - t)
        }
    }

    function _r(n) {
        return function(t) {
            return .5 * (.5 > t ? n(2 * t) : 2 - n(2 - 2 * t))
        }
    }

    function wr(n) {
        return n * n
    }

    function Sr(n) {
        return n * n * n
    }

    function kr(n) {
        if (0 >= n) return 0;
        if (n >= 1) return 1;
        var t = n * n,
            e = t * n;
        return 4 * (.5 > n ? e : 3 * (n - t) + e - .75)
    }

    function Nr(n) {
        return function(t) {
            return Math.pow(t, n)
        }
    }

    function Er(n) {
        return 1 - Math.cos(n * To)
    }

    function Ar(n) {
        return Math.pow(2, 10 * (n - 1))
    }

    function Cr(n) {
        return 1 - Math.sqrt(1 - n * n)
    }

    function zr(n, t) {
        var e;
        return arguments.length < 2 && (t = .45), arguments.length ? e = t / qo * Math.asin(1 / n) : (n = 1, e = t / 4),
            function(r) {
                return 1 + n * Math.pow(2, -10 * r) * Math.sin((r - e) * qo / t)
            }
    }

    function qr(n) {
        return n || (n = 1.70158),
            function(t) {
                return t * t * ((n + 1) * t - n)
            }
    }

    function Lr(n) {
        return 1 / 2.75 > n ? 7.5625 * n * n : 2 / 2.75 > n ? 7.5625 * (n -= 1.5 / 2.75) * n + .75 : 2.5 / 2.75 > n ? 7.5625 * (n -= 2.25 / 2.75) * n + .9375 : 7.5625 * (n -= 2.625 / 2.75) * n + .984375
    }

    function Tr(n, t) {
        n = to.hcl(n), t = to.hcl(t);
        var e = n.h,
            r = n.c,
            i = n.l,
            u = t.h - e,
            o = t.c - r,
            a = t.l - i;
        return isNaN(o) && (o = 0, r = isNaN(r) ? t.c : r), isNaN(u) ? (u = 0, e = isNaN(e) ? t.h : e) : u > 180 ? u -= 360 : -180 > u && (u += 360),
            function(n) {
                return sn(e + u * n, r + o * n, i + a * n) + ""
            }
    }

    function Rr(n, t) {
        n = to.hsl(n), t = to.hsl(t);
        var e = n.h,
            r = n.s,
            i = n.l,
            u = t.h - e,
            o = t.s - r,
            a = t.l - i;
        return isNaN(o) && (o = 0, r = isNaN(r) ? t.s : r), isNaN(u) ? (u = 0, e = isNaN(e) ? t.h : e) : u > 180 ? u -= 360 : -180 > u && (u += 360),
            function(n) {
                return ln(e + u * n, r + o * n, i + a * n) + ""
            }
    }

    function Dr(n, t) {
        n = to.lab(n), t = to.lab(t);
        var e = n.l,
            r = n.a,
            i = n.b,
            u = t.l - e,
            o = t.a - r,
            a = t.b - i;
        return function(n) {
            return pn(e + u * n, r + o * n, i + a * n) + ""
        }
    }

    function Pr(n, t) {
        return t -= n,
            function(e) {
                return Math.round(n + t * e)
            }
    }

    function Ur(n) {
        var t = [n.a, n.b],
            e = [n.c, n.d],
            r = Fr(t),
            i = jr(t, e),
            u = Fr(Hr(e, t, -i)) || 0;
        t[0] * e[1] < e[0] * t[1] && (t[0] *= -1, t[1] *= -1, r *= -1, i *= -1), this.rotate = (r ? Math.atan2(t[1], t[0]) : Math.atan2(-e[0], e[1])) * Do, this.translate = [n.e, n.f], this.scale = [r, u], this.skew = u ? Math.atan2(i, u) * Do : 0
    }

    function jr(n, t) {
        return n[0] * t[0] + n[1] * t[1]
    }

    function Fr(n) {
        var t = Math.sqrt(jr(n, n));
        return t && (n[0] /= t, n[1] /= t), t
    }

    function Hr(n, t, e) {
        return n[0] += e * t[0], n[1] += e * t[1], n
    }

    function Or(n, t) {
        var e, r = [],
            i = [],
            u = to.transform(n),
            o = to.transform(t),
            a = u.translate,
            c = o.translate,
            l = u.rotate,
            f = o.rotate,
            s = u.skew,
            h = o.skew,
            p = u.scale,
            g = o.scale;
        return a[0] != c[0] || a[1] != c[1] ? (r.push("translate(", null, ",", null, ")"), i.push({
                i: 1,
                x: dr(a[0], c[0])
            }, {
                i: 3,
                x: dr(a[1], c[1])
            })) : r.push(c[0] || c[1] ? "translate(" + c + ")" : ""), l != f ? (l - f > 180 ? f += 360 : f - l > 180 && (l += 360), i.push({
                i: r.push(r.pop() + "rotate(", null, ")") - 2,
                x: dr(l, f)
            })) : f && r.push(r.pop() + "rotate(" + f + ")"), s != h ? i.push({
                i: r.push(r.pop() + "skewX(", null, ")") - 2,
                x: dr(s, h)
            }) : h && r.push(r.pop() + "skewX(" + h + ")"), p[0] != g[0] || p[1] != g[1] ? (e = r.push(r.pop() + "scale(", null, ",", null, ")"), i.push({
                i: e - 4,
                x: dr(p[0], g[0])
            }, {
                i: e - 2,
                x: dr(p[1], g[1])
            })) : (1 != g[0] || 1 != g[1]) && r.push(r.pop() + "scale(" + g + ")"), e = i.length,
            function(n) {
                for (var t, u = -1; ++u < e;) r[(t = i[u]).i] = t.x(n);
                return r.join("")
            }
    }

    function Ir(n, t) {
        return t = (t -= n = +n) || 1 / t,
            function(e) {
                return (e - n) / t
            }
    }

    function Yr(n, t) {
        return t = (t -= n = +n) || 1 / t,
            function(e) {
                return Math.max(0, Math.min(1, (e - n) / t))
            }
    }

    function Zr(n) {
        for (var t = n.source, e = n.target, r = Xr(t, e), i = [t]; t !== r;) t = t.parent, i.push(t);
        for (var u = i.length; e !== r;) i.splice(u, 0, e), e = e.parent;
        return i
    }

    function Vr(n) {
        for (var t = [], e = n.parent; null != e;) t.push(n), n = e, e = e.parent;
        return t.push(n), t
    }

    function Xr(n, t) {
        if (n === t) return n;
        for (var e = Vr(n), r = Vr(t), i = e.pop(), u = r.pop(), o = null; i === u;) o = i, i = e.pop(), u = r.pop();
        return o
    }

    function $r(n) {
        n.fixed |= 2
    }

    function Br(n) {
        n.fixed &= -7
    }

    function Wr(n) {
        n.fixed |= 4, n.px = n.x, n.py = n.y
    }

    function Jr(n) {
        n.fixed &= -5
    }

    function Gr(n, t, e) {
        var r = 0,
            i = 0;
        if (n.charge = 0, !n.leaf)
            for (var u, o = n.nodes, a = o.length, c = -1; ++c < a;) u = o[c], null != u && (Gr(u, t, e), n.charge += u.charge, r += u.charge * u.cx, i += u.charge * u.cy);
        if (n.point) {
            n.leaf || (n.point.x += Math.random() - .5, n.point.y += Math.random() - .5);
            var l = t * e[n.point.index];
            n.charge += n.pointCharge = l, r += l * n.point.x, i += l * n.point.y
        }
        n.cx = r / n.charge, n.cy = i / n.charge
    }

    function Kr(n, t) {
        return to.rebind(n, t, "sort", "children", "value"), n.nodes = n, n.links = ii, n
    }

    function Qr(n, t) {
        for (var e = [n]; null != (n = e.pop());)
            if (t(n), (i = n.children) && (r = i.length))
                for (var r, i; --r >= 0;) e.push(i[r])
    }

    function ni(n, t) {
        for (var e = [n], r = []; null != (n = e.pop());)
            if (r.push(n), (u = n.children) && (i = u.length))
                for (var i, u, o = -1; ++o < i;) e.push(u[o]);
        for (; null != (n = r.pop());) t(n)
    }

    function ti(n) {
        return n.children
    }

    function ei(n) {
        return n.value
    }

    function ri(n, t) {
        return t.value - n.value
    }

    function ii(n) {
        return to.merge(n.map(function(n) {
            return (n.children || []).map(function(t) {
                return {
                    source: n,
                    target: t
                }
            })
        }))
    }

    function ui(n) {
        return n.x
    }

    function oi(n) {
        return n.y
    }

    function ai(n, t, e) {
        n.y0 = t, n.y = e
    }

    function ci(n) {
        return to.range(n.length)
    }

    function li(n) {
        for (var t = -1, e = n[0].length, r = []; ++t < e;) r[t] = 0;
        return r
    }

    function fi(n) {
        for (var t, e = 1, r = 0, i = n[0][1], u = n.length; u > e; ++e)(t = n[e][1]) > i && (r = e, i = t);
        return r
    }

    function si(n) {
        return n.reduce(hi, 0)
    }

    function hi(n, t) {
        return n + t[1]
    }

    function pi(n, t) {
        return gi(n, Math.ceil(Math.log(t.length) / Math.LN2 + 1))
    }

    function gi(n, t) {
        for (var e = -1, r = +n[0], i = (n[1] - r) / t, u = []; ++e <= t;) u[e] = i * e + r;
        return u
    }

    function vi(n) {
        return [to.min(n), to.max(n)]
    }

    function di(n, t) {
        return n.value - t.value
    }

    function yi(n, t) {
        var e = n._pack_next;
        n._pack_next = t, t._pack_prev = n, t._pack_next = e, e._pack_prev = t
    }

    function mi(n, t) {
        n._pack_next = t, t._pack_prev = n
    }

    function Mi(n, t) {
        var e = t.x - n.x,
            r = t.y - n.y,
            i = n.r + t.r;
        return .999 * i * i > e * e + r * r
    }

    function xi(n) {
        function t(n) {
            f = Math.min(n.x - n.r, f), s = Math.max(n.x + n.r, s), h = Math.min(n.y - n.r, h), p = Math.max(n.y + n.r, p)
        }
        if ((e = n.children) && (l = e.length)) {
            var e, r, i, u, o, a, c, l, f = 1 / 0,
                s = -1 / 0,
                h = 1 / 0,
                p = -1 / 0;
            if (e.forEach(bi), r = e[0], r.x = -r.r, r.y = 0, t(r), l > 1 && (i = e[1], i.x = i.r, i.y = 0, t(i), l > 2))
                for (u = e[2], Si(r, i, u), t(u), yi(r, u), r._pack_prev = u, yi(u, i), i = r._pack_next, o = 3; l > o; o++) {
                    Si(r, i, u = e[o]);
                    var g = 0,
                        v = 1,
                        d = 1;
                    for (a = i._pack_next; a !== i; a = a._pack_next, v++)
                        if (Mi(a, u)) {
                            g = 1;
                            break
                        } if (1 == g)
                        for (c = r._pack_prev; c !== a._pack_prev && !Mi(c, u); c = c._pack_prev, d++);
                    g ? (d > v || v == d && i.r < r.r ? mi(r, i = a) : mi(r = c, i), o--) : (yi(r, u), i = u, t(u))
                }
            var y = (f + s) / 2,
                m = (h + p) / 2,
                M = 0;
            for (o = 0; l > o; o++) u = e[o], u.x -= y, u.y -= m, M = Math.max(M, u.r + Math.sqrt(u.x * u.x + u.y * u.y));
            n.r = M, e.forEach(_i)
        }
    }

    function bi(n) {
        n._pack_next = n._pack_prev = n
    }

    function _i(n) {
        delete n._pack_next, delete n._pack_prev
    }

    function wi(n, t, e, r) {
        var i = n.children;
        if (n.x = t += r * n.x, n.y = e += r * n.y, n.r *= r, i)
            for (var u = -1, o = i.length; ++u < o;) wi(i[u], t, e, r)
    }

    function Si(n, t, e) {
        var r = n.r + e.r,
            i = t.x - n.x,
            u = t.y - n.y;
        if (r && (i || u)) {
            var o = t.r + e.r,
                a = i * i + u * u;
            o *= o, r *= r;
            var c = .5 + (r - o) / (2 * a),
                l = Math.sqrt(Math.max(0, 2 * o * (r + a) - (r -= a) * r - o * o)) / (2 * a);
            e.x = n.x + c * i + l * u, e.y = n.y + c * u - l * i
        } else e.x = n.x + r, e.y = n.y
    }

    function ki(n, t) {
        return n.parent == t.parent ? 1 : 2
    }

    function Ni(n) {
        var t = n.children;
        return t.length ? t[0] : n.t
    }

    function Ei(n) {
        var t, e = n.children;
        return (t = e.length) ? e[t - 1] : n.t
    }

    function Ai(n, t, e) {
        var r = e / (t.i - n.i);
        t.c -= r, t.s += e, n.c += r, t.z += e, t.m += e
    }

    function Ci(n) {
        for (var t, e = 0, r = 0, i = n.children, u = i.length; --u >= 0;) t = i[u], t.z += e, t.m += e, e += t.s + (r += t.c)
    }

    function zi(n, t, e) {
        return n.a.parent === t.parent ? n.a : e
    }

    function qi(n) {
        return 1 + to.max(n, function(n) {
            return n.y
        })
    }

    function Li(n) {
        return n.reduce(function(n, t) {
            return n + t.x
        }, 0) / n.length
    }

    function Ti(n) {
        var t = n.children;
        return t && t.length ? Ti(t[0]) : n
    }

    function Ri(n) {
        var t, e = n.children;
        return e && (t = e.length) ? Ri(e[t - 1]) : n
    }

    function Di(n) {
        return {
            x: n.x,
            y: n.y,
            dx: n.dx,
            dy: n.dy
        }
    }

    function Pi(n, t) {
        var e = n.x + t[3],
            r = n.y + t[0],
            i = n.dx - t[1] - t[3],
            u = n.dy - t[0] - t[2];
        return 0 > i && (e += i / 2, i = 0), 0 > u && (r += u / 2, u = 0), {
            x: e,
            y: r,
            dx: i,
            dy: u
        }
    }

    function Ui(n) {
        var t = n[0],
            e = n[n.length - 1];
        return e > t ? [t, e] : [e, t]
    }

    function ji(n) {
        return n.rangeExtent ? n.rangeExtent() : Ui(n.range())
    }

    function Fi(n, t, e, r) {
        var i = e(n[0], n[1]),
            u = r(t[0], t[1]);
        return function(n) {
            return u(i(n))
        }
    }

    function Hi(n, t) {
        var e, r = 0,
            i = n.length - 1,
            u = n[r],
            o = n[i];
        return u > o && (e = r, r = i, i = e, e = u, u = o, o = e), n[r] = t.floor(u), n[i] = t.ceil(o), n
    }

    function Oi(n) {
        return n ? {
            floor: function(t) {
                return Math.floor(t / n) * n
            },
            ceil: function(t) {
                return Math.ceil(t / n) * n
            }
        } : dc
    }

    function Ii(n, t, e, r) {
        var i = [],
            u = [],
            o = 0,
            a = Math.min(n.length, t.length) - 1;
        for (n[a] < n[0] && (n = n.slice().reverse(), t = t.slice().reverse()); ++o <= a;) i.push(e(n[o - 1], n[o])), u.push(r(t[o - 1], t[o]));
        return function(t) {
            var e = to.bisect(n, t, 1, a) - 1;
            return u[e](i[e](t))
        }
    }

    function Yi(n, t, e, r) {
        function i() {
            var i = Math.min(n.length, t.length) > 2 ? Ii : Fi,
                c = r ? Yr : Ir;
            return o = i(n, t, c, e), a = i(t, n, c, mr), u
        }

        function u(n) {
            return o(n)
        }
        var o, a;
        return u.invert = function(n) {
            return a(n)
        }, u.domain = function(t) {
            return arguments.length ? (n = t.map(Number), i()) : n
        }, u.range = function(n) {
            return arguments.length ? (t = n, i()) : t
        }, u.rangeRound = function(n) {
            return u.range(n).interpolate(Pr)
        }, u.clamp = function(n) {
            return arguments.length ? (r = n, i()) : r
        }, u.interpolate = function(n) {
            return arguments.length ? (e = n, i()) : e
        }, u.ticks = function(t) {
            return $i(n, t)
        }, u.tickFormat = function(t, e) {
            return Bi(n, t, e)
        }, u.nice = function(t) {
            return Vi(n, t), i()
        }, u.copy = function() {
            return Yi(n, t, e, r)
        }, i()
    }

    function Zi(n, t) {
        return to.rebind(n, t, "range", "rangeRound", "interpolate", "clamp")
    }

    function Vi(n, t) {
        return Hi(n, Oi(Xi(n, t)[2]))
    }

    function Xi(n, t) {
        null == t && (t = 10);
        var e = Ui(n),
            r = e[1] - e[0],
            i = Math.pow(10, Math.floor(Math.log(r / t) / Math.LN10)),
            u = t / r * i;
        return .15 >= u ? i *= 10 : .35 >= u ? i *= 5 : .75 >= u && (i *= 2), e[0] = Math.ceil(e[0] / i) * i, e[1] = Math.floor(e[1] / i) * i + .5 * i, e[2] = i, e
    }

    function $i(n, t) {
        return to.range.apply(to, Xi(n, t))
    }

    function Bi(n, t, e) {
        var r = Xi(n, t);
        if (e) {
            var i = ia.exec(e);
            if (i.shift(), "s" === i[8]) {
                var u = to.formatPrefix(Math.max(so(r[0]), so(r[1])));
                return i[7] || (i[7] = "." + Wi(u.scale(r[2]))), i[8] = "f", e = to.format(i.join("")),
                    function(n) {
                        return e(u.scale(n)) + u.symbol
                    }
            }
            i[7] || (i[7] = "." + Ji(i[8], r)), e = i.join("")
        } else e = ",." + Wi(r[2]) + "f";
        return to.format(e)
    }

    function Wi(n) {
        return -Math.floor(Math.log(n) / Math.LN10 + .01)
    }

    function Ji(n, t) {
        var e = Wi(t[2]);
        return n in yc ? Math.abs(e - Wi(Math.max(so(t[0]), so(t[1])))) + +("e" !== n) : e - 2 * ("%" === n)
    }

    function Gi(n, t, e, r) {
        function i(n) {
            return (e ? Math.log(0 > n ? 0 : n) : -Math.log(n > 0 ? 0 : -n)) / Math.log(t)
        }

        function u(n) {
            return e ? Math.pow(t, n) : -Math.pow(t, -n)
        }

        function o(t) {
            return n(i(t))
        }
        return o.invert = function(t) {
            return u(n.invert(t))
        }, o.domain = function(t) {
            return arguments.length ? (e = t[0] >= 0, n.domain((r = t.map(Number)).map(i)), o) : r
        }, o.base = function(e) {
            return arguments.length ? (t = +e, n.domain(r.map(i)), o) : t
        }, o.nice = function() {
            var t = Hi(r.map(i), e ? Math : Mc);
            return n.domain(t), r = t.map(u), o
        }, o.ticks = function() {
            var n = Ui(r),
                o = [],
                a = n[0],
                c = n[1],
                l = Math.floor(i(a)),
                f = Math.ceil(i(c)),
                s = t % 1 ? 2 : t;
            if (isFinite(f - l)) {
                if (e) {
                    for (; f > l; l++)
                        for (var h = 1; s > h; h++) o.push(u(l) * h);
                    o.push(u(l))
                } else
                    for (o.push(u(l)); l++ < f;)
                        for (var h = s - 1; h > 0; h--) o.push(u(l) * h);
                for (l = 0; o[l] < a; l++);
                for (f = o.length; o[f - 1] > c; f--);
                o = o.slice(l, f)
            }
            return o
        }, o.tickFormat = function(n, t) {
            if (!arguments.length) return mc;
            arguments.length < 2 ? t = mc : "function" != typeof t && (t = to.format(t));
            var r, a = Math.max(.1, n / o.ticks().length),
                c = e ? (r = 1e-12, Math.ceil) : (r = -1e-12, Math.floor);
            return function(n) {
                return n / u(c(i(n) + r)) <= a ? t(n) : ""
            }
        }, o.copy = function() {
            return Gi(n.copy(), t, e, r)
        }, Zi(o, n)
    }

    function Ki(n, t, e) {
        function r(t) {
            return n(i(t))
        }
        var i = Qi(t),
            u = Qi(1 / t);
        return r.invert = function(t) {
            return u(n.invert(t))
        }, r.domain = function(t) {
            return arguments.length ? (n.domain((e = t.map(Number)).map(i)), r) : e
        }, r.ticks = function(n) {
            return $i(e, n)
        }, r.tickFormat = function(n, t) {
            return Bi(e, n, t)
        }, r.nice = function(n) {
            return r.domain(Vi(e, n))
        }, r.exponent = function(o) {
            return arguments.length ? (i = Qi(t = o), u = Qi(1 / t), n.domain(e.map(i)), r) : t
        }, r.copy = function() {
            return Ki(n.copy(), t, e)
        }, Zi(r, n)
    }

    function Qi(n) {
        return function(t) {
            return 0 > t ? -Math.pow(-t, n) : Math.pow(t, n)
        }
    }

    function nu(n, t) {
        function e(e) {
            return u[((i.get(e) || ("range" === t.t ? i.set(e, n.push(e)) : NaN)) - 1) % u.length]
        }

        function r(t, e) {
            return to.range(n.length).map(function(n) {
                return t + e * n
            })
        }
        var i, u, o;
        return e.domain = function(r) {
            if (!arguments.length) return n;
            n = [], i = new l;
            for (var u, o = -1, a = r.length; ++o < a;) i.has(u = r[o]) || i.set(u, n.push(u));
            return e[t.t].apply(e, t.a)
        }, e.range = function(n) {
            return arguments.length ? (u = n, o = 0, t = {
                t: "range",
                a: arguments
            }, e) : u
        }, e.rangePoints = function(i, a) {
            arguments.length < 2 && (a = 0);
            var c = i[0],
                l = i[1],
                f = n.length < 2 ? (c = (c + l) / 2, 0) : (l - c) / (n.length - 1 + a);
            return u = r(c + f * a / 2, f), o = 0, t = {
                t: "rangePoints",
                a: arguments
            }, e
        }, e.rangeRoundPoints = function(i, a) {
            arguments.length < 2 && (a = 0);
            var c = i[0],
                l = i[1],
                f = n.length < 2 ? (c = l = Math.round((c + l) / 2), 0) : (l - c) / (n.length - 1 + a) | 0;
            return u = r(c + Math.round(f * a / 2 + (l - c - (n.length - 1 + a) * f) / 2), f), o = 0, t = {
                t: "rangeRoundPoints",
                a: arguments
            }, e
        }, e.rangeBands = function(i, a, c) {
            arguments.length < 2 && (a = 0), arguments.length < 3 && (c = a);
            var l = i[1] < i[0],
                f = i[l - 0],
                s = i[1 - l],
                h = (s - f) / (n.length - a + 2 * c);
            return u = r(f + h * c, h), l && u.reverse(), o = h * (1 - a), t = {
                t: "rangeBands",
                a: arguments
            }, e
        }, e.rangeRoundBands = function(i, a, c) {
            arguments.length < 2 && (a = 0), arguments.length < 3 && (c = a);
            var l = i[1] < i[0],
                f = i[l - 0],
                s = i[1 - l],
                h = Math.floor((s - f) / (n.length - a + 2 * c));
            return u = r(f + Math.round((s - f - (n.length - a) * h) / 2), h), l && u.reverse(), o = Math.round(h * (1 - a)), t = {
                t: "rangeRoundBands",
                a: arguments
            }, e
        }, e.rangeBand = function() {
            return o
        }, e.rangeExtent = function() {
            return Ui(t.a[0])
        }, e.copy = function() {
            return nu(n, t)
        }, e.domain(n)
    }

    function tu(n, t) {
        function u() {
            var e = 0,
                r = t.length;
            for (a = []; ++e < r;) a[e - 1] = to.quantile(n, e / r);
            return o
        }

        function o(n) {
            return isNaN(n = +n) ? void 0 : t[to.bisect(a, n)]
        }
        var a;
        return o.domain = function(t) {
            return arguments.length ? (n = t.map(r).filter(i).sort(e), u()) : n
        }, o.range = function(n) {
            return arguments.length ? (t = n, u()) : t
        }, o.quantiles = function() {
            return a
        }, o.invertExtent = function(e) {
            return e = t.indexOf(e), 0 > e ? [NaN, NaN] : [e > 0 ? a[e - 1] : n[0], e < a.length ? a[e] : n[n.length - 1]]
        }, o.copy = function() {
            return tu(n, t)
        }, u()
    }

    function eu(n, t, e) {
        function r(t) {
            return e[Math.max(0, Math.min(o, Math.floor(u * (t - n))))]
        }

        function i() {
            return u = e.length / (t - n), o = e.length - 1, r
        }
        var u, o;
        return r.domain = function(e) {
            return arguments.length ? (n = +e[0], t = +e[e.length - 1], i()) : [n, t]
        }, r.range = function(n) {
            return arguments.length ? (e = n, i()) : e
        }, r.invertExtent = function(t) {
            return t = e.indexOf(t), t = 0 > t ? NaN : t / u + n, [t, t + 1 / u]
        }, r.copy = function() {
            return eu(n, t, e)
        }, i()
    }

    function ru(n, t) {
        function e(e) {
            return e >= e ? t[to.bisect(n, e)] : void 0
        }
        return e.domain = function(t) {
            return arguments.length ? (n = t, e) : n
        }, e.range = function(n) {
            return arguments.length ? (t = n, e) : t
        }, e.invertExtent = function(e) {
            return e = t.indexOf(e), [n[e - 1], n[e]]
        }, e.copy = function() {
            return ru(n, t)
        }, e
    }

    function iu(n) {
        function t(n) {
            return +n
        }
        return t.invert = t, t.domain = t.range = function(e) {
            return arguments.length ? (n = e.map(t), t) : n
        }, t.ticks = function(t) {
            return $i(n, t)
        }, t.tickFormat = function(t, e) {
            return Bi(n, t, e)
        }, t.copy = function() {
            return iu(n)
        }, t
    }

    function uu() {
        return 0
    }

    function ou(n) {
        return n.innerRadius
    }

    function au(n) {
        return n.outerRadius
    }

    function cu(n) {
        return n.startAngle
    }

    function lu(n) {
        return n.endAngle
    }

    function fu(n) {
        return n && n.padAngle
    }

    function su(n, t, e, r) {
        return (n - e) * t - (t - r) * n > 0 ? 0 : 1
    }

    function hu(n, t, e, r, i) {
        var u = n[0] - t[0],
            o = n[1] - t[1],
            a = (i ? r : -r) / Math.sqrt(u * u + o * o),
            c = a * o,
            l = -a * u,
            f = n[0] + c,
            s = n[1] + l,
            h = t[0] + c,
            p = t[1] + l,
            g = (f + h) / 2,
            v = (s + p) / 2,
            d = h - f,
            y = p - s,
            m = d * d + y * y,
            M = e - r,
            x = f * p - h * s,
            b = (0 > y ? -1 : 1) * Math.sqrt(M * M * m - x * x),
            _ = (x * y - d * b) / m,
            w = (-x * d - y * b) / m,
            S = (x * y + d * b) / m,
            k = (-x * d + y * b) / m,
            N = _ - g,
            E = w - v,
            A = S - g,
            C = k - v;
        return N * N + E * E > A * A + C * C && (_ = S, w = k), [
            [_ - c, w - l],
            [_ * e / M, w * e / M]
        ]
    }

    function pu(n) {
        function t(t) {
            function o() {
                l.push("M", u(n(f), a))
            }
            for (var c, l = [], f = [], s = -1, h = t.length, p = En(e), g = En(r); ++s < h;) i.call(this, c = t[s], s) ? f.push([+p.call(this, c, s), +g.call(this, c, s)]) : f.length && (o(), f = []);
            return f.length && o(), l.length ? l.join("") : null
        }
        var e = Ae,
            r = Ce,
            i = Ct,
            u = gu,
            o = u.key,
            a = .7;
        return t.x = function(n) {
            return arguments.length ? (e = n, t) : e
        }, t.y = function(n) {
            return arguments.length ? (r = n, t) : r
        }, t.defined = function(n) {
            return arguments.length ? (i = n, t) : i
        }, t.interpolate = function(n) {
            return arguments.length ? (o = "function" == typeof n ? u = n : (u = kc.get(n) || gu).key, t) : o
        }, t.tension = function(n) {
            return arguments.length ? (a = n, t) : a
        }, t
    }

    function gu(n) {
        return n.join("L")
    }

    function vu(n) {
        return gu(n) + "Z"
    }

    function du(n) {
        for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;) i.push("H", (r[0] + (r = n[t])[0]) / 2, "V", r[1]);
        return e > 1 && i.push("H", r[0]), i.join("")
    }

    function yu(n) {
        for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;) i.push("V", (r = n[t])[1], "H", r[0]);
        return i.join("")
    }

    function mu(n) {
        for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;) i.push("H", (r = n[t])[0], "V", r[1]);
        return i.join("")
    }

    function Mu(n, t) {
        return n.length < 4 ? gu(n) : n[1] + _u(n.slice(1, -1), wu(n, t))
    }

    function xu(n, t) {
        return n.length < 3 ? gu(n) : n[0] + _u((n.push(n[0]), n), wu([n[n.length - 2]].concat(n, [n[1]]), t))
    }

    function bu(n, t) {
        return n.length < 3 ? gu(n) : n[0] + _u(n, wu(n, t))
    }

    function _u(n, t) {
        if (t.length < 1 || n.length != t.length && n.length != t.length + 2) return gu(n);
        var e = n.length != t.length,
            r = "",
            i = n[0],
            u = n[1],
            o = t[0],
            a = o,
            c = 1;
        if (e && (r += "Q" + (u[0] - 2 * o[0] / 3) + "," + (u[1] - 2 * o[1] / 3) + "," + u[0] + "," + u[1], i = n[1], c = 2), t.length > 1) {
            a = t[1], u = n[c], c++, r += "C" + (i[0] + o[0]) + "," + (i[1] + o[1]) + "," + (u[0] - a[0]) + "," + (u[1] - a[1]) + "," + u[0] + "," + u[1];
            for (var l = 2; l < t.length; l++, c++) u = n[c], a = t[l], r += "S" + (u[0] - a[0]) + "," + (u[1] - a[1]) + "," + u[0] + "," + u[1]
        }
        if (e) {
            var f = n[c];
            r += "Q" + (u[0] + 2 * a[0] / 3) + "," + (u[1] + 2 * a[1] / 3) + "," + f[0] + "," + f[1]
        }
        return r
    }

    function wu(n, t) {
        for (var e, r = [], i = (1 - t) / 2, u = n[0], o = n[1], a = 1, c = n.length; ++a < c;) e = u, u = o, o = n[a], r.push([i * (o[0] - e[0]), i * (o[1] - e[1])]);
        return r
    }

    function Su(n) {
        if (n.length < 3) return gu(n);
        var t = 1,
            e = n.length,
            r = n[0],
            i = r[0],
            u = r[1],
            o = [i, i, i, (r = n[1])[0]],
            a = [u, u, u, r[1]],
            c = [i, ",", u, "L", Au(Ac, o), ",", Au(Ac, a)];
        for (n.push(n[e - 1]); ++t <= e;) r = n[t], o.shift(), o.push(r[0]), a.shift(), a.push(r[1]), Cu(c, o, a);
        return n.pop(), c.push("L", r), c.join("")
    }

    function ku(n) {
        if (n.length < 4) return gu(n);
        for (var t, e = [], r = -1, i = n.length, u = [0], o = [0]; ++r < 3;) t = n[r], u.push(t[0]), o.push(t[1]);
        for (e.push(Au(Ac, u) + "," + Au(Ac, o)), --r; ++r < i;) t = n[r], u.shift(), u.push(t[0]), o.shift(), o.push(t[1]), Cu(e, u, o);
        return e.join("")
    }

    function Nu(n) {
        for (var t, e, r = -1, i = n.length, u = i + 4, o = [], a = []; ++r < 4;) e = n[r % i], o.push(e[0]), a.push(e[1]);
        for (t = [Au(Ac, o), ",", Au(Ac, a)], --r; ++r < u;) e = n[r % i], o.shift(), o.push(e[0]), a.shift(), a.push(e[1]), Cu(t, o, a);
        return t.join("")
    }

    function Eu(n, t) {
        var e = n.length - 1;
        if (e)
            for (var r, i, u = n[0][0], o = n[0][1], a = n[e][0] - u, c = n[e][1] - o, l = -1; ++l <= e;) r = n[l], i = l / e, r[0] = t * r[0] + (1 - t) * (u + i * a), r[1] = t * r[1] + (1 - t) * (o + i * c);
        return Su(n)
    }

    function Au(n, t) {
        return n[0] * t[0] + n[1] * t[1] + n[2] * t[2] + n[3] * t[3]
    }

    function Cu(n, t, e) {
        n.push("C", Au(Nc, t), ",", Au(Nc, e), ",", Au(Ec, t), ",", Au(Ec, e), ",", Au(Ac, t), ",", Au(Ac, e))
    }

    function zu(n, t) {
        return (t[1] - n[1]) / (t[0] - n[0])
    }

    function qu(n) {
        for (var t = 0, e = n.length - 1, r = [], i = n[0], u = n[1], o = r[0] = zu(i, u); ++t < e;) r[t] = (o + (o = zu(i = u, u = n[t + 1]))) / 2;
        return r[t] = o, r
    }

    function Lu(n) {
        for (var t, e, r, i, u = [], o = qu(n), a = -1, c = n.length - 1; ++a < c;) t = zu(n[a], n[a + 1]), so(t) < Ao ? o[a] = o[a + 1] = 0 : (e = o[a] / t, r = o[a + 1] / t, i = e * e + r * r, i > 9 && (i = 3 * t / Math.sqrt(i), o[a] = i * e, o[a + 1] = i * r));
        for (a = -1; ++a <= c;) i = (n[Math.min(c, a + 1)][0] - n[Math.max(0, a - 1)][0]) / (6 * (1 + o[a] * o[a])), u.push([i || 0, o[a] * i || 0]);
        return u
    }

    function Tu(n) {
        return n.length < 3 ? gu(n) : n[0] + _u(n, Lu(n))
    }

    function Ru(n) {
        for (var t, e, r, i = -1, u = n.length; ++i < u;) t = n[i], e = t[0], r = t[1] - To, t[0] = e * Math.cos(r), t[1] = e * Math.sin(r);
        return n
    }

    function Du(n) {
        function t(t) {
            function c() {
                v.push("M", a(n(y), s), f, l(n(d.reverse()), s), "Z")
            }
            for (var h, p, g, v = [], d = [], y = [], m = -1, M = t.length, x = En(e), b = En(i), _ = e === r ? function() {
                    return p
                } : En(r), w = i === u ? function() {
                    return g
                } : En(u); ++m < M;) o.call(this, h = t[m], m) ? (d.push([p = +x.call(this, h, m), g = +b.call(this, h, m)]), y.push([+_.call(this, h, m), +w.call(this, h, m)])) : d.length && (c(), d = [], y = []);
            return d.length && c(), v.length ? v.join("") : null
        }
        var e = Ae,
            r = Ae,
            i = 0,
            u = Ce,
            o = Ct,
            a = gu,
            c = a.key,
            l = a,
            f = "L",
            s = .7;
        return t.x = function(n) {
            return arguments.length ? (e = r = n, t) : r
        }, t.x0 = function(n) {
            return arguments.length ? (e = n, t) : e
        }, t.x1 = function(n) {
            return arguments.length ? (r = n, t) : r
        }, t.y = function(n) {
            return arguments.length ? (i = u = n, t) : u
        }, t.y0 = function(n) {
            return arguments.length ? (i = n, t) : i
        }, t.y1 = function(n) {
            return arguments.length ? (u = n, t) : u
        }, t.defined = function(n) {
            return arguments.length ? (o = n, t) : o
        }, t.interpolate = function(n) {
            return arguments.length ? (c = "function" == typeof n ? a = n : (a = kc.get(n) || gu).key, l = a.reverse || a, f = a.closed ? "M" : "L", t) : c
        }, t.tension = function(n) {
            return arguments.length ? (s = n, t) : s
        }, t
    }

    function Pu(n) {
        return n.radius
    }

    function Uu(n) {
        return [n.x, n.y]
    }

    function ju(n) {
        return function() {
            var t = n.apply(this, arguments),
                e = t[0],
                r = t[1] - To;
            return [e * Math.cos(r), e * Math.sin(r)]
        }
    }

    function Fu() {
        return 64
    }

    function Hu() {
        return "circle"
    }

    function Ou(n) {
        var t = Math.sqrt(n / zo);
        return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z"
    }

    function Iu(n) {
        return function() {
            var t, e;
            (t = this[n]) && (e = t[t.active]) && (--t.count ? delete t[t.active] : delete this[n], t.active += .5, e.event && e.event.interrupt.call(this, this.__data__, e.index))
        }
    }

    function Yu(n, t, e) {
        return yo(n, Dc), n.namespace = t, n.id = e, n
    }

    function Zu(n, t, e, r) {
        var i = n.id,
            u = n.namespace;
        return Y(n, "function" == typeof e ? function(n, o, a) {
            n[u][i].tween.set(t, r(e.call(n, n.__data__, o, a)))
        } : (e = r(e), function(n) {
            n[u][i].tween.set(t, e)
        }))
    }

    function Vu(n) {
        return null == n && (n = ""),
            function() {
                this.textContent = n
            }
    }

    function Xu(n) {
        return null == n ? "__transition__" : "__transition_" + n + "__"
    }

    function $u(n, t, e, r, i) {
        var u = n[e] || (n[e] = {
                active: 0,
                count: 0
            }),
            o = u[r];
        if (!o) {
            var a = i.time;
            o = u[r] = {
                tween: new l,
                time: a,
                delay: i.delay,
                duration: i.duration,
                ease: i.ease,
                index: t
            }, i = null, ++u.count, to.timer(function(i) {
                function c(e) {
                    if (u.active > r) return f();
                    var i = u[u.active];
                    i && (--u.count, delete u[u.active], i.event && i.event.interrupt.call(n, n.__data__, i.index)), u.active = r, o.event && o.event.start.call(n, n.__data__, t), o.tween.forEach(function(e, r) {
                        (r = r.call(n, n.__data__, t)) && v.push(r)
                    }), h = o.ease, s = o.duration, to.timer(function() {
                        return g.c = l(e || 1) ? Ct : l, 1
                    }, 0, a)
                }

                function l(e) {
                    if (u.active !== r) return 1;
                    for (var i = e / s, a = h(i), c = v.length; c > 0;) v[--c].call(n, a);
                    return i >= 1 ? (o.event && o.event.end.call(n, n.__data__, t), f()) : void 0
                }

                function f() {
                    return --u.count ? delete u[r] : delete n[e], 1
                }
                var s, h, p = o.delay,
                    g = ta,
                    v = [];
                return g.t = p + a, i >= p ? c(i - p) : void(g.c = c)
            }, 0, a)
        }
    }

    function Bu(n, t, e) {
        n.attr("transform", function(n) {
            var r = t(n);
            return "translate(" + (isFinite(r) ? r : e(n)) + ",0)"
        })
    }

    function Wu(n, t, e) {
        n.attr("transform", function(n) {
            var r = t(n);
            return "translate(0," + (isFinite(r) ? r : e(n)) + ")"
        })
    }

    function Ju(n) {
        return n.toISOString()
    }

    function Gu(n, t, e) {
        function r(t) {
            return n(t)
        }

        function i(n, e) {
            var r = n[1] - n[0],
                i = r / e,
                u = to.bisect(Zc, i);
            return u == Zc.length ? [t.year, Xi(n.map(function(n) {
                return n / 31536e6
            }), e)[2]] : u ? t[i / Zc[u - 1] < Zc[u] / i ? u - 1 : u] : [$c, Xi(n, e)[2]]
        }
        return r.invert = function(t) {
            return Ku(n.invert(t))
        }, r.domain = function(t) {
            return arguments.length ? (n.domain(t), r) : n.domain().map(Ku)
        }, r.nice = function(n, t) {
            function e(e) {
                return !isNaN(e) && !n.range(e, Ku(+e + 1), t).length
            }
            var u = r.domain(),
                o = Ui(u),
                a = null == n ? i(o, 10) : "number" == typeof n && i(o, n);
            return a && (n = a[0], t = a[1]), r.domain(Hi(u, t > 1 ? {
                floor: function(t) {
                    for (; e(t = n.floor(t));) t = Ku(t - 1);
                    return t
                },
                ceil: function(t) {
                    for (; e(t = n.ceil(t));) t = Ku(+t + 1);
                    return t
                }
            } : n))
        }, r.ticks = function(n, t) {
            var e = Ui(r.domain()),
                u = null == n ? i(e, 10) : "number" == typeof n ? i(e, n) : !n.range && [{
                    range: n
                }, t];
            return u && (n = u[0], t = u[1]), n.range(e[0], Ku(+e[1] + 1), 1 > t ? 1 : t)
        }, r.tickFormat = function() {
            return e
        }, r.copy = function() {
            return Gu(n.copy(), t, e)
        }, Zi(r, n)
    }

    function Ku(n) {
        return new Date(n)
    }

    function Qu(n) {
        return JSON.parse(n.responseText)
    }

    function no(n) {
        var t = io.createRange();
        return t.selectNode(io.body), t.createContextualFragment(n.responseText)
    }
    var to = {
            version: "3.5.6"
        },
        eo = [].slice,
        ro = function(n) {
            return eo.call(n)
        },
        io = this.document;
    if (io) try {
        ro(io.documentElement.childNodes)[0].nodeType
    } catch (n) {
        ro = function(n) {
            for (var t = n.length, e = new Array(t); t--;) e[t] = n[t];
            return e
        }
    }
    if (Date.now || (Date.now = function() {
            return +new Date
        }), io) try {
        io.createElement("DIV").style.setProperty("opacity", 0, "")
    } catch (n) {
        var uo = this.Element.prototype,
            oo = uo.setAttribute,
            ao = uo.setAttributeNS,
            co = this.CSSStyleDeclaration.prototype,
            lo = co.setProperty;
        uo.setAttribute = function(n, t) {
            oo.call(this, n, t + "")
        }, uo.setAttributeNS = function(n, t, e) {
            ao.call(this, n, t, e + "")
        }, co.setProperty = function(n, t, e) {
            lo.call(this, n, t + "", e)
        }
    }
    to.ascending = e, to.descending = function(n, t) {
        return n > t ? -1 : t > n ? 1 : t >= n ? 0 : NaN
    }, to.min = function(n, t) {
        var e, r, i = -1,
            u = n.length;
        if (1 === arguments.length) {
            for (; ++i < u;)
                if (null != (r = n[i]) && r >= r) {
                    e = r;
                    break
                } for (; ++i < u;) null != (r = n[i]) && e > r && (e = r)
        } else {
            for (; ++i < u;)
                if (null != (r = t.call(n, n[i], i)) && r >= r) {
                    e = r;
                    break
                } for (; ++i < u;) null != (r = t.call(n, n[i], i)) && e > r && (e = r)
        }
        return e
    }, to.max = function(n, t) {
        var e, r, i = -1,
            u = n.length;
        if (1 === arguments.length) {
            for (; ++i < u;)
                if (null != (r = n[i]) && r >= r) {
                    e = r;
                    break
                } for (; ++i < u;) null != (r = n[i]) && r > e && (e = r)
        } else {
            for (; ++i < u;)
                if (null != (r = t.call(n, n[i], i)) && r >= r) {
                    e = r;
                    break
                } for (; ++i < u;) null != (r = t.call(n, n[i], i)) && r > e && (e = r)
        }
        return e
    }, to.extent = function(n, t) {
        var e, r, i, u = -1,
            o = n.length;
        if (1 === arguments.length) {
            for (; ++u < o;)
                if (null != (r = n[u]) && r >= r) {
                    e = i = r;
                    break
                } for (; ++u < o;) null != (r = n[u]) && (e > r && (e = r), r > i && (i = r))
        } else {
            for (; ++u < o;)
                if (null != (r = t.call(n, n[u], u)) && r >= r) {
                    e = i = r;
                    break
                } for (; ++u < o;) null != (r = t.call(n, n[u], u)) && (e > r && (e = r), r > i && (i = r))
        }
        return [e, i]
    }, to.sum = function(n, t) {
        var e, r = 0,
            u = n.length,
            o = -1;
        if (1 === arguments.length)
            for (; ++o < u;) i(e = +n[o]) && (r += e);
        else
            for (; ++o < u;) i(e = +t.call(n, n[o], o)) && (r += e);
        return r
    }, to.mean = function(n, t) {
        var e, u = 0,
            o = n.length,
            a = -1,
            c = o;
        if (1 === arguments.length)
            for (; ++a < o;) i(e = r(n[a])) ? u += e : --c;
        else
            for (; ++a < o;) i(e = r(t.call(n, n[a], a))) ? u += e : --c;
        return c ? u / c : void 0
    }, to.quantile = function(n, t) {
        var e = (n.length - 1) * t + 1,
            r = Math.floor(e),
            i = +n[r - 1],
            u = e - r;
        return u ? i + u * (n[r] - i) : i
    }, to.median = function(n, t) {
        var u, o = [],
            a = n.length,
            c = -1;
        if (1 === arguments.length)
            for (; ++c < a;) i(u = r(n[c])) && o.push(u);
        else
            for (; ++c < a;) i(u = r(t.call(n, n[c], c))) && o.push(u);
        return o.length ? to.quantile(o.sort(e), .5) : void 0
    }, to.variance = function(n, t) {
        var e, u, o = n.length,
            a = 0,
            c = 0,
            l = -1,
            f = 0;
        if (1 === arguments.length)
            for (; ++l < o;) i(e = r(n[l])) && (u = e - a, a += u / ++f, c += u * (e - a));
        else
            for (; ++l < o;) i(e = r(t.call(n, n[l], l))) && (u = e - a, a += u / ++f, c += u * (e - a));
        return f > 1 ? c / (f - 1) : void 0
    }, to.deviation = function() {
        var n = to.variance.apply(this, arguments);
        return n ? Math.sqrt(n) : n
    };
    var fo = u(e);
    to.bisectLeft = fo.left, to.bisect = to.bisectRight = fo.right, to.bisector = function(n) {
        return u(1 === n.length ? function(t, r) {
            return e(n(t), r)
        } : n)
    }, to.shuffle = function(n, t, e) {
        (u = arguments.length) < 3 && (e = n.length, 2 > u && (t = 0));
        for (var r, i, u = e - t; u;) i = Math.random() * u-- | 0, r = n[u + t], n[u + t] = n[i + t], n[i + t] = r;
        return n
    }, to.permute = function(n, t) {
        for (var e = t.length, r = new Array(e); e--;) r[e] = n[t[e]];
        return r
    }, to.pairs = function(n) {
        for (var t, e = 0, r = n.length - 1, i = n[0], u = new Array(0 > r ? 0 : r); r > e;) u[e] = [t = i, i = n[++e]];
        return u
    }, to.zip = function() {
        if (!(r = arguments.length)) return [];
        for (var n = -1, t = to.min(arguments, o), e = new Array(t); ++n < t;)
            for (var r, i = -1, u = e[n] = new Array(r); ++i < r;) u[i] = arguments[i][n];
        return e
    }, to.transpose = function(n) {
        return to.zip.apply(to, n)
    }, to.keys = function(n) {
        var t = [];
        for (var e in n) t.push(e);
        return t
    }, to.values = function(n) {
        var t = [];
        for (var e in n) t.push(n[e]);
        return t
    }, to.entries = function(n) {
        var t = [];
        for (var e in n) t.push({
            key: e,
            value: n[e]
        });
        return t
    }, to.merge = function(n) {
        for (var t, e, r, i = n.length, u = -1, o = 0; ++u < i;) o += n[u].length;
        for (e = new Array(o); --i >= 0;)
            for (r = n[i], t = r.length; --t >= 0;) e[--o] = r[t];
        return e
    };
    var so = Math.abs;
    to.range = function(n, t, e) {
        if (arguments.length < 3 && (e = 1, arguments.length < 2 && (t = n, n = 0)), (t - n) / e === 1 / 0) throw new Error("infinite range");
        var r, i = [],
            u = a(so(e)),
            o = -1;
        if (n *= u, t *= u, e *= u, 0 > e)
            for (;
                (r = n + e * ++o) > t;) i.push(r / u);
        else
            for (;
                (r = n + e * ++o) < t;) i.push(r / u);
        return i
    }, to.map = function(n, t) {
        var e = new l;
        if (n instanceof l) n.forEach(function(n, t) {
            e.set(n, t)
        });
        else if (Array.isArray(n)) {
            var r, i = -1,
                u = n.length;
            if (1 === arguments.length)
                for (; ++i < u;) e.set(i, n[i]);
            else
                for (; ++i < u;) e.set(t.call(n, r = n[i], i), r)
        } else
            for (var o in n) e.set(o, n[o]);
        return e
    };
    var ho = "__proto__",
        po = "\0";
    c(l, {
        has: h,
        get: function(n) {
            return this._[f(n)]
        },
        set: function(n, t) {
            return this._[f(n)] = t
        },
        remove: p,
        keys: g,
        values: function() {
            var n = [];
            for (var t in this._) n.push(this._[t]);
            return n
        },
        entries: function() {
            var n = [];
            for (var t in this._) n.push({
                key: s(t),
                value: this._[t]
            });
            return n
        },
        size: v,
        empty: d,
        forEach: function(n) {
            for (var t in this._) n.call(this, s(t), this._[t])
        }
    }), to.nest = function() {
        function n(t, o, a) {
            if (a >= u.length) return r ? r.call(i, o) : e ? o.sort(e) : o;
            for (var c, f, s, h, p = -1, g = o.length, v = u[a++], d = new l; ++p < g;)(h = d.get(c = v(f = o[p]))) ? h.push(f) : d.set(c, [f]);
            return t ? (f = t(), s = function(e, r) {
                f.set(e, n(t, r, a))
            }) : (f = {}, s = function(e, r) {
                f[e] = n(t, r, a)
            }), d.forEach(s), f
        }

        function t(n, e) {
            if (e >= u.length) return n;
            var r = [],
                i = o[e++];
            return n.forEach(function(n, i) {
                r.push({
                    key: n,
                    values: t(i, e)
                })
            }), i ? r.sort(function(n, t) {
                return i(n.key, t.key)
            }) : r
        }
        var e, r, i = {},
            u = [],
            o = [];
        return i.map = function(t, e) {
            return n(e, t, 0)
        }, i.entries = function(e) {
            return t(n(to.map, e, 0), 0)
        }, i.key = function(n) {
            return u.push(n), i
        }, i.sortKeys = function(n) {
            return o[u.length - 1] = n, i
        }, i.sortValues = function(n) {
            return e = n, i
        }, i.rollup = function(n) {
            return r = n, i
        }, i
    }, to.set = function(n) {
        var t = new y;
        if (n)
            for (var e = 0, r = n.length; r > e; ++e) t.add(n[e]);
        return t
    }, c(y, {
        has: h,
        add: function(n) {
            return this._[f(n += "")] = !0, n
        },
        remove: p,
        values: g,
        size: v,
        empty: d,
        forEach: function(n) {
            for (var t in this._) n.call(this, s(t))
        }
    }), to.behavior = {}, to.rebind = function(n, t) {
        for (var e, r = 1, i = arguments.length; ++r < i;) n[e = arguments[r]] = M(n, t, t[e]);
        return n
    };
    var go = ["webkit", "ms", "moz", "Moz", "o", "O"];
    to.dispatch = function() {
        for (var n = new _, t = -1, e = arguments.length; ++t < e;) n[arguments[t]] = w(n);
        return n
    }, _.prototype.on = function(n, t) {
        var e = n.indexOf("."),
            r = "";
        if (e >= 0 && (r = n.slice(e + 1), n = n.slice(0, e)), n) return arguments.length < 2 ? this[n].on(r) : this[n].on(r, t);
        if (2 === arguments.length) {
            if (null == t)
                for (n in this) this.hasOwnProperty(n) && this[n].on(r, null);
            return this
        }
    }, to.event = null, to.requote = function(n) {
        return n.replace(vo, "\\$&")
    };
    var vo = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
        yo = {}.__proto__ ? function(n, t) {
            n.__proto__ = t
        } : function(n, t) {
            for (var e in t) n[e] = t[e]
        },
        mo = function(n, t) {
            return t.querySelector(n)
        },
        Mo = function(n, t) {
            return t.querySelectorAll(n)
        },
        xo = function(n, t) {
            var e = n.matches || n[x(n, "matchesSelector")];
            return (xo = function(n, t) {
                return e.call(n, t)
            })(n, t)
        };
    "function" == typeof Sizzle && (mo = function(n, t) {
        return Sizzle(n, t)[0] || null
    }, Mo = Sizzle, xo = Sizzle.matchesSelector), to.selection = function() {
        return to.select(io.documentElement)
    };
    var bo = to.selection.prototype = [];
    bo.select = function(n) {
        var t, e, r, i, u = [];
        n = A(n);
        for (var o = -1, a = this.length; ++o < a;) {
            u.push(t = []), t.parentNode = (r = this[o]).parentNode;
            for (var c = -1, l = r.length; ++c < l;)(i = r[c]) ? (t.push(e = n.call(i, i.__data__, c, o)), e && "__data__" in i && (e.__data__ = i.__data__)) : t.push(null)
        }
        return E(u)
    }, bo.selectAll = function(n) {
        var t, e, r = [];
        n = C(n);
        for (var i = -1, u = this.length; ++i < u;)
            for (var o = this[i], a = -1, c = o.length; ++a < c;)(e = o[a]) && (r.push(t = ro(n.call(e, e.__data__, a, i))), t.parentNode = e);
        return E(r)
    };
    var _o = {
        svg: "http://www.w3.org/2000/svg",
        xhtml: "http://www.w3.org/1999/xhtml",
        xlink: "http://www.w3.org/1999/xlink",
        xml: "http://www.w3.org/XML/1998/namespace",
        xmlns: "http://www.w3.org/2000/xmlns/"
    };
    to.ns = {
        prefix: _o,
        qualify: function(n) {
            var t = n.indexOf(":"),
                e = n;
            return t >= 0 && (e = n.slice(0, t), n = n.slice(t + 1)), _o.hasOwnProperty(e) ? {
                space: _o[e],
                local: n
            } : n
        }
    }, bo.attr = function(n, t) {
        if (arguments.length < 2) {
            if ("string" == typeof n) {
                var e = this.node();
                return n = to.ns.qualify(n), n.local ? e.getAttributeNS(n.space, n.local) : e.getAttribute(n)
            }
            for (t in n) this.each(z(t, n[t]));
            return this
        }
        return this.each(z(n, t))
    }, bo.classed = function(n, t) {
        if (arguments.length < 2) {
            if ("string" == typeof n) {
                var e = this.node(),
                    r = (n = T(n)).length,
                    i = -1;
                if (t = e.classList) {
                    for (; ++i < r;)
                        if (!t.contains(n[i])) return !1
                } else
                    for (t = e.getAttribute("class"); ++i < r;)
                        if (!L(n[i]).test(t)) return !1;
                return !0
            }
            for (t in n) this.each(R(t, n[t]));
            return this
        }
        return this.each(R(n, t))
    }, bo.style = function(n, e, r) {
        var i = arguments.length;
        if (3 > i) {
            if ("string" != typeof n) {
                2 > i && (e = "");
                for (r in n) this.each(P(r, n[r], e));
                return this
            }
            if (2 > i) {
                var u = this.node();
                return t(u).getComputedStyle(u, null).getPropertyValue(n)
            }
            r = ""
        }
        return this.each(P(n, e, r))
    }, bo.property = function(n, t) {
        if (arguments.length < 2) {
            if ("string" == typeof n) return this.node()[n];
            for (t in n) this.each(U(t, n[t]));
            return this
        }
        return this.each(U(n, t))
    }, bo.text = function(n) {
        return arguments.length ? this.each("function" == typeof n ? function() {
            var t = n.apply(this, arguments);
            this.textContent = null == t ? "" : t
        } : null == n ? function() {
            this.textContent = ""
        } : function() {
            this.textContent = n
        }) : this.node().textContent
    }, bo.html = function(n) {
        return arguments.length ? this.each("function" == typeof n ? function() {
            var t = n.apply(this, arguments);
            this.innerHTML = null == t ? "" : t
        } : null == n ? function() {
            this.innerHTML = ""
        } : function() {
            this.innerHTML = n
        }) : this.node().innerHTML
    }, bo.append = function(n) {
        return n = j(n), this.select(function() {
            return this.appendChild(n.apply(this, arguments))
        })
    }, bo.insert = function(n, t) {
        return n = j(n), t = A(t), this.select(function() {
            return this.insertBefore(n.apply(this, arguments), t.apply(this, arguments) || null)
        })
    }, bo.remove = function() {
        return this.each(F)
    }, bo.data = function(n, t) {
        function e(n, e) {
            var r, i, u, o = n.length,
                s = e.length,
                h = Math.min(o, s),
                p = new Array(s),
                g = new Array(s),
                v = new Array(o);
            if (t) {
                var d, y = new l,
                    m = new Array(o);
                for (r = -1; ++r < o;) y.has(d = t.call(i = n[r], i.__data__, r)) ? v[r] = i : y.set(d, i), m[r] = d;
                for (r = -1; ++r < s;)(i = y.get(d = t.call(e, u = e[r], r))) ? i !== !0 && (p[r] = i, i.__data__ = u) : g[r] = H(u), y.set(d, !0);
                for (r = -1; ++r < o;) y.get(m[r]) !== !0 && (v[r] = n[r])
            } else {
                for (r = -1; ++r < h;) i = n[r], u = e[r], i ? (i.__data__ = u, p[r] = i) : g[r] = H(u);
                for (; s > r; ++r) g[r] = H(e[r]);
                for (; o > r; ++r) v[r] = n[r]
            }
            g.update = p, g.parentNode = p.parentNode = v.parentNode = n.parentNode, a.push(g), c.push(p), f.push(v)
        }
        var r, i, u = -1,
            o = this.length;
        if (!arguments.length) {
            for (n = new Array(o = (r = this[0]).length); ++u < o;)(i = r[u]) && (n[u] = i.__data__);
            return n
        }
        var a = Z([]),
            c = E([]),
            f = E([]);
        if ("function" == typeof n)
            for (; ++u < o;) e(r = this[u], n.call(r, r.parentNode.__data__, u));
        else
            for (; ++u < o;) e(r = this[u], n);
        return c.enter = function() {
            return a
        }, c.exit = function() {
            return f
        }, c
    }, bo.datum = function(n) {
        return arguments.length ? this.property("__data__", n) : this.property("__data__")
    }, bo.filter = function(n) {
        var t, e, r, i = [];
        "function" != typeof n && (n = O(n));
        for (var u = 0, o = this.length; o > u; u++) {
            i.push(t = []), t.parentNode = (e = this[u]).parentNode;
            for (var a = 0, c = e.length; c > a; a++)(r = e[a]) && n.call(r, r.__data__, a, u) && t.push(r)
        }
        return E(i)
    }, bo.order = function() {
        for (var n = -1, t = this.length; ++n < t;)
            for (var e, r = this[n], i = r.length - 1, u = r[i]; --i >= 0;)(e = r[i]) && (u && u !== e.nextSibling && u.parentNode.insertBefore(e, u), u = e);
        return this
    }, bo.sort = function(n) {
        n = I.apply(this, arguments);
        for (var t = -1, e = this.length; ++t < e;) this[t].sort(n);
        return this.order()
    }, bo.each = function(n) {
        return Y(this, function(t, e, r) {
            n.call(t, t.__data__, e, r)
        })
    }, bo.call = function(n) {
        var t = ro(arguments);
        return n.apply(t[0] = this, t), this
    }, bo.empty = function() {
        return !this.node()
    }, bo.node = function() {
        for (var n = 0, t = this.length; t > n; n++)
            for (var e = this[n], r = 0, i = e.length; i > r; r++) {
                var u = e[r];
                if (u) return u
            }
        return null
    }, bo.size = function() {
        var n = 0;
        return Y(this, function() {
            ++n
        }), n
    };
    var wo = [];
    to.selection.enter = Z, to.selection.enter.prototype = wo, wo.append = bo.append, wo.empty = bo.empty, wo.node = bo.node, wo.call = bo.call, wo.size = bo.size, wo.select = function(n) {
        for (var t, e, r, i, u, o = [], a = -1, c = this.length; ++a < c;) {
            r = (i = this[a]).update, o.push(t = []), t.parentNode = i.parentNode;
            for (var l = -1, f = i.length; ++l < f;)(u = i[l]) ? (t.push(r[l] = e = n.call(i.parentNode, u.__data__, l, a)), e.__data__ = u.__data__) : t.push(null)
        }
        return E(o)
    }, wo.insert = function(n, t) {
        return arguments.length < 2 && (t = V(this)), bo.insert.call(this, n, t)
    }, to.select = function(t) {
        var e;
        return "string" == typeof t ? (e = [mo(t, io)], e.parentNode = io.documentElement) : (e = [t], e.parentNode = n(t)), E([e])
    }, to.selectAll = function(n) {
        var t;
        return "string" == typeof n ? (t = ro(Mo(n, io)), t.parentNode = io.documentElement) : (t = n, t.parentNode = null), E([t])
    }, bo.on = function(n, t, e) {
        var r = arguments.length;
        if (3 > r) {
            if ("string" != typeof n) {
                2 > r && (t = !1);
                for (e in n) this.each(X(e, n[e], t));
                return this
            }
            if (2 > r) return (r = this.node()["__on" + n]) && r._;
            e = !1
        }
        return this.each(X(n, t, e))
    };
    var So = to.map({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    });
    io && So.forEach(function(n) {
        "on" + n in io && So.remove(n)
    });
    var ko, No = 0;
    to.mouse = function(n) {
        return J(n, k())
    };
    var Eo = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;
    to.touch = function(n, t, e) {
        if (arguments.length < 3 && (e = t, t = k().changedTouches), t)
            for (var r, i = 0, u = t.length; u > i; ++i)
                if ((r = t[i]).identifier === e) return J(n, r)
    }, to.behavior.drag = function() {
        function n() {
            this.on("mousedown.drag", u).on("touchstart.drag", o)
        }

        function e(n, t, e, u, o) {
            return function() {
                function a() {
                    var n, e, r = t(h, v);
                    r && (n = r[0] - M[0], e = r[1] - M[1], g |= n | e, M = r, p({
                        type: "drag",
                        x: r[0] + l[0],
                        y: r[1] + l[1],
                        dx: n,
                        dy: e
                    }))
                }

                function c() {
                    t(h, v) && (y.on(u + d, null).on(o + d, null), m(g && to.event.target === s), p({
                        type: "dragend"
                    }))
                }
                var l, f = this,
                    s = to.event.target,
                    h = f.parentNode,
                    p = r.of(f, arguments),
                    g = 0,
                    v = n(),
                    d = ".drag" + (null == v ? "" : "-" + v),
                    y = to.select(e(s)).on(u + d, a).on(o + d, c),
                    m = W(s),
                    M = t(h, v);
                i ? (l = i.apply(f, arguments), l = [l.x - M[0], l.y - M[1]]) : l = [0, 0], p({
                    type: "dragstart"
                })
            }
        }
        var r = N(n, "drag", "dragstart", "dragend"),
            i = null,
            u = e(b, to.mouse, t, "mousemove", "mouseup"),
            o = e(G, to.touch, m, "touchmove", "touchend");
        return n.origin = function(t) {
            return arguments.length ? (i = t, n) : i
        }, to.rebind(n, r, "on")
    }, to.touches = function(n, t) {
        return arguments.length < 2 && (t = k().touches), t ? ro(t).map(function(t) {
            var e = J(n, t);
            return e.identifier = t.identifier, e
        }) : []
    };
    var Ao = 1e-6,
        Co = Ao * Ao,
        zo = Math.PI,
        qo = 2 * zo,
        Lo = qo - Ao,
        To = zo / 2,
        Ro = zo / 180,
        Do = 180 / zo,
        Po = Math.SQRT2,
        Uo = 2,
        jo = 4;
    to.interpolateZoom = function(n, t) {
        function e(n) {
            var t = n * m;
            if (y) {
                var e = rn(v),
                    o = u / (Uo * h) * (e * un(Po * t + v) - en(v));
                return [r + o * l, i + o * f, u * e / rn(Po * t + v)]
            }
            return [r + n * l, i + n * f, u * Math.exp(Po * t)]
        }
        var r = n[0],
            i = n[1],
            u = n[2],
            o = t[0],
            a = t[1],
            c = t[2],
            l = o - r,
            f = a - i,
            s = l * l + f * f,
            h = Math.sqrt(s),
            p = (c * c - u * u + jo * s) / (2 * u * Uo * h),
            g = (c * c - u * u - jo * s) / (2 * c * Uo * h),
            v = Math.log(Math.sqrt(p * p + 1) - p),
            d = Math.log(Math.sqrt(g * g + 1) - g),
            y = d - v,
            m = (y || Math.log(c / u)) / Po;
        return e.duration = 1e3 * m, e
    }, to.behavior.zoom = function() {
        function n(n) {
            n.on(q, s).on(Ho + ".zoom", p).on("dblclick.zoom", g).on(R, h)
        }

        function e(n) {
            return [(n[0] - k.x) / k.k, (n[1] - k.y) / k.k]
        }

        function r(n) {
            return [n[0] * k.k + k.x, n[1] * k.k + k.y]
        }

        function i(n) {
            k.k = Math.max(A[0], Math.min(A[1], n))
        }

        function u(n, t) {
            t = r(t), k.x += n[0] - t[0], k.y += n[1] - t[1]
        }

        function o(t, e, r, o) {
            t.__chart__ = {
                x: k.x,
                y: k.y,
                k: k.k
            }, i(Math.pow(2, o)), u(d = e, r), t = to.select(t), C > 0 && (t = t.transition().duration(C)), t.call(n.event)
        }

        function a() {
            b && b.domain(x.range().map(function(n) {
                return (n - k.x) / k.k
            }).map(x.invert)), w && w.domain(_.range().map(function(n) {
                return (n - k.y) / k.k
            }).map(_.invert))
        }

        function c(n) {
            z++ || n({
                type: "zoomstart"
            })
        }

        function l(n) {
            a(), n({
                type: "zoom",
                scale: k.k,
                translate: [k.x, k.y]
            })
        }

        function f(n) {
            --z || (n({
                type: "zoomend"
            }), d = null)
        }

        function s() {
            function n() {
                s = 1, u(to.mouse(i), p), l(a)
            }

            function r() {
                h.on(L, null).on(T, null), g(s && to.event.target === o), f(a)
            }
            var i = this,
                o = to.event.target,
                a = D.of(i, arguments),
                s = 0,
                h = to.select(t(i)).on(L, n).on(T, r),
                p = e(to.mouse(i)),
                g = W(i);
            Rc.call(i), c(a)
        }

        function h() {
            function n() {
                var n = to.touches(g);
                return p = k.k, n.forEach(function(n) {
                    n.identifier in d && (d[n.identifier] = e(n))
                }), n
            }

            function t() {
                var t = to.event.target;
                to.select(t).on(x, r).on(b, a), _.push(t);
                for (var e = to.event.changedTouches, i = 0, u = e.length; u > i; ++i) d[e[i].identifier] = null;
                var c = n(),
                    l = Date.now();
                if (1 === c.length) {
                    if (500 > l - M) {
                        var f = c[0];
                        o(g, f, d[f.identifier], Math.floor(Math.log(k.k) / Math.LN2) + 1), S()
                    }
                    M = l
                } else if (c.length > 1) {
                    var f = c[0],
                        s = c[1],
                        h = f[0] - s[0],
                        p = f[1] - s[1];
                    y = h * h + p * p
                }
            }

            function r() {
                var n, t, e, r, o = to.touches(g);
                Rc.call(g);
                for (var a = 0, c = o.length; c > a; ++a, r = null)
                    if (e = o[a], r = d[e.identifier]) {
                        if (t) break;
                        n = e, t = r
                    } if (r) {
                    var f = (f = e[0] - n[0]) * f + (f = e[1] - n[1]) * f,
                        s = y && Math.sqrt(f / y);
                    n = [(n[0] + e[0]) / 2, (n[1] + e[1]) / 2], t = [(t[0] + r[0]) / 2, (t[1] + r[1]) / 2], i(s * p)
                }
                M = null, u(n, t), l(v)
            }

            function a() {
                if (to.event.touches.length) {
                    for (var t = to.event.changedTouches, e = 0, r = t.length; r > e; ++e) delete d[t[e].identifier];
                    for (var i in d) return void n()
                }
                to.selectAll(_).on(m, null), w.on(q, s).on(R, h), N(), f(v)
            }
            var p, g = this,
                v = D.of(g, arguments),
                d = {},
                y = 0,
                m = ".zoom-" + to.event.changedTouches[0].identifier,
                x = "touchmove" + m,
                b = "touchend" + m,
                _ = [],
                w = to.select(g),
                N = W(g);
            t(), c(v), w.on(q, null).on(R, t)
        }

        function p() {
            var n = D.of(this, arguments);
            m ? clearTimeout(m) : (Rc.call(this), v = e(d = y || to.mouse(this)), c(n)), m = setTimeout(function() {
                m = null, f(n)
            }, 50), S(), i(Math.pow(2, .002 * Fo()) * k.k), u(d, v), l(n)
        }

        function g() {
            var n = to.mouse(this),
                t = Math.log(k.k) / Math.LN2;
            o(this, n, e(n), to.event.shiftKey ? Math.ceil(t) - 1 : Math.floor(t) + 1)
        }
        var v, d, y, m, M, x, b, _, w, k = {
                x: 0,
                y: 0,
                k: 1
            },
            E = [960, 500],
            A = Oo,
            C = 250,
            z = 0,
            q = "mousedown.zoom",
            L = "mousemove.zoom",
            T = "mouseup.zoom",
            R = "touchstart.zoom",
            D = N(n, "zoomstart", "zoom", "zoomend");
        return Ho || (Ho = "onwheel" in io ? (Fo = function() {
            return -to.event.deltaY * (to.event.deltaMode ? 120 : 1)
        }, "wheel") : "onmousewheel" in io ? (Fo = function() {
            return to.event.wheelDelta
        }, "mousewheel") : (Fo = function() {
            return -to.event.detail
        }, "MozMousePixelScroll")), n.event = function(n) {
            n.each(function() {
                var n = D.of(this, arguments),
                    t = k;
                Lc ? to.select(this).transition().each("start.zoom", function() {
                    k = this.__chart__ || {
                        x: 0,
                        y: 0,
                        k: 1
                    }, c(n)
                }).tween("zoom:zoom", function() {
                    var e = E[0],
                        r = E[1],
                        i = d ? d[0] : e / 2,
                        u = d ? d[1] : r / 2,
                        o = to.interpolateZoom([(i - k.x) / k.k, (u - k.y) / k.k, e / k.k], [(i - t.x) / t.k, (u - t.y) / t.k, e / t.k]);
                    return function(t) {
                        var r = o(t),
                            a = e / r[2];
                        this.__chart__ = k = {
                            x: i - r[0] * a,
                            y: u - r[1] * a,
                            k: a
                        }, l(n)
                    }
                }).each("interrupt.zoom", function() {
                    f(n)
                }).each("end.zoom", function() {
                    f(n)
                }) : (this.__chart__ = k, c(n), l(n), f(n))
            })
        }, n.translate = function(t) {
            return arguments.length ? (k = {
                x: +t[0],
                y: +t[1],
                k: k.k
            }, a(), n) : [k.x, k.y]
        }, n.scale = function(t) {
            return arguments.length ? (k = {
                x: k.x,
                y: k.y,
                k: +t
            }, a(), n) : k.k
        }, n.scaleExtent = function(t) {
            return arguments.length ? (A = null == t ? Oo : [+t[0], +t[1]], n) : A
        }, n.center = function(t) {
            return arguments.length ? (y = t && [+t[0], +t[1]], n) : y
        }, n.size = function(t) {
            return arguments.length ? (E = t && [+t[0], +t[1]], n) : E
        }, n.duration = function(t) {
            return arguments.length ? (C = +t, n) : C
        }, n.x = function(t) {
            return arguments.length ? (b = t, x = t.copy(), k = {
                x: 0,
                y: 0,
                k: 1
            }, n) : b
        }, n.y = function(t) {
            return arguments.length ? (w = t, _ = t.copy(), k = {
                x: 0,
                y: 0,
                k: 1
            }, n) : w
        }, to.rebind(n, D, "on")
    };
    var Fo, Ho, Oo = [0, 1 / 0];
    to.color = an, an.prototype.toString = function() {
        return this.rgb() + ""
    }, to.hsl = cn;
    var Io = cn.prototype = new an;
    Io.brighter = function(n) {
        return n = Math.pow(.7, arguments.length ? n : 1), new cn(this.h, this.s, this.l / n)
    }, Io.darker = function(n) {
        return n = Math.pow(.7, arguments.length ? n : 1), new cn(this.h, this.s, n * this.l)
    }, Io.rgb = function() {
        return ln(this.h, this.s, this.l)
    }, to.hcl = fn;
    var Yo = fn.prototype = new an;
    Yo.brighter = function(n) {
        return new fn(this.h, this.c, Math.min(100, this.l + Zo * (arguments.length ? n : 1)))
    }, Yo.darker = function(n) {
        return new fn(this.h, this.c, Math.max(0, this.l - Zo * (arguments.length ? n : 1)))
    }, Yo.rgb = function() {
        return sn(this.h, this.c, this.l).rgb()
    }, to.lab = hn;
    var Zo = 18,
        Vo = .95047,
        Xo = 1,
        $o = 1.08883,
        Bo = hn.prototype = new an;
    Bo.brighter = function(n) {
        return new hn(Math.min(100, this.l + Zo * (arguments.length ? n : 1)), this.a, this.b)
    }, Bo.darker = function(n) {
        return new hn(Math.max(0, this.l - Zo * (arguments.length ? n : 1)), this.a, this.b)
    }, Bo.rgb = function() {
        return pn(this.l, this.a, this.b)
    }, to.rgb = mn;
    var Wo = mn.prototype = new an;
    Wo.brighter = function(n) {
        n = Math.pow(.7, arguments.length ? n : 1);
        var t = this.r,
            e = this.g,
            r = this.b,
            i = 30;
        return t || e || r ? (t && i > t && (t = i), e && i > e && (e = i), r && i > r && (r = i), new mn(Math.min(255, t / n), Math.min(255, e / n), Math.min(255, r / n))) : new mn(i, i, i)
    }, Wo.darker = function(n) {
        return n = Math.pow(.7, arguments.length ? n : 1), new mn(n * this.r, n * this.g, n * this.b)
    }, Wo.hsl = function() {
        return wn(this.r, this.g, this.b)
    }, Wo.toString = function() {
        return "#" + bn(this.r) + bn(this.g) + bn(this.b)
    };
    var Jo = to.map({
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        rebeccapurple: 6697881,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
    });
    Jo.forEach(function(n, t) {
        Jo.set(n, Mn(t))
    }), to.functor = En, to.xhr = An(m), to.dsv = function(n, t) {
        function e(n, e, u) {
            arguments.length < 3 && (u = e, e = null);
            var o = Cn(n, t, null == e ? r : i(e), u);
            return o.row = function(n) {
                return arguments.length ? o.response(null == (e = n) ? r : i(n)) : e
            }, o
        }

        function r(n) {
            return e.parse(n.responseText)
        }

        function i(n) {
            return function(t) {
                return e.parse(t.responseText, n)
            }
        }

        function u(t) {
            return t.map(o).join(n)
        }

        function o(n) {
            return a.test(n) ? '"' + n.replace(/\"/g, '""') + '"' : n
        }
        var a = new RegExp('["' + n + "\n]"),
            c = n.charCodeAt(0);
        return e.parse = function(n, t) {
            var r;
            return e.parseRows(n, function(n, e) {
                if (r) return r(n, e - 1);
                var i = new Function("d", "return {" + n.map(function(n, t) {
                    return JSON.stringify(n) + ": d[" + t + "]"
                }).join(",") + "}");
                r = t ? function(n, e) {
                    return t(i(n), e)
                } : i
            })
        }, e.parseRows = function(n, t) {
            function e() {
                if (f >= l) return o;
                if (i) return i = !1, u;
                var t = f;
                if (34 === n.charCodeAt(t)) {
                    for (var e = t; e++ < l;)
                        if (34 === n.charCodeAt(e)) {
                            if (34 !== n.charCodeAt(e + 1)) break;
                            ++e
                        } f = e + 2;
                    var r = n.charCodeAt(e + 1);
                    return 13 === r ? (i = !0, 10 === n.charCodeAt(e + 2) && ++f) : 10 === r && (i = !0), n.slice(t + 1, e).replace(/""/g, '"')
                }
                for (; l > f;) {
                    var r = n.charCodeAt(f++),
                        a = 1;
                    if (10 === r) i = !0;
                    else if (13 === r) i = !0, 10 === n.charCodeAt(f) && (++f, ++a);
                    else if (r !== c) continue;
                    return n.slice(t, f - a)
                }
                return n.slice(t)
            }
            for (var r, i, u = {}, o = {}, a = [], l = n.length, f = 0, s = 0;
                (r = e()) !== o;) {
                for (var h = []; r !== u && r !== o;) h.push(r), r = e();
                t && null == (h = t(h, s++)) || a.push(h)
            }
            return a
        }, e.format = function(t) {
            if (Array.isArray(t[0])) return e.formatRows(t);
            var r = new y,
                i = [];
            return t.forEach(function(n) {
                for (var t in n) r.has(t) || i.push(r.add(t))
            }), [i.map(o).join(n)].concat(t.map(function(t) {
                return i.map(function(n) {
                    return o(t[n])
                }).join(n)
            })).join("\n")
        }, e.formatRows = function(n) {
            return n.map(u).join("\n")
        }, e
    }, to.csv = to.dsv(",", "text/csv"), to.tsv = to.dsv("\t", "text/tab-separated-values");
    var Go, Ko, Qo, na, ta, ea = this[x(this, "requestAnimationFrame")] || function(n) {
        setTimeout(n, 17)
    };
    to.timer = function(n, t, e) {
        var r = arguments.length;
        2 > r && (t = 0), 3 > r && (e = Date.now());
        var i = e + t,
            u = {
                c: n,
                t: i,
                f: !1,
                n: null
            };
        Ko ? Ko.n = u : Go = u, Ko = u, Qo || (na = clearTimeout(na), Qo = 1, ea(Ln))
    }, to.timer.flush = function() {
        Tn(), Rn()
    }, to.round = function(n, t) {
        return t ? Math.round(n * (t = Math.pow(10, t))) / t : Math.round(n)
    };
    var ra = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(Pn);
    to.formatPrefix = function(n, t) {
        var e = 0;
        return n && (0 > n && (n *= -1), t && (n = to.round(n, Dn(n, t))), e = 1 + Math.floor(1e-12 + Math.log(n) / Math.LN10), e = Math.max(-24, Math.min(24, 3 * Math.floor((e - 1) / 3)))), ra[8 + e / 3]
    };
    var ia = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
        ua = to.map({
            b: function(n) {
                return n.toString(2)
            },
            c: function(n) {
                return String.fromCharCode(n)
            },
            o: function(n) {
                return n.toString(8)
            },
            x: function(n) {
                return n.toString(16)
            },
            X: function(n) {
                return n.toString(16).toUpperCase()
            },
            g: function(n, t) {
                return n.toPrecision(t)
            },
            e: function(n, t) {
                return n.toExponential(t)
            },
            f: function(n, t) {
                return n.toFixed(t)
            },
            r: function(n, t) {
                return (n = to.round(n, Dn(n, t))).toFixed(Math.max(0, Math.min(20, Dn(n * (1 + 1e-15), t))))
            }
        }),
        oa = to.time = {},
        aa = Date;
    Fn.prototype = {
        getDate: function() {
            return this._.getUTCDate()
        },
        getDay: function() {
            return this._.getUTCDay()
        },
        getFullYear: function() {
            return this._.getUTCFullYear()
        },
        getHours: function() {
            return this._.getUTCHours()
        },
        getMilliseconds: function() {
            return this._.getUTCMilliseconds()
        },
        getMinutes: function() {
            return this._.getUTCMinutes()
        },
        getMonth: function() {
            return this._.getUTCMonth()
        },
        getSeconds: function() {
            return this._.getUTCSeconds()
        },
        getTime: function() {
            return this._.getTime()
        },
        getTimezoneOffset: function() {
            return 0
        },
        valueOf: function() {
            return this._.valueOf()
        },
        setDate: function() {
            ca.setUTCDate.apply(this._, arguments)
        },
        setDay: function() {
            ca.setUTCDay.apply(this._, arguments)
        },
        setFullYear: function() {
            ca.setUTCFullYear.apply(this._, arguments)
        },
        setHours: function() {
            ca.setUTCHours.apply(this._, arguments)
        },
        setMilliseconds: function() {
            ca.setUTCMilliseconds.apply(this._, arguments)
        },
        setMinutes: function() {
            ca.setUTCMinutes.apply(this._, arguments)
        },
        setMonth: function() {
            ca.setUTCMonth.apply(this._, arguments)
        },
        setSeconds: function() {
            ca.setUTCSeconds.apply(this._, arguments)
        },
        setTime: function() {
            ca.setTime.apply(this._, arguments)
        }
    };
    var ca = Date.prototype;
    oa.year = Hn(function(n) {
        return n = oa.day(n), n.setMonth(0, 1), n
    }, function(n, t) {
        n.setFullYear(n.getFullYear() + t)
    }, function(n) {
        return n.getFullYear()
    }), oa.years = oa.year.range, oa.years.utc = oa.year.utc.range, oa.day = Hn(function(n) {
        var t = new aa(2e3, 0);
        return t.setFullYear(n.getFullYear(), n.getMonth(), n.getDate()), t
    }, function(n, t) {
        n.setDate(n.getDate() + t)
    }, function(n) {
        return n.getDate() - 1
    }), oa.days = oa.day.range, oa.days.utc = oa.day.utc.range, oa.dayOfYear = function(n) {
        var t = oa.year(n);
        return Math.floor((n - t - 6e4 * (n.getTimezoneOffset() - t.getTimezoneOffset())) / 864e5)
    }, ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function(n, t) {
        t = 7 - t;
        var e = oa[n] = Hn(function(n) {
            return (n = oa.day(n)).setDate(n.getDate() - (n.getDay() + t) % 7), n
        }, function(n, t) {
            n.setDate(n.getDate() + 7 * Math.floor(t))
        }, function(n) {
            var e = oa.year(n).getDay();
            return Math.floor((oa.dayOfYear(n) + (e + t) % 7) / 7) - (e !== t)
        });
        oa[n + "s"] = e.range, oa[n + "s"].utc = e.utc.range, oa[n + "OfYear"] = function(n) {
            var e = oa.year(n).getDay();
            return Math.floor((oa.dayOfYear(n) + (e + t) % 7) / 7)
        }
    }), oa.week = oa.sunday, oa.weeks = oa.sunday.range, oa.weeks.utc = oa.sunday.utc.range, oa.weekOfYear = oa.sundayOfYear;
    var la = {
            "-": "",
            _: " ",
            0: "0"
        },
        fa = /^\s*\d+/,
        sa = /^%/;
    to.locale = function(n) {
        return {
            numberFormat: Un(n),
            timeFormat: In(n)
        }
    };
    var ha = to.locale({
        decimal: ".",
        thousands: ",",
        grouping: [3],
        currency: ["$", ""],
        dateTime: "%a %b %e %X %Y",
        date: "%m/%d/%Y",
        time: "%H:%M:%S",
        periods: ["AM", "PM"],
        days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    });
    to.format = ha.numberFormat, to.geo = {}, lt.prototype = {
        s: 0,
        t: 0,
        add: function(n) {
            ft(n, this.t, pa), ft(pa.s, this.s, this), this.s ? this.t += pa.t : this.s = pa.t
        },
        reset: function() {
            this.s = this.t = 0
        },
        valueOf: function() {
            return this.s
        }
    };
    var pa = new lt;
    to.geo.stream = function(n, t) {
        n && ga.hasOwnProperty(n.type) ? ga[n.type](n, t) : st(n, t)
    };
    var ga = {
            Feature: function(n, t) {
                st(n.geometry, t)
            },
            FeatureCollection: function(n, t) {
                for (var e = n.features, r = -1, i = e.length; ++r < i;) st(e[r].geometry, t)
            }
        },
        va = {
            Sphere: function(n, t) {
                t.sphere()
            },
            Point: function(n, t) {
                n = n.coordinates, t.point(n[0], n[1], n[2])
            },
            MultiPoint: function(n, t) {
                for (var e = n.coordinates, r = -1, i = e.length; ++r < i;) n = e[r], t.point(n[0], n[1], n[2])
            },
            LineString: function(n, t) {
                ht(n.coordinates, t, 0)
            },
            MultiLineString: function(n, t) {
                for (var e = n.coordinates, r = -1, i = e.length; ++r < i;) ht(e[r], t, 0)
            },
            Polygon: function(n, t) {
                pt(n.coordinates, t)
            },
            MultiPolygon: function(n, t) {
                for (var e = n.coordinates, r = -1, i = e.length; ++r < i;) pt(e[r], t)
            },
            GeometryCollection: function(n, t) {
                for (var e = n.geometries, r = -1, i = e.length; ++r < i;) st(e[r], t)
            }
        };
    to.geo.area = function(n) {
        return da = 0, to.geo.stream(n, ma), da
    };
    var da, ya = new lt,
        ma = {
            sphere: function() {
                da += 4 * zo
            },
            point: b,
            lineStart: b,
            lineEnd: b,
            polygonStart: function() {
                ya.reset(), ma.lineStart = gt
            },
            polygonEnd: function() {
                var n = 2 * ya;
                da += 0 > n ? 4 * zo + n : n, ma.lineStart = ma.lineEnd = ma.point = b
            }
        };
    to.geo.bounds = function() {
        function n(n, t) {
            M.push(x = [f = n, h = n]), s > t && (s = t), t > p && (p = t)
        }

        function t(t, e) {
            var r = vt([t * Ro, e * Ro]);
            if (y) {
                var i = yt(y, r),
                    u = [i[1], -i[0], 0],
                    o = yt(u, i);
                xt(o), o = bt(o);
                var c = t - g,
                    l = c > 0 ? 1 : -1,
                    v = o[0] * Do * l,
                    d = so(c) > 180;
                if (d ^ (v > l * g && l * t > v)) {
                    var m = o[1] * Do;
                    m > p && (p = m)
                } else if (v = (v + 360) % 360 - 180, d ^ (v > l * g && l * t > v)) {
                    var m = -o[1] * Do;
                    s > m && (s = m)
                } else s > e && (s = e), e > p && (p = e);
                d ? g > t ? a(f, t) > a(f, h) && (h = t) : a(t, h) > a(f, h) && (f = t) : h >= f ? (f > t && (f = t), t > h && (h = t)) : t > g ? a(f, t) > a(f, h) && (h = t) : a(t, h) > a(f, h) && (f = t)
            } else n(t, e);
            y = r, g = t
        }

        function e() {
            b.point = t
        }

        function r() {
            x[0] = f, x[1] = h, b.point = n, y = null
        }

        function i(n, e) {
            if (y) {
                var r = n - g;
                m += so(r) > 180 ? r + (r > 0 ? 360 : -360) : r
            } else v = n, d = e;
            ma.point(n, e), t(n, e)
        }

        function u() {
            ma.lineStart()
        }

        function o() {
            i(v, d), ma.lineEnd(), so(m) > Ao && (f = -(h = 180)), x[0] = f, x[1] = h, y = null
        }

        function a(n, t) {
            return (t -= n) < 0 ? t + 360 : t
        }

        function c(n, t) {
            return n[0] - t[0]
        }

        function l(n, t) {
            return t[0] <= t[1] ? t[0] <= n && n <= t[1] : n < t[0] || t[1] < n
        }
        var f, s, h, p, g, v, d, y, m, M, x, b = {
            point: n,
            lineStart: e,
            lineEnd: r,
            polygonStart: function() {
                b.point = i, b.lineStart = u, b.lineEnd = o, m = 0, ma.polygonStart()
            },
            polygonEnd: function() {
                ma.polygonEnd(), b.point = n, b.lineStart = e, b.lineEnd = r, 0 > ya ? (f = -(h = 180), s = -(p = 90)) : m > Ao ? p = 90 : -Ao > m && (s = -90), x[0] = f, x[1] = h
            }
        };
        return function(n) {
            p = h = -(f = s = 1 / 0), M = [], to.geo.stream(n, b);
            var t = M.length;
            if (t) {
                M.sort(c);
                for (var e, r = 1, i = M[0], u = [i]; t > r; ++r) e = M[r], l(e[0], i) || l(e[1], i) ? (a(i[0], e[1]) > a(i[0], i[1]) && (i[1] = e[1]), a(e[0], i[1]) > a(i[0], i[1]) && (i[0] = e[0])) : u.push(i = e);
                for (var o, e, g = -1 / 0, t = u.length - 1, r = 0, i = u[t]; t >= r; i = e, ++r) e = u[r], (o = a(i[1], e[0])) > g && (g = o, f = e[0], h = i[1])
            }
            return M = x = null, 1 / 0 === f || 1 / 0 === s ? [
                [NaN, NaN],
                [NaN, NaN]
            ] : [
                [f, s],
                [h, p]
            ]
        }
    }(), to.geo.centroid = function(n) {
        Ma = xa = ba = _a = wa = Sa = ka = Na = Ea = Aa = Ca = 0, to.geo.stream(n, za);
        var t = Ea,
            e = Aa,
            r = Ca,
            i = t * t + e * e + r * r;
        return Co > i && (t = Sa, e = ka, r = Na, Ao > xa && (t = ba, e = _a, r = wa), i = t * t + e * e + r * r, Co > i) ? [NaN, NaN] : [Math.atan2(e, t) * Do, tn(r / Math.sqrt(i)) * Do]
    };
    var Ma, xa, ba, _a, wa, Sa, ka, Na, Ea, Aa, Ca, za = {
            sphere: b,
            point: wt,
            lineStart: kt,
            lineEnd: Nt,
            polygonStart: function() {
                za.lineStart = Et
            },
            polygonEnd: function() {
                za.lineStart = kt
            }
        },
        qa = Tt(Ct, Ut, Ft, [-zo, -zo / 2]),
        La = 1e9;
    to.geo.clipExtent = function() {
        var n, t, e, r, i, u, o = {
            stream: function(n) {
                return i && (i.valid = !1), i = u(n), i.valid = !0, i
            },
            extent: function(a) {
                return arguments.length ? (u = Yt(n = +a[0][0], t = +a[0][1], e = +a[1][0], r = +a[1][1]), i && (i.valid = !1, i = null), o) : [
                    [n, t],
                    [e, r]
                ]
            }
        };
        return o.extent([
            [0, 0],
            [960, 500]
        ])
    }, (to.geo.conicEqualArea = function() {
        return Zt(Vt)
    }).raw = Vt, to.geo.albers = function() {
        return to.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070)
    }, to.geo.albersUsa = function() {
        function n(n) {
            var u = n[0],
                o = n[1];
            return t = null, e(u, o), t || (r(u, o), t) || i(u, o), t
        }
        var t, e, r, i, u = to.geo.albers(),
            o = to.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]),
            a = to.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]),
            c = {
                point: function(n, e) {
                    t = [n, e]
                }
            };
        return n.invert = function(n) {
            var t = u.scale(),
                e = u.translate(),
                r = (n[0] - e[0]) / t,
                i = (n[1] - e[1]) / t;
            return (i >= .12 && .234 > i && r >= -.425 && -.214 > r ? o : i >= .166 && .234 > i && r >= -.214 && -.115 > r ? a : u).invert(n)
        }, n.stream = function(n) {
            var t = u.stream(n),
                e = o.stream(n),
                r = a.stream(n);
            return {
                point: function(n, i) {
                    t.point(n, i), e.point(n, i), r.point(n, i)
                },
                sphere: function() {
                    t.sphere(), e.sphere(), r.sphere()
                },
                lineStart: function() {
                    t.lineStart(), e.lineStart(), r.lineStart()
                },
                lineEnd: function() {
                    t.lineEnd(), e.lineEnd(), r.lineEnd()
                },
                polygonStart: function() {
                    t.polygonStart(), e.polygonStart(), r.polygonStart()
                },
                polygonEnd: function() {
                    t.polygonEnd(), e.polygonEnd(), r.polygonEnd()
                }
            }
        }, n.precision = function(t) {
            return arguments.length ? (u.precision(t), o.precision(t), a.precision(t), n) : u.precision()
        }, n.scale = function(t) {
            return arguments.length ? (u.scale(t), o.scale(.35 * t), a.scale(t), n.translate(u.translate())) : u.scale()
        }, n.translate = function(t) {
            if (!arguments.length) return u.translate();
            var l = u.scale(),
                f = +t[0],
                s = +t[1];
            return e = u.translate(t).clipExtent([
                [f - .455 * l, s - .238 * l],
                [f + .455 * l, s + .238 * l]
            ]).stream(c).point, r = o.translate([f - .307 * l, s + .201 * l]).clipExtent([
                [f - .425 * l + Ao, s + .12 * l + Ao],
                [f - .214 * l - Ao, s + .234 * l - Ao]
            ]).stream(c).point, i = a.translate([f - .205 * l, s + .212 * l]).clipExtent([
                [f - .214 * l + Ao, s + .166 * l + Ao],
                [f - .115 * l - Ao, s + .234 * l - Ao]
            ]).stream(c).point, n
        }, n.scale(1070)
    };
    var Ta, Ra, Da, Pa, Ua, ja, Fa = {
            point: b,
            lineStart: b,
            lineEnd: b,
            polygonStart: function() {
                Ra = 0, Fa.lineStart = Xt
            },
            polygonEnd: function() {
                Fa.lineStart = Fa.lineEnd = Fa.point = b, Ta += so(Ra / 2)
            }
        },
        Ha = {
            point: $t,
            lineStart: b,
            lineEnd: b,
            polygonStart: b,
            polygonEnd: b
        },
        Oa = {
            point: Jt,
            lineStart: Gt,
            lineEnd: Kt,
            polygonStart: function() {
                Oa.lineStart = Qt
            },
            polygonEnd: function() {
                Oa.point = Jt, Oa.lineStart = Gt, Oa.lineEnd = Kt
            }
        };
    to.geo.path = function() {
        function n(n) {
            return n && ("function" == typeof a && u.pointRadius(+a.apply(this, arguments)), o && o.valid || (o = i(u)), to.geo.stream(n, o)), u.result()
        }

        function t() {
            return o = null, n
        }
        var e, r, i, u, o, a = 4.5;
        return n.area = function(n) {
            return Ta = 0, to.geo.stream(n, i(Fa)), Ta
        }, n.centroid = function(n) {
            return ba = _a = wa = Sa = ka = Na = Ea = Aa = Ca = 0, to.geo.stream(n, i(Oa)), Ca ? [Ea / Ca, Aa / Ca] : Na ? [Sa / Na, ka / Na] : wa ? [ba / wa, _a / wa] : [NaN, NaN]
        }, n.bounds = function(n) {
            return Ua = ja = -(Da = Pa = 1 / 0), to.geo.stream(n, i(Ha)), [
                [Da, Pa],
                [Ua, ja]
            ]
        }, n.projection = function(n) {
            return arguments.length ? (i = (e = n) ? n.stream || ee(n) : m, t()) : e
        }, n.context = function(n) {
            return arguments.length ? (u = null == (r = n) ? new Bt : new ne(n), "function" != typeof a && u.pointRadius(a), t()) : r
        }, n.pointRadius = function(t) {
            return arguments.length ? (a = "function" == typeof t ? t : (u.pointRadius(+t), +t), n) : a
        }, n.projection(to.geo.albersUsa()).context(null)
    }, to.geo.transform = function(n) {
        return {
            stream: function(t) {
                var e = new re(t);
                for (var r in n) e[r] = n[r];
                return e
            }
        }
    }, re.prototype = {
        point: function(n, t) {
            this.stream.point(n, t)
        },
        sphere: function() {
            this.stream.sphere()
        },
        lineStart: function() {
            this.stream.lineStart()
        },
        lineEnd: function() {
            this.stream.lineEnd()
        },
        polygonStart: function() {
            this.stream.polygonStart()
        },
        polygonEnd: function() {
            this.stream.polygonEnd()
        }
    }, to.geo.projection = ue, to.geo.projectionMutator = oe, (to.geo.equirectangular = function() {
        return ue(ce)
    }).raw = ce.invert = ce, to.geo.rotation = function(n) {
        function t(t) {
            return t = n(t[0] * Ro, t[1] * Ro), t[0] *= Do, t[1] *= Do, t
        }
        return n = fe(n[0] % 360 * Ro, n[1] * Ro, n.length > 2 ? n[2] * Ro : 0), t.invert = function(t) {
            return t = n.invert(t[0] * Ro, t[1] * Ro), t[0] *= Do, t[1] *= Do, t
        }, t
    }, le.invert = ce, to.geo.circle = function() {
        function n() {
            var n = "function" == typeof r ? r.apply(this, arguments) : r,
                t = fe(-n[0] * Ro, -n[1] * Ro, 0).invert,
                i = [];
            return e(null, null, 1, {
                point: function(n, e) {
                    i.push(n = t(n, e)), n[0] *= Do, n[1] *= Do
                }
            }), {
                type: "Polygon",
                coordinates: [i]
            }
        }
        var t, e, r = [0, 0],
            i = 6;
        return n.origin = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n.angle = function(r) {
            return arguments.length ? (e = ge((t = +r) * Ro, i * Ro), n) : t
        }, n.precision = function(r) {
            return arguments.length ? (e = ge(t * Ro, (i = +r) * Ro), n) : i
        }, n.angle(90)
    }, to.geo.distance = function(n, t) {
        var e, r = (t[0] - n[0]) * Ro,
            i = n[1] * Ro,
            u = t[1] * Ro,
            o = Math.sin(r),
            a = Math.cos(r),
            c = Math.sin(i),
            l = Math.cos(i),
            f = Math.sin(u),
            s = Math.cos(u);
        return Math.atan2(Math.sqrt((e = s * o) * e + (e = l * f - c * s * a) * e), c * f + l * s * a)
    }, to.geo.graticule = function() {
        function n() {
            return {
                type: "MultiLineString",
                coordinates: t()
            }
        }

        function t() {
            return to.range(Math.ceil(u / d) * d, i, d).map(h).concat(to.range(Math.ceil(l / y) * y, c, y).map(p)).concat(to.range(Math.ceil(r / g) * g, e, g).filter(function(n) {
                return so(n % d) > Ao
            }).map(f)).concat(to.range(Math.ceil(a / v) * v, o, v).filter(function(n) {
                return so(n % y) > Ao
            }).map(s))
        }
        var e, r, i, u, o, a, c, l, f, s, h, p, g = 10,
            v = g,
            d = 90,
            y = 360,
            m = 2.5;
        return n.lines = function() {
            return t().map(function(n) {
                return {
                    type: "LineString",
                    coordinates: n
                }
            })
        }, n.outline = function() {
            return {
                type: "Polygon",
                coordinates: [h(u).concat(p(c).slice(1), h(i).reverse().slice(1), p(l).reverse().slice(1))]
            }
        }, n.extent = function(t) {
            return arguments.length ? n.majorExtent(t).minorExtent(t) : n.minorExtent()
        }, n.majorExtent = function(t) {
            return arguments.length ? (u = +t[0][0], i = +t[1][0], l = +t[0][1], c = +t[1][1], u > i && (t = u, u = i, i = t), l > c && (t = l, l = c, c = t), n.precision(m)) : [
                [u, l],
                [i, c]
            ]
        }, n.minorExtent = function(t) {
            return arguments.length ? (r = +t[0][0], e = +t[1][0], a = +t[0][1], o = +t[1][1], r > e && (t = r, r = e, e = t), a > o && (t = a, a = o, o = t), n.precision(m)) : [
                [r, a],
                [e, o]
            ]
        }, n.step = function(t) {
            return arguments.length ? n.majorStep(t).minorStep(t) : n.minorStep()
        }, n.majorStep = function(t) {
            return arguments.length ? (d = +t[0], y = +t[1], n) : [d, y]
        }, n.minorStep = function(t) {
            return arguments.length ? (g = +t[0], v = +t[1], n) : [g, v]
        }, n.precision = function(t) {
            return arguments.length ? (m = +t, f = de(a, o, 90), s = ye(r, e, m), h = de(l, c, 90), p = ye(u, i, m), n) : m
        }, n.majorExtent([
            [-180, -90 + Ao],
            [180, 90 - Ao]
        ]).minorExtent([
            [-180, -80 - Ao],
            [180, 80 + Ao]
        ])
    }, to.geo.greatArc = function() {
        function n() {
            return {
                type: "LineString",
                coordinates: [t || r.apply(this, arguments), e || i.apply(this, arguments)]
            }
        }
        var t, e, r = me,
            i = Me;
        return n.distance = function() {
            return to.geo.distance(t || r.apply(this, arguments), e || i.apply(this, arguments))
        }, n.source = function(e) {
            return arguments.length ? (r = e, t = "function" == typeof e ? null : e, n) : r
        }, n.target = function(t) {
            return arguments.length ? (i = t, e = "function" == typeof t ? null : t, n) : i
        }, n.precision = function() {
            return arguments.length ? n : 0
        }, n
    }, to.geo.interpolate = function(n, t) {
        return xe(n[0] * Ro, n[1] * Ro, t[0] * Ro, t[1] * Ro)
    }, to.geo.length = function(n) {
        return Ia = 0, to.geo.stream(n, Ya), Ia
    };
    var Ia, Ya = {
            sphere: b,
            point: b,
            lineStart: be,
            lineEnd: b,
            polygonStart: b,
            polygonEnd: b
        },
        Za = _e(function(n) {
            return Math.sqrt(2 / (1 + n))
        }, function(n) {
            return 2 * Math.asin(n / 2)
        });
    (to.geo.azimuthalEqualArea = function() {
        return ue(Za)
    }).raw = Za;
    var Va = _e(function(n) {
        var t = Math.acos(n);
        return t && t / Math.sin(t)
    }, m);
    (to.geo.azimuthalEquidistant = function() {
        return ue(Va)
    }).raw = Va, (to.geo.conicConformal = function() {
        return Zt(we)
    }).raw = we, (to.geo.conicEquidistant = function() {
        return Zt(Se)
    }).raw = Se;
    var Xa = _e(function(n) {
        return 1 / n
    }, Math.atan);
    (to.geo.gnomonic = function() {
        return ue(Xa)
    }).raw = Xa, ke.invert = function(n, t) {
        return [n, 2 * Math.atan(Math.exp(t)) - To]
    }, (to.geo.mercator = function() {
        return Ne(ke)
    }).raw = ke;
    var $a = _e(function() {
        return 1
    }, Math.asin);
    (to.geo.orthographic = function() {
        return ue($a)
    }).raw = $a;
    var Ba = _e(function(n) {
        return 1 / (1 + n)
    }, function(n) {
        return 2 * Math.atan(n)
    });
    (to.geo.stereographic = function() {
        return ue(Ba)
    }).raw = Ba, Ee.invert = function(n, t) {
        return [-t, 2 * Math.atan(Math.exp(n)) - To]
    }, (to.geo.transverseMercator = function() {
        var n = Ne(Ee),
            t = n.center,
            e = n.rotate;
        return n.center = function(n) {
            return n ? t([-n[1], n[0]]) : (n = t(), [n[1], -n[0]])
        }, n.rotate = function(n) {
            return n ? e([n[0], n[1], n.length > 2 ? n[2] + 90 : 90]) : (n = e(), [n[0], n[1], n[2] - 90])
        }, e([0, 0, 90])
    }).raw = Ee, to.geom = {}, to.geom.hull = function(n) {
        function t(n) {
            if (n.length < 3) return [];
            var t, i = En(e),
                u = En(r),
                o = n.length,
                a = [],
                c = [];
            for (t = 0; o > t; t++) a.push([+i.call(this, n[t], t), +u.call(this, n[t], t), t]);
            for (a.sort(qe), t = 0; o > t; t++) c.push([a[t][0], -a[t][1]]);
            var l = ze(a),
                f = ze(c),
                s = f[0] === l[0],
                h = f[f.length - 1] === l[l.length - 1],
                p = [];
            for (t = l.length - 1; t >= 0; --t) p.push(n[a[l[t]][2]]);
            for (t = +s; t < f.length - h; ++t) p.push(n[a[f[t]][2]]);
            return p
        }
        var e = Ae,
            r = Ce;
        return arguments.length ? t(n) : (t.x = function(n) {
            return arguments.length ? (e = n, t) : e
        }, t.y = function(n) {
            return arguments.length ? (r = n, t) : r
        }, t)
    }, to.geom.polygon = function(n) {
        return yo(n, Wa), n
    };
    var Wa = to.geom.polygon.prototype = [];
    Wa.area = function() {
        for (var n, t = -1, e = this.length, r = this[e - 1], i = 0; ++t < e;) n = r, r = this[t], i += n[1] * r[0] - n[0] * r[1];
        return .5 * i
    }, Wa.centroid = function(n) {
        var t, e, r = -1,
            i = this.length,
            u = 0,
            o = 0,
            a = this[i - 1];
        for (arguments.length || (n = -1 / (6 * this.area())); ++r < i;) t = a, a = this[r], e = t[0] * a[1] - a[0] * t[1], u += (t[0] + a[0]) * e, o += (t[1] + a[1]) * e;
        return [u * n, o * n]
    }, Wa.clip = function(n) {
        for (var t, e, r, i, u, o, a = Re(n), c = -1, l = this.length - Re(this), f = this[l - 1]; ++c < l;) {
            for (t = n.slice(), n.length = 0, i = this[c], u = t[(r = t.length - a) - 1], e = -1; ++e < r;) o = t[e], Le(o, f, i) ? (Le(u, f, i) || n.push(Te(u, o, f, i)), n.push(o)) : Le(u, f, i) && n.push(Te(u, o, f, i)), u = o;
            a && n.push(n[0]), f = i
        }
        return n
    };
    var Ja, Ga, Ka, Qa, nc, tc = [],
        ec = [];
    Ie.prototype.prepare = function() {
        for (var n, t = this.edges, e = t.length; e--;) n = t[e].edge, n.b && n.a || t.splice(e, 1);
        return t.sort(Ze), t.length
    }, nr.prototype = {
        start: function() {
            return this.edge.l === this.site ? this.edge.a : this.edge.b
        },
        end: function() {
            return this.edge.l === this.site ? this.edge.b : this.edge.a
        }
    }, tr.prototype = {
        insert: function(n, t) {
            var e, r, i;
            if (n) {
                if (t.P = n, t.N = n.N, n.N && (n.N.P = t), n.N = t, n.R) {
                    for (n = n.R; n.L;) n = n.L;
                    n.L = t
                } else n.R = t;
                e = n
            } else this._ ? (n = ur(this._), t.P = null, t.N = n, n.P = n.L = t, e = n) : (t.P = t.N = null, this._ = t, e = null);
            for (t.L = t.R = null, t.U = e, t.C = !0, n = t; e && e.C;) r = e.U, e === r.L ? (i = r.R, i && i.C ? (e.C = i.C = !1, r.C = !0, n = r) : (n === e.R && (rr(this, e), n = e, e = n.U), e.C = !1, r.C = !0, ir(this, r))) : (i = r.L, i && i.C ? (e.C = i.C = !1, r.C = !0, n = r) : (n === e.L && (ir(this, e), n = e, e = n.U), e.C = !1, r.C = !0, rr(this, r))), e = n.U;
            this._.C = !1
        },
        remove: function(n) {
            n.N && (n.N.P = n.P), n.P && (n.P.N = n.N), n.N = n.P = null;
            var t, e, r, i = n.U,
                u = n.L,
                o = n.R;
            if (e = u ? o ? ur(o) : u : o, i ? i.L === n ? i.L = e : i.R = e : this._ = e, u && o ? (r = e.C, e.C = n.C, e.L = u, u.U = e, e !== o ? (i = e.U, e.U = n.U, n = e.R, i.L = n, e.R = o, o.U = e) : (e.U = i, i = e, n = e.R)) : (r = n.C, n = e), n && (n.U = i), !r) {
                if (n && n.C) return void(n.C = !1);
                do {
                    if (n === this._) break;
                    if (n === i.L) {
                        if (t = i.R, t.C && (t.C = !1, i.C = !0, rr(this, i), t = i.R), t.L && t.L.C || t.R && t.R.C) {
                            t.R && t.R.C || (t.L.C = !1, t.C = !0, ir(this, t), t = i.R), t.C = i.C, i.C = t.R.C = !1, rr(this, i), n = this._;
                            break
                        }
                    } else if (t = i.L, t.C && (t.C = !1, i.C = !0, ir(this, i), t = i.L), t.L && t.L.C || t.R && t.R.C) {
                        t.L && t.L.C || (t.R.C = !1, t.C = !0, rr(this, t), t = i.L), t.C = i.C, i.C = t.L.C = !1, ir(this, i), n = this._;
                        break
                    }
                    t.C = !0, n = i, i = i.U
                } while (!n.C);
                n && (n.C = !1)
            }
        }
    }, to.geom.voronoi = function(n) {
        function t(n) {
            var t = new Array(n.length),
                r = a[0][0],
                i = a[0][1],
                u = a[1][0],
                o = a[1][1];
            return or(e(n), a).cells.forEach(function(e, a) {
                var c = e.edges,
                    l = e.site,
                    f = t[a] = c.length ? c.map(function(n) {
                        var t = n.start();
                        return [t.x, t.y]
                    }) : l.x >= r && l.x <= u && l.y >= i && l.y <= o ? [
                        [r, o],
                        [u, o],
                        [u, i],
                        [r, i]
                    ] : [];
                f.point = n[a]
            }), t
        }

        function e(n) {
            return n.map(function(n, t) {
                return {
                    x: Math.round(u(n, t) / Ao) * Ao,
                    y: Math.round(o(n, t) / Ao) * Ao,
                    i: t
                }
            })
        }
        var r = Ae,
            i = Ce,
            u = r,
            o = i,
            a = rc;
        return n ? t(n) : (t.links = function(n) {
            return or(e(n)).edges.filter(function(n) {
                return n.l && n.r
            }).map(function(t) {
                return {
                    source: n[t.l.i],
                    target: n[t.r.i]
                }
            })
        }, t.triangles = function(n) {
            var t = [];
            return or(e(n)).cells.forEach(function(e, r) {
                for (var i, u, o = e.site, a = e.edges.sort(Ze), c = -1, l = a.length, f = a[l - 1].edge, s = f.l === o ? f.r : f.l; ++c < l;) i = f, u = s, f = a[c].edge, s = f.l === o ? f.r : f.l, r < u.i && r < s.i && cr(o, u, s) < 0 && t.push([n[r], n[u.i], n[s.i]])
            }), t
        }, t.x = function(n) {
            return arguments.length ? (u = En(r = n), t) : r
        }, t.y = function(n) {
            return arguments.length ? (o = En(i = n), t) : i
        }, t.clipExtent = function(n) {
            return arguments.length ? (a = null == n ? rc : n, t) : a === rc ? null : a
        }, t.size = function(n) {
            return arguments.length ? t.clipExtent(n && [
                [0, 0], n
            ]) : a === rc ? null : a && a[1]
        }, t)
    };
    var rc = [
        [-1e6, -1e6],
        [1e6, 1e6]
    ];
    to.geom.delaunay = function(n) {
        return to.geom.voronoi().triangles(n)
    }, to.geom.quadtree = function(n, t, e, r, i) {
        function u(n) {
            function u(n, t, e, r, i, u, o, a) {
                if (!isNaN(e) && !isNaN(r))
                    if (n.leaf) {
                        var c = n.x,
                            f = n.y;
                        if (null != c)
                            if (so(c - e) + so(f - r) < .01) l(n, t, e, r, i, u, o, a);
                            else {
                                var s = n.point;
                                n.x = n.y = n.point = null, l(n, s, c, f, i, u, o, a), l(n, t, e, r, i, u, o, a)
                            }
                        else n.x = e, n.y = r, n.point = t
                    } else l(n, t, e, r, i, u, o, a)
            }

            function l(n, t, e, r, i, o, a, c) {
                var l = .5 * (i + a),
                    f = .5 * (o + c),
                    s = e >= l,
                    h = r >= f,
                    p = h << 1 | s;
                n.leaf = !1, n = n.nodes[p] || (n.nodes[p] = sr()), s ? i = l : a = l, h ? o = f : c = f, u(n, t, e, r, i, o, a, c)
            }
            var f, s, h, p, g, v, d, y, m, M = En(a),
                x = En(c);
            if (null != t) v = t, d = e, y = r, m = i;
            else if (y = m = -(v = d = 1 / 0), s = [], h = [], g = n.length, o)
                for (p = 0; g > p; ++p) f = n[p], f.x < v && (v = f.x), f.y < d && (d = f.y), f.x > y && (y = f.x), f.y > m && (m = f.y), s.push(f.x), h.push(f.y);
            else
                for (p = 0; g > p; ++p) {
                    var b = +M(f = n[p], p),
                        _ = +x(f, p);
                    v > b && (v = b), d > _ && (d = _), b > y && (y = b), _ > m && (m = _), s.push(b), h.push(_)
                }
            var w = y - v,
                S = m - d;
            w > S ? m = d + w : y = v + S;
            var k = sr();
            if (k.add = function(n) {
                    u(k, n, +M(n, ++p), +x(n, p), v, d, y, m)
                }, k.visit = function(n) {
                    hr(n, k, v, d, y, m)
                }, k.find = function(n) {
                    return pr(k, n[0], n[1], v, d, y, m)
                }, p = -1, null == t) {
                for (; ++p < g;) u(k, n[p], s[p], h[p], v, d, y, m);
                --p
            } else n.forEach(k.add);
            return s = h = n = f = null, k
        }
        var o, a = Ae,
            c = Ce;
        return (o = arguments.length) ? (a = lr, c = fr, 3 === o && (i = e, r = t, e = t = 0), u(n)) : (u.x = function(n) {
            return arguments.length ? (a = n, u) : a
        }, u.y = function(n) {
            return arguments.length ? (c = n, u) : c
        }, u.extent = function(n) {
            return arguments.length ? (null == n ? t = e = r = i = null : (t = +n[0][0], e = +n[0][1], r = +n[1][0], i = +n[1][1]), u) : null == t ? null : [
                [t, e],
                [r, i]
            ]
        }, u.size = function(n) {
            return arguments.length ? (null == n ? t = e = r = i = null : (t = e = 0, r = +n[0], i = +n[1]), u) : null == t ? null : [r - t, i - e]
        }, u)
    }, to.interpolateRgb = gr, to.interpolateObject = vr, to.interpolateNumber = dr, to.interpolateString = yr;
    var ic = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
        uc = new RegExp(ic.source, "g");
    to.interpolate = mr, to.interpolators = [function(n, t) {
        var e = typeof t;
        return ("string" === e ? Jo.has(t.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(t) ? gr : yr : t instanceof an ? gr : Array.isArray(t) ? Mr : "object" === e && isNaN(t) ? vr : dr)(n, t)
    }], to.interpolateArray = Mr;
    var oc = function() {
            return m
        },
        ac = to.map({
            linear: oc,
            poly: Nr,
            quad: function() {
                return wr
            },
            cubic: function() {
                return Sr
            },
            sin: function() {
                return Er
            },
            exp: function() {
                return Ar
            },
            circle: function() {
                return Cr
            },
            elastic: zr,
            back: qr,
            bounce: function() {
                return Lr
            }
        }),
        cc = to.map({
            in: m,
            out: br,
            "in-out": _r,
            "out-in": function(n) {
                return _r(br(n))
            }
        });
    to.ease = function(n) {
        var t = n.indexOf("-"),
            e = t >= 0 ? n.slice(0, t) : n,
            r = t >= 0 ? n.slice(t + 1) : "in";
        return e = ac.get(e) || oc, r = cc.get(r) || m, xr(r(e.apply(null, eo.call(arguments, 1))))
    }, to.interpolateHcl = Tr, to.interpolateHsl = Rr, to.interpolateLab = Dr, to.interpolateRound = Pr, to.transform = function(n) {
        var t = io.createElementNS(to.ns.prefix.svg, "g");
        return (to.transform = function(n) {
            if (null != n) {
                t.setAttribute("transform", n);
                var e = t.transform.baseVal.consolidate()
            }
            return new Ur(e ? e.matrix : lc)
        })(n)
    }, Ur.prototype.toString = function() {
        return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
    };
    var lc = {
        a: 1,
        b: 0,
        c: 0,
        d: 1,
        e: 0,
        f: 0
    };
    to.interpolateTransform = Or, to.layout = {}, to.layout.bundle = function() {
        return function(n) {
            for (var t = [], e = -1, r = n.length; ++e < r;) t.push(Zr(n[e]));
            return t
        }
    }, to.layout.chord = function() {
        function n() {
            var n, l, s, h, p, g = {},
                v = [],
                d = to.range(u),
                y = [];
            for (e = [], r = [], n = 0, h = -1; ++h < u;) {
                for (l = 0, p = -1; ++p < u;) l += i[h][p];
                v.push(l), y.push(to.range(u)), n += l
            }
            for (o && d.sort(function(n, t) {
                    return o(v[n], v[t])
                }), a && y.forEach(function(n, t) {
                    n.sort(function(n, e) {
                        return a(i[t][n], i[t][e])
                    })
                }), n = (qo - f * u) / n, l = 0, h = -1; ++h < u;) {
                for (s = l, p = -1; ++p < u;) {
                    var m = d[h],
                        M = y[m][p],
                        x = i[m][M],
                        b = l,
                        _ = l += x * n;
                    g[m + "-" + M] = {
                        index: m,
                        subindex: M,
                        startAngle: b,
                        endAngle: _,
                        value: x
                    }
                }
                r[m] = {
                    index: m,
                    startAngle: s,
                    endAngle: l,
                    value: (l - s) / n
                }, l += f
            }
            for (h = -1; ++h < u;)
                for (p = h - 1; ++p < u;) {
                    var w = g[h + "-" + p],
                        S = g[p + "-" + h];
                    (w.value || S.value) && e.push(w.value < S.value ? {
                        source: S,
                        target: w
                    } : {
                        source: w,
                        target: S
                    })
                }
            c && t()
        }

        function t() {
            e.sort(function(n, t) {
                return c((n.source.value + n.target.value) / 2, (t.source.value + t.target.value) / 2)
            })
        }
        var e, r, i, u, o, a, c, l = {},
            f = 0;
        return l.matrix = function(n) {
            return arguments.length ? (u = (i = n) && i.length, e = r = null, l) : i
        }, l.padding = function(n) {
            return arguments.length ? (f = n, e = r = null, l) : f
        }, l.sortGroups = function(n) {
            return arguments.length ? (o = n, e = r = null, l) : o
        }, l.sortSubgroups = function(n) {
            return arguments.length ? (a = n, e = null, l) : a
        }, l.sortChords = function(n) {
            return arguments.length ? (c = n, e && t(), l) : c
        }, l.chords = function() {
            return e || n(), e
        }, l.groups = function() {
            return r || n(), r
        }, l
    }, to.layout.force = function() {
        function n(n) {
            return function(t, e, r, i) {
                if (t.point !== n) {
                    var u = t.cx - n.x,
                        o = t.cy - n.y,
                        a = i - e,
                        c = u * u + o * o;
                    if (c > a * a / d) {
                        if (g > c) {
                            var l = t.charge / c;
                            n.px -= u * l, n.py -= o * l
                        }
                        return !0
                    }
                    if (t.point && c && g > c) {
                        var l = t.pointCharge / c;
                        n.px -= u * l, n.py -= o * l
                    }
                }
                return !t.charge
            }
        }

        function t(n) {
            n.px = to.event.x, n.py = to.event.y, a.resume()
        }
        var e, r, i, u, o, a = {},
            c = to.dispatch("start", "tick", "end"),
            l = [1, 1],
            f = .9,
            s = fc,
            h = sc,
            p = -30,
            g = hc,
            v = .1,
            d = .64,
            y = [],
            M = [];
        return a.tick = function() {
            if ((r *= .99) < .005) return c.end({
                type: "end",
                alpha: r = 0
            }), !0;
            var t, e, a, s, h, g, d, m, x, b = y.length,
                _ = M.length;
            for (e = 0; _ > e; ++e) a = M[e], s = a.source, h = a.target, m = h.x - s.x, x = h.y - s.y, (g = m * m + x * x) && (g = r * u[e] * ((g = Math.sqrt(g)) - i[e]) / g, m *= g, x *= g, h.x -= m * (d = s.weight / (h.weight + s.weight)), h.y -= x * d, s.x += m * (d = 1 - d), s.y += x * d);
            if ((d = r * v) && (m = l[0] / 2, x = l[1] / 2, e = -1, d))
                for (; ++e < b;) a = y[e], a.x += (m - a.x) * d, a.y += (x - a.y) * d;
            if (p)
                for (Gr(t = to.geom.quadtree(y), r, o), e = -1; ++e < b;)(a = y[e]).fixed || t.visit(n(a));
            for (e = -1; ++e < b;) a = y[e], a.fixed ? (a.x = a.px, a.y = a.py) : (a.x -= (a.px - (a.px = a.x)) * f, a.y -= (a.py - (a.py = a.y)) * f);
            c.tick({
                type: "tick",
                alpha: r
            })
        }, a.nodes = function(n) {
            return arguments.length ? (y = n, a) : y
        }, a.links = function(n) {
            return arguments.length ? (M = n, a) : M
        }, a.size = function(n) {
            return arguments.length ? (l = n, a) : l
        }, a.linkDistance = function(n) {
            return arguments.length ? (s = "function" == typeof n ? n : +n, a) : s
        }, a.distance = a.linkDistance, a.linkStrength = function(n) {
            return arguments.length ? (h = "function" == typeof n ? n : +n, a) : h
        }, a.friction = function(n) {
            return arguments.length ? (f = +n, a) : f
        }, a.charge = function(n) {
            return arguments.length ? (p = "function" == typeof n ? n : +n, a) : p
        }, a.chargeDistance = function(n) {
            return arguments.length ? (g = n * n, a) : Math.sqrt(g)
        }, a.gravity = function(n) {
            return arguments.length ? (v = +n, a) : v
        }, a.theta = function(n) {
            return arguments.length ? (d = n * n, a) : Math.sqrt(d)
        }, a.alpha = function(n) {
            return arguments.length ? (n = +n, r ? r = n > 0 ? n : 0 : n > 0 && (c.start({
                type: "start",
                alpha: r = n
            }), to.timer(a.tick)), a) : r
        }, a.start = function() {
            function n(n, r) {
                if (!e) {
                    for (e = new Array(c), a = 0; c > a; ++a) e[a] = [];
                    for (a = 0; f > a; ++a) {
                        var i = M[a];
                        e[i.source.index].push(i.target), e[i.target.index].push(i.source)
                    }
                }
                for (var u, o = e[t], a = -1, l = o.length; ++a < l;)
                    if (!isNaN(u = o[a][n])) return u;
                return Math.random() * r
            }
            var t, e, r, c = y.length,
                f = M.length,
                g = l[0],
                v = l[1];
            for (t = 0; c > t; ++t)(r = y[t]).index = t, r.weight = 0;
            for (t = 0; f > t; ++t) r = M[t], "number" == typeof r.source && (r.source = y[r.source]), "number" == typeof r.target && (r.target = y[r.target]), ++r.source.weight, ++r.target.weight;
            for (t = 0; c > t; ++t) r = y[t], isNaN(r.x) && (r.x = n("x", g)), isNaN(r.y) && (r.y = n("y", v)), isNaN(r.px) && (r.px = r.x), isNaN(r.py) && (r.py = r.y);
            if (i = [], "function" == typeof s)
                for (t = 0; f > t; ++t) i[t] = +s.call(this, M[t], t);
            else
                for (t = 0; f > t; ++t) i[t] = s;
            if (u = [], "function" == typeof h)
                for (t = 0; f > t; ++t) u[t] = +h.call(this, M[t], t);
            else
                for (t = 0; f > t; ++t) u[t] = h;
            if (o = [], "function" == typeof p)
                for (t = 0; c > t; ++t) o[t] = +p.call(this, y[t], t);
            else
                for (t = 0; c > t; ++t) o[t] = p;
            return a.resume()
        }, a.resume = function() {
            return a.alpha(.1)
        }, a.stop = function() {
            return a.alpha(0)
        }, a.drag = function() {
            return e || (e = to.behavior.drag().origin(m).on("dragstart.force", $r).on("drag.force", t).on("dragend.force", Br)), arguments.length ? void this.on("mouseover.force", Wr).on("mouseout.force", Jr).call(e) : e
        }, to.rebind(a, c, "on")
    };
    var fc = 20,
        sc = 1,
        hc = 1 / 0;
    to.layout.hierarchy = function() {
        function n(i) {
            var u, o = [i],
                a = [];
            for (i.depth = 0; null != (u = o.pop());)
                if (a.push(u), (l = e.call(n, u, u.depth)) && (c = l.length)) {
                    for (var c, l, f; --c >= 0;) o.push(f = l[c]), f.parent = u, f.depth = u.depth + 1;
                    r && (u.value = 0), u.children = l
                } else r && (u.value = +r.call(n, u, u.depth) || 0), delete u.children;
            return ni(i, function(n) {
                var e, i;
                t && (e = n.children) && e.sort(t), r && (i = n.parent) && (i.value += n.value)
            }), a
        }
        var t = ri,
            e = ti,
            r = ei;
        return n.sort = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.children = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.value = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n.revalue = function(t) {
            return r && (Qr(t, function(n) {
                n.children && (n.value = 0)
            }), ni(t, function(t) {
                var e;
                t.children || (t.value = +r.call(n, t, t.depth) || 0), (e = t.parent) && (e.value += t.value)
            })), t
        }, n
    }, to.layout.partition = function() {
        function n(t, e, r, i) {
            var u = t.children;
            if (t.x = e, t.y = t.depth * i, t.dx = r, t.dy = i, u && (o = u.length)) {
                var o, a, c, l = -1;
                for (r = t.value ? r / t.value : 0; ++l < o;) n(a = u[l], e, c = a.value * r, i), e += c
            }
        }

        function t(n) {
            var e = n.children,
                r = 0;
            if (e && (i = e.length))
                for (var i, u = -1; ++u < i;) r = Math.max(r, t(e[u]));
            return 1 + r
        }

        function e(e, u) {
            var o = r.call(this, e, u);
            return n(o[0], 0, i[0], i[1] / t(o[0])), o
        }
        var r = to.layout.hierarchy(),
            i = [1, 1];
        return e.size = function(n) {
            return arguments.length ? (i = n, e) : i
        }, Kr(e, r)
    }, to.layout.pie = function() {
        function n(o) {
            var a, c = o.length,
                l = o.map(function(e, r) {
                    return +t.call(n, e, r)
                }),
                f = +("function" == typeof r ? r.apply(this, arguments) : r),
                s = ("function" == typeof i ? i.apply(this, arguments) : i) - f,
                h = Math.min(Math.abs(s) / c, +("function" == typeof u ? u.apply(this, arguments) : u)),
                p = h * (0 > s ? -1 : 1),
                g = (s - c * p) / to.sum(l),
                v = to.range(c),
                d = [];
            return null != e && v.sort(e === pc ? function(n, t) {
                return l[t] - l[n]
            } : function(n, t) {
                return e(o[n], o[t])
            }), v.forEach(function(n) {
                d[n] = {
                    data: o[n],
                    value: a = l[n],
                    startAngle: f,
                    endAngle: f += a * g + p,
                    padAngle: h
                }
            }), d
        }
        var t = Number,
            e = pc,
            r = 0,
            i = qo,
            u = 0;
        return n.value = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.sort = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.startAngle = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n.endAngle = function(t) {
            return arguments.length ? (i = t, n) : i
        }, n.padAngle = function(t) {
            return arguments.length ? (u = t, n) : u
        }, n
    };
    var pc = {};
    to.layout.stack = function() {
        function n(a, c) {
            if (!(h = a.length)) return a;
            var l = a.map(function(e, r) {
                    return t.call(n, e, r)
                }),
                f = l.map(function(t) {
                    return t.map(function(t, e) {
                        return [u.call(n, t, e), o.call(n, t, e)]
                    })
                }),
                s = e.call(n, f, c);
            l = to.permute(l, s), f = to.permute(f, s);
            var h, p, g, v, d = r.call(n, f, c),
                y = l[0].length;
            for (g = 0; y > g; ++g)
                for (i.call(n, l[0][g], v = d[g], f[0][g][1]), p = 1; h > p; ++p) i.call(n, l[p][g], v += f[p - 1][g][1], f[p][g][1]);
            return a
        }
        var t = m,
            e = ci,
            r = li,
            i = ai,
            u = ui,
            o = oi;
        return n.values = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.order = function(t) {
            return arguments.length ? (e = "function" == typeof t ? t : gc.get(t) || ci, n) : e
        }, n.offset = function(t) {
            return arguments.length ? (r = "function" == typeof t ? t : vc.get(t) || li, n) : r
        }, n.x = function(t) {
            return arguments.length ? (u = t, n) : u
        }, n.y = function(t) {
            return arguments.length ? (o = t, n) : o
        }, n.out = function(t) {
            return arguments.length ? (i = t, n) : i
        }, n
    };
    var gc = to.map({
            "inside-out": function(n) {
                var t, e, r = n.length,
                    i = n.map(fi),
                    u = n.map(si),
                    o = to.range(r).sort(function(n, t) {
                        return i[n] - i[t]
                    }),
                    a = 0,
                    c = 0,
                    l = [],
                    f = [];
                for (t = 0; r > t; ++t) e = o[t], c > a ? (a += u[e], l.push(e)) : (c += u[e], f.push(e));
                return f.reverse().concat(l)
            },
            reverse: function(n) {
                return to.range(n.length).reverse()
            },
            default: ci
        }),
        vc = to.map({
            silhouette: function(n) {
                var t, e, r, i = n.length,
                    u = n[0].length,
                    o = [],
                    a = 0,
                    c = [];
                for (e = 0; u > e; ++e) {
                    for (t = 0, r = 0; i > t; t++) r += n[t][e][1];
                    r > a && (a = r), o.push(r)
                }
                for (e = 0; u > e; ++e) c[e] = (a - o[e]) / 2;
                return c
            },
            wiggle: function(n) {
                var t, e, r, i, u, o, a, c, l, f = n.length,
                    s = n[0],
                    h = s.length,
                    p = [];
                for (p[0] = c = l = 0, e = 1; h > e; ++e) {
                    for (t = 0, i = 0; f > t; ++t) i += n[t][e][1];
                    for (t = 0, u = 0, a = s[e][0] - s[e - 1][0]; f > t; ++t) {
                        for (r = 0, o = (n[t][e][1] - n[t][e - 1][1]) / (2 * a); t > r; ++r) o += (n[r][e][1] - n[r][e - 1][1]) / a;
                        u += o * n[t][e][1]
                    }
                    p[e] = c -= i ? u / i * a : 0, l > c && (l = c)
                }
                for (e = 0; h > e; ++e) p[e] -= l;
                return p
            },
            expand: function(n) {
                var t, e, r, i = n.length,
                    u = n[0].length,
                    o = 1 / i,
                    a = [];
                for (e = 0; u > e; ++e) {
                    for (t = 0, r = 0; i > t; t++) r += n[t][e][1];
                    if (r)
                        for (t = 0; i > t; t++) n[t][e][1] /= r;
                    else
                        for (t = 0; i > t; t++) n[t][e][1] = o
                }
                for (e = 0; u > e; ++e) a[e] = 0;
                return a
            },
            zero: li
        });
    to.layout.histogram = function() {
        function n(n, u) {
            for (var o, a, c = [], l = n.map(e, this), f = r.call(this, l, u), s = i.call(this, f, l, u), u = -1, h = l.length, p = s.length - 1, g = t ? 1 : 1 / h; ++u < p;) o = c[u] = [], o.dx = s[u + 1] - (o.x = s[u]), o.y = 0;
            if (p > 0)
                for (u = -1; ++u < h;) a = l[u], a >= f[0] && a <= f[1] && (o = c[to.bisect(s, a, 1, p) - 1], o.y += g, o.push(n[u]));
            return c
        }
        var t = !0,
            e = Number,
            r = vi,
            i = pi;
        return n.value = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.range = function(t) {
            return arguments.length ? (r = En(t), n) : r
        }, n.bins = function(t) {
            return arguments.length ? (i = "number" == typeof t ? function(n) {
                return gi(n, t)
            } : En(t), n) : i
        }, n.frequency = function(e) {
            return arguments.length ? (t = !!e, n) : t
        }, n
    }, to.layout.pack = function() {
        function n(n, u) {
            var o = e.call(this, n, u),
                a = o[0],
                c = i[0],
                l = i[1],
                f = null == t ? Math.sqrt : "function" == typeof t ? t : function() {
                    return t
                };
            if (a.x = a.y = 0, ni(a, function(n) {
                    n.r = +f(n.value)
                }), ni(a, xi), r) {
                var s = r * (t ? 1 : Math.max(2 * a.r / c, 2 * a.r / l)) / 2;
                ni(a, function(n) {
                    n.r += s
                }), ni(a, xi), ni(a, function(n) {
                    n.r -= s
                })
            }
            return wi(a, c / 2, l / 2, t ? 1 : 1 / Math.max(2 * a.r / c, 2 * a.r / l)), o
        }
        var t, e = to.layout.hierarchy().sort(di),
            r = 0,
            i = [1, 1];
        return n.size = function(t) {
            return arguments.length ? (i = t, n) : i
        }, n.radius = function(e) {
            return arguments.length ? (t = null == e || "function" == typeof e ? e : +e, n) : t
        }, n.padding = function(t) {
            return arguments.length ? (r = +t, n) : r
        }, Kr(n, e)
    }, to.layout.tree = function() {
        function n(n, i) {
            var f = o.call(this, n, i),
                s = f[0],
                h = t(s);
            if (ni(h, e), h.parent.m = -h.z, Qr(h, r), l) Qr(s, u);
            else {
                var p = s,
                    g = s,
                    v = s;
                Qr(s, function(n) {
                    n.x < p.x && (p = n), n.x > g.x && (g = n), n.depth > v.depth && (v = n)
                });
                var d = a(p, g) / 2 - p.x,
                    y = c[0] / (g.x + a(g, p) / 2 + d),
                    m = c[1] / (v.depth || 1);
                Qr(s, function(n) {
                    n.x = (n.x + d) * y, n.y = n.depth * m
                })
            }
            return f
        }

        function t(n) {
            for (var t, e = {
                    A: null,
                    children: [n]
                }, r = [e]; null != (t = r.pop());)
                for (var i, u = t.children, o = 0, a = u.length; a > o; ++o) r.push((u[o] = i = {
                    _: u[o],
                    parent: t,
                    children: (i = u[o].children) && i.slice() || [],
                    A: null,
                    a: null,
                    z: 0,
                    m: 0,
                    c: 0,
                    s: 0,
                    t: null,
                    i: o
                }).a = i);
            return e.children[0]
        }

        function e(n) {
            var t = n.children,
                e = n.parent.children,
                r = n.i ? e[n.i - 1] : null;
            if (t.length) {
                Ci(n);
                var u = (t[0].z + t[t.length - 1].z) / 2;
                r ? (n.z = r.z + a(n._, r._), n.m = n.z - u) : n.z = u
            } else r && (n.z = r.z + a(n._, r._));
            n.parent.A = i(n, r, n.parent.A || e[0])
        }

        function r(n) {
            n._.x = n.z + n.parent.m, n.m += n.parent.m
        }

        function i(n, t, e) {
            if (t) {
                for (var r, i = n, u = n, o = t, c = i.parent.children[0], l = i.m, f = u.m, s = o.m, h = c.m; o = Ei(o), i = Ni(i), o && i;) c = Ni(c), u = Ei(u), u.a = n, r = o.z + s - i.z - l + a(o._, i._), r > 0 && (Ai(zi(o, n, e), n, r), l += r, f += r), s += o.m, l += i.m, h += c.m, f += u.m;
                o && !Ei(u) && (u.t = o, u.m += s - f), i && !Ni(c) && (c.t = i, c.m += l - h, e = n)
            }
            return e
        }

        function u(n) {
            n.x *= c[0], n.y = n.depth * c[1]
        }
        var o = to.layout.hierarchy().sort(null).value(null),
            a = ki,
            c = [1, 1],
            l = null;
        return n.separation = function(t) {
            return arguments.length ? (a = t, n) : a
        }, n.size = function(t) {
            return arguments.length ? (l = null == (c = t) ? u : null, n) : l ? null : c
        }, n.nodeSize = function(t) {
            return arguments.length ? (l = null == (c = t) ? null : u, n) : l ? c : null
        }, Kr(n, o)
    }, to.layout.cluster = function() {
        function n(n, u) {
            var o, a = t.call(this, n, u),
                c = a[0],
                l = 0;
            ni(c, function(n) {
                var t = n.children;
                t && t.length ? (n.x = Li(t), n.y = qi(t)) : (n.x = o ? l += e(n, o) : 0, n.y = 0, o = n)
            });
            var f = Ti(c),
                s = Ri(c),
                h = f.x - e(f, s) / 2,
                p = s.x + e(s, f) / 2;
            return ni(c, i ? function(n) {
                n.x = (n.x - c.x) * r[0], n.y = (c.y - n.y) * r[1]
            } : function(n) {
                n.x = (n.x - h) / (p - h) * r[0], n.y = (1 - (c.y ? n.y / c.y : 1)) * r[1]
            }), a
        }
        var t = to.layout.hierarchy().sort(null).value(null),
            e = ki,
            r = [1, 1],
            i = !1;
        return n.separation = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.size = function(t) {
            return arguments.length ? (i = null == (r = t), n) : i ? null : r
        }, n.nodeSize = function(t) {
            return arguments.length ? (i = null != (r = t), n) : i ? r : null
        }, Kr(n, t)
    }, to.layout.treemap = function() {
        function n(n, t) {
            for (var e, r, i = -1, u = n.length; ++i < u;) r = (e = n[i]).value * (0 > t ? 0 : t), e.area = isNaN(r) || 0 >= r ? 0 : r
        }

        function t(e) {
            var u = e.children;
            if (u && u.length) {
                var o, a, c, l = s(e),
                    f = [],
                    h = u.slice(),
                    g = 1 / 0,
                    v = "slice" === p ? l.dx : "dice" === p ? l.dy : "slice-dice" === p ? 1 & e.depth ? l.dy : l.dx : Math.min(l.dx, l.dy);
                for (n(h, l.dx * l.dy / e.value), f.area = 0;
                    (c = h.length) > 0;) f.push(o = h[c - 1]), f.area += o.area, "squarify" !== p || (a = r(f, v)) <= g ? (h.pop(), g = a) : (f.area -= f.pop().area, i(f, v, l, !1), v = Math.min(l.dx, l.dy), f.length = f.area = 0, g = 1 / 0);
                f.length && (i(f, v, l, !0), f.length = f.area = 0), u.forEach(t)
            }
        }

        function e(t) {
            var r = t.children;
            if (r && r.length) {
                var u, o = s(t),
                    a = r.slice(),
                    c = [];
                for (n(a, o.dx * o.dy / t.value), c.area = 0; u = a.pop();) c.push(u), c.area += u.area, null != u.z && (i(c, u.z ? o.dx : o.dy, o, !a.length), c.length = c.area = 0);
                r.forEach(e)
            }
        }

        function r(n, t) {
            for (var e, r = n.area, i = 0, u = 1 / 0, o = -1, a = n.length; ++o < a;)(e = n[o].area) && (u > e && (u = e), e > i && (i = e));
            return r *= r, t *= t, r ? Math.max(t * i * g / r, r / (t * u * g)) : 1 / 0
        }

        function i(n, t, e, r) {
            var i, u = -1,
                o = n.length,
                a = e.x,
                l = e.y,
                f = t ? c(n.area / t) : 0;
            if (t == e.dx) {
                for ((r || f > e.dy) && (f = e.dy); ++u < o;) i = n[u], i.x = a, i.y = l, i.dy = f, a += i.dx = Math.min(e.x + e.dx - a, f ? c(i.area / f) : 0);
                i.z = !0, i.dx += e.x + e.dx - a, e.y += f, e.dy -= f
            } else {
                for ((r || f > e.dx) && (f = e.dx); ++u < o;) i = n[u], i.x = a, i.y = l, i.dx = f, l += i.dy = Math.min(e.y + e.dy - l, f ? c(i.area / f) : 0);
                i.z = !1, i.dy += e.y + e.dy - l, e.x += f, e.dx -= f
            }
        }

        function u(r) {
            var i = o || a(r),
                u = i[0];
            return u.x = 0, u.y = 0, u.dx = l[0],
                u.dy = l[1], o && a.revalue(u), n([u], u.dx * u.dy / u.value), (o ? e : t)(u), h && (o = i), i
        }
        var o, a = to.layout.hierarchy(),
            c = Math.round,
            l = [1, 1],
            f = null,
            s = Di,
            h = !1,
            p = "squarify",
            g = .5 * (1 + Math.sqrt(5));
        return u.size = function(n) {
            return arguments.length ? (l = n, u) : l
        }, u.padding = function(n) {
            function t(t) {
                var e = n.call(u, t, t.depth);
                return null == e ? Di(t) : Pi(t, "number" == typeof e ? [e, e, e, e] : e)
            }

            function e(t) {
                return Pi(t, n)
            }
            if (!arguments.length) return f;
            var r;
            return s = null == (f = n) ? Di : "function" == (r = typeof n) ? t : "number" === r ? (n = [n, n, n, n], e) : e, u
        }, u.round = function(n) {
            return arguments.length ? (c = n ? Math.round : Number, u) : c != Number
        }, u.sticky = function(n) {
            return arguments.length ? (h = n, o = null, u) : h
        }, u.ratio = function(n) {
            return arguments.length ? (g = n, u) : g
        }, u.mode = function(n) {
            return arguments.length ? (p = n + "", u) : p
        }, Kr(u, a)
    }, to.random = {
        normal: function(n, t) {
            var e = arguments.length;
            return 2 > e && (t = 1), 1 > e && (n = 0),
                function() {
                    var e, r, i;
                    do e = 2 * Math.random() - 1, r = 2 * Math.random() - 1, i = e * e + r * r; while (!i || i > 1);
                    return n + t * e * Math.sqrt(-2 * Math.log(i) / i)
                }
        },
        logNormal: function() {
            var n = to.random.normal.apply(to, arguments);
            return function() {
                return Math.exp(n())
            }
        },
        bates: function(n) {
            var t = to.random.irwinHall(n);
            return function() {
                return t() / n
            }
        },
        irwinHall: function(n) {
            return function() {
                for (var t = 0, e = 0; n > e; e++) t += Math.random();
                return t
            }
        }
    }, to.scale = {};
    var dc = {
        floor: m,
        ceil: m
    };
    to.scale.linear = function() {
        return Yi([0, 1], [0, 1], mr, !1)
    };
    var yc = {
        s: 1,
        g: 1,
        p: 1,
        r: 1,
        e: 1
    };
    to.scale.log = function() {
        return Gi(to.scale.linear().domain([0, 1]), 10, !0, [1, 10])
    };
    var mc = to.format(".0e"),
        Mc = {
            floor: function(n) {
                return -Math.ceil(-n)
            },
            ceil: function(n) {
                return -Math.floor(-n)
            }
        };
    to.scale.pow = function() {
        return Ki(to.scale.linear(), 1, [0, 1])
    }, to.scale.sqrt = function() {
        return to.scale.pow().exponent(.5)
    }, to.scale.ordinal = function() {
        return nu([], {
            t: "range",
            a: [
                []
            ]
        })
    }, to.scale.category10 = function() {
        return to.scale.ordinal().range(xc)
    }, to.scale.category20 = function() {
        return to.scale.ordinal().range(bc)
    }, to.scale.category20b = function() {
        return to.scale.ordinal().range(_c)
    }, to.scale.category20c = function() {
        return to.scale.ordinal().range(wc)
    };
    var xc = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(xn),
        bc = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(xn),
        _c = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(xn),
        wc = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(xn);
    to.scale.quantile = function() {
        return tu([], [])
    }, to.scale.quantize = function() {
        return eu(0, 1, [0, 1])
    }, to.scale.threshold = function() {
        return ru([.5], [0, 1])
    }, to.scale.identity = function() {
        return iu([0, 1])
    }, to.svg = {}, to.svg.arc = function() {
        function n() {
            var n = Math.max(0, +e.apply(this, arguments)),
                l = Math.max(0, +r.apply(this, arguments)),
                f = o.apply(this, arguments) - To,
                s = a.apply(this, arguments) - To,
                h = Math.abs(s - f),
                p = f > s ? 0 : 1;
            if (n > l && (g = l, l = n, n = g), h >= Lo) return t(l, p) + (n ? t(n, 1 - p) : "") + "Z";
            var g, v, d, y, m, M, x, b, _, w, S, k, N = 0,
                E = 0,
                A = [];
            if ((y = (+c.apply(this, arguments) || 0) / 2) && (d = u === Sc ? Math.sqrt(n * n + l * l) : +u.apply(this, arguments), p || (E *= -1), l && (E = tn(d / l * Math.sin(y))), n && (N = tn(d / n * Math.sin(y)))), l) {
                m = l * Math.cos(f + E), M = l * Math.sin(f + E), x = l * Math.cos(s - E), b = l * Math.sin(s - E);
                var C = Math.abs(s - f - 2 * E) <= zo ? 0 : 1;
                if (E && su(m, M, x, b) === p ^ C) {
                    var z = (f + s) / 2;
                    m = l * Math.cos(z), M = l * Math.sin(z), x = b = null
                }
            } else m = M = 0;
            if (n) {
                _ = n * Math.cos(s - N), w = n * Math.sin(s - N), S = n * Math.cos(f + N), k = n * Math.sin(f + N);
                var q = Math.abs(f - s + 2 * N) <= zo ? 0 : 1;
                if (N && su(_, w, S, k) === 1 - p ^ q) {
                    var L = (f + s) / 2;
                    _ = n * Math.cos(L), w = n * Math.sin(L), S = k = null
                }
            } else _ = w = 0;
            if ((g = Math.min(Math.abs(l - n) / 2, +i.apply(this, arguments))) > .001) {
                v = l > n ^ p ? 0 : 1;
                var T = null == S ? [_, w] : null == x ? [m, M] : Te([m, M], [S, k], [x, b], [_, w]),
                    R = m - T[0],
                    D = M - T[1],
                    P = x - T[0],
                    U = b - T[1],
                    j = 1 / Math.sin(Math.acos((R * P + D * U) / (Math.sqrt(R * R + D * D) * Math.sqrt(P * P + U * U))) / 2),
                    F = Math.sqrt(T[0] * T[0] + T[1] * T[1]);
                if (null != x) {
                    var H = Math.min(g, (l - F) / (j + 1)),
                        O = hu(null == S ? [_, w] : [S, k], [m, M], l, H, p),
                        I = hu([x, b], [_, w], l, H, p);
                    g === H ? A.push("M", O[0], "A", H, ",", H, " 0 0,", v, " ", O[1], "A", l, ",", l, " 0 ", 1 - p ^ su(O[1][0], O[1][1], I[1][0], I[1][1]), ",", p, " ", I[1], "A", H, ",", H, " 0 0,", v, " ", I[0]) : A.push("M", O[0], "A", H, ",", H, " 0 1,", v, " ", I[0])
                } else A.push("M", m, ",", M);
                if (null != S) {
                    var Y = Math.min(g, (n - F) / (j - 1)),
                        Z = hu([m, M], [S, k], n, -Y, p),
                        V = hu([_, w], null == x ? [m, M] : [x, b], n, -Y, p);
                    g === Y ? A.push("L", V[0], "A", Y, ",", Y, " 0 0,", v, " ", V[1], "A", n, ",", n, " 0 ", p ^ su(V[1][0], V[1][1], Z[1][0], Z[1][1]), ",", 1 - p, " ", Z[1], "A", Y, ",", Y, " 0 0,", v, " ", Z[0]) : A.push("L", V[0], "A", Y, ",", Y, " 0 0,", v, " ", Z[0])
                } else A.push("L", _, ",", w)
            } else A.push("M", m, ",", M), null != x && A.push("A", l, ",", l, " 0 ", C, ",", p, " ", x, ",", b), A.push("L", _, ",", w), null != S && A.push("A", n, ",", n, " 0 ", q, ",", 1 - p, " ", S, ",", k);
            return A.push("Z"), A.join("")
        }

        function t(n, t) {
            return "M0," + n + "A" + n + "," + n + " 0 1," + t + " 0," + -n + "A" + n + "," + n + " 0 1," + t + " 0," + n
        }
        var e = ou,
            r = au,
            i = uu,
            u = Sc,
            o = cu,
            a = lu,
            c = fu;
        return n.innerRadius = function(t) {
            return arguments.length ? (e = En(t), n) : e
        }, n.outerRadius = function(t) {
            return arguments.length ? (r = En(t), n) : r
        }, n.cornerRadius = function(t) {
            return arguments.length ? (i = En(t), n) : i
        }, n.padRadius = function(t) {
            return arguments.length ? (u = t == Sc ? Sc : En(t), n) : u
        }, n.startAngle = function(t) {
            return arguments.length ? (o = En(t), n) : o
        }, n.endAngle = function(t) {
            return arguments.length ? (a = En(t), n) : a
        }, n.padAngle = function(t) {
            return arguments.length ? (c = En(t), n) : c
        }, n.centroid = function() {
            var n = (+e.apply(this, arguments) + +r.apply(this, arguments)) / 2,
                t = (+o.apply(this, arguments) + +a.apply(this, arguments)) / 2 - To;
            return [Math.cos(t) * n, Math.sin(t) * n]
        }, n
    };
    var Sc = "auto";
    to.svg.line = function() {
        return pu(m)
    };
    var kc = to.map({
        linear: gu,
        "linear-closed": vu,
        step: du,
        "step-before": yu,
        "step-after": mu,
        basis: Su,
        "basis-open": ku,
        "basis-closed": Nu,
        bundle: Eu,
        cardinal: bu,
        "cardinal-open": Mu,
        "cardinal-closed": xu,
        monotone: Tu
    });
    kc.forEach(function(n, t) {
        t.key = n, t.closed = /-closed$/.test(n)
    });
    var Nc = [0, 2 / 3, 1 / 3, 0],
        Ec = [0, 1 / 3, 2 / 3, 0],
        Ac = [0, 1 / 6, 2 / 3, 1 / 6];
    to.svg.line.radial = function() {
        var n = pu(Ru);
        return n.radius = n.x, delete n.x, n.angle = n.y, delete n.y, n
    }, yu.reverse = mu, mu.reverse = yu, to.svg.area = function() {
        return Du(m)
    }, to.svg.area.radial = function() {
        var n = Du(Ru);
        return n.radius = n.x, delete n.x, n.innerRadius = n.x0, delete n.x0, n.outerRadius = n.x1, delete n.x1, n.angle = n.y, delete n.y, n.startAngle = n.y0, delete n.y0, n.endAngle = n.y1, delete n.y1, n
    }, to.svg.chord = function() {
        function n(n, a) {
            var c = t(this, u, n, a),
                l = t(this, o, n, a);
            return "M" + c.p0 + r(c.r, c.p1, c.a1 - c.a0) + (e(c, l) ? i(c.r, c.p1, c.r, c.p0) : i(c.r, c.p1, l.r, l.p0) + r(l.r, l.p1, l.a1 - l.a0) + i(l.r, l.p1, c.r, c.p0)) + "Z"
        }

        function t(n, t, e, r) {
            var i = t.call(n, e, r),
                u = a.call(n, i, r),
                o = c.call(n, i, r) - To,
                f = l.call(n, i, r) - To;
            return {
                r: u,
                a0: o,
                a1: f,
                p0: [u * Math.cos(o), u * Math.sin(o)],
                p1: [u * Math.cos(f), u * Math.sin(f)]
            }
        }

        function e(n, t) {
            return n.a0 == t.a0 && n.a1 == t.a1
        }

        function r(n, t, e) {
            return "A" + n + "," + n + " 0 " + +(e > zo) + ",1 " + t
        }

        function i(n, t, e, r) {
            return "Q 0,0 " + r
        }
        var u = me,
            o = Me,
            a = Pu,
            c = cu,
            l = lu;
        return n.radius = function(t) {
            return arguments.length ? (a = En(t), n) : a
        }, n.source = function(t) {
            return arguments.length ? (u = En(t), n) : u
        }, n.target = function(t) {
            return arguments.length ? (o = En(t), n) : o
        }, n.startAngle = function(t) {
            return arguments.length ? (c = En(t), n) : c
        }, n.endAngle = function(t) {
            return arguments.length ? (l = En(t), n) : l
        }, n
    }, to.svg.diagonal = function() {
        function n(n, i) {
            var u = t.call(this, n, i),
                o = e.call(this, n, i),
                a = (u.y + o.y) / 2,
                c = [u, {
                    x: u.x,
                    y: a
                }, {
                    x: o.x,
                    y: a
                }, o];
            return c = c.map(r), "M" + c[0] + "C" + c[1] + " " + c[2] + " " + c[3]
        }
        var t = me,
            e = Me,
            r = Uu;
        return n.source = function(e) {
            return arguments.length ? (t = En(e), n) : t
        }, n.target = function(t) {
            return arguments.length ? (e = En(t), n) : e
        }, n.projection = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n
    }, to.svg.diagonal.radial = function() {
        var n = to.svg.diagonal(),
            t = Uu,
            e = n.projection;
        return n.projection = function(n) {
            return arguments.length ? e(ju(t = n)) : t
        }, n
    }, to.svg.symbol = function() {
        function n(n, r) {
            return (Cc.get(t.call(this, n, r)) || Ou)(e.call(this, n, r))
        }
        var t = Hu,
            e = Fu;
        return n.type = function(e) {
            return arguments.length ? (t = En(e), n) : t
        }, n.size = function(t) {
            return arguments.length ? (e = En(t), n) : e
        }, n
    };
    var Cc = to.map({
        circle: Ou,
        cross: function(n) {
            var t = Math.sqrt(n / 5) / 2;
            return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z"
        },
        diamond: function(n) {
            var t = Math.sqrt(n / (2 * qc)),
                e = t * qc;
            return "M0," + -t + "L" + e + ",0 0," + t + " " + -e + ",0Z"
        },
        square: function(n) {
            var t = Math.sqrt(n) / 2;
            return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z"
        },
        "triangle-down": function(n) {
            var t = Math.sqrt(n / zc),
                e = t * zc / 2;
            return "M0," + e + "L" + t + "," + -e + " " + -t + "," + -e + "Z"
        },
        "triangle-up": function(n) {
            var t = Math.sqrt(n / zc),
                e = t * zc / 2;
            return "M0," + -e + "L" + t + "," + e + " " + -t + "," + e + "Z"
        }
    });
    to.svg.symbolTypes = Cc.keys();
    var zc = Math.sqrt(3),
        qc = Math.tan(30 * Ro);
    bo.transition = function(n) {
        for (var t, e, r = Lc || ++Pc, i = Xu(n), u = [], o = Tc || {
                time: Date.now(),
                ease: kr,
                delay: 0,
                duration: 250
            }, a = -1, c = this.length; ++a < c;) {
            u.push(t = []);
            for (var l = this[a], f = -1, s = l.length; ++f < s;)(e = l[f]) && $u(e, f, i, r, o), t.push(e)
        }
        return Yu(u, i, r)
    }, bo.interrupt = function(n) {
        return this.each(null == n ? Rc : Iu(Xu(n)))
    };
    var Lc, Tc, Rc = Iu(Xu()),
        Dc = [],
        Pc = 0;
    Dc.call = bo.call, Dc.empty = bo.empty, Dc.node = bo.node, Dc.size = bo.size, to.transition = function(n, t) {
        return n && n.transition ? Lc ? n.transition(t) : n : to.selection().transition(n)
    }, to.transition.prototype = Dc, Dc.select = function(n) {
        var t, e, r, i = this.id,
            u = this.namespace,
            o = [];
        n = A(n);
        for (var a = -1, c = this.length; ++a < c;) {
            o.push(t = []);
            for (var l = this[a], f = -1, s = l.length; ++f < s;)(r = l[f]) && (e = n.call(r, r.__data__, f, a)) ? ("__data__" in r && (e.__data__ = r.__data__), $u(e, f, u, i, r[u][i]), t.push(e)) : t.push(null)
        }
        return Yu(o, u, i)
    }, Dc.selectAll = function(n) {
        var t, e, r, i, u, o = this.id,
            a = this.namespace,
            c = [];
        n = C(n);
        for (var l = -1, f = this.length; ++l < f;)
            for (var s = this[l], h = -1, p = s.length; ++h < p;)
                if (r = s[h]) {
                    u = r[a][o], e = n.call(r, r.__data__, h, l), c.push(t = []);
                    for (var g = -1, v = e.length; ++g < v;)(i = e[g]) && $u(i, g, a, o, u), t.push(i)
                } return Yu(c, a, o)
    }, Dc.filter = function(n) {
        var t, e, r, i = [];
        "function" != typeof n && (n = O(n));
        for (var u = 0, o = this.length; o > u; u++) {
            i.push(t = []);
            for (var e = this[u], a = 0, c = e.length; c > a; a++)(r = e[a]) && n.call(r, r.__data__, a, u) && t.push(r)
        }
        return Yu(i, this.namespace, this.id)
    }, Dc.tween = function(n, t) {
        var e = this.id,
            r = this.namespace;
        return arguments.length < 2 ? this.node()[r][e].tween.get(n) : Y(this, null == t ? function(t) {
            t[r][e].tween.remove(n)
        } : function(i) {
            i[r][e].tween.set(n, t)
        })
    }, Dc.attr = function(n, t) {
        function e() {
            this.removeAttribute(a)
        }

        function r() {
            this.removeAttributeNS(a.space, a.local)
        }

        function i(n) {
            return null == n ? e : (n += "", function() {
                var t, e = this.getAttribute(a);
                return e !== n && (t = o(e, n), function(n) {
                    this.setAttribute(a, t(n))
                })
            })
        }

        function u(n) {
            return null == n ? r : (n += "", function() {
                var t, e = this.getAttributeNS(a.space, a.local);
                return e !== n && (t = o(e, n), function(n) {
                    this.setAttributeNS(a.space, a.local, t(n))
                })
            })
        }
        if (arguments.length < 2) {
            for (t in n) this.attr(t, n[t]);
            return this
        }
        var o = "transform" == n ? Or : mr,
            a = to.ns.qualify(n);
        return Zu(this, "attr." + n, t, a.local ? u : i)
    }, Dc.attrTween = function(n, t) {
        function e(n, e) {
            var r = t.call(this, n, e, this.getAttribute(i));
            return r && function(n) {
                this.setAttribute(i, r(n))
            }
        }

        function r(n, e) {
            var r = t.call(this, n, e, this.getAttributeNS(i.space, i.local));
            return r && function(n) {
                this.setAttributeNS(i.space, i.local, r(n))
            }
        }
        var i = to.ns.qualify(n);
        return this.tween("attr." + n, i.local ? r : e)
    }, Dc.style = function(n, e, r) {
        function i() {
            this.style.removeProperty(n)
        }

        function u(e) {
            return null == e ? i : (e += "", function() {
                var i, u = t(this).getComputedStyle(this, null).getPropertyValue(n);
                return u !== e && (i = mr(u, e), function(t) {
                    this.style.setProperty(n, i(t), r)
                })
            })
        }
        var o = arguments.length;
        if (3 > o) {
            if ("string" != typeof n) {
                2 > o && (e = "");
                for (r in n) this.style(r, n[r], e);
                return this
            }
            r = ""
        }
        return Zu(this, "style." + n, e, u)
    }, Dc.styleTween = function(n, e, r) {
        function i(i, u) {
            var o = e.call(this, i, u, t(this).getComputedStyle(this, null).getPropertyValue(n));
            return o && function(t) {
                this.style.setProperty(n, o(t), r)
            }
        }
        return arguments.length < 3 && (r = ""), this.tween("style." + n, i)
    }, Dc.text = function(n) {
        return Zu(this, "text", n, Vu)
    }, Dc.remove = function() {
        var n = this.namespace;
        return this.each("end.transition", function() {
            var t;
            this[n].count < 2 && (t = this.parentNode) && t.removeChild(this)
        })
    }, Dc.ease = function(n) {
        var t = this.id,
            e = this.namespace;
        return arguments.length < 1 ? this.node()[e][t].ease : ("function" != typeof n && (n = to.ease.apply(to, arguments)), Y(this, function(r) {
            r[e][t].ease = n
        }))
    }, Dc.delay = function(n) {
        var t = this.id,
            e = this.namespace;
        return arguments.length < 1 ? this.node()[e][t].delay : Y(this, "function" == typeof n ? function(r, i, u) {
            r[e][t].delay = +n.call(r, r.__data__, i, u)
        } : (n = +n, function(r) {
            r[e][t].delay = n
        }))
    }, Dc.duration = function(n) {
        var t = this.id,
            e = this.namespace;
        return arguments.length < 1 ? this.node()[e][t].duration : Y(this, "function" == typeof n ? function(r, i, u) {
            r[e][t].duration = Math.max(1, n.call(r, r.__data__, i, u))
        } : (n = Math.max(1, n), function(r) {
            r[e][t].duration = n
        }))
    }, Dc.each = function(n, t) {
        var e = this.id,
            r = this.namespace;
        if (arguments.length < 2) {
            var i = Tc,
                u = Lc;
            try {
                Lc = e, Y(this, function(t, i, u) {
                    Tc = t[r][e], n.call(t, t.__data__, i, u)
                })
            } finally {
                Tc = i, Lc = u
            }
        } else Y(this, function(i) {
            var u = i[r][e];
            (u.event || (u.event = to.dispatch("start", "end", "interrupt"))).on(n, t)
        });
        return this
    }, Dc.transition = function() {
        for (var n, t, e, r, i = this.id, u = ++Pc, o = this.namespace, a = [], c = 0, l = this.length; l > c; c++) {
            a.push(n = []);
            for (var t = this[c], f = 0, s = t.length; s > f; f++)(e = t[f]) && (r = e[o][i], $u(e, f, o, u, {
                time: r.time,
                ease: r.ease,
                delay: r.delay + r.duration,
                duration: r.duration
            })), n.push(e)
        }
        return Yu(a, o, u)
    }, to.svg.axis = function() {
        function n(n) {
            n.each(function() {
                var n, l = to.select(this),
                    f = this.__chart__ || e,
                    s = this.__chart__ = e.copy(),
                    h = null == c ? s.ticks ? s.ticks.apply(s, a) : s.domain() : c,
                    p = null == t ? s.tickFormat ? s.tickFormat.apply(s, a) : m : t,
                    g = l.selectAll(".tick").data(h, s),
                    v = g.enter().insert("g", ".domain").attr("class", "tick").style("opacity", Ao),
                    d = to.transition(g.exit()).style("opacity", Ao).remove(),
                    y = to.transition(g.order()).style("opacity", 1),
                    M = Math.max(i, 0) + o,
                    x = ji(s),
                    b = l.selectAll(".domain").data([0]),
                    _ = (b.enter().append("path").attr("class", "domain"), to.transition(b));
                v.append("line"), v.append("text");
                var w, S, k, N, E = v.select("line"),
                    A = y.select("line"),
                    C = g.select("text").text(p),
                    z = v.select("text"),
                    q = y.select("text"),
                    L = "top" === r || "left" === r ? -1 : 1;
                if ("bottom" === r || "top" === r ? (n = Bu, w = "x", k = "y", S = "x2", N = "y2", C.attr("dy", 0 > L ? "0em" : ".71em").style("text-anchor", "middle"), _.attr("d", "M" + x[0] + "," + L * u + "V0H" + x[1] + "V" + L * u)) : (n = Wu, w = "y", k = "x", S = "y2", N = "x2", C.attr("dy", ".32em").style("text-anchor", 0 > L ? "end" : "start"), _.attr("d", "M" + L * u + "," + x[0] + "H0V" + x[1] + "H" + L * u)), E.attr(N, L * i), z.attr(k, L * M), A.attr(S, 0).attr(N, L * i), q.attr(w, 0).attr(k, L * M), s.rangeBand) {
                    var T = s,
                        R = T.rangeBand() / 2;
                    f = s = function(n) {
                        return T(n) + R
                    }
                } else f.rangeBand ? f = s : d.call(n, s, f);
                v.call(n, f, s), y.call(n, s, s)
            })
        }
        var t, e = to.scale.linear(),
            r = Uc,
            i = 6,
            u = 6,
            o = 3,
            a = [10],
            c = null;
        return n.scale = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.orient = function(t) {
            return arguments.length ? (r = t in jc ? t + "" : Uc, n) : r
        }, n.ticks = function() {
            return arguments.length ? (a = arguments, n) : a
        }, n.tickValues = function(t) {
            return arguments.length ? (c = t, n) : c
        }, n.tickFormat = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.tickSize = function(t) {
            var e = arguments.length;
            return e ? (i = +t, u = +arguments[e - 1], n) : i
        }, n.innerTickSize = function(t) {
            return arguments.length ? (i = +t, n) : i
        }, n.outerTickSize = function(t) {
            return arguments.length ? (u = +t, n) : u
        }, n.tickPadding = function(t) {
            return arguments.length ? (o = +t, n) : o
        }, n.tickSubdivide = function() {
            return arguments.length && n
        }, n
    };
    var Uc = "bottom",
        jc = {
            top: 1,
            right: 1,
            bottom: 1,
            left: 1
        };
    to.svg.brush = function() {
        function n(t) {
            t.each(function() {
                var t = to.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", u).on("touchstart.brush", u),
                    o = t.selectAll(".background").data([0]);
                o.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), t.selectAll(".extent").data([0]).enter().append("rect").attr("class", "extent").style("cursor", "move");
                var a = t.selectAll(".resize").data(v, m);
                a.exit().remove(), a.enter().append("g").attr("class", function(n) {
                    return "resize " + n
                }).style("cursor", function(n) {
                    return Fc[n]
                }).append("rect").attr("x", function(n) {
                    return /[ew]$/.test(n) ? -3 : null
                }).attr("y", function(n) {
                    return /^[ns]/.test(n) ? -3 : null
                }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), a.style("display", n.empty() ? "none" : null);
                var c, s = to.transition(t),
                    h = to.transition(o);
                l && (c = ji(l), h.attr("x", c[0]).attr("width", c[1] - c[0]), r(s)), f && (c = ji(f), h.attr("y", c[0]).attr("height", c[1] - c[0]), i(s)), e(s)
            })
        }

        function e(n) {
            n.selectAll(".resize").attr("transform", function(n) {
                return "translate(" + s[+/e$/.test(n)] + "," + h[+/^s/.test(n)] + ")"
            })
        }

        function r(n) {
            n.select(".extent").attr("x", s[0]), n.selectAll(".extent,.n>rect,.s>rect").attr("width", s[1] - s[0])
        }

        function i(n) {
            n.select(".extent").attr("y", h[0]), n.selectAll(".extent,.e>rect,.w>rect").attr("height", h[1] - h[0])
        }

        function u() {
            function u() {
                32 == to.event.keyCode && (C || (M = null, q[0] -= s[1], q[1] -= h[1], C = 2), S())
            }

            function v() {
                32 == to.event.keyCode && 2 == C && (q[0] += s[1], q[1] += h[1], C = 0, S())
            }

            function d() {
                var n = to.mouse(b),
                    t = !1;
                x && (n[0] += x[0], n[1] += x[1]), C || (to.event.altKey ? (M || (M = [(s[0] + s[1]) / 2, (h[0] + h[1]) / 2]), q[0] = s[+(n[0] < M[0])], q[1] = h[+(n[1] < M[1])]) : M = null), E && y(n, l, 0) && (r(k), t = !0), A && y(n, f, 1) && (i(k), t = !0), t && (e(k), w({
                    type: "brush",
                    mode: C ? "move" : "resize"
                }))
            }

            function y(n, t, e) {
                var r, i, u = ji(t),
                    c = u[0],
                    l = u[1],
                    f = q[e],
                    v = e ? h : s,
                    d = v[1] - v[0];
                return C && (c -= f, l -= d + f), r = (e ? g : p) ? Math.max(c, Math.min(l, n[e])) : n[e], C ? i = (r += f) + d : (M && (f = Math.max(c, Math.min(l, 2 * M[e] - r))), r > f ? (i = r, r = f) : i = f), v[0] != r || v[1] != i ? (e ? a = null : o = null, v[0] = r, v[1] = i, !0) : void 0
            }

            function m() {
                d(), k.style("pointer-events", "all").selectAll(".resize").style("display", n.empty() ? "none" : null), to.select("body").style("cursor", null), L.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), z(), w({
                    type: "brushend"
                })
            }
            var M, x, b = this,
                _ = to.select(to.event.target),
                w = c.of(b, arguments),
                k = to.select(b),
                N = _.datum(),
                E = !/^(n|s)$/.test(N) && l,
                A = !/^(e|w)$/.test(N) && f,
                C = _.classed("extent"),
                z = W(b),
                q = to.mouse(b),
                L = to.select(t(b)).on("keydown.brush", u).on("keyup.brush", v);
            if (to.event.changedTouches ? L.on("touchmove.brush", d).on("touchend.brush", m) : L.on("mousemove.brush", d).on("mouseup.brush", m), k.interrupt().selectAll("*").interrupt(), C) q[0] = s[0] - q[0], q[1] = h[0] - q[1];
            else if (N) {
                var T = +/w$/.test(N),
                    R = +/^n/.test(N);
                x = [s[1 - T] - q[0], h[1 - R] - q[1]], q[0] = s[T], q[1] = h[R]
            } else to.event.altKey && (M = q.slice());
            k.style("pointer-events", "none").selectAll(".resize").style("display", null), to.select("body").style("cursor", _.style("cursor")), w({
                type: "brushstart"
            }), d()
        }
        var o, a, c = N(n, "brushstart", "brush", "brushend"),
            l = null,
            f = null,
            s = [0, 0],
            h = [0, 0],
            p = !0,
            g = !0,
            v = Hc[0];
        return n.event = function(n) {
            n.each(function() {
                var n = c.of(this, arguments),
                    t = {
                        x: s,
                        y: h,
                        i: o,
                        j: a
                    },
                    e = this.__chart__ || t;
                this.__chart__ = t, Lc ? to.select(this).transition().each("start.brush", function() {
                    o = e.i, a = e.j, s = e.x, h = e.y, n({
                        type: "brushstart"
                    })
                }).tween("brush:brush", function() {
                    var e = Mr(s, t.x),
                        r = Mr(h, t.y);
                    return o = a = null,
                        function(i) {
                            s = t.x = e(i), h = t.y = r(i), n({
                                type: "brush",
                                mode: "resize"
                            })
                        }
                }).each("end.brush", function() {
                    o = t.i, a = t.j, n({
                        type: "brush",
                        mode: "resize"
                    }), n({
                        type: "brushend"
                    })
                }) : (n({
                    type: "brushstart"
                }), n({
                    type: "brush",
                    mode: "resize"
                }), n({
                    type: "brushend"
                }))
            })
        }, n.x = function(t) {
            return arguments.length ? (l = t, v = Hc[!l << 1 | !f], n) : l
        }, n.y = function(t) {
            return arguments.length ? (f = t, v = Hc[!l << 1 | !f], n) : f
        }, n.clamp = function(t) {
            return arguments.length ? (l && f ? (p = !!t[0], g = !!t[1]) : l ? p = !!t : f && (g = !!t), n) : l && f ? [p, g] : l ? p : f ? g : null
        }, n.extent = function(t) {
            var e, r, i, u, c;
            return arguments.length ? (l && (e = t[0], r = t[1], f && (e = e[0], r = r[0]), o = [e, r], l.invert && (e = l(e), r = l(r)), e > r && (c = e, e = r, r = c), (e != s[0] || r != s[1]) && (s = [e, r])), f && (i = t[0], u = t[1], l && (i = i[1], u = u[1]), a = [i, u], f.invert && (i = f(i), u = f(u)), i > u && (c = i, i = u, u = c), (i != h[0] || u != h[1]) && (h = [i, u])), n) : (l && (o ? (e = o[0], r = o[1]) : (e = s[0], r = s[1], l.invert && (e = l.invert(e), r = l.invert(r)), e > r && (c = e, e = r, r = c))), f && (a ? (i = a[0], u = a[1]) : (i = h[0], u = h[1], f.invert && (i = f.invert(i), u = f.invert(u)), i > u && (c = i, i = u, u = c))), l && f ? [
                [e, i],
                [r, u]
            ] : l ? [e, r] : f && [i, u])
        }, n.clear = function() {
            return n.empty() || (s = [0, 0], h = [0, 0], o = a = null), n
        }, n.empty = function() {
            return !!l && s[0] == s[1] || !!f && h[0] == h[1]
        }, to.rebind(n, c, "on")
    };
    var Fc = {
            n: "ns-resize",
            e: "ew-resize",
            s: "ns-resize",
            w: "ew-resize",
            nw: "nwse-resize",
            ne: "nesw-resize",
            se: "nwse-resize",
            sw: "nesw-resize"
        },
        Hc = [
            ["n", "e", "s", "w", "nw", "ne", "se", "sw"],
            ["e", "w"],
            ["n", "s"],
            []
        ],
        Oc = oa.format = ha.timeFormat,
        Ic = Oc.utc,
        Yc = Ic("%Y-%m-%dT%H:%M:%S.%LZ");
    Oc.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? Ju : Yc, Ju.parse = function(n) {
        var t = new Date(n);
        return isNaN(t) ? null : t
    }, Ju.toString = Yc.toString, oa.second = Hn(function(n) {
        return new aa(1e3 * Math.floor(n / 1e3))
    }, function(n, t) {
        n.setTime(n.getTime() + 1e3 * Math.floor(t))
    }, function(n) {
        return n.getSeconds()
    }), oa.seconds = oa.second.range, oa.seconds.utc = oa.second.utc.range, oa.minute = Hn(function(n) {
        return new aa(6e4 * Math.floor(n / 6e4))
    }, function(n, t) {
        n.setTime(n.getTime() + 6e4 * Math.floor(t))
    }, function(n) {
        return n.getMinutes()
    }), oa.minutes = oa.minute.range, oa.minutes.utc = oa.minute.utc.range, oa.hour = Hn(function(n) {
        var t = n.getTimezoneOffset() / 60;
        return new aa(36e5 * (Math.floor(n / 36e5 - t) + t))
    }, function(n, t) {
        n.setTime(n.getTime() + 36e5 * Math.floor(t))
    }, function(n) {
        return n.getHours()
    }), oa.hours = oa.hour.range, oa.hours.utc = oa.hour.utc.range, oa.month = Hn(function(n) {
        return n = oa.day(n), n.setDate(1), n
    }, function(n, t) {
        n.setMonth(n.getMonth() + t)
    }, function(n) {
        return n.getMonth()
    }), oa.months = oa.month.range, oa.months.utc = oa.month.utc.range;
    var Zc = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6],
        Vc = [
            [oa.second, 1],
            [oa.second, 5],
            [oa.second, 15],
            [oa.second, 30],
            [oa.minute, 1],
            [oa.minute, 5],
            [oa.minute, 15],
            [oa.minute, 30],
            [oa.hour, 1],
            [oa.hour, 3],
            [oa.hour, 6],
            [oa.hour, 12],
            [oa.day, 1],
            [oa.day, 2],
            [oa.week, 1],
            [oa.month, 1],
            [oa.month, 3],
            [oa.year, 1]
        ],
        Xc = Oc.multi([
            [".%L", function(n) {
                return n.getMilliseconds()
            }],
            [":%S", function(n) {
                return n.getSeconds()
            }],
            ["%I:%M", function(n) {
                return n.getMinutes()
            }],
            ["%I %p", function(n) {
                return n.getHours()
            }],
            ["%a %d", function(n) {
                return n.getDay() && 1 != n.getDate()
            }],
            ["%b %d", function(n) {
                return 1 != n.getDate()
            }],
            ["%B", function(n) {
                return n.getMonth()
            }],
            ["%Y", Ct]
        ]),
        $c = {
            range: function(n, t, e) {
                return to.range(Math.ceil(n / e) * e, +t, e).map(Ku)
            },
            floor: m,
            ceil: m
        };
    Vc.year = oa.year, oa.scale = function() {
        return Gu(to.scale.linear(), Vc, Xc)
    };
    var Bc = Vc.map(function(n) {
            return [n[0].utc, n[1]]
        }),
        Wc = Ic.multi([
            [".%L", function(n) {
                return n.getUTCMilliseconds()
            }],
            [":%S", function(n) {
                return n.getUTCSeconds()
            }],
            ["%I:%M", function(n) {
                return n.getUTCMinutes()
            }],
            ["%I %p", function(n) {
                return n.getUTCHours()
            }],
            ["%a %d", function(n) {
                return n.getUTCDay() && 1 != n.getUTCDate()
            }],
            ["%b %d", function(n) {
                return 1 != n.getUTCDate()
            }],
            ["%B", function(n) {
                return n.getUTCMonth()
            }],
            ["%Y", Ct]
        ]);
    Bc.year = oa.year.utc, oa.scale.utc = function() {
        return Gu(to.scale.linear(), Bc, Wc)
    }, to.text = An(function(n) {
        return n.responseText
    }), to.json = function(n, t) {
        return Cn(n, "application/json", Qu, t)
    }, to.html = function(n, t) {
        return Cn(n, "text/html", no, t)
    }, to.xml = An(function(n) {
        return n.responseXML
    }), "function" == typeof define && define.amd ? define(to) : "object" == typeof module && module.exports && (module.exports = to), this.d3 = to
}();
! function(t) {
    "use strict";

    function e(t) {
        this.owner = t
    }

    function i(t, e) {
        if (Object.create) e.prototype = Object.create(t.prototype);
        else {
            var i = function() {};
            i.prototype = t.prototype, e.prototype = new i
        }
        return e.prototype.constructor = e, e
    }

    function a(t) {
        var e = this.internal = new n(this);
        e.loadConfig(t), e.init(),
            function t(e, i, a) {
                Object.keys(e).forEach(function(n) {
                    i[n] = e[n].bind(a), Object.keys(e[n]).length > 0 && t(e[n], i[n], a)
                })
            }(o, this, this)
    }

    function n(e) {
        var i = this;
        i.d3 = t.d3 ? t.d3 : "undefined" != typeof require ? require("d3") : void 0, i.api = e, i.config = i.getDefaultConfig(), i.data = {}, i.cache = {}, i.axes = {}
    }

    function r(t) {
        e.call(this, t)
    }

    function s(t, e) {
        function i(t, e) {
            t.attr("transform", function(t) {
                return "translate(" + Math.ceil(e(t) + v) + ", 0)"
            })
        }

        function a(t, e) {
            t.attr("transform", function(t) {
                return "translate(0," + Math.ceil(e(t)) + ")"
            })
        }

        function n(t) {
            var e = t[0],
                i = t[t.length - 1];
            return i > e ? [e, i] : [i, e]
        }

        function r(t) {
            var e, i, a = [];
            if (t.ticks) return t.ticks.apply(t, h);
            for (i = t.domain(), e = Math.ceil(i[0]); e < i[1]; e++) a.push(e);
            return a.length > 0 && a[0] > 0 && a.unshift(a[0] - (a[1] - a[0])), a
        }

        function s() {
            var t, i = x.copy();
            return e.isCategory && (t = x.domain(), i.domain([t[0], t[1] - 1])), i
        }

        function o(t) {
            var e = g ? g(t) : t;
            return "undefined" != typeof e ? e : ""
        }

        function c(t) {
            if (L) return L;
            var e = {
                h: 11.5,
                w: 5.5
            };
            return t.select("text").text(o).each(function(t) {
                var i = this.getBoundingClientRect(),
                    a = o(t),
                    n = i.height,
                    r = a ? i.width / a.length : void 0;
                n && r && (e.h = n, e.w = r)
            }).text(""), L = e, e
        }

        function d(i) {
            return e.withoutTransition ? i : t.transition(i)
        }

        function l(g) {
            g.each(function() {
                function g(t, i) {
                    function a(t, e) {
                        r = void 0;
                        for (var o = 1; o < e.length; o++)
                            if (" " === e.charAt(o) && (r = o), n = e.substr(0, o + 1), s = j.w * n.length, s > i) return a(t.concat(e.substr(0, r ? r : o)), e.slice(r ? r + 1 : o));
                        return t.concat(e)
                    }
                    var n, r, s, c = o(t),
                        d = [];
                    return "[object Array]" === Object.prototype.toString.call(c) ? c : ((!i || 0 >= i) && (i = q ? 95 : e.isCategory ? Math.ceil(I(k[1]) - I(k[0])) - 12 : 110), a(d, c + ""))
                }

                function h(t, e) {
                    var i = j.h;
                    return 0 === e && (i = "left" === p || "right" === p ? -((U[t.index] - 1) * (j.h / 2) - 3) : ".71em"), i
                }

                function T(t) {
                    var e = x(t) + (f ? 0 : v);
                    return M[0] < e && e < M[1] ? _ : 0
                }

                function b(t) {
                    return t ? t > 0 ? "start" : "end" : "middle"
                }

                function A(t) {
                    return t ? "rotate(" + t + ")" : ""
                }

                function w(t) {
                    return t ? 8 * Math.sin(Math.PI * (t / 180)) : 0
                }

                function L(t) {
                    return t ? 11.5 - 2.5 * (t / 15) * (t > 0 ? 1 : -1) : K
                }
                var S, C, D, X = l.g = t.select(this),
                    F = this.__chart__ || x,
                    I = this.__chart__ = s(),
                    k = y ? y : r(I),
                    E = X.selectAll(".tick").data(k, I),
                    Y = E.enter().insert("g", ".domain").attr("class", "tick").style("opacity", 1e-6),
                    R = E.exit().remove(),
                    O = d(E).style("opacity", 1),
                    M = x.rangeExtent ? x.rangeExtent() : n(x.range()),
                    B = X.selectAll(".domain").data([0]),
                    P = (B.enter().append("path").attr("class", "domain"), d(B));
                Y.append("line"), Y.append("text");
                var z = Y.select("line"),
                    V = O.select("line"),
                    W = Y.select("text"),
                    G = O.select("text");
                e.isCategory ? (v = Math.ceil((I(1) - I(0)) / 2), C = f ? 0 : v, D = f ? v : 0) : v = C = 0;
                var H, N, j = c(X.select(".tick")),
                    U = [],
                    K = Math.max(_, 0) + m,
                    q = "left" === p || "right" === p;
                H = E.select("text"), N = H.selectAll("tspan").data(function(t, i) {
                    var a = e.tickMultiline ? g(t, e.tickWidth) : [].concat(o(t));
                    return U[i] = a.length, a.map(function(t) {
                        return {
                            index: i,
                            splitted: t
                        }
                    })
                }), N.enter().append("tspan"), N.exit().remove(), N.text(function(t) {
                    return t.splitted
                });
                var Z = e.tickTextRotate;
                switch (p) {
                    case "bottom":
                        S = i, z.attr("y2", _), W.attr("y", K), V.attr("x1", C).attr("x2", C).attr("y2", T), G.attr("x", 0).attr("y", L(Z)).style("text-anchor", b(Z)).attr("transform", A(Z)), N.attr("x", 0).attr("dy", h).attr("dx", w(Z)), P.attr("d", "M" + M[0] + "," + u + "V0H" + M[1] + "V" + u);
                        break;
                    case "top":
                        S = i, z.attr("y2", -_), W.attr("y", -K), V.attr("x2", 0).attr("y2", -_), G.attr("x", 0).attr("y", -K), H.style("text-anchor", "middle"), N.attr("x", 0).attr("dy", "0em"), P.attr("d", "M" + M[0] + "," + -u + "V0H" + M[1] + "V" + -u);
                        break;
                    case "left":
                        S = a, z.attr("x2", -_), W.attr("x", -K), V.attr("x2", -_).attr("y1", D).attr("y2", D), G.attr("x", -K).attr("y", v), H.style("text-anchor", "end"), N.attr("x", -K).attr("dy", h), P.attr("d", "M" + -u + "," + M[0] + "H0V" + M[1] + "H" + -u);
                        break;
                    case "right":
                        S = a, z.attr("x2", _), W.attr("x", K), V.attr("x2", _).attr("y2", 0), G.attr("x", K).attr("y", 0), H.style("text-anchor", "start"), N.attr("x", K).attr("dy", h), P.attr("d", "M" + u + "," + M[0] + "H0V" + M[1] + "H" + u)
                }
                if (I.rangeBand) {
                    var J = I,
                        $ = J.rangeBand() / 2;
                    F = I = function(t) {
                        return J(t) + $
                    }
                } else F.rangeBand ? F = I : R.call(S, I);
                Y.call(S, F), O.call(S, I)
            })
        }
        var u, g, h, f, x = t.scale.linear(),
            p = "bottom",
            _ = 6,
            m = 3,
            y = null,
            v = 0,
            T = !0;
        return e = e || {}, u = e.withOuterTick ? 6 : 0, l.scale = function(t) {
            return arguments.length ? (x = t, l) : x
        }, l.orient = function(t) {
            return arguments.length ? (p = t in {
                top: 1,
                right: 1,
                bottom: 1,
                left: 1
            } ? t + "" : "bottom", l) : p
        }, l.tickFormat = function(t) {
            return arguments.length ? (g = t, l) : g
        }, l.tickCentered = function(t) {
            return arguments.length ? (f = t, l) : f
        }, l.tickOffset = function() {
            return v
        }, l.tickInterval = function() {
            var t, i;
            return e.isCategory ? t = 2 * v : (i = l.g.select("path.domain").node().getTotalLength() - 2 * u, t = i / l.g.selectAll("line").size()), 1 / 0 === t ? 0 : t
        }, l.ticks = function() {
            return arguments.length ? (h = arguments, l) : h
        }, l.tickCulling = function(t) {
            return arguments.length ? (T = t, l) : T
        }, l.tickValues = function(t) {
            if ("function" == typeof t) y = function() {
                return t(x.domain())
            };
            else {
                if (!arguments.length) return y;
                y = t
            }
            return l
        }, l
    }
    var o, c, d, l = {
        version: "0.4.10"
    };
    l.generate = function(t) {
        return new a(t)
    }, l.chart = {
        fn: a.prototype,
        internal: {
            fn: n.prototype,
            axis: {
                fn: r.prototype
            }
        }
    }, o = l.chart.fn, c = l.chart.internal.fn, d = l.chart.internal.axis.fn, c.init = function() {
        var t = this,
            e = t.config;
        if (t.initParams(), e.data_url) t.convertUrlToData(e.data_url, e.data_mimeType, e.data_keys, t.initWithData);
        else if (e.data_json) t.initWithData(t.convertJsonToData(e.data_json, e.data_keys));
        else if (e.data_rows) t.initWithData(t.convertRowsToData(e.data_rows));
        else {
            if (!e.data_columns) throw Error("url or json or rows or columns is required.");
            t.initWithData(t.convertColumnsToData(e.data_columns))
        }
    }, c.initParams = function() {
        var t = this,
            e = t.d3,
            i = t.config;
        t.clipId = "c3-" + +new Date + "-clip", t.clipIdForXAxis = t.clipId + "-xaxis", t.clipIdForYAxis = t.clipId + "-yaxis", t.clipIdForGrid = t.clipId + "-grid", t.clipIdForSubchart = t.clipId + "-subchart", t.clipPath = t.getClipPath(t.clipId), t.clipPathForXAxis = t.getClipPath(t.clipIdForXAxis), t.clipPathForYAxis = t.getClipPath(t.clipIdForYAxis), t.clipPathForGrid = t.getClipPath(t.clipIdForGrid), t.clipPathForSubchart = t.getClipPath(t.clipIdForSubchart), t.dragStart = null, t.dragging = !1, t.flowing = !1, t.cancelClick = !1, t.mouseover = !1, t.transiting = !1, t.color = t.generateColor(), t.levelColor = t.generateLevelColor(), t.dataTimeFormat = i.data_xLocaltime ? e.time.format : e.time.format.utc, t.axisTimeFormat = i.axis_x_localtime ? e.time.format : e.time.format.utc, t.defaultAxisTimeFormat = t.axisTimeFormat.multi([
            [".%L", function(t) {
                return t.getMilliseconds()
            }],
            [":%S", function(t) {
                return t.getSeconds()
            }],
            ["%I:%M", function(t) {
                return t.getMinutes()
            }],
            ["%I %p", function(t) {
                return t.getHours()
            }],
            ["%-m/%-d", function(t) {
                return t.getDay() && 1 !== t.getDate()
            }],
            ["%-m/%-d", function(t) {
                return 1 !== t.getDate()
            }],
            ["%-m/%-d", function(t) {
                return t.getMonth()
            }],
            ["%Y/%-m/%-d", function() {
                return !0
            }]
        ]), t.hiddenTargetIds = [], t.hiddenLegendIds = [], t.focusedTargetIds = [], t.defocusedTargetIds = [], t.xOrient = i.axis_rotated ? "left" : "bottom", t.yOrient = i.axis_rotated ? i.axis_y_inner ? "top" : "bottom" : i.axis_y_inner ? "right" : "left", t.y2Orient = i.axis_rotated ? i.axis_y2_inner ? "bottom" : "top" : i.axis_y2_inner ? "left" : "right", t.subXOrient = i.axis_rotated ? "left" : "bottom", t.isLegendRight = "right" === i.legend_position, t.isLegendInset = "inset" === i.legend_position, t.isLegendTop = "top-left" === i.legend_inset_anchor || "top-right" === i.legend_inset_anchor, t.isLegendLeft = "top-left" === i.legend_inset_anchor || "bottom-left" === i.legend_inset_anchor, t.legendStep = 0, t.legendItemWidth = 0, t.legendItemHeight = 0, t.currentMaxTickWidths = {
            x: 0,
            y: 0,
            y2: 0
        }, t.rotated_padding_left = 30, t.rotated_padding_right = i.axis_rotated && !i.axis_x_show ? 0 : 30, t.rotated_padding_top = 5, t.withoutFadeIn = {}, t.intervalForObserveInserted = void 0, t.axes.subx = e.selectAll([])
    }, c.initChartElements = function() {
        this.initBar && this.initBar(), this.initLine && this.initLine(), this.initArc && this.initArc(), this.initGauge && this.initGauge(), this.initText && this.initText()
    }, c.initWithData = function(e) {
        var i, a, n = this,
            s = n.d3,
            o = n.config,
            c = !0;
        n.axis = new r(n), n.initPie && n.initPie(), n.initBrush && n.initBrush(), n.initZoom && n.initZoom(), n.selectChart = o.bindto ? "function" == typeof o.bindto.node ? o.bindto : s.select(o.bindto) : s.selectAll([]), n.selectChart.empty() && (n.selectChart = s.select(document.createElement("div")).style("opacity", 0), n.observeInserted(n.selectChart), c = !1), n.selectChart.html("").classed("c3", !0), n.data.xs = {}, n.data.targets = n.convertDataToTargets(e), o.data_filter && (n.data.targets = n.data.targets.filter(o.data_filter)), o.data_hide && n.addHiddenTargetIds(o.data_hide === !0 ? n.mapToIds(n.data.targets) : o.data_hide), o.legend_hide && n.addHiddenLegendIds(o.legend_hide === !0 ? n.mapToIds(n.data.targets) : o.legend_hide), n.hasType("gauge") && (o.legend_show = !1), n.updateSizes(), n.updateScales(), n.x.domain(s.extent(n.getXDomain(n.data.targets))), n.y.domain(n.getYDomain(n.data.targets, "y")), n.y2.domain(n.getYDomain(n.data.targets, "y2")), n.subX.domain(n.x.domain()), n.subY.domain(n.y.domain()), n.subY2.domain(n.y2.domain()), n.orgXDomain = n.x.domain(), n.brush && n.brush.scale(n.subX), o.zoom_enabled && n.zoom.scale(n.x), n.svg = n.selectChart.append("svg").style("overflow", "hidden").on("mouseenter", function() {
            return o.onmouseover.call(n)
        }).on("mouseleave", function() {
            return o.onmouseout.call(n)
        }), i = n.svg.append("defs"), n.clipChart = n.appendClip(i, n.clipId), n.clipXAxis = n.appendClip(i, n.clipIdForXAxis), n.clipYAxis = n.appendClip(i, n.clipIdForYAxis), n.clipGrid = n.appendClip(i, n.clipIdForGrid), n.clipSubchart = n.appendClip(i, n.clipIdForSubchart), n.updateSvgSize(), a = n.main = n.svg.append("g").attr("transform", n.getTranslate("main")), n.initSubchart && n.initSubchart(), n.initTooltip && n.initTooltip(), n.initLegend && n.initLegend(), a.append("text").attr("class", u.text + " " + u.empty).attr("text-anchor", "middle").attr("dominant-baseline", "middle"), n.initRegion(), n.initGrid(), a.append("g").attr("clip-path", n.clipPath).attr("class", u.chart), o.grid_lines_front && n.initGridLines(), n.initEventRect(), n.initChartElements(), a.insert("rect", o.zoom_privileged ? null : "g." + u.regions).attr("class", u.zoomRect).attr("width", n.width).attr("height", n.height).style("opacity", 0).on("dblclick.zoom", null), o.axis_x_extent && n.brush.extent(n.getDefaultExtent()), n.axis.init(), n.updateTargets(n.data.targets), c && (n.updateDimension(), n.config.oninit.call(n), n.redraw({
            withTransition: !1,
            withTransform: !0,
            withUpdateXDomain: !0,
            withUpdateOrgXDomain: !0,
            withTransitionForAxis: !1
        })), null == t.onresize && (t.onresize = n.generateResize()), t.onresize.add && (t.onresize.add(function() {
            o.onresize.call(n)
        }), t.onresize.add(function() {
            n.api.flush()
        }), t.onresize.add(function() {
            o.onresized.call(n)
        })), n.api.element = n.selectChart.node()
    }, c.smoothLines = function(t, e) {
        var i = this;
        "grid" === e && t.each(function() {
            var t = i.d3.select(this),
                e = t.attr("x1"),
                a = t.attr("x2"),
                n = t.attr("y1"),
                r = t.attr("y2");
            t.attr({
                x1: Math.ceil(e),
                x2: Math.ceil(a),
                y1: Math.ceil(n),
                y2: Math.ceil(r)
            })
        })
    }, c.updateSizes = function() {
        var t = this,
            e = t.config,
            i = t.legend ? t.getLegendHeight() : 0,
            a = t.legend ? t.getLegendWidth() : 0,
            n = t.isLegendRight || t.isLegendInset ? 0 : i,
            r = t.hasArcType(),
            s = e.axis_rotated || r ? 0 : t.getHorizontalAxisHeight("x"),
            o = e.subchart_show && !r ? e.subchart_size_height + s : 0;
        t.currentWidth = t.getCurrentWidth(), t.currentHeight = t.getCurrentHeight(), t.margin = e.axis_rotated ? {
            top: t.getHorizontalAxisHeight("y2") + t.getCurrentPaddingTop(),
            right: r ? 0 : t.getCurrentPaddingRight(),
            bottom: t.getHorizontalAxisHeight("y") + n + t.getCurrentPaddingBottom(),
            left: o + (r ? 0 : t.getCurrentPaddingLeft())
        } : {
            top: 4 + t.getCurrentPaddingTop(),
            right: r ? 0 : t.getCurrentPaddingRight(),
            bottom: s + o + n + t.getCurrentPaddingBottom(),
            left: r ? 0 : t.getCurrentPaddingLeft()
        }, t.margin2 = e.axis_rotated ? {
            top: t.margin.top,
            right: NaN,
            bottom: 20 + n,
            left: t.rotated_padding_left
        } : {
            top: t.currentHeight - o - n,
            right: NaN,
            bottom: s + n,
            left: t.margin.left
        }, t.margin3 = {
            top: 0,
            right: NaN,
            bottom: 0,
            left: 0
        }, t.updateSizeForLegend && t.updateSizeForLegend(i, a), t.width = t.currentWidth - t.margin.left - t.margin.right, t.height = t.currentHeight - t.margin.top - t.margin.bottom, t.width < 0 && (t.width = 0), t.height < 0 && (t.height = 0), t.width2 = e.axis_rotated ? t.margin.left - t.rotated_padding_left - t.rotated_padding_right : t.width, t.height2 = e.axis_rotated ? t.height : t.currentHeight - t.margin2.top - t.margin2.bottom, t.width2 < 0 && (t.width2 = 0), t.height2 < 0 && (t.height2 = 0), t.arcWidth = t.width - (t.isLegendRight ? a + 10 : 0), t.arcHeight = t.height - (t.isLegendRight ? 0 : 10), t.hasType("gauge") && (t.arcHeight += t.height - t.getGaugeLabelHeight()), t.updateRadius && t.updateRadius(), t.isLegendRight && r && (t.margin3.left = t.arcWidth / 2 + 1.1 * t.radiusExpanded)
    }, c.updateTargets = function(t) {
        var e = this;
        e.updateTargetsForText(t), e.updateTargetsForBar(t), e.updateTargetsForLine(t), e.hasArcType() && e.updateTargetsForArc && e.updateTargetsForArc(t), e.updateTargetsForSubchart && e.updateTargetsForSubchart(t), e.showTargets()
    }, c.showTargets = function() {
        var t = this;
        t.svg.selectAll("." + u.target).filter(function(e) {
            return t.isTargetToShow(e.id)
        }).transition().duration(t.config.transition_duration).style("opacity", 1)
    }, c.redraw = function(t, e) {
        var i, a, n, r, s, o, c, d, l, g, h, f, x, p, _, m, y, v, T, A, w, L, S, C, D, X, F, I, k, E = this,
            Y = E.main,
            R = E.d3,
            O = E.config,
            M = E.getShapeIndices(E.isAreaType),
            B = E.getShapeIndices(E.isBarType),
            P = E.getShapeIndices(E.isLineType),
            z = E.hasArcType(),
            V = E.filterTargetsToShow(E.data.targets),
            W = E.xv.bind(E);
        if (t = t || {}, i = b(t, "withY", !0), a = b(t, "withSubchart", !0), n = b(t, "withTransition", !0), o = b(t, "withTransform", !1), c = b(t, "withUpdateXDomain", !1), d = b(t, "withUpdateOrgXDomain", !1), l = b(t, "withTrimXDomain", !0), x = b(t, "withUpdateXAxis", c), g = b(t, "withLegend", !1), h = b(t, "withEventRect", !0), f = b(t, "withDimension", !0), r = b(t, "withTransitionForExit", n), s = b(t, "withTransitionForAxis", n), T = n ? O.transition_duration : 0, A = r ? T : 0, w = s ? T : 0, e = e || E.axis.generateTransitions(w), g && O.legend_show ? E.updateLegend(E.mapToIds(E.data.targets), t, e) : f && E.updateDimension(!0), E.isCategorized() && 0 === V.length && E.x.domain([0, E.axes.x.selectAll(".tick").size()]), V.length ? (E.updateXDomain(V, c, d, l), O.axis_x_tick_values || (C = E.axis.updateXAxisTickValues(V))) : (E.xAxis.tickValues([]), E.subXAxis.tickValues([])), O.zoom_rescale && !t.flow && (F = E.x.orgDomain()), E.y.domain(E.getYDomain(V, "y", F)), E.y2.domain(E.getYDomain(V, "y2", F)), !O.axis_y_tick_values && O.axis_y_tick_count && E.yAxis.tickValues(E.axis.generateTickValues(E.y.domain(), O.axis_y_tick_count)), !O.axis_y2_tick_values && O.axis_y2_tick_count && E.y2Axis.tickValues(E.axis.generateTickValues(E.y2.domain(), O.axis_y2_tick_count)), E.axis.redraw(e, z), E.axis.updateLabels(n), (c || x) && V.length)
            if (O.axis_x_tick_culling && C) {
                for (D = 1; D < C.length; D++)
                    if (C.length / D < O.axis_x_tick_culling_max) {
                        X = D;
                        break
                    } E.svg.selectAll("." + u.axisX + " .tick text").each(function(t) {
                    var e = C.indexOf(t);
                    e >= 0 && R.select(this).style("display", e % X ? "none" : "block")
                })
            } else E.svg.selectAll("." + u.axisX + " .tick text").style("display", "block");
        p = E.generateDrawArea ? E.generateDrawArea(M, !1) : void 0, _ = E.generateDrawBar ? E.generateDrawBar(B) : void 0, m = E.generateDrawLine ? E.generateDrawLine(P, !1) : void 0, y = E.generateXYForText(M, B, P, !0), v = E.generateXYForText(M, B, P, !1), i && (E.subY.domain(E.getYDomain(V, "y")), E.subY2.domain(E.getYDomain(V, "y2"))), E.tooltip.style("display", "none"), E.updateXgridFocus(), Y.select("text." + u.text + "." + u.empty).attr("x", E.width / 2).attr("y", E.height / 2).text(O.data_empty_label_text).transition().style("opacity", V.length ? 0 : 1), E.updateGrid(T), E.updateRegion(T), E.updateBar(A), E.updateLine(A), E.updateArea(A), E.updateCircle(), E.hasDataLabel() && E.updateText(A), E.redrawArc && E.redrawArc(T, A, o), E.redrawSubchart && E.redrawSubchart(a, e, T, A, M, B, P), Y.selectAll("." + u.selectedCircles).filter(E.isBarType.bind(E)).selectAll("circle").remove(), O.interaction_enabled && !t.flow && h && (E.redrawEventRect(), E.updateZoom && E.updateZoom()), E.updateCircleY(), I = (E.config.axis_rotated ? E.circleY : E.circleX).bind(E), k = (E.config.axis_rotated ? E.circleX : E.circleY).bind(E), t.flow && (S = E.generateFlow({
            targets: V,
            flow: t.flow,
            duration: t.flow.duration,
            drawBar: _,
            drawLine: m,
            drawArea: p,
            cx: I,
            cy: k,
            xv: W,
            xForText: y,
            yForText: v
        })), (T || S) && E.isTabVisible() ? R.transition().duration(T).each(function() {
            var e = [];
            [E.redrawBar(_, !0), E.redrawLine(m, !0), E.redrawArea(p, !0), E.redrawCircle(I, k, !0), E.redrawText(y, v, t.flow, !0), E.redrawRegion(!0), E.redrawGrid(!0)].forEach(function(t) {
                t.forEach(function(t) {
                    e.push(t)
                })
            }), L = E.generateWait(), e.forEach(function(t) {
                L.add(t)
            })
        }).call(L, function() {
            S && S(), O.onrendered && O.onrendered.call(E)
        }) : (E.redrawBar(_), E.redrawLine(m), E.redrawArea(p), E.redrawCircle(I, k), E.redrawText(y, v, t.flow), E.redrawRegion(), E.redrawGrid(), O.onrendered && O.onrendered.call(E)), E.mapToIds(E.data.targets).forEach(function(t) {
            E.withoutFadeIn[t] = !0
        })
    }, c.updateAndRedraw = function(t) {
        var e, i = this,
            a = i.config;
        t = t || {}, t.withTransition = b(t, "withTransition", !0), t.withTransform = b(t, "withTransform", !1), t.withLegend = b(t, "withLegend", !1), t.withUpdateXDomain = !0, t.withUpdateOrgXDomain = !0, t.withTransitionForExit = !1, t.withTransitionForTransform = b(t, "withTransitionForTransform", t.withTransition), i.updateSizes(), t.withLegend && a.legend_show || (e = i.axis.generateTransitions(t.withTransitionForAxis ? a.transition_duration : 0), i.updateScales(), i.updateSvgSize(), i.transformAll(t.withTransitionForTransform, e)), i.redraw(t, e)
    }, c.redrawWithoutRescale = function() {
        this.redraw({
            withY: !1,
            withSubchart: !1,
            withEventRect: !1,
            withTransitionForAxis: !1
        })
    }, c.isTimeSeries = function() {
        return "timeseries" === this.config.axis_x_type
    }, c.isCategorized = function() {
        return this.config.axis_x_type.indexOf("categor") >= 0
    }, c.isCustomX = function() {
        var t = this,
            e = t.config;
        return !t.isTimeSeries() && (e.data_x || T(e.data_xs))
    }, c.isTimeSeriesY = function() {
        return "timeseries" === this.config.axis_y_type
    }, c.getTranslate = function(t) {
        var e, i, a = this,
            n = a.config;
        return "main" === t ? (e = m(a.margin.left), i = m(a.margin.top)) : "context" === t ? (e = m(a.margin2.left), i = m(a.margin2.top)) : "legend" === t ? (e = a.margin3.left, i = a.margin3.top) : "x" === t ? (e = 0, i = n.axis_rotated ? 0 : a.height) : "y" === t ? (e = 0, i = n.axis_rotated ? a.height : 0) : "y2" === t ? (e = n.axis_rotated ? 0 : a.width, i = n.axis_rotated ? 1 : 0) : "subx" === t ? (e = 0, i = n.axis_rotated ? 0 : a.height2) : "arc" === t && (e = a.arcWidth / 2, i = a.arcHeight / 2), "translate(" + e + "," + i + ")"
    }, c.initialOpacity = function(t) {
        return null !== t.value && this.withoutFadeIn[t.id] ? 1 : 0
    }, c.initialOpacityForCircle = function(t) {
        return null !== t.value && this.withoutFadeIn[t.id] ? this.opacityForCircle(t) : 0
    }, c.opacityForCircle = function(t) {
        var e = this.config.point_show ? 1 : 0;
        return g(t.value) ? this.isScatterType(t) ? .5 : e : 0
    }, c.opacityForText = function() {
        return this.hasDataLabel() ? 1 : 0
    }, c.xx = function(t) {
        return t ? this.x(t.x) : null
    }, c.xv = function(t) {
        var e = this,
            i = t.value;
        return e.isTimeSeries() ? i = e.parseDate(t.value) : e.isCategorized() && "string" == typeof t.value && (i = e.config.axis_x_categories.indexOf(t.value)), Math.ceil(e.x(i))
    }, c.yv = function(t) {
        var e = this,
            i = t.axis && "y2" === t.axis ? e.y2 : e.y;
        return Math.ceil(i(t.value))
    }, c.subxx = function(t) {
        return t ? this.subX(t.x) : null
    }, c.transformMain = function(t, e) {
        var i, a, n, r = this;
        e && e.axisX ? i = e.axisX : (i = r.main.select("." + u.axisX), t && (i = i.transition())), e && e.axisY ? a = e.axisY : (a = r.main.select("." + u.axisY), t && (a = a.transition())), e && e.axisY2 ? n = e.axisY2 : (n = r.main.select("." + u.axisY2), t && (n = n.transition())), (t ? r.main.transition() : r.main).attr("transform", r.getTranslate("main")), i.attr("transform", r.getTranslate("x")), a.attr("transform", r.getTranslate("y")), n.attr("transform", r.getTranslate("y2")), r.main.select("." + u.chartArcs).attr("transform", r.getTranslate("arc"))
    }, c.transformAll = function(t, e) {
        var i = this;
        i.transformMain(t, e), i.config.subchart_show && i.transformContext(t, e), i.legend && i.transformLegend(t)
    }, c.updateSvgSize = function() {
        var t = this,
            e = t.svg.select(".c3-brush .background");
        t.svg.attr("width", t.currentWidth).attr("height", t.currentHeight), t.svg.selectAll(["#" + t.clipId, "#" + t.clipIdForGrid]).select("rect").attr("width", t.width).attr("height", t.height), t.svg.select("#" + t.clipIdForXAxis).select("rect").attr("x", t.getXAxisClipX.bind(t)).attr("y", t.getXAxisClipY.bind(t)).attr("width", t.getXAxisClipWidth.bind(t)).attr("height", t.getXAxisClipHeight.bind(t)), t.svg.select("#" + t.clipIdForYAxis).select("rect").attr("x", t.getYAxisClipX.bind(t)).attr("y", t.getYAxisClipY.bind(t)).attr("width", t.getYAxisClipWidth.bind(t)).attr("height", t.getYAxisClipHeight.bind(t)), t.svg.select("#" + t.clipIdForSubchart).select("rect").attr("width", t.width).attr("height", e.size() ? e.attr("height") : 0), t.svg.select("." + u.zoomRect).attr("width", t.width).attr("height", t.height), t.selectChart.style("max-height", t.currentHeight + "px")
    }, c.updateDimension = function(t) {
        var e = this;
        t || (e.config.axis_rotated ? (e.axes.x.call(e.xAxis), e.axes.subx.call(e.subXAxis)) : (e.axes.y.call(e.yAxis), e.axes.y2.call(e.y2Axis))), e.updateSizes(), e.updateScales(), e.updateSvgSize(), e.transformAll(!1)
    }, c.observeInserted = function(e) {
        var i, a = this;
        return "undefined" == typeof MutationObserver ? void t.console.error("MutationObserver not defined.") : (i = new MutationObserver(function(n) {
            n.forEach(function(n) {
                "childList" === n.type && n.previousSibling && (i.disconnect(), a.intervalForObserveInserted = t.setInterval(function() {
                    e.node().parentNode && (t.clearInterval(a.intervalForObserveInserted), a.updateDimension(), a.config.oninit.call(a), a.redraw({
                        withTransform: !0,
                        withUpdateXDomain: !0,
                        withUpdateOrgXDomain: !0,
                        withTransition: !1,
                        withTransitionForTransform: !1,
                        withLegend: !0
                    }), e.transition().style("opacity", 1))
                }, 10))
            })
        }), void i.observe(e.node(), {
            attributes: !0,
            childList: !0,
            characterData: !0
        }))
    }, c.generateResize = function() {
        function t() {
            e.forEach(function(t) {
                t()
            })
        }
        var e = [];
        return t.add = function(t) {
            e.push(t)
        }, t
    }, c.endall = function(t, e) {
        var i = 0;
        t.each(function() {
            ++i
        }).each("end", function() {
            --i || e.apply(this, arguments)
        })
    }, c.generateWait = function() {
        var t = [],
            e = function(e, i) {
                var a = setInterval(function() {
                    var e = 0;
                    t.forEach(function(t) {
                        if (t.empty()) return void(e += 1);
                        try {
                            t.transition()
                        } catch (t) {
                            e += 1
                        }
                    }), e === t.length && (clearInterval(a), i && i())
                }, 10)
            };
        return e.add = function(e) {
            t.push(e)
        }, e
    }, c.parseDate = function(e) {
        var i, a = this;
        return e instanceof Date ? i = e : "string" == typeof e ? i = a.dataTimeFormat(a.config.data_xFormat).parse(e) : "number" != typeof e && isNaN(e) || (i = new Date((+e))), (!i || isNaN(+i)) && t.console.error("Failed to parse x '" + e + "' to Date object"), i
    }, c.isTabVisible = function() {
        var t;
        return "undefined" != typeof document.hidden ? t = "hidden" : "undefined" != typeof document.mozHidden ? t = "mozHidden" : "undefined" != typeof document.msHidden ? t = "msHidden" : "undefined" != typeof document.webkitHidden && (t = "webkitHidden"), !document[t]
    }, c.getDefaultConfig = function() {
        var t = {
            bindto: "#chart",
            size_width: void 0,
            size_height: void 0,
            padding_left: void 0,
            padding_right: void 0,
            padding_top: void 0,
            padding_bottom: void 0,
            zoom_enabled: !1,
            zoom_extent: void 0,
            zoom_privileged: !1,
            zoom_rescale: !1,
            zoom_onzoom: function() {},
            zoom_onzoomstart: function() {},
            zoom_onzoomend: function() {},
            interaction_enabled: !0,
            onmouseover: function() {},
            onmouseout: function() {},
            onresize: function() {},
            onresized: function() {},
            oninit: function() {},
            onrendered: function() {},
            transition_duration: 350,
            data_x: void 0,
            data_xs: {},
            data_xFormat: "%Y-%m-%d",
            data_xLocaltime: !0,
            data_xSort: !0,
            data_idConverter: function(t) {
                return t
            },
            data_names: {},
            data_classes: {},
            data_groups: [],
            data_axes: {},
            data_type: void 0,
            data_types: {},
            data_labels: {},
            data_order: "desc",
            data_regions: {},
            data_color: void 0,
            data_colors: {},
            data_hide: !1,
            data_filter: void 0,
            data_selection_enabled: !1,
            data_selection_grouped: !1,
            data_selection_isselectable: function() {
                return !0
            },
            data_selection_multiple: !0,
            data_selection_draggable: !1,
            data_onclick: function() {},
            data_onmouseover: function() {},
            data_onmouseout: function() {},
            data_onselected: function() {},
            data_onunselected: function() {},
            data_url: void 0,
            data_json: void 0,
            data_rows: void 0,
            data_columns: void 0,
            data_mimeType: void 0,
            data_keys: void 0,
            data_empty_label_text: "",
            subchart_show: !1,
            subchart_size_height: 60,
            subchart_onbrush: function() {},
            color_pattern: [],
            color_threshold: {},
            legend_show: !0,
            legend_hide: !1,
            legend_position: "bottom",
            legend_inset_anchor: "top-left",
            legend_inset_x: 10,
            legend_inset_y: 0,
            legend_inset_step: void 0,
            legend_item_onclick: void 0,
            legend_item_onmouseover: void 0,
            legend_item_onmouseout: void 0,
            legend_equally: !1,
            axis_rotated: !1,
            axis_x_show: !0,
            axis_x_type: "indexed",
            axis_x_localtime: !0,
            axis_x_categories: [],
            axis_x_tick_centered: !1,
            axis_x_tick_format: void 0,
            axis_x_tick_culling: {},
            axis_x_tick_culling_max: 10,
            axis_x_tick_count: void 0,
            axis_x_tick_fit: !0,
            axis_x_tick_values: null,
            axis_x_tick_rotate: 0,
            axis_x_tick_outer: !0,
            axis_x_tick_multiline: !0,
            axis_x_tick_width: null,
            axis_x_max: void 0,
            axis_x_min: void 0,
            axis_x_padding: {},
            axis_x_height: void 0,
            axis_x_extent: void 0,
            axis_x_label: {},
            axis_y_show: !0,
            axis_y_type: void 0,
            axis_y_max: void 0,
            axis_y_min: void 0,
            axis_y_inverted: !1,
            axis_y_center: void 0,
            axis_y_inner: void 0,
            axis_y_label: {},
            axis_y_tick_format: void 0,
            axis_y_tick_outer: !0,
            axis_y_tick_values: null,
            axis_y_tick_count: void 0,
            axis_y_tick_time_value: void 0,
            axis_y_tick_time_interval: void 0,
            axis_y_padding: {},
            axis_y_default: void 0,
            axis_y2_show: !1,
            axis_y2_max: void 0,
            axis_y2_min: void 0,
            axis_y2_inverted: !1,
            axis_y2_center: void 0,
            axis_y2_inner: void 0,
            axis_y2_label: {},
            axis_y2_tick_format: void 0,
            axis_y2_tick_outer: !0,
            axis_y2_tick_values: null,
            axis_y2_tick_count: void 0,
            axis_y2_padding: {},
            axis_y2_default: void 0,
            grid_x_show: !1,
            grid_x_type: "tick",
            grid_x_lines: [],
            grid_y_show: !1,
            grid_y_lines: [],
            grid_y_ticks: 10,
            grid_focus_show: !0,
            grid_lines_front: !0,
            point_show: !0,
            point_r: 2.5,
            point_focus_expand_enabled: !0,
            point_focus_expand_r: void 0,
            point_select_r: void 0,
            line_connectNull: !1,
            line_step_type: "step",
            bar_width: void 0,
            bar_width_ratio: .6,
            bar_width_max: void 0,
            bar_zerobased: !0,
            area_zerobased: !0,
            pie_label_show: !0,
            pie_label_format: void 0,
            pie_label_threshold: .05,
            pie_expand: !0,
            gauge_label_show: !0,
            gauge_label_format: void 0,
            gauge_expand: !0,
            gauge_min: 0,
            gauge_max: 100,
            gauge_units: void 0,
            gauge_width: void 0,
            donut_label_show: !0,
            donut_label_format: void 0,
            donut_label_threshold: .05,
            donut_width: void 0,
            donut_expand: !0,
            donut_title: "",
            regions: [],
            tooltip_show: !0,
            tooltip_grouped: !0,
            tooltip_format_title: void 0,
            tooltip_format_name: void 0,
            tooltip_format_value: void 0,
            tooltip_position: void 0,
            tooltip_contents: function(t, e, i, a) {
                return this.getTooltipContent ? this.getTooltipContent(t, e, i, a) : ""
            },
            tooltip_init_show: !1,
            tooltip_init_x: 0,
            tooltip_init_position: {
                top: "0px",
                left: "50px"
            }
        };
        return Object.keys(this.additionalConfig).forEach(function(e) {
            t[e] = this.additionalConfig[e]
        }, this), t
    }, c.additionalConfig = {}, c.loadConfig = function(t) {
        function e() {
            var t = a.shift();
            return t && i && "object" == typeof i && t in i ? (i = i[t], e()) : t ? void 0 : i
        }
        var i, a, n, r = this.config;
        Object.keys(r).forEach(function(s) {
            i = t, a = s.split("_"), n = e(), p(n) && (r[s] = n)
        })
    }, c.getScale = function(t, e, i) {
        return (i ? this.d3.time.scale() : this.d3.scale.linear()).range([t, e])
    }, c.getX = function(t, e, i, a) {
        var n, r = this,
            s = r.getScale(t, e, r.isTimeSeries()),
            o = i ? s.domain(i) : s;
        r.isCategorized() ? (a = a || function() {
            return 0
        }, s = function(t, e) {
            var i = o(t) + a(t);
            return e ? i : Math.ceil(i)
        }) : s = function(t, e) {
            var i = o(t);
            return e ? i : Math.ceil(i)
        };
        for (n in o) s[n] = o[n];
        return s.orgDomain = function() {
            return o.domain()
        }, r.isCategorized() && (s.domain = function(t) {
            return arguments.length ? (o.domain(t), s) : (t = this.orgDomain(), [t[0], t[1] + 1])
        }), s
    }, c.getY = function(t, e, i) {
        var a = this.getScale(t, e, this.isTimeSeriesY());
        return i && a.domain(i), a
    }, c.getYScale = function(t) {
        return "y2" === this.axis.getId(t) ? this.y2 : this.y
    }, c.getSubYScale = function(t) {
        return "y2" === this.axis.getId(t) ? this.subY2 : this.subY
    }, c.updateScales = function() {
        var t = this,
            e = t.config,
            i = !t.x;
        t.xMin = e.axis_rotated ? 1 : 0, t.xMax = e.axis_rotated ? t.height : t.width, t.yMin = e.axis_rotated ? 0 : t.height, t.yMax = e.axis_rotated ? t.width : 1, t.subXMin = t.xMin, t.subXMax = t.xMax, t.subYMin = e.axis_rotated ? 0 : t.height2, t.subYMax = e.axis_rotated ? t.width2 : 1, t.x = t.getX(t.xMin, t.xMax, i ? void 0 : t.x.orgDomain(), function() {
            return t.xAxis.tickOffset()
        }), t.y = t.getY(t.yMin, t.yMax, i ? e.axis_y_default : t.y.domain()), t.y2 = t.getY(t.yMin, t.yMax, i ? e.axis_y2_default : t.y2.domain()), t.subX = t.getX(t.xMin, t.xMax, t.orgXDomain, function(e) {
            return e % 1 ? 0 : t.subXAxis.tickOffset()
        }), t.subY = t.getY(t.subYMin, t.subYMax, i ? e.axis_y_default : t.subY.domain()), t.subY2 = t.getY(t.subYMin, t.subYMax, i ? e.axis_y2_default : t.subY2.domain()), t.xAxisTickFormat = t.axis.getXAxisTickFormat(), t.xAxisTickValues = t.axis.getXAxisTickValues(), t.yAxisTickValues = t.axis.getYAxisTickValues(), t.y2AxisTickValues = t.axis.getY2AxisTickValues(), t.xAxis = t.axis.getXAxis(t.x, t.xOrient, t.xAxisTickFormat, t.xAxisTickValues, e.axis_x_tick_outer), t.subXAxis = t.axis.getXAxis(t.subX, t.subXOrient, t.xAxisTickFormat, t.xAxisTickValues, e.axis_x_tick_outer), t.yAxis = t.axis.getYAxis(t.y, t.yOrient, e.axis_y_tick_format, t.yAxisTickValues, e.axis_y_tick_outer), t.y2Axis = t.axis.getYAxis(t.y2, t.y2Orient, e.axis_y2_tick_format, t.y2AxisTickValues, e.axis_y2_tick_outer), i || (t.brush && t.brush.scale(t.subX), e.zoom_enabled && t.zoom.scale(t.x)), t.updateArc && t.updateArc()
    }, c.getYDomainMin = function(t) {
        var e, i, a, n, r, s, o = this,
            c = o.config,
            d = o.mapToIds(t),
            l = o.getValuesAsIdKeyed(t);
        if (c.data_groups.length > 0)
            for (s = o.hasNegativeValueInTargets(t), e = 0; e < c.data_groups.length; e++)
                if (n = c.data_groups[e].filter(function(t) {
                        return d.indexOf(t) >= 0
                    }), 0 !== n.length)
                    for (a = n[0], s && l[a] && l[a].forEach(function(t, e) {
                            l[a][e] = 0 > t ? t : 0
                        }), i = 1; i < n.length; i++) r = n[i], l[r] && l[r].forEach(function(t, e) {
                        o.axis.getId(r) !== o.axis.getId(a) || !l[a] || s && +t > 0 || (l[a][e] += +t)
                    });
        return o.d3.min(Object.keys(l).map(function(t) {
            return o.d3.min(l[t])
        }))
    }, c.getYDomainMax = function(t) {
        var e, i, a, n, r, s, o = this,
            c = o.config,
            d = o.mapToIds(t),
            l = o.getValuesAsIdKeyed(t);
        if (c.data_groups.length > 0)
            for (s = o.hasPositiveValueInTargets(t), e = 0; e < c.data_groups.length; e++)
                if (n = c.data_groups[e].filter(function(t) {
                        return d.indexOf(t) >= 0
                    }), 0 !== n.length)
                    for (a = n[0], s && l[a] && l[a].forEach(function(t, e) {
                            l[a][e] = t > 0 ? t : 0
                        }), i = 1; i < n.length; i++) r = n[i], l[r] && l[r].forEach(function(t, e) {
                        o.axis.getId(r) !== o.axis.getId(a) || !l[a] || s && 0 > +t || (l[a][e] += +t)
                    });
        return o.d3.max(Object.keys(l).map(function(t) {
            return o.d3.max(l[t])
        }))
    }, c.getYDomain = function(t, e, i) {
        var a, n, r, s, o, c, d, l, u, h, f, x = this,
            p = x.config,
            _ = t.filter(function(t) {
                return x.axis.getId(t.id) === e
            }),
            m = i ? x.filterByXDomain(_, i) : _,
            v = "y2" === e ? p.axis_y2_min : p.axis_y_min,
            b = "y2" === e ? p.axis_y2_max : p.axis_y_max,
            A = x.getYDomainMin(m),
            w = x.getYDomainMax(m),
            L = "y2" === e ? p.axis_y2_center : p.axis_y_center,
            S = x.hasType("bar", m) && p.bar_zerobased || x.hasType("area", m) && p.area_zerobased,
            C = "y2" === e ? p.axis_y2_inverted : p.axis_y_inverted,
            D = x.hasDataLabel() && p.axis_rotated,
            X = x.hasDataLabel() && !p.axis_rotated;
        return A = g(v) ? v : g(b) ? b > A ? A : b - 10 : A, w = g(b) ? b : g(v) ? w > v ? w : v + 10 : w, 0 === m.length ? "y2" === e ? x.y2.domain() : x.y.domain() : (isNaN(A) && (A = 0), isNaN(w) && (w = A), A === w && (0 > A ? w = 0 : A = 0), h = A >= 0 && w >= 0, f = 0 >= A && 0 >= w, (g(v) && h || g(b) && f) && (S = !1), S && (h && (A = 0), f && (w = 0)), n = Math.abs(w - A), r = s = o = .1 * n, "undefined" != typeof L && (c = Math.max(Math.abs(A), Math.abs(w)), w = L + c, A = L - c), D ? (d = x.getDataLabelLength(A, w, "width"), l = y(x.y.range()), u = [d[0] / l, d[1] / l], s += n * (u[1] / (1 - u[0] - u[1])), o += n * (u[0] / (1 - u[0] - u[1]))) : X && (d = x.getDataLabelLength(A, w, "height"), s += x.axis.convertPixelsToAxisPadding(d[1], n), o += x.axis.convertPixelsToAxisPadding(d[0], n)), "y" === e && T(p.axis_y_padding) && (s = x.axis.getPadding(p.axis_y_padding, "top", s, n), o = x.axis.getPadding(p.axis_y_padding, "bottom", o, n)), "y2" === e && T(p.axis_y2_padding) && (s = x.axis.getPadding(p.axis_y2_padding, "top", s, n), o = x.axis.getPadding(p.axis_y2_padding, "bottom", o, n)), S && (h && (o = A), f && (s = -w)), a = [A - o, w + s], C ? a.reverse() : a)
    }, c.getXDomainMin = function(t) {
        var e = this,
            i = e.config;
        return p(i.axis_x_min) ? e.isTimeSeries() ? this.parseDate(i.axis_x_min) : i.axis_x_min : e.d3.min(t, function(t) {
            return e.d3.min(t.values, function(t) {
                return t.x
            })
        })
    }, c.getXDomainMax = function(t) {
        var e = this,
            i = e.config;
        return p(i.axis_x_max) ? e.isTimeSeries() ? this.parseDate(i.axis_x_max) : i.axis_x_max : e.d3.max(t, function(t) {
            return e.d3.max(t.values, function(t) {
                return t.x
            })
        })
    }, c.getXDomainPadding = function(t) {
        var e, i, a, n, r = this,
            s = r.config,
            o = t[1] - t[0];
        return r.isCategorized() ? i = 0 : r.hasType("bar") ? (e = r.getMaxDataCount(), i = e > 1 ? o / (e - 1) / 2 : .5) : i = .01 * o, "object" == typeof s.axis_x_padding && T(s.axis_x_padding) ? (a = g(s.axis_x_padding.left) ? s.axis_x_padding.left : i, n = g(s.axis_x_padding.right) ? s.axis_x_padding.right : i) : a = n = "number" == typeof s.axis_x_padding ? s.axis_x_padding : i, {
            left: a,
            right: n
        }
    }, c.getXDomain = function(t) {
        var e = this,
            i = [e.getXDomainMin(t), e.getXDomainMax(t)],
            a = i[0],
            n = i[1],
            r = e.getXDomainPadding(i),
            s = 0,
            o = 0;
        return a - n !== 0 || e.isCategorized() || (e.isTimeSeries() ? (a = new Date(.5 * a.getTime()), n = new Date(1.5 * n.getTime())) : (a = 0 === a ? 1 : .5 * a, n = 0 === n ? -1 : 1.5 * n)), (a || 0 === a) && (s = e.isTimeSeries() ? new Date(a.getTime() - r.left) : a - r.left), (n || 0 === n) && (o = e.isTimeSeries() ? new Date(n.getTime() + r.right) : n + r.right), [s, o]
    }, c.updateXDomain = function(t, e, i, a, n) {
        var r = this,
            s = r.config;
        return i && (r.x.domain(n ? n : r.d3.extent(r.getXDomain(t))), r.orgXDomain = r.x.domain(), s.zoom_enabled && r.zoom.scale(r.x).updateScaleExtent(), r.subX.domain(r.x.domain()), r.brush && r.brush.scale(r.subX)), e && (r.x.domain(n ? n : !r.brush || r.brush.empty() ? r.orgXDomain : r.brush.extent()), s.zoom_enabled && r.zoom.scale(r.x).updateScaleExtent()), a && r.x.domain(r.trimXDomain(r.x.orgDomain())), r.x.domain()
    }, c.trimXDomain = function(t) {
        var e = this;
        return t[0] <= e.orgXDomain[0] && (t[1] = +t[1] + (e.orgXDomain[0] - t[0]), t[0] = e.orgXDomain[0]), e.orgXDomain[1] <= t[1] && (t[0] = +t[0] - (t[1] - e.orgXDomain[1]), t[1] = e.orgXDomain[1]), t
    }, c.isX = function(t) {
        var e = this,
            i = e.config;
        return i.data_x && t === i.data_x || T(i.data_xs) && A(i.data_xs, t)
    }, c.isNotX = function(t) {
        return !this.isX(t)
    }, c.getXKey = function(t) {
        var e = this,
            i = e.config;
        return i.data_x ? i.data_x : T(i.data_xs) ? i.data_xs[t] : null
    }, c.getXValuesOfXKey = function(t, e) {
        var i, a = this,
            n = e && T(e) ? a.mapToIds(e) : [];
        return n.forEach(function(e) {
            a.getXKey(e) === t && (i = a.data.xs[e])
        }), i
    }, c.getIndexByX = function(t) {
        var e = this,
            i = e.filterByX(e.data.targets, t);
        return i.length ? i[0].index : null
    }, c.getXValue = function(t, e) {
        var i = this;
        return t in i.data.xs && i.data.xs[t] && g(i.data.xs[t][e]) ? i.data.xs[t][e] : e
    }, c.getOtherTargetXs = function() {
        var t = this,
            e = Object.keys(t.data.xs);
        return e.length ? t.data.xs[e[0]] : null
    }, c.getOtherTargetX = function(t) {
        var e = this.getOtherTargetXs();
        return e && t < e.length ? e[t] : null
    }, c.addXs = function(t) {
        var e = this;
        Object.keys(t).forEach(function(i) {
            e.config.data_xs[i] = t[i]
        })
    }, c.hasMultipleX = function(t) {
        return this.d3.set(Object.keys(t).map(function(e) {
            return t[e]
        })).size() > 1
    }, c.isMultipleX = function() {
        return T(this.config.data_xs) || !this.config.data_xSort || this.hasType("scatter")
    }, c.addName = function(t) {
        var e, i = this;
        return t && (e = i.config.data_names[t.id], t.name = e ? e : t.id), t
    }, c.getValueOnIndex = function(t, e) {
        var i = t.filter(function(t) {
            return t.index === e
        });
        return i.length ? i[0] : null
    }, c.updateTargetX = function(t, e) {
        var i = this;
        t.forEach(function(t) {
            t.values.forEach(function(a, n) {
                a.x = i.generateTargetX(e[n], t.id, n)
            }), i.data.xs[t.id] = e
        })
    }, c.updateTargetXs = function(t, e) {
        var i = this;
        t.forEach(function(t) {
            e[t.id] && i.updateTargetX([t], e[t.id])
        })
    }, c.generateTargetX = function(t, e, i) {
        var a, n = this;
        return a = n.isTimeSeries() ? n.parseDate(t ? t : n.getXValue(e, i)) : n.isCustomX() && !n.isCategorized() ? g(t) ? +t : n.getXValue(e, i) : i
    }, c.cloneTarget = function(t) {
        return {
            id: t.id,
            id_org: t.id_org,
            values: t.values.map(function(t) {
                return {
                    x: t.x,
                    value: t.value,
                    id: t.id
                }
            })
        }
    }, c.updateXs = function() {
        var t = this;
        t.data.targets.length && (t.xs = [], t.data.targets[0].values.forEach(function(e) {
            t.xs[e.index] = e.x
        }))
    }, c.getPrevX = function(t) {
        var e = this.xs[t - 1];
        return "undefined" != typeof e ? e : null
    }, c.getNextX = function(t) {
        var e = this.xs[t + 1];
        return "undefined" != typeof e ? e : null
    }, c.getMaxDataCount = function() {
        var t = this;
        return t.d3.max(t.data.targets, function(t) {
            return t.values.length
        })
    }, c.getMaxDataCountTarget = function(t) {
        var e, i = t.length,
            a = 0;
        return i > 1 ? t.forEach(function(t) {
            t.values.length > a && (e = t, a = t.values.length)
        }) : e = i ? t[0] : null, e
    }, c.getEdgeX = function(t) {
        var e = this;
        return t.length ? [e.d3.min(t, function(t) {
            return t.values[0].x
        }), e.d3.max(t, function(t) {
            return t.values[t.values.length - 1].x
        })] : [0, 0]
    }, c.mapToIds = function(t) {
        return t.map(function(t) {
            return t.id
        })
    }, c.mapToTargetIds = function(t) {
        var e = this;
        return t ? f(t) ? [t] : t : e.mapToIds(e.data.targets)
    }, c.hasTarget = function(t, e) {
        var i, a = this.mapToIds(t);
        for (i = 0; i < a.length; i++)
            if (a[i] === e) return !0;
        return !1
    }, c.isTargetToShow = function(t) {
        return this.hiddenTargetIds.indexOf(t) < 0
    }, c.isLegendToShow = function(t) {
        return this.hiddenLegendIds.indexOf(t) < 0
    }, c.filterTargetsToShow = function(t) {
        var e = this;
        return t.filter(function(t) {
            return e.isTargetToShow(t.id)
        })
    }, c.mapTargetsToUniqueXs = function(t) {
        var e = this,
            i = e.d3.set(e.d3.merge(t.map(function(t) {
                return t.values.map(function(t) {
                    return +t.x
                })
            }))).values();
        return i.map(e.isTimeSeries() ? function(t) {
            return new Date((+t))
        } : function(t) {
            return +t
        })
    }, c.addHiddenTargetIds = function(t) {
        this.hiddenTargetIds = this.hiddenTargetIds.concat(t)
    }, c.removeHiddenTargetIds = function(t) {
        this.hiddenTargetIds = this.hiddenTargetIds.filter(function(e) {
            return t.indexOf(e) < 0
        })
    }, c.addHiddenLegendIds = function(t) {
        this.hiddenLegendIds = this.hiddenLegendIds.concat(t)
    }, c.removeHiddenLegendIds = function(t) {
        this.hiddenLegendIds = this.hiddenLegendIds.filter(function(e) {
            return t.indexOf(e) < 0
        })
    }, c.getValuesAsIdKeyed = function(t) {
        var e = {};
        return t.forEach(function(t) {
            e[t.id] = [], t.values.forEach(function(i) {
                e[t.id].push(i.value)
            })
        }), e
    }, c.checkValueInTargets = function(t, e) {
        var i, a, n, r = Object.keys(t);
        for (i = 0; i < r.length; i++)
            for (n = t[r[i]].values, a = 0; a < n.length; a++)
                if (e(n[a].value)) return !0;
        return !1
    }, c.hasNegativeValueInTargets = function(t) {
        return this.checkValueInTargets(t, function(t) {
            return 0 > t
        })
    }, c.hasPositiveValueInTargets = function(t) {
        return this.checkValueInTargets(t, function(t) {
            return t > 0
        })
    }, c.isOrderDesc = function() {
        var t = this.config;
        return "string" == typeof t.data_order && "desc" === t.data_order.toLowerCase()
    }, c.isOrderAsc = function() {
        var t = this.config;
        return "string" == typeof t.data_order && "asc" === t.data_order.toLowerCase()
    }, c.orderTargets = function(t) {
        var e = this,
            i = e.config,
            a = e.isOrderAsc(),
            n = e.isOrderDesc();
        return a || n ? t.sort(function(t, e) {
            var i = function(t, e) {
                    return t + Math.abs(e.value)
                },
                n = t.values.reduce(i, 0),
                r = e.values.reduce(i, 0);
            return a ? r - n : n - r
        }) : h(i.data_order) && t.sort(i.data_order), t
    }, c.filterByX = function(t, e) {
        return this.d3.merge(t.map(function(t) {
            return t.values
        })).filter(function(t) {
            return t.x - e === 0
        })
    }, c.filterRemoveNull = function(t) {
        return t.filter(function(t) {
            return g(t.value)
        })
    }, c.filterByXDomain = function(t, e) {
        return t.map(function(t) {
            return {
                id: t.id,
                id_org: t.id_org,
                values: t.values.filter(function(t) {
                    return e[0] <= t.x && t.x <= e[1]
                })
            }
        })
    }, c.hasDataLabel = function() {
        var t = this.config;
        return !("boolean" != typeof t.data_labels || !t.data_labels) || !("object" != typeof t.data_labels || !T(t.data_labels))
    }, c.getDataLabelLength = function(t, e, i) {
        var a = this,
            n = [0, 0],
            r = 1.3;
        return a.selectChart.select("svg").selectAll(".dummy").data([t, e]).enter().append("text").text(function(t) {
            return a.dataLabelFormat(t.id)(t)
        }).each(function(t, e) {
            n[e] = this.getBoundingClientRect()[i] * r
        }).remove(), n
    }, c.isNoneArc = function(t) {
        return this.hasTarget(this.data.targets, t.id)
    }, c.isArc = function(t) {
        return "data" in t && this.hasTarget(this.data.targets, t.data.id)
    }, c.findSameXOfValues = function(t, e) {
        var i, a = t[e].x,
            n = [];
        for (i = e - 1; i >= 0 && a === t[i].x; i--) n.push(t[i]);
        for (i = e; i < t.length && a === t[i].x; i++) n.push(t[i]);
        return n
    }, c.findClosestFromTargets = function(t, e) {
        var i, a = this;
        return i = t.map(function(t) {
            return a.findClosest(t.values, e)
        }), a.findClosest(i, e)
    }, c.findClosest = function(t, e) {
        var i, a = this,
            n = 100;
        return t.filter(function(t) {
            return t && a.isBarType(t.id)
        }).forEach(function(t) {
            var e = a.main.select("." + u.bars + a.getTargetSelectorSuffix(t.id) + " ." + u.bar + "-" + t.index).node();
            !i && a.isWithinBar(e) && (i = t)
        }), t.filter(function(t) {
            return t && !a.isBarType(t.id)
        }).forEach(function(t) {
            var r = a.dist(t, e);
            n > r && (n = r, i = t)
        }), i
    }, c.dist = function(t, e) {
        var i = this,
            a = i.config,
            n = a.axis_rotated ? 1 : 0,
            r = a.axis_rotated ? 0 : 1,
            s = i.circleY(t, t.index),
            o = i.x(t.x);
        return Math.pow(o - e[n], 2) + Math.pow(s - e[r], 2)
    }, c.convertValuesToStep = function(t) {
        var e, i = [].concat(t);
        if (!this.isCategorized()) return t;
        for (e = t.length + 1; e > 0; e--) i[e] = i[e - 1];
        return i[0] = {
            x: i[0].x - 1,
            value: i[0].value,
            id: i[0].id
        }, i[t.length + 1] = {
            x: i[t.length].x + 1,
            value: i[t.length].value,
            id: i[t.length].id
        }, i
    }, c.updateDataAttributes = function(t, e) {
        var i = this,
            a = i.config,
            n = a["data_" + t];
        return "undefined" == typeof e ? n : (Object.keys(e).forEach(function(t) {
            n[t] = e[t]
        }), i.redraw({
            withLegend: !0
        }), n)
    }, c.convertUrlToData = function(t, e, i, a) {
        var n = this,
            r = e ? e : "csv";
        n.d3.xhr(t, function(t, e) {
            var s;
            if (!e) throw new Error(t.responseURL + " " + t.status + " (" + t.statusText + ")");
            s = "json" === r ? n.convertJsonToData(JSON.parse(e.response), i) : "tsv" === r ? n.convertTsvToData(e.response) : n.convertCsvToData(e.response), a.call(n, s)
        })
    }, c.convertXsvToData = function(t, e) {
        var i, a = e.parseRows(t);
        return 1 === a.length ? (i = [{}], a[0].forEach(function(t) {
            i[0][t] = null
        })) : i = e.parse(t), i
    }, c.convertCsvToData = function(t) {
        return this.convertXsvToData(t, this.d3.csv)
    }, c.convertTsvToData = function(t) {
        return this.convertXsvToData(t, this.d3.tsv)
    }, c.convertJsonToData = function(t, e) {
        var i, a, n = this,
            r = [];
        return e ? (e.x ? (i = e.value.concat(e.x), n.config.data_x = e.x) : i = e.value, r.push(i), t.forEach(function(t) {
            var e = [];
            i.forEach(function(i) {
                var a = x(t[i]) ? null : t[i];
                e.push(a)
            }), r.push(e)
        }), a = n.convertRowsToData(r)) : (Object.keys(t).forEach(function(e) {
            r.push([e].concat(t[e]))
        }), a = n.convertColumnsToData(r)), a
    }, c.convertRowsToData = function(t) {
        var e, i, a = t[0],
            n = {},
            r = [];
        for (e = 1; e < t.length; e++) {
            for (n = {}, i = 0; i < t[e].length; i++) {
                if (x(t[e][i])) throw new Error("Source data is missing a component at (" + e + "," + i + ")!");
                n[a[i]] = t[e][i]
            }
            r.push(n)
        }
        return r
    }, c.convertColumnsToData = function(t) {
        var e, i, a, n = [];
        for (e = 0; e < t.length; e++)
            for (a = t[e][0], i = 1; i < t[e].length; i++) {
                if (x(n[i - 1]) && (n[i - 1] = {}), x(t[e][i])) throw new Error("Source data is missing a component at (" + e + "," + i + ")!");
                n[i - 1][a] = t[e][i]
            }
        return n
    }, c.convertDataToTargets = function(t, e) {
        var i, a = this,
            n = a.config,
            r = a.d3.keys(t[0]).filter(a.isNotX, a),
            s = a.d3.keys(t[0]).filter(a.isX, a);
        return r.forEach(function(i) {
            var r = a.getXKey(i);
            a.isCustomX() || a.isTimeSeries() ? s.indexOf(r) >= 0 ? a.data.xs[i] = (e && a.data.xs[i] ? a.data.xs[i] : []).concat(t.map(function(t) {
                return t[r]
            }).filter(g).map(function(t, e) {
                return a.generateTargetX(t, i, e)
            })) : n.data_x ? a.data.xs[i] = a.getOtherTargetXs() : T(n.data_xs) && (a.data.xs[i] = a.getXValuesOfXKey(r, a.data.targets)) : a.data.xs[i] = t.map(function(t, e) {
                return e
            })
        }), r.forEach(function(t) {
            if (!a.data.xs[t]) throw new Error('x is not defined for id = "' + t + '".')
        }), i = r.map(function(e, i) {
            var r = n.data_idConverter(e);
            return {
                id: r,
                id_org: e,
                values: t.map(function(t, s) {
                    var o = a.getXKey(e),
                        c = t[o],
                        d = a.generateTargetX(c, e, s);
                    return a.isCustomX() && a.isCategorized() && 0 === i && c && (0 === s && (n.axis_x_categories = []), n.axis_x_categories.push(c)), (x(t[e]) || a.data.xs[e].length <= s) && (d = void 0), {
                        x: d,
                        value: null === t[e] || isNaN(t[e]) ? null : +t[e],
                        id: r
                    }
                }).filter(function(t) {
                    return p(t.x)
                })
            }
        }), i.forEach(function(t) {
            var e;
            n.data_xSort && (t.values = t.values.sort(function(t, e) {
                var i = t.x || 0 === t.x ? t.x : 1 / 0,
                    a = e.x || 0 === e.x ? e.x : 1 / 0;
                return i - a
            })), e = 0, t.values.forEach(function(t) {
                t.index = e++
            }), a.data.xs[t.id].sort(function(t, e) {
                return t - e
            })
        }), n.data_type && a.setTargetType(a.mapToIds(i).filter(function(t) {
            return !(t in n.data_types)
        }), n.data_type), i.forEach(function(t) {
            a.addCache(t.id_org, t)
        }), i
    }, c.load = function(t, e) {
        var i = this;
        t && (e.filter && (t = t.filter(e.filter)), (e.type || e.types) && t.forEach(function(t) {
            var a = e.types && e.types[t.id] ? e.types[t.id] : e.type;
            i.setTargetType(t.id, a)
        }), i.data.targets.forEach(function(e) {
            for (var i = 0; i < t.length; i++)
                if (e.id === t[i].id) {
                    e.values = t[i].values, t.splice(i, 1);
                    break
                }
        }), i.data.targets = i.data.targets.concat(t)), i.updateTargets(i.data.targets), i.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0,
            withLegend: !0
        }), e.done && e.done()
    }, c.loadFromArgs = function(t) {
        var e = this;
        t.data ? e.load(e.convertDataToTargets(t.data), t) : t.url ? e.convertUrlToData(t.url, t.mimeType, t.keys, function(i) {
            e.load(e.convertDataToTargets(i), t)
        }) : t.json ? e.load(e.convertDataToTargets(e.convertJsonToData(t.json, t.keys)), t) : t.rows ? e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)), t) : t.columns ? e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)), t) : e.load(null, t)
    }, c.unload = function(t, e) {
        var i = this;
        return e || (e = function() {}), t = t.filter(function(t) {
            return i.hasTarget(i.data.targets, t)
        }), t && 0 !== t.length ? (i.svg.selectAll(t.map(function(t) {
            return i.selectorTarget(t)
        })).transition().style("opacity", 0).remove().call(i.endall, e), void t.forEach(function(t) {
            i.withoutFadeIn[t] = !1, i.legend && i.legend.selectAll("." + u.legendItem + i.getTargetSelectorSuffix(t)).remove(), i.data.targets = i.data.targets.filter(function(e) {
                return e.id !== t
            })
        })) : void e()
    }, c.categoryName = function(t) {
        var e = this.config;
        return t < e.axis_x_categories.length ? e.axis_x_categories[t] : t
    }, c.initEventRect = function() {
        var t = this;
        t.main.select("." + u.chart).append("g").attr("class", u.eventRects).style("fill-opacity", 0)
    }, c.redrawEventRect = function() {
        var t, e, i = this,
            a = i.config,
            n = i.isMultipleX(),
            r = i.main.select("." + u.eventRects).style("cursor", a.zoom_enabled ? a.axis_rotated ? "ns-resize" : "ew-resize" : null).classed(u.eventRectsMultiple, n).classed(u.eventRectsSingle, !n);
        r.selectAll("." + u.eventRect).remove(), i.eventRect = r.selectAll("." + u.eventRect), n ? (t = i.eventRect.data([0]), i.generateEventRectsForMultipleXs(t.enter()), i.updateEventRect(t)) : (e = i.getMaxDataCountTarget(i.data.targets), r.datum(e ? e.values : []), i.eventRect = r.selectAll("." + u.eventRect), t = i.eventRect.data(function(t) {
            return t
        }), i.generateEventRectsForSingleX(t.enter()), i.updateEventRect(t), t.exit().remove())
    }, c.updateEventRect = function(t) {
        var e, i, a, n, r, s, o = this,
            c = o.config;
        t = t || o.eventRect.data(function(t) {
            return t
        }), o.isMultipleX() ? (e = 0, i = 0, a = o.width, n = o.height) : (!o.isCustomX() && !o.isTimeSeries() || o.isCategorized() ? (r = o.getEventRectWidth(), s = function(t) {
            return o.x(t.x) - r / 2
        }) : (o.updateXs(), r = function(t) {
            var e = o.getPrevX(t.index),
                i = o.getNextX(t.index);
            return null === e && null === i ? c.axis_rotated ? o.height : o.width : (null === e && (e = o.x.domain()[0]), null === i && (i = o.x.domain()[1]), Math.max(0, (o.x(i) - o.x(e)) / 2))
        }, s = function(t) {
            var e = o.getPrevX(t.index),
                i = o.getNextX(t.index),
                a = o.data.xs[t.id][t.index];
            return null === e && null === i ? 0 : (null === e && (e = o.x.domain()[0]), (o.x(a) + o.x(e)) / 2)
        }), e = c.axis_rotated ? 0 : s, i = c.axis_rotated ? s : 0, a = c.axis_rotated ? o.width : r, n = c.axis_rotated ? r : o.height), t.attr("class", o.classEvent.bind(o)).attr("x", e).attr("y", i).attr("width", a).attr("height", n)
    }, c.generateEventRectsForSingleX = function(t) {
        var e = this,
            i = e.d3,
            a = e.config;
        t.append("rect").attr("class", e.classEvent.bind(e)).style("cursor", a.data_selection_enabled && a.data_selection_grouped ? "pointer" : null).on("mouseover", function(t) {
            var i = t.index;
            e.dragging || e.flowing || e.hasArcType() || (a.point_focus_expand_enabled && e.expandCircles(i, null, !0), e.expandBars(i, null, !0), e.main.selectAll("." + u.shape + "-" + i).each(function(t) {
                a.data_onmouseover.call(e.api, t)
            }))
        }).on("mouseout", function(t) {
            var i = t.index;
            e.config && (e.hasArcType() || (e.hideXGridFocus(), e.hideTooltip(), e.unexpandCircles(), e.unexpandBars(), e.main.selectAll("." + u.shape + "-" + i).each(function(t) {
                a.data_onmouseout.call(e.api, t)
            })))
        }).on("mousemove", function(t) {
            var n, r = t.index,
                s = e.svg.select("." + u.eventRect + "-" + r);
            e.dragging || e.flowing || e.hasArcType() || (e.isStepType(t) && "step-after" === e.config.line_step_type && i.mouse(this)[0] < e.x(e.getXValue(t.id, r)) && (r -= 1), n = e.filterTargetsToShow(e.data.targets).map(function(t) {
                return e.addName(e.getValueOnIndex(t.values, r))
            }), a.tooltip_grouped && (e.showTooltip(n, this), e.showXGridFocus(n)), (!a.tooltip_grouped || a.data_selection_enabled && !a.data_selection_grouped) && e.main.selectAll("." + u.shape + "-" + r).each(function() {
                i.select(this).classed(u.EXPANDED, !0), a.data_selection_enabled && s.style("cursor", a.data_selection_grouped ? "pointer" : null), a.tooltip_grouped || (e.hideXGridFocus(), e.hideTooltip(), a.data_selection_grouped || (e.unexpandCircles(r), e.unexpandBars(r)))
            }).filter(function(t) {
                return e.isWithinShape(this, t)
            }).each(function(t) {
                a.data_selection_enabled && (a.data_selection_grouped || a.data_selection_isselectable(t)) && s.style("cursor", "pointer"), a.tooltip_grouped || (e.showTooltip([t], this), e.showXGridFocus([t]), a.point_focus_expand_enabled && e.expandCircles(r, t.id, !0), e.expandBars(r, t.id, !0))
            }))
        }).on("click", function(t) {
            var n = t.index;
            if (!e.hasArcType() && e.toggleShape) {
                if (e.cancelClick) return void(e.cancelClick = !1);
                e.isStepType(t) && "step-after" === a.line_step_type && i.mouse(this)[0] < e.x(e.getXValue(t.id, n)) && (n -= 1), e.main.selectAll("." + u.shape + "-" + n).each(function(t) {
                    (a.data_selection_grouped || e.isWithinShape(this, t)) && (e.toggleShape(this, t, n), e.config.data_onclick.call(e.api, t, this))
                })
            }
        }).call(a.data_selection_draggable && e.drag ? i.behavior.drag().origin(Object).on("drag", function() {
            e.drag(i.mouse(this))
        }).on("dragstart", function() {
            e.dragstart(i.mouse(this))
        }).on("dragend", function() {
            e.dragend()
        }) : function() {})
    }, c.generateEventRectsForMultipleXs = function(t) {
        function e() {
            i.svg.select("." + u.eventRect).style("cursor", null), i.hideXGridFocus(), i.hideTooltip(), i.unexpandCircles(), i.unexpandBars()
        }
        var i = this,
            a = i.d3,
            n = i.config;
        t.append("rect").attr("x", 0).attr("y", 0).attr("width", i.width).attr("height", i.height).attr("class", u.eventRect).on("mouseout", function() {
            i.config && (i.hasArcType() || e())
        }).on("mousemove", function() {
            var t, r, s, o, c = i.filterTargetsToShow(i.data.targets);
            if (!i.dragging && !i.hasArcType(c)) {
                if (t = a.mouse(this), r = i.findClosestFromTargets(c, t), !i.mouseover || r && r.id === i.mouseover.id || (n.data_onmouseout.call(i.api, i.mouseover), i.mouseover = void 0), !r) return void e();
                s = i.isScatterType(r) || !n.tooltip_grouped ? [r] : i.filterByX(c, r.x), o = s.map(function(t) {
                    return i.addName(t)
                }), i.showTooltip(o, this), n.point_focus_expand_enabled && i.expandCircles(r.index, r.id, !0), i.expandBars(r.index, r.id, !0), i.showXGridFocus(o), (i.isBarType(r.id) || i.dist(r, t) < 100) && (i.svg.select("." + u.eventRect).style("cursor", "pointer"), i.mouseover || (n.data_onmouseover.call(i.api, r), i.mouseover = r))
            }
        }).on("click", function() {
            var t, e, r = i.filterTargetsToShow(i.data.targets);
            i.hasArcType(r) || (t = a.mouse(this), e = i.findClosestFromTargets(r, t), e && (i.isBarType(e.id) || i.dist(e, t) < 100) && i.main.selectAll("." + u.shapes + i.getTargetSelectorSuffix(e.id)).selectAll("." + u.shape + "-" + e.index).each(function() {
                (n.data_selection_grouped || i.isWithinShape(this, e)) && (i.toggleShape(this, e, e.index), i.config.data_onclick.call(i.api, e, this))
            }))
        }).call(n.data_selection_draggable && i.drag ? a.behavior.drag().origin(Object).on("drag", function() {
            i.drag(a.mouse(this))
        }).on("dragstart", function() {
            i.dragstart(a.mouse(this))
        }).on("dragend", function() {
            i.dragend()
        }) : function() {})
    }, c.dispatchEvent = function(e, i, a) {
        var n = this,
            r = "." + u.eventRect + (n.isMultipleX() ? "" : "-" + i),
            s = n.main.select(r).node(),
            o = s.getBoundingClientRect(),
            c = o.left + (a ? a[0] : 0),
            d = o.top + (a ? a[1] : 0),
            l = document.createEvent("MouseEvents");
        l.initMouseEvent(e, !0, !0, t, 0, c, d, c, d, !1, !1, !1, !1, 0, null), s.dispatchEvent(l)
    }, c.getCurrentWidth = function() {
        var t = this,
            e = t.config;
        return e.size_width ? e.size_width : t.getParentWidth()
    }, c.getCurrentHeight = function() {
        var t = this,
            e = t.config,
            i = e.size_height ? e.size_height : t.getParentHeight();
        return i > 0 ? i : 320 / (t.hasType("gauge") ? 2 : 1)
    }, c.getCurrentPaddingTop = function() {
        var t = this.config;
        return g(t.padding_top) ? t.padding_top : 0
    }, c.getCurrentPaddingBottom = function() {
        var t = this.config;
        return g(t.padding_bottom) ? t.padding_bottom : 0
    }, c.getCurrentPaddingLeft = function(t) {
        var e = this,
            i = e.config;
        return g(i.padding_left) ? i.padding_left : i.axis_rotated ? i.axis_x_show ? Math.max(_(e.getAxisWidthByAxisId("x", t)), 40) : 1 : !i.axis_y_show || i.axis_y_inner ? e.axis.getYAxisLabelPosition().isOuter ? 30 : 1 : _(e.getAxisWidthByAxisId("y", t))
    }, c.getCurrentPaddingRight = function() {
        var t = this,
            e = t.config,
            i = 10,
            a = t.isLegendRight ? t.getLegendWidth() + 20 : 0;
        return g(e.padding_right) ? e.padding_right + 1 : e.axis_rotated ? i + a : !e.axis_y2_show || e.axis_y2_inner ? 2 + a + (t.axis.getY2AxisLabelPosition().isOuter ? 20 : 0) : _(t.getAxisWidthByAxisId("y2")) + a
    }, c.getParentRectValue = function(t) {
        for (var e, i = this.selectChart.node(); i && "BODY" !== i.tagName;) {
            try {
                e = i.getBoundingClientRect()[t]
            } catch (a) {
                "width" === t && (e = i.offsetWidth)
            }
            if (e) break;
            i = i.parentNode
        }
        return e
    }, c.getParentWidth = function() {
        return this.getParentRectValue("width")
    }, c.getParentHeight = function() {
        var t = this.selectChart.style("height");
        return t.indexOf("px") > 0 ? +t.replace("px", "") : 0
    }, c.getSvgLeft = function(t) {
        var e = this,
            i = e.config,
            a = i.axis_rotated || !i.axis_rotated && !i.axis_y_inner,
            n = i.axis_rotated ? u.axisX : u.axisY,
            r = e.main.select("." + n).node(),
            s = r && a ? r.getBoundingClientRect() : {
                right: 0
            },
            o = e.selectChart.node().getBoundingClientRect(),
            c = e.hasArcType(),
            d = s.right - o.left - (c ? 0 : e.getCurrentPaddingLeft(t));
        return d > 0 ? d : 0
    }, c.getAxisWidthByAxisId = function(t, e) {
        var i = this,
            a = i.axis.getLabelPositionById(t);
        return i.axis.getMaxTickWidth(t, e) + (a.isInner ? 20 : 40)
    }, c.getHorizontalAxisHeight = function(t) {
        var e = this,
            i = e.config,
            a = 30;
        return "x" !== t || i.axis_x_show ? "x" === t && i.axis_x_height ? i.axis_x_height : "y" !== t || i.axis_y_show ? "y2" !== t || i.axis_y2_show ? ("x" === t && !i.axis_rotated && i.axis_x_tick_rotate && (a = 30 + e.axis.getMaxTickWidth(t) * Math.cos(Math.PI * (90 - i.axis_x_tick_rotate) / 180)), a + (e.axis.getLabelPositionById(t).isInner ? 0 : 10) + ("y2" === t ? -10 : 0)) : e.rotated_padding_top : !i.legend_show || e.isLegendRight || e.isLegendInset ? 1 : 10 : 8
    }, c.getEventRectWidth = function() {
        return Math.max(0, this.xAxis.tickInterval())
    }, c.getShapeIndices = function(t) {
        var e, i, a = this,
            n = a.config,
            r = {},
            s = 0;
        return a.filterTargetsToShow(a.data.targets.filter(t, a)).forEach(function(t) {
            for (e = 0; e < n.data_groups.length; e++)
                if (!(n.data_groups[e].indexOf(t.id) < 0))
                    for (i = 0; i < n.data_groups[e].length; i++)
                        if (n.data_groups[e][i] in r) {
                            r[t.id] = r[n.data_groups[e][i]];
                            break
                        } x(r[t.id]) && (r[t.id] = s++)
        }), r.__max__ = s - 1, r
    }, c.getShapeX = function(t, e, i, a) {
        var n = this,
            r = a ? n.subX : n.x;
        return function(a) {
            var n = a.id in i ? i[a.id] : 0;
            return a.x || 0 === a.x ? r(a.x) - t * (e / 2 - n) : 0
        }
    }, c.getShapeY = function(t) {
        var e = this;
        return function(i) {
            var a = t ? e.getSubYScale(i.id) : e.getYScale(i.id);
            return a(i.value)
        }
    }, c.getShapeOffset = function(t, e, i) {
        var a = this,
            n = a.orderTargets(a.filterTargetsToShow(a.data.targets.filter(t, a))),
            r = n.map(function(t) {
                return t.id
            });
        return function(t, s) {
            var o = i ? a.getSubYScale(t.id) : a.getYScale(t.id),
                c = o(0),
                d = c;
            return n.forEach(function(i) {
                var n = a.isStepType(t) ? a.convertValuesToStep(i.values) : i.values;
                i.id !== t.id && e[i.id] === e[t.id] && r.indexOf(i.id) < r.indexOf(t.id) && n[s].value * t.value >= 0 && (d += o(n[s].value) - c)
            }), d
        }
    }, c.isWithinShape = function(t, e) {
        var i, a = this,
            n = a.d3.select(t);
        return a.isTargetToShow(e.id) ? "circle" === t.nodeName ? i = a.isStepType(e) ? a.isWithinStep(t, a.getYScale(e.id)(e.value)) : a.isWithinCircle(t, 1.5 * a.pointSelectR(e)) : "path" === t.nodeName && (i = !n.classed(u.bar) || a.isWithinBar(t)) : i = !1, i
    }, c.getInterpolate = function(t) {
        var e = this;
        return e.isSplineType(t) ? "cardinal" : e.isStepType(t) ? e.config.line_step_type : "linear"
    }, c.initLine = function() {
        var t = this;
        t.main.select("." + u.chart).append("g").attr("class", u.chartLines)
    }, c.updateTargetsForLine = function(t) {
        var e, i, a = this,
            n = a.config,
            r = a.classChartLine.bind(a),
            s = a.classLines.bind(a),
            o = a.classAreas.bind(a),
            c = a.classCircles.bind(a),
            d = a.classFocus.bind(a);
        e = a.main.select("." + u.chartLines).selectAll("." + u.chartLine).data(t).attr("class", function(t) {
            return r(t) + d(t)
        }), i = e.enter().append("g").attr("class", r).style("opacity", 0).style("pointer-events", "none"), i.append("g").attr("class", s), i.append("g").attr("class", o), i.append("g").attr("class", function(t) {
            return a.generateClass(u.selectedCircles, t.id)
        }), i.append("g").attr("class", c).style("cursor", function(t) {
            return n.data_selection_isselectable(t) ? "pointer" : null
        }), t.forEach(function(t) {
            a.main.selectAll("." + u.selectedCircles + a.getTargetSelectorSuffix(t.id)).selectAll("." + u.selectedCircle).each(function(e) {
                e.value = t.values[e.index].value
            })
        })
    }, c.updateLine = function(t) {
        var e = this;
        e.mainLine = e.main.selectAll("." + u.lines).selectAll("." + u.line).data(e.lineData.bind(e)), e.mainLine.enter().append("path").attr("class", e.classLine.bind(e)).style("stroke", e.color), e.mainLine.style("opacity", e.initialOpacity.bind(e)).style("shape-rendering", function(t) {
            return e.isStepType(t) ? "crispEdges" : ""
        }).attr("transform", null), e.mainLine.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawLine = function(t, e) {
        return [(e ? this.mainLine.transition() : this.mainLine).attr("d", t).style("stroke", this.color).style("opacity", 1)]
    }, c.generateDrawLine = function(t, e) {
        var i = this,
            a = i.config,
            n = i.d3.svg.line(),
            r = i.generateGetLinePoints(t, e),
            s = e ? i.getSubYScale : i.getYScale,
            o = function(t) {
                return (e ? i.subxx : i.xx).call(i, t)
            },
            c = function(t, e) {
                return a.data_groups.length > 0 ? r(t, e)[0][1] : s.call(i, t.id)(t.value)
            };
        return n = a.axis_rotated ? n.x(c).y(o) : n.x(o).y(c), a.line_connectNull || (n = n.defined(function(t) {
                return null != t.value
            })),
            function(t) {
                var r, o = a.line_connectNull ? i.filterRemoveNull(t.values) : t.values,
                    c = e ? i.x : i.subX,
                    d = s.call(i, t.id),
                    l = 0,
                    u = 0;
                return i.isLineType(t) ? a.data_regions[t.id] ? r = i.lineWithRegions(o, c, d, a.data_regions[t.id]) : (i.isStepType(t) && (o = i.convertValuesToStep(o)), r = n.interpolate(i.getInterpolate(t))(o)) : (o[0] && (l = c(o[0].x), u = d(o[0].value)), r = a.axis_rotated ? "M " + u + " " + l : "M " + l + " " + u), r ? r : "M 0 0"
            }
    }, c.generateGetLinePoints = function(t, e) {
        var i = this,
            a = i.config,
            n = t.__max__ + 1,
            r = i.getShapeX(0, n, t, !!e),
            s = i.getShapeY(!!e),
            o = i.getShapeOffset(i.isLineType, t, !!e),
            c = e ? i.getSubYScale : i.getYScale;
        return function(t, e) {
            var n = c.call(i, t.id)(0),
                d = o(t, e) || n,
                l = r(t),
                u = s(t);
            return a.axis_rotated && (0 < t.value && n > u || t.value < 0 && u > n) && (u = n), [
                [l, u - (n - d)],
                [l, u - (n - d)],
                [l, u - (n - d)],
                [l, u - (n - d)]
            ]
        }
    }, c.lineWithRegions = function(t, e, i, a) {
        function n(t, e) {
            var i;
            for (i = 0; i < e.length; i++)
                if (e[i].start < t && t <= e[i].end) return !0;
            return !1
        }

        function r(t) {
            return "M" + t[0][0] + " " + t[0][1] + " " + t[1][0] + " " + t[1][1]
        }
        var s, o, c, d, l, u, g, h, f, _, m, y, v = this,
            T = v.config,
            b = -1,
            A = "M",
            w = v.isCategorized() ? .5 : 0,
            L = [];
        if (p(a))
            for (s = 0; s < a.length; s++) L[s] = {}, L[s].start = x(a[s].start) ? t[0].x : v.isTimeSeries() ? v.parseDate(a[s].start) : a[s].start, L[s].end = x(a[s].end) ? t[t.length - 1].x : v.isTimeSeries() ? v.parseDate(a[s].end) : a[s].end;
        for (m = T.axis_rotated ? function(t) {
                return i(t.value)
            } : function(t) {
                return e(t.x)
            }, y = T.axis_rotated ? function(t) {
                return e(t.x)
            } : function(t) {
                return i(t.value)
            }, c = v.isTimeSeries() ? function(t, a, n, s) {
                var o, c = t.x.getTime(),
                    d = a.x - t.x,
                    u = new Date(c + d * n),
                    g = new Date(c + d * (n + s));
                return o = T.axis_rotated ? [
                    [i(l(n)), e(u)],
                    [i(l(n + s)), e(g)]
                ] : [
                    [e(u), i(l(n))],
                    [e(g), i(l(n + s))]
                ], r(o)
            } : function(t, a, n, s) {
                var o;
                return o = T.axis_rotated ? [
                    [i(l(n), !0), e(d(n))],
                    [i(l(n + s), !0), e(d(n + s))]
                ] : [
                    [e(d(n), !0), i(l(n))],
                    [e(d(n + s), !0), i(l(n + s))]
                ], r(o)
            }, s = 0; s < t.length; s++) {
            if (x(L) || !n(t[s].x, L)) A += " " + m(t[s]) + " " + y(t[s]);
            else
                for (d = v.getScale(t[s - 1].x + w, t[s].x + w, v.isTimeSeries()), l = v.getScale(t[s - 1].value, t[s].value), u = e(t[s].x) - e(t[s - 1].x), g = i(t[s].value) - i(t[s - 1].value), h = Math.sqrt(Math.pow(u, 2) + Math.pow(g, 2)), f = 2 / h, _ = 2 * f, o = f; 1 >= o; o += _) A += c(t[s - 1], t[s], o, f);
            b = t[s].x
        }
        return A
    }, c.updateArea = function(t) {
        var e = this,
            i = e.d3;
        e.mainArea = e.main.selectAll("." + u.areas).selectAll("." + u.area).data(e.lineData.bind(e)), e.mainArea.enter().append("path").attr("class", e.classArea.bind(e)).style("fill", e.color).style("opacity", function() {
            return e.orgAreaOpacity = +i.select(this).style("opacity"), 0
        }), e.mainArea.style("opacity", e.orgAreaOpacity), e.mainArea.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawArea = function(t, e) {
        return [(e ? this.mainArea.transition() : this.mainArea).attr("d", t).style("fill", this.color).style("opacity", this.orgAreaOpacity)]
    }, c.generateDrawArea = function(t, e) {
        var i = this,
            a = i.config,
            n = i.d3.svg.area(),
            r = i.generateGetAreaPoints(t, e),
            s = e ? i.getSubYScale : i.getYScale,
            o = function(t) {
                return (e ? i.subxx : i.xx).call(i, t)
            },
            c = function(t, e) {
                return a.data_groups.length > 0 ? r(t, e)[0][1] : s.call(i, t.id)(i.getAreaBaseValue(t.id))
            },
            d = function(t, e) {
                return a.data_groups.length > 0 ? r(t, e)[1][1] : s.call(i, t.id)(t.value)
            };
        return n = a.axis_rotated ? n.x0(c).x1(d).y(o) : n.x(o).y0(c).y1(d), a.line_connectNull || (n = n.defined(function(t) {
                return null !== t.value
            })),
            function(t) {
                var e, r = a.line_connectNull ? i.filterRemoveNull(t.values) : t.values,
                    s = 0,
                    o = 0;
                return i.isAreaType(t) ? (i.isStepType(t) && (r = i.convertValuesToStep(r)), e = n.interpolate(i.getInterpolate(t))(r)) : (r[0] && (s = i.x(r[0].x), o = i.getYScale(t.id)(r[0].value)), e = a.axis_rotated ? "M " + o + " " + s : "M " + s + " " + o), e ? e : "M 0 0"
            }
    }, c.getAreaBaseValue = function() {
        return 0
    }, c.generateGetAreaPoints = function(t, e) {
        var i = this,
            a = i.config,
            n = t.__max__ + 1,
            r = i.getShapeX(0, n, t, !!e),
            s = i.getShapeY(!!e),
            o = i.getShapeOffset(i.isAreaType, t, !!e),
            c = e ? i.getSubYScale : i.getYScale;
        return function(t, e) {
            var n = c.call(i, t.id)(0),
                d = o(t, e) || n,
                l = r(t),
                u = s(t);
            return a.axis_rotated && (0 < t.value && n > u || t.value < 0 && u > n) && (u = n), [
                [l, d],
                [l, u - (n - d)],
                [l, u - (n - d)],
                [l, d]
            ]
        }
    }, c.updateCircle = function() {
        var t = this;
        t.mainCircle = t.main.selectAll("." + u.circles).selectAll("." + u.circle).data(t.lineOrScatterData.bind(t)), t.mainCircle.enter().append("circle").attr("class", t.classCircle.bind(t)).attr("r", t.pointR.bind(t)).style("fill", t.color), t.mainCircle.style("opacity", t.initialOpacityForCircle.bind(t)), t.mainCircle.exit().remove()
    }, c.redrawCircle = function(t, e, i) {
        var a = this.main.selectAll("." + u.selectedCircle);
        return [(i ? this.mainCircle.transition() : this.mainCircle).style("opacity", this.opacityForCircle.bind(this)).style("fill", this.color).attr("cx", t).attr("cy", e), (i ? a.transition() : a).attr("cx", t).attr("cy", e)]
    }, c.circleX = function(t) {
        return t.x || 0 === t.x ? this.x(t.x) : null
    }, c.updateCircleY = function() {
        var t, e, i = this;
        i.config.data_groups.length > 0 ? (t = i.getShapeIndices(i.isLineType), e = i.generateGetLinePoints(t), i.circleY = function(t, i) {
            return e(t, i)[0][1]
        }) : i.circleY = function(t) {
            return i.getYScale(t.id)(t.value)
        }
    }, c.getCircles = function(t, e) {
        var i = this;
        return (e ? i.main.selectAll("." + u.circles + i.getTargetSelectorSuffix(e)) : i.main).selectAll("." + u.circle + (g(t) ? "-" + t : ""))
    }, c.expandCircles = function(t, e, i) {
        var a = this,
            n = a.pointExpandedR.bind(a);
        i && a.unexpandCircles(), a.getCircles(t, e).classed(u.EXPANDED, !0).attr("r", n)
    }, c.unexpandCircles = function(t) {
        var e = this,
            i = e.pointR.bind(e);
        e.getCircles(t).filter(function() {
            return e.d3.select(this).classed(u.EXPANDED)
        }).classed(u.EXPANDED, !1).attr("r", i)
    }, c.pointR = function(t) {
        var e = this,
            i = e.config;
        return e.isStepType(t) ? 0 : h(i.point_r) ? i.point_r(t) : i.point_r
    }, c.pointExpandedR = function(t) {
        var e = this,
            i = e.config;
        return i.point_focus_expand_enabled ? i.point_focus_expand_r ? i.point_focus_expand_r : 1.75 * e.pointR(t) : e.pointR(t)
    }, c.pointSelectR = function(t) {
        var e = this,
            i = e.config;
        return i.point_select_r ? i.point_select_r : 4 * e.pointR(t)
    }, c.isWithinCircle = function(t, e) {
        var i = this.d3,
            a = i.mouse(t),
            n = i.select(t),
            r = +n.attr("cx"),
            s = +n.attr("cy");
        return Math.sqrt(Math.pow(r - a[0], 2) + Math.pow(s - a[1], 2)) < e
    }, c.isWithinStep = function(t, e) {
        return Math.abs(e - this.d3.mouse(t)[1]) < 30
    }, c.initBar = function() {
        var t = this;
        t.main.select("." + u.chart).append("g").attr("class", u.chartBars)
    }, c.updateTargetsForBar = function(t) {
        var e, i, a = this,
            n = a.config,
            r = a.classChartBar.bind(a),
            s = a.classBars.bind(a),
            o = a.classFocus.bind(a);
        e = a.main.select("." + u.chartBars).selectAll("." + u.chartBar).data(t).attr("class", function(t) {
            return r(t) + o(t)
        }), i = e.enter().append("g").attr("class", r).style("opacity", 0).style("pointer-events", "none"), i.append("g").attr("class", s).style("cursor", function(t) {
            return n.data_selection_isselectable(t) ? "pointer" : null
        })
    }, c.updateBar = function(t) {
        var e = this,
            i = e.barData.bind(e),
            a = e.classBar.bind(e),
            n = e.initialOpacity.bind(e),
            r = function(t) {
                return e.color(t.id)
            };
        e.mainBar = e.main.selectAll("." + u.bars).selectAll("." + u.bar).data(i), e.mainBar.enter().append("path").attr("class", a).style("stroke", r).style("fill", r), e.mainBar.style("opacity", n), e.mainBar.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawBar = function(t, e) {
        return [(e ? this.mainBar.transition() : this.mainBar).attr("d", t).style("fill", this.color).style("opacity", 1)]
    }, c.getBarW = function(t, e) {
        var i = this,
            a = i.config,
            n = "number" == typeof a.bar_width ? a.bar_width : e ? t.tickInterval() * a.bar_width_ratio / e : 0;
        return a.bar_width_max && n > a.bar_width_max ? a.bar_width_max : n
    }, c.getBars = function(t, e) {
        var i = this;
        return (e ? i.main.selectAll("." + u.bars + i.getTargetSelectorSuffix(e)) : i.main).selectAll("." + u.bar + (g(t) ? "-" + t : ""))
    }, c.expandBars = function(t, e, i) {
        var a = this;
        i && a.unexpandBars(), a.getBars(t, e).classed(u.EXPANDED, !0)
    }, c.unexpandBars = function(t) {
        var e = this;
        e.getBars(t).classed(u.EXPANDED, !1)
    }, c.generateDrawBar = function(t, e) {
        var i = this,
            a = i.config,
            n = i.generateGetBarPoints(t, e);
        return function(t, e) {
            var i = n(t, e),
                r = a.axis_rotated ? 1 : 0,
                s = a.axis_rotated ? 0 : 1,
                o = "M " + i[0][r] + "," + i[0][s] + " L" + i[1][r] + "," + i[1][s] + " L" + i[2][r] + "," + i[2][s] + " L" + i[3][r] + "," + i[3][s] + " z";
            return o
        }
    }, c.generateGetBarPoints = function(t, e) {
        var i = this,
            a = e ? i.subXAxis : i.xAxis,
            n = t.__max__ + 1,
            r = i.getBarW(a, n),
            s = i.getShapeX(r, n, t, !!e),
            o = i.getShapeY(!!e),
            c = i.getShapeOffset(i.isBarType, t, !!e),
            d = e ? i.getSubYScale : i.getYScale;
        return function(t, e) {
            var a = d.call(i, t.id)(0),
                n = c(t, e) || a,
                l = s(t),
                u = o(t);
            return i.config.axis_rotated && (0 < t.value && a > u || t.value < 0 && u > a) && (u = a), [
                [l, n],
                [l, u - (a - n)],
                [l + r, u - (a - n)],
                [l + r, n]
            ]
        }
    }, c.isWithinBar = function(t) {
        var e = this.d3.mouse(t),
            i = t.getBoundingClientRect(),
            a = t.pathSegList.getItem(0),
            n = t.pathSegList.getItem(1),
            r = Math.min(a.x, n.x),
            s = Math.min(a.y, n.y),
            o = i.width,
            c = i.height,
            d = 2,
            l = r - d,
            u = r + o + d,
            g = s + c + d,
            h = s - d;
        return l < e[0] && e[0] < u && h < e[1] && e[1] < g
    }, c.initText = function() {
        var t = this;
        t.main.select("." + u.chart).append("g").attr("class", u.chartTexts), t.mainText = t.d3.selectAll([])
    }, c.updateTargetsForText = function(t) {
        var e, i, a = this,
            n = a.classChartText.bind(a),
            r = a.classTexts.bind(a),
            s = a.classFocus.bind(a);
        e = a.main.select("." + u.chartTexts).selectAll("." + u.chartText).data(t).attr("class", function(t) {
            return n(t) + s(t)
        }), i = e.enter().append("g").attr("class", n).style("opacity", 0).style("pointer-events", "none"), i.append("g").attr("class", r)
    }, c.updateText = function(t) {
        var e = this,
            i = e.config,
            a = e.barOrLineData.bind(e),
            n = e.classText.bind(e);
        e.mainText = e.main.selectAll("." + u.texts).selectAll("." + u.text).data(a), e.mainText.enter().append("text").attr("class", n).attr("text-anchor", function(t) {
            return i.axis_rotated ? t.value < 0 ? "end" : "start" : "middle"
        }).style("stroke", "none").style("fill", function(t) {
            return e.color(t)
        }).style("fill-opacity", 0), e.mainText.text(function(t, i, a) {
            return e.dataLabelFormat(t.id)(t.value, t.id, i, a)
        }), e.mainText.exit().transition().duration(t).style("fill-opacity", 0).remove()
    }, c.redrawText = function(t, e, i, a) {
        return [(a ? this.mainText.transition() : this.mainText).attr("x", t).attr("y", e).style("fill", this.color).style("fill-opacity", i ? 0 : this.opacityForText.bind(this))]
    }, c.getTextRect = function(t, e) {
        var i, a = this.d3.select("body").append("div").classed("c3", !0),
            n = a.append("svg").style("visibility", "hidden").style("position", "fixed").style("top", 0).style("left", 0);
        return n.selectAll(".dummy").data([t]).enter().append("text").classed(e ? e : "", !0).text(t).each(function() {
            i = this.getBoundingClientRect()
        }), a.remove(), i
    }, c.generateXYForText = function(t, e, i, a) {
        var n = this,
            r = n.generateGetAreaPoints(t, !1),
            s = n.generateGetBarPoints(e, !1),
            o = n.generateGetLinePoints(i, !1),
            c = a ? n.getXForText : n.getYForText;
        return function(t, e) {
            var i = n.isAreaType(t) ? r : n.isBarType(t) ? s : o;
            return c.call(n, i(t, e), t, this)
        }
    }, c.getXForText = function(t, e, i) {
        var a, n, r = this,
            s = i.getBoundingClientRect();
        return r.config.axis_rotated ? (n = r.isBarType(e) ? 4 : 6, a = t[2][1] + n * (e.value < 0 ? -1 : 1)) : a = r.hasType("bar") ? (t[2][0] + t[0][0]) / 2 : t[0][0], null === e.value && (a > r.width ? a = r.width - s.width : 0 > a && (a = 4)), a
    }, c.getYForText = function(t, e, i) {
        var a, n = this,
            r = i.getBoundingClientRect();
        return n.config.axis_rotated ? a = (t[0][0] + t[2][0] + .6 * r.height) / 2 : (a = t[2][1], e.value < 0 ? (a += r.height, n.isBarType(e) && n.isSafari() ? a -= 3 : !n.isBarType(e) && n.isChrome() && (a += 3)) : a += n.isBarType(e) ? -3 : -6), null !== e.value || n.config.axis_rotated || (a < r.height ? a = r.height : a > this.height && (a = this.height - 4)), a
    }, c.setTargetType = function(t, e) {
        var i = this,
            a = i.config;
        i.mapToTargetIds(t).forEach(function(t) {
            i.withoutFadeIn[t] = e === a.data_types[t], a.data_types[t] = e
        }), t || (a.data_type = e)
    }, c.hasType = function(t, e) {
        var i = this,
            a = i.config.data_types,
            n = !1;
        return e = e || i.data.targets, e && e.length ? e.forEach(function(e) {
            var i = a[e.id];
            (i && i.indexOf(t) >= 0 || !i && "line" === t) && (n = !0)
        }) : Object.keys(a).length ? Object.keys(a).forEach(function(e) {
            a[e] === t && (n = !0)
        }) : n = i.config.data_type === t, n
    }, c.hasArcType = function(t) {
        return this.hasType("pie", t) || this.hasType("donut", t) || this.hasType("gauge", t)
    }, c.isLineType = function(t) {
        var e = this.config,
            i = f(t) ? t : t.id;
        return !e.data_types[i] || ["line", "spline", "area", "area-spline", "step", "area-step"].indexOf(e.data_types[i]) >= 0
    }, c.isStepType = function(t) {
        var e = f(t) ? t : t.id;
        return ["step", "area-step"].indexOf(this.config.data_types[e]) >= 0
    }, c.isSplineType = function(t) {
        var e = f(t) ? t : t.id;
        return ["spline", "area-spline"].indexOf(this.config.data_types[e]) >= 0
    }, c.isAreaType = function(t) {
        var e = f(t) ? t : t.id;
        return ["area", "area-spline", "area-step"].indexOf(this.config.data_types[e]) >= 0
    }, c.isBarType = function(t) {
        var e = f(t) ? t : t.id;
        return "bar" === this.config.data_types[e]
    }, c.isScatterType = function(t) {
        var e = f(t) ? t : t.id;
        return "scatter" === this.config.data_types[e]
    }, c.isPieType = function(t) {
        var e = f(t) ? t : t.id;
        return "pie" === this.config.data_types[e]
    }, c.isGaugeType = function(t) {
        var e = f(t) ? t : t.id;
        return "gauge" === this.config.data_types[e]
    }, c.isDonutType = function(t) {
        var e = f(t) ? t : t.id;
        return "donut" === this.config.data_types[e]
    }, c.isArcType = function(t) {
        return this.isPieType(t) || this.isDonutType(t) || this.isGaugeType(t)
    }, c.lineData = function(t) {
        return this.isLineType(t) ? [t] : []
    }, c.arcData = function(t) {
        return this.isArcType(t.data) ? [t] : []
    }, c.barData = function(t) {
        return this.isBarType(t) ? t.values : []
    }, c.lineOrScatterData = function(t) {
        return this.isLineType(t) || this.isScatterType(t) ? t.values : []
    }, c.barOrLineData = function(t) {
        return this.isBarType(t) || this.isLineType(t) ? t.values : []
    }, c.initGrid = function() {
        var t = this,
            e = t.config,
            i = t.d3;
        t.grid = t.main.append("g").attr("clip-path", t.clipPathForGrid).attr("class", u.grid), e.grid_x_show && t.grid.append("g").attr("class", u.xgrids), e.grid_y_show && t.grid.append("g").attr("class", u.ygrids), e.grid_focus_show && t.grid.append("g").attr("class", u.xgridFocus).append("line").attr("class", u.xgridFocus), t.xgrid = i.selectAll([]), e.grid_lines_front || t.initGridLines()
    }, c.initGridLines = function() {
        var t = this,
            e = t.d3;
        t.gridLines = t.main.append("g").attr("clip-path", t.clipPathForGrid).attr("class", u.grid + " " + u.gridLines), t.gridLines.append("g").attr("class", u.xgridLines), t.gridLines.append("g").attr("class", u.ygridLines), t.xgridLines = e.selectAll([])
    }, c.updateXGrid = function(t) {
        var e = this,
            i = e.config,
            a = e.d3,
            n = e.generateGridData(i.grid_x_type, e.x),
            r = e.isCategorized() ? e.xAxis.tickOffset() : 0;
        e.xgridAttr = i.axis_rotated ? {
            x1: 0,
            x2: e.width,
            y1: function(t) {
                return e.x(t) - r
            },
            y2: function(t) {
                return e.x(t) - r
            }
        } : {
            x1: function(t) {
                return e.x(t) + r
            },
            x2: function(t) {
                return e.x(t) + r
            },
            y1: 0,
            y2: e.height
        }, e.xgrid = e.main.select("." + u.xgrids).selectAll("." + u.xgrid).data(n), e.xgrid.enter().append("line").attr("class", u.xgrid), t || e.xgrid.attr(e.xgridAttr).style("opacity", function() {
            return +a.select(this).attr(i.axis_rotated ? "y1" : "x1") === (i.axis_rotated ? e.height : 0) ? 0 : 1
        }), e.xgrid.exit().remove()
    }, c.updateYGrid = function() {
        var t = this,
            e = t.config,
            i = t.yAxis.tickValues() || t.y.ticks(e.grid_y_ticks);
        t.ygrid = t.main.select("." + u.ygrids).selectAll("." + u.ygrid).data(i), t.ygrid.enter().append("line").attr("class", u.ygrid), t.ygrid.attr("x1", e.axis_rotated ? t.y : 0).attr("x2", e.axis_rotated ? t.y : t.width).attr("y1", e.axis_rotated ? 0 : t.y).attr("y2", e.axis_rotated ? t.height : t.y), t.ygrid.exit().remove(), t.smoothLines(t.ygrid, "grid")
    }, c.gridTextAnchor = function(t) {
        return t.position ? t.position : "end"
    }, c.gridTextDx = function(t) {
        return "start" === t.position ? 4 : "middle" === t.position ? 0 : -4
    }, c.xGridTextX = function(t) {
        return "start" === t.position ? -this.height : "middle" === t.position ? -this.height / 2 : 0
    }, c.yGridTextX = function(t) {
        return "start" === t.position ? 0 : "middle" === t.position ? this.width / 2 : this.width
    }, c.updateGrid = function(t) {
        var e, i, a, n = this,
            r = n.main,
            s = n.config;
        n.grid.style("visibility", n.hasArcType() ? "hidden" : "visible"), r.select("line." + u.xgridFocus).style("visibility", "hidden"), s.grid_x_show && n.updateXGrid(), n.xgridLines = r.select("." + u.xgridLines).selectAll("." + u.xgridLine).data(s.grid_x_lines), e = n.xgridLines.enter().append("g").attr("class", function(t) {
            return u.xgridLine + (t.class ? " " + t.class : "")
        }), e.append("line").style("opacity", 0), e.append("text").attr("text-anchor", n.gridTextAnchor).attr("transform", s.axis_rotated ? "" : "rotate(-90)").attr("dx", n.gridTextDx).attr("dy", -5).style("opacity", 0), n.xgridLines.exit().transition().duration(t).style("opacity", 0).remove(), s.grid_y_show && n.updateYGrid(), n.ygridLines = r.select("." + u.ygridLines).selectAll("." + u.ygridLine).data(s.grid_y_lines), i = n.ygridLines.enter().append("g").attr("class", function(t) {
            return u.ygridLine + (t.class ? " " + t.class : "")
        }), i.append("line").style("opacity", 0), i.append("text").attr("text-anchor", n.gridTextAnchor).attr("transform", s.axis_rotated ? "rotate(-90)" : "").attr("dx", n.gridTextDx).attr("dy", -5).style("opacity", 0), a = n.yv.bind(n), n.ygridLines.select("line").transition().duration(t).attr("x1", s.axis_rotated ? a : 0).attr("x2", s.axis_rotated ? a : n.width).attr("y1", s.axis_rotated ? 0 : a).attr("y2", s.axis_rotated ? n.height : a).style("opacity", 1), n.ygridLines.select("text").transition().duration(t).attr("x", s.axis_rotated ? n.xGridTextX.bind(n) : n.yGridTextX.bind(n)).attr("y", a).text(function(t) {
            return t.text
        }).style("opacity", 1), n.ygridLines.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawGrid = function(t) {
        var e = this,
            i = e.config,
            a = e.xv.bind(e),
            n = e.xgridLines.select("line"),
            r = e.xgridLines.select("text");
        return [(t ? n.transition() : n).attr("x1", i.axis_rotated ? 0 : a).attr("x2", i.axis_rotated ? e.width : a).attr("y1", i.axis_rotated ? a : 0).attr("y2", i.axis_rotated ? a : e.height).style("opacity", 1), (t ? r.transition() : r).attr("x", i.axis_rotated ? e.yGridTextX.bind(e) : e.xGridTextX.bind(e)).attr("y", a).text(function(t) {
            return t.text
        }).style("opacity", 1)]
    }, c.showXGridFocus = function(t) {
        var e = this,
            i = e.config,
            a = t.filter(function(t) {
                return t && g(t.value)
            }),
            n = e.main.selectAll("line." + u.xgridFocus),
            r = e.xx.bind(e);
        i.tooltip_show && (e.hasType("scatter") || e.hasArcType() || (n.style("visibility", "visible").data([a[0]]).attr(i.axis_rotated ? "y1" : "x1", r).attr(i.axis_rotated ? "y2" : "x2", r), e.smoothLines(n, "grid")))
    }, c.hideXGridFocus = function() {
        this.main.select("line." + u.xgridFocus).style("visibility", "hidden")
    }, c.updateXgridFocus = function() {
        var t = this,
            e = t.config;
        t.main.select("line." + u.xgridFocus).attr("x1", e.axis_rotated ? 0 : -10).attr("x2", e.axis_rotated ? t.width : -10).attr("y1", e.axis_rotated ? -10 : 0).attr("y2", e.axis_rotated ? -10 : t.height)
    }, c.generateGridData = function(t, e) {
        var i, a, n, r, s = this,
            o = [],
            c = s.main.select("." + u.axisX).selectAll(".tick").size();
        if ("year" === t)
            for (i = s.getXDomain(), a = i[0].getFullYear(), n = i[1].getFullYear(), r = a; n >= r; r++) o.push(new Date(r + "-01-01 00:00:00"));
        else o = e.ticks(10), o.length > c && (o = o.filter(function(t) {
            return ("" + t).indexOf(".") < 0
        }));
        return o
    }, c.getGridFilterToRemove = function(t) {
        return t ? function(e) {
            var i = !1;
            return [].concat(t).forEach(function(t) {
                ("value" in t && e.value === t.value || "class" in t && e.class === t.class) && (i = !0)
            }), i
        } : function() {
            return !0
        }
    }, c.removeGridLines = function(t, e) {
        var i = this,
            a = i.config,
            n = i.getGridFilterToRemove(t),
            r = function(t) {
                return !n(t)
            },
            s = e ? u.xgridLines : u.ygridLines,
            o = e ? u.xgridLine : u.ygridLine;
        i.main.select("." + s).selectAll("." + o).filter(n).transition().duration(a.transition_duration).style("opacity", 0).remove(), e ? a.grid_x_lines = a.grid_x_lines.filter(r) : a.grid_y_lines = a.grid_y_lines.filter(r)
    }, c.initTooltip = function() {
        var t, e = this,
            i = e.config;
        if (e.tooltip = e.selectChart.style("position", "relative").append("div").attr("class", u.tooltipContainer).style("position", "absolute").style("pointer-events", "none").style("display", "none"), i.tooltip_init_show) {
            if (e.isTimeSeries() && f(i.tooltip_init_x)) {
                for (i.tooltip_init_x = e.parseDate(i.tooltip_init_x), t = 0; t < e.data.targets[0].values.length && e.data.targets[0].values[t].x - i.tooltip_init_x !== 0; t++);
                i.tooltip_init_x = t
            }
            e.tooltip.html(i.tooltip_contents.call(e, e.data.targets.map(function(t) {
                return e.addName(t.values[i.tooltip_init_x])
            }), e.axis.getXAxisTickFormat(), e.getYFormat(e.hasArcType()), e.color)), e.tooltip.style("top", i.tooltip_init_position.top).style("left", i.tooltip_init_position.left).style("display", "block")
        }
    }, c.getTooltipContent = function(t, e, i, a) {
        var n, r, s, o, c, d, l = this,
            g = l.config,
            h = g.tooltip_format_title || e,
            f = g.tooltip_format_name || function(t) {
                return t
            },
            x = g.tooltip_format_value || i;
        for (r = 0; r < t.length; r++) t[r] && (t[r].value || 0 === t[r].value) && (n || (s = h ? h(t[r].x) : t[r].x, n = "<table class='" + u.tooltip + "'>" + (s || 0 === s ? "<tr><th colspan='2'>" + s + "</th></tr>" : "")), o = x(t[r].value, t[r].ratio, t[r].id, t[r].index), void 0 !== o && (c = f(t[r].name, t[r].ratio, t[r].id, t[r].index), d = l.levelColor ? l.levelColor(t[r].value) : a(t[r].id), n += "<tr class='" + u.tooltipName + "-" + t[r].id + "'>", n += "<td class='name'><span style='background-color:" + d + "'></span>" + c + "</td>", n += "<td class='value'>" + o + "</td>", n += "</tr>"));
        return n + "</table>"
    }, c.tooltipPosition = function(t, e, i, a) {
        var n, r, s, o, c, d = this,
            l = d.config,
            u = d.d3,
            g = d.hasArcType(),
            h = u.mouse(a);
        return g ? (r = (d.width - (d.isLegendRight ? d.getLegendWidth() : 0)) / 2 + h[0], o = d.height / 2 + h[1] + 20) : (n = d.getSvgLeft(!0), l.axis_rotated ? (r = n + h[0] + 100, s = r + e, c = d.currentWidth - d.getCurrentPaddingRight(), o = d.x(t[0].x) + 20) : (r = n + d.getCurrentPaddingLeft(!0) + d.x(t[0].x) + 20, s = r + e, c = n + d.currentWidth - d.getCurrentPaddingRight(), o = h[1] + 15), s > c && (r -= s - c + 20), o + i > d.currentHeight && (o -= i + 30)), 0 > o && (o = 0), {
            top: o,
            left: r
        }
    }, c.showTooltip = function(t, e) {
        var i, a, n, r = this,
            s = r.config,
            o = r.hasArcType(),
            d = t.filter(function(t) {
                return t && g(t.value)
            }),
            l = s.tooltip_position || c.tooltipPosition;
        0 !== d.length && s.tooltip_show && (r.tooltip.html(s.tooltip_contents.call(r, t, r.axis.getXAxisTickFormat(), r.getYFormat(o), r.color)).style("display", "block"), i = r.tooltip.property("offsetWidth"), a = r.tooltip.property("offsetHeight"), n = l.call(this, d, i, a, e), r.tooltip.style("top", n.top + "px").style("left", n.left + "px"))
    }, c.hideTooltip = function() {
        this.tooltip.style("display", "none")
    }, c.initLegend = function() {
        var t = this;
        return t.legendItemTextBox = {}, t.legendHasRendered = !1, t.legend = t.svg.append("g").attr("transform", t.getTranslate("legend")), t.config.legend_show ? void t.updateLegendWithDefaults() : (t.legend.style("visibility", "hidden"), void(t.hiddenLegendIds = t.mapToIds(t.data.targets)))
    }, c.updateLegendWithDefaults = function() {
        var t = this;
        t.updateLegend(t.mapToIds(t.data.targets), {
            withTransform: !1,
            withTransitionForTransform: !1,
            withTransition: !1
        })
    }, c.updateSizeForLegend = function(t, e) {
        var i = this,
            a = i.config,
            n = {
                top: i.isLegendTop ? i.getCurrentPaddingTop() + a.legend_inset_y + 5.5 : i.currentHeight - t - i.getCurrentPaddingBottom() - a.legend_inset_y,
                left: i.isLegendLeft ? i.getCurrentPaddingLeft() + a.legend_inset_x + .5 : i.currentWidth - e - i.getCurrentPaddingRight() - a.legend_inset_x + .5
            };
        i.margin3 = {
            top: i.isLegendRight ? 0 : i.isLegendInset ? n.top : i.currentHeight - t,
            right: NaN,
            bottom: 0,
            left: i.isLegendRight ? i.currentWidth - e : i.isLegendInset ? n.left : 0
        }
    }, c.transformLegend = function(t) {
        var e = this;
        (t ? e.legend.transition() : e.legend).attr("transform", e.getTranslate("legend"))
    }, c.updateLegendStep = function(t) {
        this.legendStep = t
    }, c.updateLegendItemWidth = function(t) {
        this.legendItemWidth = t
    }, c.updateLegendItemHeight = function(t) {
        this.legendItemHeight = t
    }, c.getLegendWidth = function() {
        var t = this;
        return t.config.legend_show ? t.isLegendRight || t.isLegendInset ? t.legendItemWidth * (t.legendStep + 1) : t.currentWidth : 0
    }, c.getLegendHeight = function() {
        var t = this,
            e = 0;
        return t.config.legend_show && (e = t.isLegendRight ? t.currentHeight : Math.max(20, t.legendItemHeight) * (t.legendStep + 1)), e
    }, c.opacityForLegend = function(t) {
        return t.classed(u.legendItemHidden) ? null : 1
    }, c.opacityForUnfocusedLegend = function(t) {
        return t.classed(u.legendItemHidden) ? null : .3
    }, c.toggleFocusLegend = function(t, e) {
        var i = this;
        t = i.mapToTargetIds(t), i.legend.selectAll("." + u.legendItem).filter(function(e) {
            return t.indexOf(e) >= 0
        }).classed(u.legendItemFocused, e).transition().duration(100).style("opacity", function() {
            var t = e ? i.opacityForLegend : i.opacityForUnfocusedLegend;
            return t.call(i, i.d3.select(this))
        })
    }, c.revertLegend = function() {
        var t = this,
            e = t.d3;
        t.legend.selectAll("." + u.legendItem).classed(u.legendItemFocused, !1).transition().duration(100).style("opacity", function() {
            return t.opacityForLegend(e.select(this))
        })
    }, c.showLegend = function(t) {
        var e = this,
            i = e.config;
        i.legend_show || (i.legend_show = !0, e.legend.style("visibility", "visible"), e.legendHasRendered || e.updateLegendWithDefaults()), e.removeHiddenLegendIds(t), e.legend.selectAll(e.selectorLegends(t)).style("visibility", "visible").transition().style("opacity", function() {
            return e.opacityForLegend(e.d3.select(this))
        })
    }, c.hideLegend = function(t) {
        var e = this,
            i = e.config;
        i.legend_show && v(t) && (i.legend_show = !1, e.legend.style("visibility", "hidden")), e.addHiddenLegendIds(t), e.legend.selectAll(e.selectorLegends(t)).style("opacity", 0).style("visibility", "hidden")
    }, c.clearLegendItemTextBoxCache = function() {
        this.legendItemTextBox = {}
    }, c.updateLegend = function(t, e, i) {
        function a(t, e) {
            return v.legendItemTextBox[e] || (v.legendItemTextBox[e] = v.getTextRect(t.textContent, u.legendItem)), v.legendItemTextBox[e]
        }

        function n(e, i, n) {
            function r(t, e) {
                e || (s = (f - X - h) / 2, C > s && (s = (f - h) / 2, X = 0, R++)), Y[t] = R, E[R] = v.isLegendInset ? 10 : s, F[t] = X, X += h
            }
            var s, o, c = 0 === n,
                d = n === t.length - 1,
                l = a(e, i),
                u = l.width + D + (!d || v.isLegendRight || v.isLegendInset ? w : 0),
                g = l.height + A,
                h = v.isLegendRight || v.isLegendInset ? g : u,
                f = v.isLegendRight || v.isLegendInset ? v.getLegendHeight() : v.getLegendWidth();
            return c && (X = 0, R = 0, L = 0, S = 0), T.legend_show && !v.isLegendToShow(i) ? void(I[i] = k[i] = Y[i] = F[i] = 0) : (I[i] = u, k[i] = g, (!L || u >= L) && (L = u), (!S || g >= S) && (S = g), o = v.isLegendRight || v.isLegendInset ? S : L, void(T.legend_equally ? (Object.keys(I).forEach(function(t) {
                I[t] = L
            }), Object.keys(k).forEach(function(t) {
                k[t] = S
            }), s = (f - o * t.length) / 2, C > s ? (X = 0, R = 0, t.forEach(function(t) {
                r(t)
            })) : r(i, !0)) : r(i)))
        }
        var r, s, o, c, d, l, g, h, f, x, _, m, y, v = this,
            T = v.config,
            A = 4,
            w = 10,
            L = 0,
            S = 0,
            C = 10,
            D = 15,
            X = 0,
            F = {},
            I = {},
            k = {},
            E = [0],
            Y = {},
            R = 0;
        e = e || {}, h = b(e, "withTransition", !0), f = b(e, "withTransitionForTransform", !0), v.isLegendInset && (R = T.legend_inset_step ? T.legend_inset_step : t.length, v.updateLegendStep(R)), v.isLegendRight ? (r = function(t) {
            return L * Y[t]
        }, c = function(t) {
            return E[Y[t]] + F[t]
        }) : v.isLegendInset ? (r = function(t) {
            return L * Y[t] + 10
        }, c = function(t) {
            return E[Y[t]] + F[t]
        }) : (r = function(t) {
            return E[Y[t]] + F[t]
        }, c = function(t) {
            return S * Y[t]
        }), s = function(t, e) {
            return r(t, e) + 14
        }, d = function(t, e) {
            return c(t, e) + 9
        }, o = function(t, e) {
            return r(t, e)
        }, l = function(t, e) {
            return c(t, e) - 5
        }, g = v.legend.selectAll("." + u.legendItem).data(t).enter().append("g").attr("class", function(t) {
            return v.generateClass(u.legendItem, t)
        }).style("visibility", function(t) {
            return v.isLegendToShow(t) ? "visible" : "hidden"
        }).style("cursor", "pointer").on("click", function(t) {
            T.legend_item_onclick ? T.legend_item_onclick.call(v, t) : v.d3.event.altKey ? (v.api.hide(), v.api.show(t)) : (v.api.toggle(t), v.isTargetToShow(t) ? v.api.focus(t) : v.api.revert())
        }).on("mouseover", function(t) {
            v.d3.select(this).classed(u.legendItemFocused, !0), !v.transiting && v.isTargetToShow(t) && v.api.focus(t), T.legend_item_onmouseover && T.legend_item_onmouseover.call(v, t)
        }).on("mouseout", function(t) {
            v.d3.select(this).classed(u.legendItemFocused, !1), v.api.revert(), T.legend_item_onmouseout && T.legend_item_onmouseout.call(v, t)
        }), g.append("text").text(function(t) {
            return p(T.data_names[t]) ? T.data_names[t] : t
        }).each(function(t, e) {
            n(this, t, e)
        }).style("pointer-events", "none").attr("x", v.isLegendRight || v.isLegendInset ? s : -200).attr("y", v.isLegendRight || v.isLegendInset ? -200 : d), g.append("rect").attr("class", u.legendItemEvent).style("fill-opacity", 0).attr("x", v.isLegendRight || v.isLegendInset ? o : -200).attr("y", v.isLegendRight || v.isLegendInset ? -200 : l), g.append("rect").attr("class", u.legendItemTile).style("pointer-events", "none").style("fill", v.color).attr("x", v.isLegendRight || v.isLegendInset ? s : -200).attr("y", v.isLegendRight || v.isLegendInset ? -200 : c).attr("width", 10).attr("height", 10), y = v.legend.select("." + u.legendBackground + " rect"), v.isLegendInset && L > 0 && 0 === y.size() && (y = v.legend.insert("g", "." + u.legendItem).attr("class", u.legendBackground).append("rect")), x = v.legend.selectAll("text").data(t).text(function(t) {
            return p(T.data_names[t]) ? T.data_names[t] : t
        }).each(function(t, e) {
            n(this, t, e)
        }), (h ? x.transition() : x).attr("x", s).attr("y", d), _ = v.legend.selectAll("rect." + u.legendItemEvent).data(t), (h ? _.transition() : _).attr("width", function(t) {
            return I[t]
        }).attr("height", function(t) {
            return k[t]
        }).attr("x", o).attr("y", l), m = v.legend.selectAll("rect." + u.legendItemTile).data(t), (h ? m.transition() : m).style("fill", v.color).attr("x", r).attr("y", c), y && (h ? y.transition() : y).attr("height", v.getLegendHeight() - 12).attr("width", L * (R + 1) + 10), v.legend.selectAll("." + u.legendItem).classed(u.legendItemHidden, function(t) {
            return !v.isTargetToShow(t)
        }), v.updateLegendItemWidth(L), v.updateLegendItemHeight(S), v.updateLegendStep(R), v.updateSizes(), v.updateScales(), v.updateSvgSize(), v.transformAll(f, i), v.legendHasRendered = !0
    }, i(e, r), r.prototype.init = function() {
        var t = this.owner,
            e = t.config,
            i = t.main;
        t.axes.x = i.append("g").attr("class", u.axis + " " + u.axisX).attr("clip-path", t.clipPathForXAxis).attr("transform", t.getTranslate("x")).style("visibility", e.axis_x_show ? "visible" : "hidden"), t.axes.x.append("text").attr("class", u.axisXLabel).attr("transform", e.axis_rotated ? "rotate(-90)" : "").style("text-anchor", this.textAnchorForXAxisLabel.bind(this)), t.axes.y = i.append("g").attr("class", u.axis + " " + u.axisY).attr("clip-path", e.axis_y_inner ? "" : t.clipPathForYAxis).attr("transform", t.getTranslate("y")).style("visibility", e.axis_y_show ? "visible" : "hidden"), t.axes.y.append("text").attr("class", u.axisYLabel).attr("transform", e.axis_rotated ? "" : "rotate(-90)").style("text-anchor", this.textAnchorForYAxisLabel.bind(this)), t.axes.y2 = i.append("g").attr("class", u.axis + " " + u.axisY2).attr("transform", t.getTranslate("y2")).style("visibility", e.axis_y2_show ? "visible" : "hidden"), t.axes.y2.append("text").attr("class", u.axisY2Label).attr("transform", e.axis_rotated ? "" : "rotate(-90)").style("text-anchor", this.textAnchorForY2AxisLabel.bind(this))
    }, r.prototype.getXAxis = function(t, e, i, a, n, r, o) {
        var c = this.owner,
            d = c.config,
            l = {
                isCategory: c.isCategorized(),
                withOuterTick: n,
                tickMultiline: d.axis_x_tick_multiline,
                tickWidth: d.axis_x_tick_width,
                tickTextRotate: o ? 0 : d.axis_x_tick_rotate,
                withoutTransition: r
            },
            u = s(c.d3, l).scale(t).orient(e);
        return c.isTimeSeries() && a && (a = a.map(function(t) {
            return c.parseDate(t)
        })), u.tickFormat(i).tickValues(a), c.isCategorized() && (u.tickCentered(d.axis_x_tick_centered), v(d.axis_x_tick_culling) && (d.axis_x_tick_culling = !1)), u
    }, r.prototype.updateXAxisTickValues = function(t, e) {
        var i, a = this.owner,
            n = a.config;
        return (n.axis_x_tick_fit || n.axis_x_tick_count) && (i = this.generateTickValues(a.mapTargetsToUniqueXs(t), n.axis_x_tick_count, a.isTimeSeries())), e ? e.tickValues(i) : (a.xAxis.tickValues(i), a.subXAxis.tickValues(i)), i
    }, r.prototype.getYAxis = function(t, e, i, a, n, r) {
        var o = {
                withOuterTick: n,
                withoutTransition: r
            },
            c = this.owner,
            d = c.d3,
            l = c.config,
            u = s(d, o).scale(t).orient(e).tickFormat(i);
        return c.isTimeSeriesY() ? u.ticks(d.time[l.axis_y_tick_time_value], l.axis_y_tick_time_interval) : u.tickValues(a), u
    }, r.prototype.getId = function(t) {
        var e = this.owner.config;
        return t in e.data_axes ? e.data_axes[t] : "y"
    }, r.prototype.getXAxisTickFormat = function() {
        var t = this.owner,
            e = t.config,
            i = t.isTimeSeries() ? t.defaultAxisTimeFormat : t.isCategorized() ? t.categoryName : function(t) {
                return 0 > t ? t.toFixed(0) : t
            };
        return e.axis_x_tick_format && (h(e.axis_x_tick_format) ? i = e.axis_x_tick_format : t.isTimeSeries() && (i = function(i) {
            return i ? t.axisTimeFormat(e.axis_x_tick_format)(i) : ""
        })), h(i) ? function(e) {
            return i.call(t, e)
        } : i
    }, r.prototype.getTickValues = function(t, e) {
        return t ? t : e ? e.tickValues() : void 0
    }, r.prototype.getXAxisTickValues = function() {
        return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis)
    }, r.prototype.getYAxisTickValues = function() {
        return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis)
    }, r.prototype.getY2AxisTickValues = function() {
        return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis)
    }, r.prototype.getLabelOptionByAxisId = function(t) {
        var e, i = this.owner,
            a = i.config;
        return "y" === t ? e = a.axis_y_label : "y2" === t ? e = a.axis_y2_label : "x" === t && (e = a.axis_x_label), e
    }, r.prototype.getLabelText = function(t) {
        var e = this.getLabelOptionByAxisId(t);
        return f(e) ? e : e ? e.text : null
    }, r.prototype.setLabelText = function(t, e) {
        var i = this.owner,
            a = i.config,
            n = this.getLabelOptionByAxisId(t);
        f(n) ? "y" === t ? a.axis_y_label = e : "y2" === t ? a.axis_y2_label = e : "x" === t && (a.axis_x_label = e) : n && (n.text = e)
    }, r.prototype.getLabelPosition = function(t, e) {
        var i = this.getLabelOptionByAxisId(t),
            a = i && "object" == typeof i && i.position ? i.position : e;
        return {
            isInner: a.indexOf("inner") >= 0,
            isOuter: a.indexOf("outer") >= 0,
            isLeft: a.indexOf("left") >= 0,
            isCenter: a.indexOf("center") >= 0,
            isRight: a.indexOf("right") >= 0,
            isTop: a.indexOf("top") >= 0,
            isMiddle: a.indexOf("middle") >= 0,
            isBottom: a.indexOf("bottom") >= 0
        }
    }, r.prototype.getXAxisLabelPosition = function() {
        return this.getLabelPosition("x", this.owner.config.axis_rotated ? "inner-top" : "inner-right")
    }, r.prototype.getYAxisLabelPosition = function() {
        return this.getLabelPosition("y", this.owner.config.axis_rotated ? "inner-right" : "inner-top")
    }, r.prototype.getY2AxisLabelPosition = function() {
        return this.getLabelPosition("y2", this.owner.config.axis_rotated ? "inner-right" : "inner-top")
    }, r.prototype.getLabelPositionById = function(t) {
        return "y2" === t ? this.getY2AxisLabelPosition() : "y" === t ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition()
    }, r.prototype.textForXAxisLabel = function() {
        return this.getLabelText("x")
    }, r.prototype.textForYAxisLabel = function() {
        return this.getLabelText("y")
    }, r.prototype.textForY2AxisLabel = function() {
        return this.getLabelText("y2")
    }, r.prototype.xForAxisLabel = function(t, e) {
        var i = this.owner;
        return t ? e.isLeft ? 0 : e.isCenter ? i.width / 2 : i.width : e.isBottom ? -i.height : e.isMiddle ? -i.height / 2 : 0
    }, r.prototype.dxForAxisLabel = function(t, e) {
        return t ? e.isLeft ? "0.5em" : e.isRight ? "-0.5em" : "0" : e.isTop ? "-0.5em" : e.isBottom ? "0.5em" : "0"
    }, r.prototype.textAnchorForAxisLabel = function(t, e) {
        return t ? e.isLeft ? "start" : e.isCenter ? "middle" : "end" : e.isBottom ? "start" : e.isMiddle ? "middle" : "end"
    }, r.prototype.xForXAxisLabel = function() {
        return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition())
    }, r.prototype.xForYAxisLabel = function() {
        return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition())
    }, r.prototype.xForY2AxisLabel = function() {
        return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition())
    }, r.prototype.dxForXAxisLabel = function() {
        return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition())
    }, r.prototype.dxForYAxisLabel = function() {
        return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition())
    }, r.prototype.dxForY2AxisLabel = function() {
        return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition())
    }, r.prototype.dyForXAxisLabel = function() {
        var t = this.owner,
            e = t.config,
            i = this.getXAxisLabelPosition();
        return e.axis_rotated ? i.isInner ? "1.2em" : -25 - this.getMaxTickWidth("x") : i.isInner ? "-0.5em" : e.axis_x_height ? e.axis_x_height - 10 : "3em"
    }, r.prototype.dyForYAxisLabel = function() {
        var t = this.owner,
            e = this.getYAxisLabelPosition();
        return t.config.axis_rotated ? e.isInner ? "-0.5em" : "3em" : e.isInner ? "1.2em" : -10 - (t.config.axis_y_inner ? 0 : this.getMaxTickWidth("y") + 10)
    }, r.prototype.dyForY2AxisLabel = function() {
        var t = this.owner,
            e = this.getY2AxisLabelPosition();
        return t.config.axis_rotated ? e.isInner ? "1.2em" : "-2.2em" : e.isInner ? "-0.5em" : 15 + (t.config.axis_y2_inner ? 0 : this.getMaxTickWidth("y2") + 15)
    }, r.prototype.textAnchorForXAxisLabel = function() {
        var t = this.owner;
        return this.textAnchorForAxisLabel(!t.config.axis_rotated, this.getXAxisLabelPosition())
    }, r.prototype.textAnchorForYAxisLabel = function() {
        var t = this.owner;
        return this.textAnchorForAxisLabel(t.config.axis_rotated, this.getYAxisLabelPosition())
    }, r.prototype.textAnchorForY2AxisLabel = function() {
        var t = this.owner;
        return this.textAnchorForAxisLabel(t.config.axis_rotated, this.getY2AxisLabelPosition())
    }, r.prototype.getMaxTickWidth = function(t, e) {
        var i, a, n, r, s, o = this.owner,
            c = o.config,
            d = 0;
        return e && o.currentMaxTickWidths[t] ? o.currentMaxTickWidths[t] : (o.svg && (i = o.filterTargetsToShow(o.data.targets), "y" === t ? (a = o.y.copy().domain(o.getYDomain(i, "y")), n = this.getYAxis(a, o.yOrient, c.axis_y_tick_format, o.yAxisTickValues, !1, !0)) : "y2" === t ? (a = o.y2.copy().domain(o.getYDomain(i, "y2")), n = this.getYAxis(a, o.y2Orient, c.axis_y2_tick_format, o.y2AxisTickValues, !1, !0)) : (a = o.x.copy().domain(o.getXDomain(i)), n = this.getXAxis(a, o.xOrient, o.xAxisTickFormat, o.xAxisTickValues, !1, !0, !0), this.updateXAxisTickValues(i, n)), r = o.d3.select("body").append("div").classed("c3", !0), s = r.append("svg").style("visibility", "hidden").style("position", "fixed").style("top", 0).style("left", 0), s.append("g").call(n).each(function() {
            o.d3.select(this).selectAll("text").each(function() {
                var t = this.getBoundingClientRect();
                d < t.width && (d = t.width)
            }), r.remove()
        })), o.currentMaxTickWidths[t] = 0 >= d ? o.currentMaxTickWidths[t] : d, o.currentMaxTickWidths[t])
    }, r.prototype.updateLabels = function(t) {
        var e = this.owner,
            i = e.main.select("." + u.axisX + " ." + u.axisXLabel),
            a = e.main.select("." + u.axisY + " ." + u.axisYLabel),
            n = e.main.select("." + u.axisY2 + " ." + u.axisY2Label);
        (t ? i.transition() : i).attr("x", this.xForXAxisLabel.bind(this)).attr("dx", this.dxForXAxisLabel.bind(this)).attr("dy", this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)), (t ? a.transition() : a).attr("x", this.xForYAxisLabel.bind(this)).attr("dx", this.dxForYAxisLabel.bind(this)).attr("dy", this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)), (t ? n.transition() : n).attr("x", this.xForY2AxisLabel.bind(this)).attr("dx", this.dxForY2AxisLabel.bind(this)).attr("dy", this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))
    }, r.prototype.getPadding = function(t, e, i, a) {
        return g(t[e]) ? "ratio" === t.unit ? t[e] * a : this.convertPixelsToAxisPadding(t[e], a) : i
    }, r.prototype.convertPixelsToAxisPadding = function(t, e) {
        var i = this.owner,
            a = i.config.axis_rotated ? i.width : i.height;
        return e * (t / a)
    }, r.prototype.generateTickValues = function(t, e, i) {
        var a, n, r, s, o, c, d, l = t;
        if (e)
            if (a = h(e) ? e() : e, 1 === a) l = [t[0]];
            else if (2 === a) l = [t[0], t[t.length - 1]];
        else if (a > 2) {
            for (s = a - 2, n = t[0], r = t[t.length - 1], o = (r - n) / (s + 1), l = [n], c = 0; s > c; c++) d = +n + o * (c + 1), l.push(i ? new Date(d) : d);
            l.push(r)
        }
        return i || (l = l.sort(function(t, e) {
            return t - e
        })), l
    }, r.prototype.generateTransitions = function(t) {
        var e = this.owner,
            i = e.axes;
        return {
            axisX: t ? i.x.transition().duration(t) : i.x,
            axisY: t ? i.y.transition().duration(t) : i.y,
            axisY2: t ? i.y2.transition().duration(t) : i.y2,
            axisSubX: t ? i.subx.transition().duration(t) : i.subx
        }
    }, r.prototype.redraw = function(t, e) {
        var i = this.owner;
        i.axes.x.style("opacity", e ? 0 : 1), i.axes.y.style("opacity", e ? 0 : 1), i.axes.y2.style("opacity", e ? 0 : 1), i.axes.subx.style("opacity", e ? 0 : 1), t.axisX.call(i.xAxis), t.axisY.call(i.yAxis), t.axisY2.call(i.y2Axis), t.axisSubX.call(i.subXAxis)
    }, c.getClipPath = function(e) {
        var i = t.navigator.appVersion.toLowerCase().indexOf("msie 9.") >= 0;
        return "url(" + (i ? "" : document.URL.split("#")[0]) + "#" + e + ")"
    }, c.appendClip = function(t, e) {
        return t.append("clipPath").attr("id", e).append("rect")
    }, c.getAxisClipX = function(t) {
        var e = Math.max(30, this.margin.left);
        return t ? -(1 + e) : -(e - 1)
    }, c.getAxisClipY = function(t) {
        return t ? -20 : -this.margin.top
    }, c.getXAxisClipX = function() {
        var t = this;
        return t.getAxisClipX(!t.config.axis_rotated)
    }, c.getXAxisClipY = function() {
        var t = this;
        return t.getAxisClipY(!t.config.axis_rotated)
    }, c.getYAxisClipX = function() {
        var t = this;
        return t.config.axis_y_inner ? -1 : t.getAxisClipX(t.config.axis_rotated)
    }, c.getYAxisClipY = function() {
        var t = this;
        return t.getAxisClipY(t.config.axis_rotated)
    }, c.getAxisClipWidth = function(t) {
        var e = this,
            i = Math.max(30, e.margin.left),
            a = Math.max(30, e.margin.right);
        return t ? e.width + 2 + i + a : e.margin.left + 20
    }, c.getAxisClipHeight = function(t) {
        return (t ? this.margin.bottom : this.margin.top + this.height) + 20
    }, c.getXAxisClipWidth = function() {
        var t = this;
        return t.getAxisClipWidth(!t.config.axis_rotated)
    }, c.getXAxisClipHeight = function() {
        var t = this;
        return t.getAxisClipHeight(!t.config.axis_rotated)
    }, c.getYAxisClipWidth = function() {
        var t = this;
        return t.getAxisClipWidth(t.config.axis_rotated) + (t.config.axis_y_inner ? 20 : 0)
    }, c.getYAxisClipHeight = function() {
        var t = this;
        return t.getAxisClipHeight(t.config.axis_rotated)
    }, c.initPie = function() {
        var t = this,
            e = t.d3,
            i = t.config;
        t.pie = e.layout.pie().value(function(t) {
            return t.values.reduce(function(t, e) {
                return t + e.value
            }, 0)
        }), i.data_order || t.pie.sort(null)
    }, c.updateRadius = function() {
        var t = this,
            e = t.config,
            i = e.gauge_width || e.donut_width;
        t.radiusExpanded = Math.min(t.arcWidth, t.arcHeight) / 2, t.radius = .95 * t.radiusExpanded, t.innerRadiusRatio = i ? (t.radius - i) / t.radius : .6, t.innerRadius = t.hasType("donut") || t.hasType("gauge") ? t.radius * t.innerRadiusRatio : 0
    }, c.updateArc = function() {
        var t = this;
        t.svgArc = t.getSvgArc(), t.svgArcExpanded = t.getSvgArcExpanded(), t.svgArcExpandedSub = t.getSvgArcExpanded(.98)
    }, c.updateAngle = function(t) {
        var e, i, a = this,
            n = a.config,
            r = !1,
            s = 0,
            o = n.gauge_min,
            c = n.gauge_max;
        return a.pie(a.filterTargetsToShow(a.data.targets)).forEach(function(e) {
            r || e.data.id !== t.data.id || (r = !0, t = e, t.index = s), s++
        }), isNaN(t.startAngle) && (t.startAngle = 0), isNaN(t.endAngle) && (t.endAngle = t.startAngle), a.isGaugeType(t.data) && (e = Math.PI / (c - o), i = t.value < o ? 0 : t.value < c ? t.value - o : c - o, t.startAngle = -1 * (Math.PI / 2), t.endAngle = t.startAngle + e * i), r ? t : null
    }, c.getSvgArc = function() {
        var t = this,
            e = t.d3.svg.arc().outerRadius(t.radius).innerRadius(t.innerRadius),
            i = function(i, a) {
                var n;
                return a ? e(i) : (n = t.updateAngle(i), n ? e(n) : "M 0 0")
            };
        return i.centroid = e.centroid, i
    }, c.getSvgArcExpanded = function(t) {
        var e = this,
            i = e.d3.svg.arc().outerRadius(e.radiusExpanded * (t ? t : 1)).innerRadius(e.innerRadius);
        return function(t) {
            var a = e.updateAngle(t);
            return a ? i(a) : "M 0 0"
        }
    }, c.getArc = function(t, e, i) {
        return i || this.isArcType(t.data) ? this.svgArc(t, e) : "M 0 0"
    }, c.transformForArcLabel = function(t) {
        var e, i, a, n, r, s = this,
            o = s.updateAngle(t),
            c = "";
        return o && !s.hasType("gauge") && (e = this.svgArc.centroid(o), i = isNaN(e[0]) ? 0 : e[0], a = isNaN(e[1]) ? 0 : e[1], n = Math.sqrt(i * i + a * a), r = s.radius && n ? (36 / s.radius > .375 ? 1.175 - 36 / s.radius : .8) * s.radius / n : 0, c = "translate(" + i * r + "," + a * r + ")"), c
    }, c.getArcRatio = function(t) {
        var e = this,
            i = e.hasType("gauge") ? Math.PI : 2 * Math.PI;
        return t ? (t.endAngle - t.startAngle) / i : null
    }, c.convertToArcData = function(t) {
        return this.addName({
            id: t.data.id,
            value: t.value,
            ratio: this.getArcRatio(t),
            index: t.index
        })
    }, c.textForArcLabel = function(t) {
        var e, i, a, n, r, s = this;
        return s.shouldShowArcLabel() ? (e = s.updateAngle(t), i = e ? e.value : null, a = s.getArcRatio(e), n = t.data.id, s.hasType("gauge") || s.meetsArcLabelThreshold(a) ? (r = s.getArcLabelFormat(), r ? r(i, a, n) : s.defaultArcValueFormat(i, a)) : "") : ""
    }, c.expandArc = function(e) {
        var i, a = this;
        return a.transiting ? void(i = t.setInterval(function() {
            a.transiting || (t.clearInterval(i), a.legend.selectAll(".c3-legend-item-focused").size() > 0 && a.expandArc(e))
        }, 10)) : (e = a.mapToTargetIds(e), void a.svg.selectAll(a.selectorTargets(e, "." + u.chartArc)).each(function(t) {
            a.shouldExpand(t.data.id) && a.d3.select(this).selectAll("path").transition().duration(50).attr("d", a.svgArcExpanded).transition().duration(100).attr("d", a.svgArcExpandedSub).each(function(t) {
                a.isDonutType(t.data)
            })
        }))
    }, c.unexpandArc = function(t) {
        var e = this;
        e.transiting || (t = e.mapToTargetIds(t), e.svg.selectAll(e.selectorTargets(t, "." + u.chartArc)).selectAll("path").transition().duration(50).attr("d", e.svgArc), e.svg.selectAll("." + u.arc).style("opacity", 1))
    }, c.shouldExpand = function(t) {
        var e = this,
            i = e.config;
        return e.isDonutType(t) && i.donut_expand || e.isGaugeType(t) && i.gauge_expand || e.isPieType(t) && i.pie_expand
    }, c.shouldShowArcLabel = function() {
        var t = this,
            e = t.config,
            i = !0;
        return t.hasType("donut") ? i = e.donut_label_show : t.hasType("pie") && (i = e.pie_label_show), i
    }, c.meetsArcLabelThreshold = function(t) {
        var e = this,
            i = e.config,
            a = e.hasType("donut") ? i.donut_label_threshold : i.pie_label_threshold;
        return t >= a
    }, c.getArcLabelFormat = function() {
        var t = this,
            e = t.config,
            i = e.pie_label_format;
        return t.hasType("gauge") ? i = e.gauge_label_format : t.hasType("donut") && (i = e.donut_label_format), i
    }, c.getArcTitle = function() {
        var t = this;
        return t.hasType("donut") ? t.config.donut_title : ""
    }, c.updateTargetsForArc = function(t) {
        var e, i, a = this,
            n = a.main,
            r = a.classChartArc.bind(a),
            s = a.classArcs.bind(a),
            o = a.classFocus.bind(a);
        e = n.select("." + u.chartArcs).selectAll("." + u.chartArc).data(a.pie(t)).attr("class", function(t) {
            return r(t) + o(t.data)
        }), i = e.enter().append("g").attr("class", r), i.append("g").attr("class", s), i.append("text").attr("dy", a.hasType("gauge") ? "-.1em" : ".35em").style("opacity", 0).style("text-anchor", "middle").style("pointer-events", "none")
    }, c.initArc = function() {
        var t = this;
        t.arcs = t.main.select("." + u.chart).append("g").attr("class", u.chartArcs).attr("transform", t.getTranslate("arc")), t.arcs.append("text").attr("class", u.chartArcsTitle).style("text-anchor", "middle").text(t.getArcTitle())
    }, c.redrawArc = function(t, e, i) {
        var a, n = this,
            r = n.d3,
            s = n.config,
            o = n.main;
        a = o.selectAll("." + u.arcs).selectAll("." + u.arc).data(n.arcData.bind(n)), a.enter().append("path").attr("class", n.classArc.bind(n)).style("fill", function(t) {
            return n.color(t.data)
        }).style("cursor", function(t) {
            return s.interaction_enabled && s.data_selection_isselectable(t) ? "pointer" : null
        }).style("opacity", 0).each(function(t) {
            n.isGaugeType(t.data) && (t.startAngle = t.endAngle = -1 * (Math.PI / 2)), this._current = t
        }), a.attr("transform", function(t) {
            return !n.isGaugeType(t.data) && i ? "scale(0)" : ""
        }).style("opacity", function(t) {
            return t === this._current ? 0 : 1
        }).on("mouseover", s.interaction_enabled ? function(t) {
            var e, i;
            n.transiting || (e = n.updateAngle(t), i = n.convertToArcData(e), n.expandArc(e.data.id), n.api.focus(e.data.id), n.toggleFocusLegend(e.data.id, !0), n.config.data_onmouseover(i, this))
        } : null).on("mousemove", s.interaction_enabled ? function(t) {
            var e = n.updateAngle(t),
                i = n.convertToArcData(e),
                a = [i];
            n.showTooltip(a, this)
        } : null).on("mouseout", s.interaction_enabled ? function(t) {
            var e, i;
            n.transiting || (e = n.updateAngle(t), i = n.convertToArcData(e), n.unexpandArc(e.data.id), n.api.revert(), n.revertLegend(), n.hideTooltip(), n.config.data_onmouseout(i, this))
        } : null).on("click", s.interaction_enabled ? function(t, e) {
            var i = n.updateAngle(t),
                a = n.convertToArcData(i);
            n.toggleShape && n.toggleShape(this, a, e), n.config.data_onclick.call(n.api, a, this)
        } : null).each(function() {
            n.transiting = !0
        }).transition().duration(t).attrTween("d", function(t) {
            var e, i = n.updateAngle(t);
            return i ? (isNaN(this._current.startAngle) && (this._current.startAngle = 0), isNaN(this._current.endAngle) && (this._current.endAngle = this._current.startAngle), e = r.interpolate(this._current, i), this._current = e(0), function(i) {
                var a = e(i);
                return a.data = t.data, n.getArc(a, !0)
            }) : function() {
                return "M 0 0"
            }
        }).attr("transform", i ? "scale(1)" : "").style("fill", function(t) {
            return n.levelColor ? n.levelColor(t.data.values[0].value) : n.color(t.data.id)
        }).style("opacity", 1).call(n.endall, function() {
            n.transiting = !1
        }), a.exit().transition().duration(e).style("opacity", 0).remove(), o.selectAll("." + u.chartArc).select("text").style("opacity", 0).attr("class", function(t) {
            return n.isGaugeType(t.data) ? u.gaugeValue : ""
        }).text(n.textForArcLabel.bind(n)).attr("transform", n.transformForArcLabel.bind(n)).style("font-size", function(t) {
            return n.isGaugeType(t.data) ? Math.round(n.radius / 5) + "px" : ""
        }).transition().duration(t).style("opacity", function(t) {
            return n.isTargetToShow(t.data.id) && n.isArcType(t.data) ? 1 : 0
        }), o.select("." + u.chartArcsTitle).style("opacity", n.hasType("donut") || n.hasType("gauge") ? 1 : 0), n.hasType("gauge") && (n.arcs.select("." + u.chartArcsBackground).attr("d", function() {
            var t = {
                data: [{
                    value: s.gauge_max
                }],
                startAngle: -1 * (Math.PI / 2),
                endAngle: Math.PI / 2
            };
            return n.getArc(t, !0, !0)
        }), n.arcs.select("." + u.chartArcsGaugeUnit).attr("dy", ".75em").text(s.gauge_label_show ? s.gauge_units : ""), n.arcs.select("." + u.chartArcsGaugeMin).attr("dx", -1 * (n.innerRadius + (n.radius - n.innerRadius) / 2) + "px").attr("dy", "1.2em").text(s.gauge_label_show ? s.gauge_min : ""), n.arcs.select("." + u.chartArcsGaugeMax).attr("dx", n.innerRadius + (n.radius - n.innerRadius) / 2 + "px").attr("dy", "1.2em").text(s.gauge_label_show ? s.gauge_max : ""))
    }, c.initGauge = function() {
        var t = this.arcs;
        this.hasType("gauge") && (t.append("path").attr("class", u.chartArcsBackground), t.append("text").attr("class", u.chartArcsGaugeUnit).style("text-anchor", "middle").style("pointer-events", "none"), t.append("text").attr("class", u.chartArcsGaugeMin).style("text-anchor", "middle").style("pointer-events", "none"), t.append("text").attr("class", u.chartArcsGaugeMax).style("text-anchor", "middle").style("pointer-events", "none"))
    }, c.getGaugeLabelHeight = function() {
        return this.config.gauge_label_show ? 20 : 0
    }, c.initRegion = function() {
        var t = this;
        t.region = t.main.append("g").attr("clip-path", t.clipPath).attr("class", u.regions)
    }, c.updateRegion = function(t) {
        var e = this,
            i = e.config;
        e.region.style("visibility", e.hasArcType() ? "hidden" : "visible"), e.mainRegion = e.main.select("." + u.regions).selectAll("." + u.region).data(i.regions), e.mainRegion.enter().append("g").attr("class", e.classRegion.bind(e)).append("rect").style("fill-opacity", 0), e.mainRegion.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawRegion = function(t) {
        var e = this,
            i = e.mainRegion.selectAll("rect"),
            a = e.regionX.bind(e),
            n = e.regionY.bind(e),
            r = e.regionWidth.bind(e),
            s = e.regionHeight.bind(e);
        return [(t ? i.transition() : i).attr("x", a).attr("y", n).attr("width", r).attr("height", s).style("fill-opacity", function(t) {
            return g(t.opacity) ? t.opacity : .1
        })]
    }, c.regionX = function(t) {
        var e, i = this,
            a = i.config,
            n = "y" === t.axis ? i.y : i.y2;
        return e = "y" === t.axis || "y2" === t.axis ? a.axis_rotated && "start" in t ? n(t.start) : 0 : a.axis_rotated ? 0 : "start" in t ? i.x(i.isTimeSeries() ? i.parseDate(t.start) : t.start) : 0
    }, c.regionY = function(t) {
        var e, i = this,
            a = i.config,
            n = "y" === t.axis ? i.y : i.y2;
        return e = "y" === t.axis || "y2" === t.axis ? a.axis_rotated ? 0 : "end" in t ? n(t.end) : 0 : a.axis_rotated && "start" in t ? i.x(i.isTimeSeries() ? i.parseDate(t.start) : t.start) : 0
    }, c.regionWidth = function(t) {
        var e, i = this,
            a = i.config,
            n = i.regionX(t),
            r = "y" === t.axis ? i.y : i.y2;
        return e = "y" === t.axis || "y2" === t.axis ? a.axis_rotated && "end" in t ? r(t.end) : i.width : a.axis_rotated ? i.width : "end" in t ? i.x(i.isTimeSeries() ? i.parseDate(t.end) : t.end) : i.width, n > e ? 0 : e - n
    }, c.regionHeight = function(t) {
        var e, i = this,
            a = i.config,
            n = this.regionY(t),
            r = "y" === t.axis ? i.y : i.y2;
        return e = "y" === t.axis || "y2" === t.axis ? a.axis_rotated ? i.height : "start" in t ? r(t.start) : i.height : a.axis_rotated && "end" in t ? i.x(i.isTimeSeries() ? i.parseDate(t.end) : t.end) : i.height, n > e ? 0 : e - n
    }, c.isRegionOnX = function(t) {
        return !t.axis || "x" === t.axis
    }, c.drag = function(t) {
        var e, i, a, n, r, s, o, c, d = this,
            l = d.config,
            g = d.main,
            h = d.d3;
        d.hasArcType() || l.data_selection_enabled && (!l.zoom_enabled || d.zoom.altDomain) && l.data_selection_multiple && (e = d.dragStart[0], i = d.dragStart[1], a = t[0], n = t[1], r = Math.min(e, a), s = Math.max(e, a), o = l.data_selection_grouped ? d.margin.top : Math.min(i, n), c = l.data_selection_grouped ? d.height : Math.max(i, n), g.select("." + u.dragarea).attr("x", r).attr("y", o).attr("width", s - r).attr("height", c - o), g.selectAll("." + u.shapes).selectAll("." + u.shape).filter(function(t) {
            return l.data_selection_isselectable(t)
        }).each(function(t, e) {
            var i, a, n, l, g, f, x = h.select(this),
                p = x.classed(u.SELECTED),
                _ = x.classed(u.INCLUDED),
                m = !1;
            if (x.classed(u.circle)) i = 1 * x.attr("cx"), a = 1 * x.attr("cy"), g = d.togglePoint, m = i > r && s > i && a > o && c > a;
            else {
                if (!x.classed(u.bar)) return;
                f = w(this), i = f.x, a = f.y, n = f.width, l = f.height, g = d.togglePath, m = !(i > s || r > i + n || a > c || o > a + l)
            }
            m ^ _ && (x.classed(u.INCLUDED, !_), x.classed(u.SELECTED, !p), g.call(d, !p, x, t, e))
        }))
    }, c.dragstart = function(t) {
        var e = this,
            i = e.config;
        e.hasArcType() || i.data_selection_enabled && (e.dragStart = t, e.main.select("." + u.chart).append("rect").attr("class", u.dragarea).style("opacity", .1), e.dragging = !0)
    }, c.dragend = function() {
        var t = this,
            e = t.config;
        t.hasArcType() || e.data_selection_enabled && (t.main.select("." + u.dragarea).transition().duration(100).style("opacity", 0).remove(), t.main.selectAll("." + u.shape).classed(u.INCLUDED, !1), t.dragging = !1)
    }, c.selectPoint = function(t, e, i) {
        var a = this,
            n = a.config,
            r = (n.axis_rotated ? a.circleY : a.circleX).bind(a),
            s = (n.axis_rotated ? a.circleX : a.circleY).bind(a),
            o = a.pointSelectR.bind(a);
        n.data_onselected.call(a.api, e, t.node()), a.main.select("." + u.selectedCircles + a.getTargetSelectorSuffix(e.id)).selectAll("." + u.selectedCircle + "-" + i).data([e]).enter().append("circle").attr("class", function() {
            return a.generateClass(u.selectedCircle, i)
        }).attr("cx", r).attr("cy", s).attr("stroke", function() {
            return a.color(e)
        }).attr("r", function(t) {
            return 1.4 * a.pointSelectR(t)
        }).transition().duration(100).attr("r", o)
    }, c.unselectPoint = function(t, e, i) {
        var a = this;
        a.config.data_onunselected(e, t.node()), a.main.select("." + u.selectedCircles + a.getTargetSelectorSuffix(e.id)).selectAll("." + u.selectedCircle + "-" + i).transition().duration(100).attr("r", 0).remove()
    }, c.togglePoint = function(t, e, i, a) {
        t ? this.selectPoint(e, i, a) : this.unselectPoint(e, i, a)
    }, c.selectPath = function(t, e) {
        var i = this;
        i.config.data_onselected.call(i, e, t.node()), t.transition().duration(100).style("fill", function() {
            return i.d3.rgb(i.color(e)).brighter(.75)
        })
    }, c.unselectPath = function(t, e) {
        var i = this;
        i.config.data_onunselected.call(i, e, t.node()), t.transition().duration(100).style("fill", function() {
            return i.color(e)
        })
    }, c.togglePath = function(t, e, i, a) {
        t ? this.selectPath(e, i, a) : this.unselectPath(e, i, a)
    }, c.getToggle = function(t, e) {
        var i, a = this;
        return "circle" === t.nodeName ? i = a.isStepType(e) ? function() {} : a.togglePoint : "path" === t.nodeName && (i = a.togglePath), i
    }, c.toggleShape = function(t, e, i) {
        var a = this,
            n = a.d3,
            r = a.config,
            s = n.select(t),
            o = s.classed(u.SELECTED),
            c = a.getToggle(t, e).bind(a);
        r.data_selection_enabled && r.data_selection_isselectable(e) && (r.data_selection_multiple || a.main.selectAll("." + u.shapes + (r.data_selection_grouped ? a.getTargetSelectorSuffix(e.id) : "")).selectAll("." + u.shape).each(function(t, e) {
            var i = n.select(this);
            i.classed(u.SELECTED) && c(!1, i.classed(u.SELECTED, !1), t, e)
        }), s.classed(u.SELECTED, !o), c(!o, s, e, i))
    }, c.initBrush = function() {
        var t = this,
            e = t.d3;
        t.brush = e.svg.brush().on("brush", function() {
            t.redrawForBrush()
        }), t.brush.update = function() {
            return t.context && t.context.select("." + u.brush).call(this), this
        }, t.brush.scale = function(e) {
            return t.config.axis_rotated ? this.y(e) : this.x(e)
        }
    }, c.initSubchart = function() {
        var t = this,
            e = t.config,
            i = t.context = t.svg.append("g").attr("transform", t.getTranslate("context"));
        i.style("visibility", e.subchart_show ? "visible" : "hidden"), i.append("g").attr("clip-path", t.clipPathForSubchart).attr("class", u.chart), i.select("." + u.chart).append("g").attr("class", u.chartBars), i.select("." + u.chart).append("g").attr("class", u.chartLines), i.append("g").attr("clip-path", t.clipPath).attr("class", u.brush).call(t.brush), t.axes.subx = i.append("g").attr("class", u.axisX).attr("transform", t.getTranslate("subx")).attr("clip-path", e.axis_rotated ? "" : t.clipPathForXAxis)
    }, c.updateTargetsForSubchart = function(t) {
        var e, i, a, n, r = this,
            s = r.context,
            o = r.config,
            c = r.classChartBar.bind(r),
            d = r.classBars.bind(r),
            l = r.classChartLine.bind(r),
            g = r.classLines.bind(r),
            h = r.classAreas.bind(r);
        o.subchart_show && (n = s.select("." + u.chartBars).selectAll("." + u.chartBar).data(t).attr("class", c), a = n.enter().append("g").style("opacity", 0).attr("class", c), a.append("g").attr("class", d), i = s.select("." + u.chartLines).selectAll("." + u.chartLine).data(t).attr("class", l), e = i.enter().append("g").style("opacity", 0).attr("class", l), e.append("g").attr("class", g), e.append("g").attr("class", h), s.selectAll("." + u.brush + " rect").attr(o.axis_rotated ? "width" : "height", o.axis_rotated ? r.width2 : r.height2))
    }, c.updateBarForSubchart = function(t) {
        var e = this;
        e.contextBar = e.context.selectAll("." + u.bars).selectAll("." + u.bar).data(e.barData.bind(e)), e.contextBar.enter().append("path").attr("class", e.classBar.bind(e)).style("stroke", "none").style("fill", e.color), e.contextBar.style("opacity", e.initialOpacity.bind(e)), e.contextBar.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawBarForSubchart = function(t, e, i) {
        (e ? this.contextBar.transition().duration(i) : this.contextBar).attr("d", t).style("opacity", 1)
    }, c.updateLineForSubchart = function(t) {
        var e = this;
        e.contextLine = e.context.selectAll("." + u.lines).selectAll("." + u.line).data(e.lineData.bind(e)), e.contextLine.enter().append("path").attr("class", e.classLine.bind(e)).style("stroke", e.color), e.contextLine.style("opacity", e.initialOpacity.bind(e)), e.contextLine.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawLineForSubchart = function(t, e, i) {
        (e ? this.contextLine.transition().duration(i) : this.contextLine).attr("d", t).style("opacity", 1)
    }, c.updateAreaForSubchart = function(t) {
        var e = this,
            i = e.d3;
        e.contextArea = e.context.selectAll("." + u.areas).selectAll("." + u.area).data(e.lineData.bind(e)), e.contextArea.enter().append("path").attr("class", e.classArea.bind(e)).style("fill", e.color).style("opacity", function() {
            return e.orgAreaOpacity = +i.select(this).style("opacity"), 0
        }), e.contextArea.style("opacity", 0), e.contextArea.exit().transition().duration(t).style("opacity", 0).remove()
    }, c.redrawAreaForSubchart = function(t, e, i) {
        (e ? this.contextArea.transition().duration(i) : this.contextArea).attr("d", t).style("fill", this.color).style("opacity", this.orgAreaOpacity)
    }, c.redrawSubchart = function(t, e, i, a, n, r, s) {
        var o, c, d, l = this,
            u = l.d3,
            g = l.config;
        l.context.style("visibility", g.subchart_show ? "visible" : "hidden"), g.subchart_show && (u.event && "zoom" === u.event.type && l.brush.extent(l.x.orgDomain()).update(), t && (l.brush.empty() || l.brush.extent(l.x.orgDomain()).update(), o = l.generateDrawArea(n, !0), c = l.generateDrawBar(r, !0), d = l.generateDrawLine(s, !0), l.updateBarForSubchart(i), l.updateLineForSubchart(i), l.updateAreaForSubchart(i), l.redrawBarForSubchart(c, i, i), l.redrawLineForSubchart(d, i, i), l.redrawAreaForSubchart(o, i, i)))
    }, c.redrawForBrush = function() {
        var t = this,
            e = t.x;
        t.redraw({
            withTransition: !1,
            withY: t.config.zoom_rescale,
            withSubchart: !1,
            withUpdateXDomain: !0,
            withDimension: !1
        }), t.config.subchart_onbrush.call(t.api, e.orgDomain())
    }, c.transformContext = function(t, e) {
        var i, a = this;
        e && e.axisSubX ? i = e.axisSubX : (i = a.context.select("." + u.axisX), t && (i = i.transition())), a.context.attr("transform", a.getTranslate("context")), i.attr("transform", a.getTranslate("subx"))
    }, c.getDefaultExtent = function() {
        var t = this,
            e = t.config,
            i = h(e.axis_x_extent) ? e.axis_x_extent(t.getXDomain(t.data.targets)) : e.axis_x_extent;
        return t.isTimeSeries() && (i = [t.parseDate(i[0]), t.parseDate(i[1])]), i
    }, c.initZoom = function() {
        var t, e = this,
            i = e.d3,
            a = e.config;
        e.zoom = i.behavior.zoom().on("zoomstart", function() {
            t = i.event.sourceEvent, e.zoom.altDomain = i.event.sourceEvent.altKey ? e.x.orgDomain() : null, a.zoom_onzoomstart.call(e.api, i.event.sourceEvent)
        }).on("zoom", function() {
            e.redrawForZoom.call(e)
        }).on("zoomend", function() {
            var n = i.event.sourceEvent;
            n && t.clientX === n.clientX && t.clientY === n.clientY || (e.redrawEventRect(), e.updateZoom(), a.zoom_onzoomend.call(e.api, e.x.orgDomain()))
        }), e.zoom.scale = function(t) {
            return a.axis_rotated ? this.y(t) : this.x(t)
        }, e.zoom.orgScaleExtent = function() {
            var t = a.zoom_extent ? a.zoom_extent : [1, 10];
            return [t[0], Math.max(e.getMaxDataCount() / t[1], t[1])]
        }, e.zoom.updateScaleExtent = function() {
            var t = y(e.x.orgDomain()) / y(e.orgXDomain),
                i = this.orgScaleExtent();
            return this.scaleExtent([i[0] * t, i[1] * t]), this
        }
    }, c.updateZoom = function() {
        var t = this,
            e = t.config.zoom_enabled ? t.zoom : function() {};
        t.main.select("." + u.zoomRect).call(e).on("dblclick.zoom", null), t.main.selectAll("." + u.eventRect).call(e).on("dblclick.zoom", null)
    }, c.redrawForZoom = function() {
        var t = this,
            e = t.d3,
            i = t.config,
            a = t.zoom,
            n = t.x;
        if (i.zoom_enabled && 0 !== t.filterTargetsToShow(t.data.targets).length) {
            if ("mousemove" === e.event.sourceEvent.type && a.altDomain) return n.domain(a.altDomain), void a.scale(n).updateScaleExtent();
            t.isCategorized() && n.orgDomain()[0] === t.orgXDomain[0] && n.domain([t.orgXDomain[0] - 1e-10, n.orgDomain()[1]]), t.redraw({
                withTransition: !1,
                withY: i.zoom_rescale,
                withSubchart: !1,
                withEventRect: !1,
                withDimension: !1
            }), "mousemove" === e.event.sourceEvent.type && (t.cancelClick = !0), i.zoom_onzoom.call(t.api, n.orgDomain())
        }
    }, c.generateColor = function() {
        var t = this,
            e = t.config,
            i = t.d3,
            a = e.data_colors,
            n = T(e.color_pattern) ? e.color_pattern : i.scale.category10().range(),
            r = e.data_color,
            s = [];
        return function(t) {
            var e, i = t.id || t.data && t.data.id || t;
            return a[i] instanceof Function ? e = a[i](t) : a[i] ? e = a[i] : (s.indexOf(i) < 0 && s.push(i), e = n[s.indexOf(i) % n.length], a[i] = e), r instanceof Function ? r(e, t) : e
        }
    }, c.generateLevelColor = function() {
        var t = this,
            e = t.config,
            i = e.color_pattern,
            a = e.color_threshold,
            n = "value" === a.unit,
            r = a.values && a.values.length ? a.values : [],
            s = a.max || 100;
        return T(e.color_threshold) ? function(t) {
            var e, a, o = i[i.length - 1];
            for (e = 0; e < r.length; e++)
                if (a = n ? t : 100 * t / s, a < r[e]) {
                    o = i[e];
                    break
                } return o
        } : null
    }, c.getYFormat = function(t) {
        var e = this,
            i = t && !e.hasType("gauge") ? e.defaultArcValueFormat : e.yFormat,
            a = t && !e.hasType("gauge") ? e.defaultArcValueFormat : e.y2Format;
        return function(t, n, r) {
            var s = "y2" === e.axis.getId(r) ? a : i;
            return s.call(e, t, n)
        }
    }, c.yFormat = function(t) {
        var e = this,
            i = e.config,
            a = i.axis_y_tick_format ? i.axis_y_tick_format : e.defaultValueFormat;
        return a(t)
    }, c.y2Format = function(t) {
        var e = this,
            i = e.config,
            a = i.axis_y2_tick_format ? i.axis_y2_tick_format : e.defaultValueFormat;
        return a(t)
    }, c.defaultValueFormat = function(t) {
        return g(t) ? +t : ""
    }, c.defaultArcValueFormat = function(t, e) {
        return (100 * e).toFixed(1) + "%"
    }, c.dataLabelFormat = function(t) {
        var e, i = this,
            a = i.config.data_labels,
            n = function(t) {
                return g(t) ? +t : ""
            };
        return e = "function" == typeof a.format ? a.format : "object" == typeof a.format ? a.format[t] ? a.format[t] === !0 ? n : a.format[t] : function() {
            return ""
        } : n
    }, c.hasCaches = function(t) {
        for (var e = 0; e < t.length; e++)
            if (!(t[e] in this.cache)) return !1;
        return !0
    }, c.addCache = function(t, e) {
        this.cache[t] = this.cloneTarget(e)
    }, c.getCaches = function(t) {
        var e, i = [];
        for (e = 0; e < t.length; e++) t[e] in this.cache && i.push(this.cloneTarget(this.cache[t[e]]));
        return i
    };
    var u = c.CLASS = {
        target: "c3-target",
        chart: "c3-chart",
        chartLine: "c3-chart-line",
        chartLines: "c3-chart-lines",
        chartBar: "c3-chart-bar",
        chartBars: "c3-chart-bars",
        chartText: "c3-chart-text",
        chartTexts: "c3-chart-texts",
        chartArc: "c3-chart-arc",
        chartArcs: "c3-chart-arcs",
        chartArcsTitle: "c3-chart-arcs-title",
        chartArcsBackground: "c3-chart-arcs-background",
        chartArcsGaugeUnit: "c3-chart-arcs-gauge-unit",
        chartArcsGaugeMax: "c3-chart-arcs-gauge-max",
        chartArcsGaugeMin: "c3-chart-arcs-gauge-min",
        selectedCircle: "c3-selected-circle",
        selectedCircles: "c3-selected-circles",
        eventRect: "c3-event-rect",
        eventRects: "c3-event-rects",
        eventRectsSingle: "c3-event-rects-single",
        eventRectsMultiple: "c3-event-rects-multiple",
        zoomRect: "c3-zoom-rect",
        brush: "c3-brush",
        focused: "c3-focused",
        defocused: "c3-defocused",
        region: "c3-region",
        regions: "c3-regions",
        tooltipContainer: "c3-tooltip-container",
        tooltip: "c3-tooltip",
        tooltipName: "c3-tooltip-name",
        shape: "c3-shape",
        shapes: "c3-shapes",
        line: "c3-line",
        lines: "c3-lines",
        bar: "c3-bar",
        bars: "c3-bars",
        circle: "c3-circle",
        circles: "c3-circles",
        arc: "c3-arc",
        arcs: "c3-arcs",
        area: "c3-area",
        areas: "c3-areas",
        empty: "c3-empty",
        text: "c3-text",
        texts: "c3-texts",
        gaugeValue: "c3-gauge-value",
        grid: "c3-grid",
        gridLines: "c3-grid-lines",
        xgrid: "c3-xgrid",
        xgrids: "c3-xgrids",
        xgridLine: "c3-xgrid-line",
        xgridLines: "c3-xgrid-lines",
        xgridFocus: "c3-xgrid-focus",
        ygrid: "c3-ygrid",
        ygrids: "c3-ygrids",
        ygridLine: "c3-ygrid-line",
        ygridLines: "c3-ygrid-lines",
        axis: "c3-axis",
        axisX: "c3-axis-x",
        axisXLabel: "c3-axis-x-label",
        axisY: "c3-axis-y",
        axisYLabel: "c3-axis-y-label",
        axisY2: "c3-axis-y2",
        axisY2Label: "c3-axis-y2-label",
        legendBackground: "c3-legend-background",
        legendItem: "c3-legend-item",
        legendItemEvent: "c3-legend-item-event",
        legendItemTile: "c3-legend-item-tile",
        legendItemHidden: "c3-legend-item-hidden",
        legendItemFocused: "c3-legend-item-focused",
        dragarea: "c3-dragarea",
        EXPANDED: "_expanded_",
        SELECTED: "_selected_",
        INCLUDED: "_included_"
    };
    c.generateClass = function(t, e) {
        return " " + t + " " + t + this.getTargetSelectorSuffix(e)
    }, c.classText = function(t) {
        return this.generateClass(u.text, t.index)
    }, c.classTexts = function(t) {
        return this.generateClass(u.texts, t.id)
    }, c.classShape = function(t) {
        return this.generateClass(u.shape, t.index)
    }, c.classShapes = function(t) {
        return this.generateClass(u.shapes, t.id)
    }, c.classLine = function(t) {
        return this.classShape(t) + this.generateClass(u.line, t.id)
    }, c.classLines = function(t) {
        return this.classShapes(t) + this.generateClass(u.lines, t.id)
    }, c.classCircle = function(t) {
        return this.classShape(t) + this.generateClass(u.circle, t.index)
    }, c.classCircles = function(t) {
        return this.classShapes(t) + this.generateClass(u.circles, t.id)
    }, c.classBar = function(t) {
        return this.classShape(t) + this.generateClass(u.bar, t.index)
    }, c.classBars = function(t) {
        return this.classShapes(t) + this.generateClass(u.bars, t.id)
    }, c.classArc = function(t) {
        return this.classShape(t.data) + this.generateClass(u.arc, t.data.id)
    }, c.classArcs = function(t) {
        return this.classShapes(t.data) + this.generateClass(u.arcs, t.data.id)
    }, c.classArea = function(t) {
        return this.classShape(t) + this.generateClass(u.area, t.id)
    }, c.classAreas = function(t) {
        return this.classShapes(t) + this.generateClass(u.areas, t.id)
    }, c.classRegion = function(t, e) {
        return this.generateClass(u.region, e) + " " + ("class" in t ? t.class : "")
    }, c.classEvent = function(t) {
        return this.generateClass(u.eventRect, t.index)
    }, c.classTarget = function(t) {
        var e = this,
            i = e.config.data_classes[t],
            a = "";
        return i && (a = " " + u.target + "-" + i), e.generateClass(u.target, t) + a
    }, c.classFocus = function(t) {
        return this.classFocused(t) + this.classDefocused(t)
    }, c.classFocused = function(t) {
        return " " + (this.focusedTargetIds.indexOf(t.id) >= 0 ? u.focused : "")
    }, c.classDefocused = function(t) {
        return " " + (this.defocusedTargetIds.indexOf(t.id) >= 0 ? u.defocused : "")
    }, c.classChartText = function(t) {
        return u.chartText + this.classTarget(t.id)
    }, c.classChartLine = function(t) {
        return u.chartLine + this.classTarget(t.id)
    }, c.classChartBar = function(t) {
        return u.chartBar + this.classTarget(t.id)
    }, c.classChartArc = function(t) {
        return u.chartArc + this.classTarget(t.data.id)
    }, c.getTargetSelectorSuffix = function(t) {
        return t || 0 === t ? ("-" + t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g, "-") : ""
    }, c.selectorTarget = function(t, e) {
        return (e || "") + "." + u.target + this.getTargetSelectorSuffix(t)
    }, c.selectorTargets = function(t, e) {
        var i = this;
        return t = t || [], t.length ? t.map(function(t) {
            return i.selectorTarget(t, e)
        }) : null
    }, c.selectorLegend = function(t) {
        return "." + u.legendItem + this.getTargetSelectorSuffix(t)
    }, c.selectorLegends = function(t) {
        var e = this;
        return t && t.length ? t.map(function(t) {
            return e.selectorLegend(t)
        }) : null
    };
    var g = c.isValue = function(t) {
            return t || 0 === t
        },
        h = c.isFunction = function(t) {
            return "function" == typeof t
        },
        f = c.isString = function(t) {
            return "string" == typeof t
        },
        x = c.isUndefined = function(t) {
            return "undefined" == typeof t
        },
        p = c.isDefined = function(t) {
            return "undefined" != typeof t
        },
        _ = c.ceil10 = function(t) {
            return 10 * Math.ceil(t / 10)
        },
        m = c.asHalfPixel = function(t) {
            return Math.ceil(t) + .5
        },
        y = c.diffDomain = function(t) {
            return t[1] - t[0]
        },
        v = c.isEmpty = function(t) {
            return !t || f(t) && 0 === t.length || "object" == typeof t && 0 === Object.keys(t).length
        },
        T = c.notEmpty = function(t) {
            return Object.keys(t).length > 0
        },
        b = c.getOption = function(t, e, i) {
            return p(t[e]) ? t[e] : i
        },
        A = c.hasValue = function(t, e) {
            var i = !1;
            return Object.keys(t).forEach(function(a) {
                t[a] === e && (i = !0)
            }), i
        },
        w = c.getPathBox = function(t) {
            var e = t.getBoundingClientRect(),
                i = [t.pathSegList.getItem(0), t.pathSegList.getItem(1)],
                a = i[0].x,
                n = Math.min(i[0].y, i[1].y);
            return {
                x: a,
                y: n,
                width: e.width,
                height: e.height
            }
        };
    o.focus = function(t) {
        var e, i = this.internal;
        t = i.mapToTargetIds(t), e = i.svg.selectAll(i.selectorTargets(t.filter(i.isTargetToShow, i))), this.revert(), this.defocus(), e.classed(u.focused, !0).classed(u.defocused, !1), i.hasArcType() && i.expandArc(t), i.toggleFocusLegend(t, !0), i.focusedTargetIds = t, i.defocusedTargetIds = i.defocusedTargetIds.filter(function(e) {
            return t.indexOf(e) < 0
        })
    }, o.defocus = function(t) {
        var e, i = this.internal;
        t = i.mapToTargetIds(t), e = i.svg.selectAll(i.selectorTargets(t.filter(i.isTargetToShow, i))), e.classed(u.focused, !1).classed(u.defocused, !0), i.hasArcType() && i.unexpandArc(t), i.toggleFocusLegend(t, !1), i.focusedTargetIds = i.focusedTargetIds.filter(function(e) {
            return t.indexOf(e) < 0
        }), i.defocusedTargetIds = t
    }, o.revert = function(t) {
        var e, i = this.internal;
        t = i.mapToTargetIds(t), e = i.svg.selectAll(i.selectorTargets(t)), e.classed(u.focused, !1).classed(u.defocused, !1), i.hasArcType() && i.unexpandArc(t), i.config.legend_show && (i.showLegend(t.filter(i.isLegendToShow.bind(i))), i.legend.selectAll(i.selectorLegends(t)).filter(function() {
            return i.d3.select(this).classed(u.legendItemFocused)
        }).classed(u.legendItemFocused, !1)), i.focusedTargetIds = [], i.defocusedTargetIds = []
    }, o.show = function(t, e) {
        var i, a = this.internal;
        t = a.mapToTargetIds(t), e = e || {}, a.removeHiddenTargetIds(t), i = a.svg.selectAll(a.selectorTargets(t)), i.transition().style("opacity", 1, "important").call(a.endall, function() {
            i.style("opacity", null).style("opacity", 1)
        }), e.withLegend && a.showLegend(t), a.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0,
            withLegend: !0
        })
    }, o.hide = function(t, e) {
        var i, a = this.internal;
        t = a.mapToTargetIds(t), e = e || {}, a.addHiddenTargetIds(t), i = a.svg.selectAll(a.selectorTargets(t)), i.transition().style("opacity", 0, "important").call(a.endall, function() {
            i.style("opacity", null).style("opacity", 0)
        }), e.withLegend && a.hideLegend(t), a.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0,
            withLegend: !0
        })
    }, o.toggle = function(t, e) {
        var i = this,
            a = this.internal;
        a.mapToTargetIds(t).forEach(function(t) {
            a.isTargetToShow(t) ? i.hide(t, e) : i.show(t, e)
        })
    }, o.zoom = function(t) {
        var e = this.internal;
        return t && (e.isTimeSeries() && (t = t.map(function(t) {
            return e.parseDate(t)
        })), e.brush.extent(t), e.redraw({
            withUpdateXDomain: !0,
            withY: e.config.zoom_rescale
        }), e.config.zoom_onzoom.call(this, e.x.orgDomain())), e.brush.extent()
    }, o.zoom.enable = function(t) {
        var e = this.internal;
        e.config.zoom_enabled = t, e.updateAndRedraw()
    }, o.unzoom = function() {
        var t = this.internal;
        t.brush.clear().update(), t.redraw({
            withUpdateXDomain: !0
        })
    }, o.load = function(t) {
        var e = this.internal,
            i = e.config;
        return t.xs && e.addXs(t.xs), "classes" in t && Object.keys(t.classes).forEach(function(e) {
            i.data_classes[e] = t.classes[e]
        }), "categories" in t && e.isCategorized() && (i.axis_x_categories = t.categories), "axes" in t && Object.keys(t.axes).forEach(function(e) {
            i.data_axes[e] = t.axes[e]
        }), "colors" in t && Object.keys(t.colors).forEach(function(e) {
            i.data_colors[e] = t.colors[e]
        }), "cacheIds" in t && e.hasCaches(t.cacheIds) ? void e.load(e.getCaches(t.cacheIds), t.done) : void("unload" in t ? e.unload(e.mapToTargetIds("boolean" == typeof t.unload && t.unload ? null : t.unload), function() {
            e.loadFromArgs(t)
        }) : e.loadFromArgs(t))
    }, o.unload = function(t) {
        var e = this.internal;
        t = t || {}, t instanceof Array ? t = {
            ids: t
        } : "string" == typeof t && (t = {
            ids: [t]
        }), e.unload(e.mapToTargetIds(t.ids), function() {
            e.redraw({
                withUpdateOrgXDomain: !0,
                withUpdateXDomain: !0,
                withLegend: !0
            }), t.done && t.done()
        })
    }, o.flow = function(t) {
        var e, i, a, n, r, s, o, c, d = this.internal,
            l = [],
            u = d.getMaxDataCount(),
            h = 0,
            f = 0;
        if (t.json) i = d.convertJsonToData(t.json, t.keys);
        else if (t.rows) i = d.convertRowsToData(t.rows);
        else {
            if (!t.columns) return;
            i = d.convertColumnsToData(t.columns)
        }
        e = d.convertDataToTargets(i, !0), d.data.targets.forEach(function(t) {
            var i, a, n = !1;
            for (i = 0; i < e.length; i++)
                if (t.id === e[i].id) {
                    for (n = !0, t.values[t.values.length - 1] && (f = t.values[t.values.length - 1].index + 1), h = e[i].values.length, a = 0; h > a; a++) e[i].values[a].index = f + a, d.isTimeSeries() || (e[i].values[a].x = f + a);
                    t.values = t.values.concat(e[i].values), e.splice(i, 1);
                    break
                } n || l.push(t.id)
        }), d.data.targets.forEach(function(t) {
            var e, i;
            for (e = 0; e < l.length; e++)
                if (t.id === l[e])
                    for (f = t.values[t.values.length - 1].index + 1, i = 0; h > i; i++) t.values.push({
                        id: t.id,
                        index: f + i,
                        x: d.isTimeSeries() ? d.getOtherTargetX(f + i) : f + i,
                        value: null
                    })
        }), d.data.targets.length && e.forEach(function(t) {
            var e, i = [];
            for (e = d.data.targets[0].values[0].index; f > e; e++) i.push({
                id: t.id,
                index: e,
                x: d.isTimeSeries() ? d.getOtherTargetX(e) : e,
                value: null
            });
            t.values.forEach(function(t) {
                t.index += f, d.isTimeSeries() || (t.x += f)
            }), t.values = i.concat(t.values)
        }), d.data.targets = d.data.targets.concat(e), a = d.getMaxDataCount(), r = d.data.targets[0], s = r.values[0], p(t.to) ? (h = 0, c = d.isTimeSeries() ? d.parseDate(t.to) : t.to, r.values.forEach(function(t) {
            t.x < c && h++
        })) : p(t.length) && (h = t.length), u ? 1 === u && d.isTimeSeries() && (o = (r.values[r.values.length - 1].x - s.x) / 2, n = [new Date(+s.x - o), new Date(+s.x + o)], d.updateXDomain(null, !0, !0, !1, n)) : (o = d.isTimeSeries() ? r.values.length > 1 ? r.values[r.values.length - 1].x - s.x : s.x - d.getXDomain(d.data.targets)[0] : 1, n = [s.x - o, s.x], d.updateXDomain(null, !0, !0, !1, n)), d.updateTargets(d.data.targets), d.redraw({
            flow: {
                index: s.index,
                length: h,
                duration: g(t.duration) ? t.duration : d.config.transition_duration,
                done: t.done,
                orgDataCount: u
            },
            withLegend: !0,
            withTransition: u > 1,
            withTrimXDomain: !1,
            withUpdateXAxis: !0
        })
    }, c.generateFlow = function(t) {
        var e = this,
            i = e.config,
            a = e.d3;
        return function() {
            var n, r, s, o = t.targets,
                c = t.flow,
                d = t.drawBar,
                l = t.drawLine,
                g = t.drawArea,
                h = t.cx,
                f = t.cy,
                x = t.xv,
                p = t.xForText,
                _ = t.yForText,
                m = t.duration,
                v = 1,
                T = c.index,
                b = c.length,
                A = e.getValueOnIndex(e.data.targets[0].values, T),
                w = e.getValueOnIndex(e.data.targets[0].values, T + b),
                L = e.x.domain(),
                S = c.duration || m,
                C = c.done || function() {},
                D = e.generateWait(),
                X = e.xgrid || a.selectAll([]),
                F = e.xgridLines || a.selectAll([]),
                I = e.mainRegion || a.selectAll([]),
                k = e.mainText || a.selectAll([]),
                E = e.mainBar || a.selectAll([]),
                Y = e.mainLine || a.selectAll([]),
                R = e.mainArea || a.selectAll([]),
                O = e.mainCircle || a.selectAll([]);
            e.flowing = !0, e.data.targets.forEach(function(t) {
                t.values.splice(0, b)
            }), s = e.updateXDomain(o, !0, !0), e.updateXGrid && e.updateXGrid(!0), c.orgDataCount ? n = 1 === c.orgDataCount || A.x === w.x ? e.x(L[0]) - e.x(s[0]) : e.isTimeSeries() ? e.x(L[0]) - e.x(s[0]) : e.x(A.x) - e.x(w.x) : 1 !== e.data.targets[0].values.length ? n = e.x(L[0]) - e.x(s[0]) : e.isTimeSeries() ? (A = e.getValueOnIndex(e.data.targets[0].values, 0),
                w = e.getValueOnIndex(e.data.targets[0].values, e.data.targets[0].values.length - 1), n = e.x(A.x) - e.x(w.x)) : n = y(s) / 2, v = y(L) / y(s), r = "translate(" + n + ",0) scale(" + v + ",1)", e.hideXGridFocus(), e.hideTooltip(), a.transition().ease("linear").duration(S).each(function() {
                D.add(e.axes.x.transition().call(e.xAxis)), D.add(E.transition().attr("transform", r)), D.add(Y.transition().attr("transform", r)), D.add(R.transition().attr("transform", r)), D.add(O.transition().attr("transform", r)), D.add(k.transition().attr("transform", r)), D.add(I.filter(e.isRegionOnX).transition().attr("transform", r)), D.add(X.transition().attr("transform", r)), D.add(F.transition().attr("transform", r))
            }).call(D, function() {
                var t, a = [],
                    n = [],
                    r = [];
                if (b) {
                    for (t = 0; b > t; t++) a.push("." + u.shape + "-" + (T + t)), n.push("." + u.text + "-" + (T + t)), r.push("." + u.eventRect + "-" + (T + t));
                    e.svg.selectAll("." + u.shapes).selectAll(a).remove(), e.svg.selectAll("." + u.texts).selectAll(n).remove(), e.svg.selectAll("." + u.eventRects).selectAll(r).remove(), e.svg.select("." + u.xgrid).remove()
                }
                X.attr("transform", null).attr(e.xgridAttr), F.attr("transform", null), F.select("line").attr("x1", i.axis_rotated ? 0 : x).attr("x2", i.axis_rotated ? e.width : x), F.select("text").attr("x", i.axis_rotated ? e.width : 0).attr("y", x), E.attr("transform", null).attr("d", d), Y.attr("transform", null).attr("d", l), R.attr("transform", null).attr("d", g), O.attr("transform", null).attr("cx", h).attr("cy", f), k.attr("transform", null).attr("x", p).attr("y", _).style("fill-opacity", e.opacityForText.bind(e)), I.attr("transform", null), I.select("rect").filter(e.isRegionOnX).attr("x", e.regionX.bind(e)).attr("width", e.regionWidth.bind(e)), i.interaction_enabled && e.redrawEventRect(), C(), e.flowing = !1
            })
        }
    }, o.selected = function(t) {
        var e = this.internal,
            i = e.d3;
        return i.merge(e.main.selectAll("." + u.shapes + e.getTargetSelectorSuffix(t)).selectAll("." + u.shape).filter(function() {
            return i.select(this).classed(u.SELECTED)
        }).map(function(t) {
            return t.map(function(t) {
                var e = t.__data__;
                return e.data ? e.data : e
            })
        }))
    }, o.select = function(t, e, i) {
        var a = this.internal,
            n = a.d3,
            r = a.config;
        r.data_selection_enabled && a.main.selectAll("." + u.shapes).selectAll("." + u.shape).each(function(s, o) {
            var c = n.select(this),
                d = s.data ? s.data.id : s.id,
                l = a.getToggle(this, s).bind(a),
                g = r.data_selection_grouped || !t || t.indexOf(d) >= 0,
                h = !e || e.indexOf(o) >= 0,
                f = c.classed(u.SELECTED);
            c.classed(u.line) || c.classed(u.area) || (g && h ? r.data_selection_isselectable(s) && !f && l(!0, c.classed(u.SELECTED, !0), s, o) : p(i) && i && f && l(!1, c.classed(u.SELECTED, !1), s, o))
        })
    }, o.unselect = function(t, e) {
        var i = this.internal,
            a = i.d3,
            n = i.config;
        n.data_selection_enabled && i.main.selectAll("." + u.shapes).selectAll("." + u.shape).each(function(r, s) {
            var o = a.select(this),
                c = r.data ? r.data.id : r.id,
                d = i.getToggle(this, r).bind(i),
                l = n.data_selection_grouped || !t || t.indexOf(c) >= 0,
                g = !e || e.indexOf(s) >= 0,
                h = o.classed(u.SELECTED);
            o.classed(u.line) || o.classed(u.area) || l && g && n.data_selection_isselectable(r) && h && d(!1, o.classed(u.SELECTED, !1), r, s)
        })
    }, o.transform = function(t, e) {
        var i = this.internal,
            a = ["pie", "donut"].indexOf(t) >= 0 ? {
                withTransform: !0
            } : null;
        i.transformTo(e, t, a)
    }, c.transformTo = function(t, e, i) {
        var a = this,
            n = !a.hasArcType(),
            r = i || {
                withTransitionForAxis: n
            };
        r.withTransitionForTransform = !1, a.transiting = !1, a.setTargetType(t, e), a.updateTargets(a.data.targets), a.updateAndRedraw(r)
    }, o.groups = function(t) {
        var e = this.internal,
            i = e.config;
        return x(t) ? i.data_groups : (i.data_groups = t, e.redraw(), i.data_groups)
    }, o.xgrids = function(t) {
        var e = this.internal,
            i = e.config;
        return t ? (i.grid_x_lines = t, e.redrawWithoutRescale(), i.grid_x_lines) : i.grid_x_lines
    }, o.xgrids.add = function(t) {
        var e = this.internal;
        return this.xgrids(e.config.grid_x_lines.concat(t ? t : []))
    }, o.xgrids.remove = function(t) {
        var e = this.internal;
        e.removeGridLines(t, !0)
    }, o.ygrids = function(t) {
        var e = this.internal,
            i = e.config;
        return t ? (i.grid_y_lines = t, e.redrawWithoutRescale(), i.grid_y_lines) : i.grid_y_lines
    }, o.ygrids.add = function(t) {
        var e = this.internal;
        return this.ygrids(e.config.grid_y_lines.concat(t ? t : []))
    }, o.ygrids.remove = function(t) {
        var e = this.internal;
        e.removeGridLines(t, !1)
    }, o.regions = function(t) {
        var e = this.internal,
            i = e.config;
        return t ? (i.regions = t, e.redrawWithoutRescale(), i.regions) : i.regions
    }, o.regions.add = function(t) {
        var e = this.internal,
            i = e.config;
        return t ? (i.regions = i.regions.concat(t), e.redrawWithoutRescale(), i.regions) : i.regions
    }, o.regions.remove = function(t) {
        var e, i, a, n = this.internal,
            r = n.config;
        return t = t || {}, e = n.getOption(t, "duration", r.transition_duration), i = n.getOption(t, "classes", [u.region]), a = n.main.select("." + u.regions).selectAll(i.map(function(t) {
            return "." + t
        })), (e ? a.transition().duration(e) : a).style("opacity", 0).remove(), r.regions = r.regions.filter(function(t) {
            var e = !1;
            return !t.class || (t.class.split(" ").forEach(function(t) {
                i.indexOf(t) >= 0 && (e = !0)
            }), !e)
        }), r.regions
    }, o.data = function(t) {
        var e = this.internal.data.targets;
        return "undefined" == typeof t ? e : e.filter(function(e) {
            return [].concat(t).indexOf(e.id) >= 0
        })
    }, o.data.shown = function(t) {
        return this.internal.filterTargetsToShow(this.data(t))
    }, o.data.values = function(t) {
        var e, i = null;
        return t && (e = this.data(t), i = e[0] ? e[0].values.map(function(t) {
            return t.value
        }) : null), i
    }, o.data.names = function(t) {
        return this.internal.clearLegendItemTextBoxCache(), this.internal.updateDataAttributes("names", t)
    }, o.data.colors = function(t) {
        return this.internal.updateDataAttributes("colors", t)
    }, o.data.axes = function(t) {
        return this.internal.updateDataAttributes("axes", t)
    }, o.category = function(t, e) {
        var i = this.internal,
            a = i.config;
        return arguments.length > 1 && (a.axis_x_categories[t] = e, i.redraw()), a.axis_x_categories[t]
    }, o.categories = function(t) {
        var e = this.internal,
            i = e.config;
        return arguments.length ? (i.axis_x_categories = t, e.redraw(), i.axis_x_categories) : i.axis_x_categories
    }, o.color = function(t) {
        var e = this.internal;
        return e.color(t)
    }, o.x = function(t) {
        var e = this.internal;
        return arguments.length && (e.updateTargetX(e.data.targets, t), e.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0
        })), e.data.xs
    }, o.xs = function(t) {
        var e = this.internal;
        return arguments.length && (e.updateTargetXs(e.data.targets, t), e.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0
        })), e.data.xs
    }, o.axis = function() {}, o.axis.labels = function(t) {
        var e = this.internal;
        arguments.length && (Object.keys(t).forEach(function(i) {
            e.axis.setLabelText(i, t[i])
        }), e.axis.updateLabels())
    }, o.axis.max = function(t) {
        var e = this.internal,
            i = e.config;
        return arguments.length ? ("object" == typeof t ? (g(t.x) && (i.axis_x_max = t.x), g(t.y) && (i.axis_y_max = t.y), g(t.y2) && (i.axis_y2_max = t.y2)) : i.axis_y_max = i.axis_y2_max = t, void e.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0
        })) : {
            x: i.axis_x_max,
            y: i.axis_y_max,
            y2: i.axis_y2_max
        }
    }, o.axis.min = function(t) {
        var e = this.internal,
            i = e.config;
        return arguments.length ? ("object" == typeof t ? (g(t.x) && (i.axis_x_min = t.x), g(t.y) && (i.axis_y_min = t.y), g(t.y2) && (i.axis_y2_min = t.y2)) : i.axis_y_min = i.axis_y2_min = t, void e.redraw({
            withUpdateOrgXDomain: !0,
            withUpdateXDomain: !0
        })) : {
            x: i.axis_x_min,
            y: i.axis_y_min,
            y2: i.axis_y2_min
        }
    }, o.axis.range = function(t) {
        return arguments.length ? (p(t.max) && this.axis.max(t.max), void(p(t.min) && this.axis.min(t.min))) : {
            max: this.axis.max(),
            min: this.axis.min()
        }
    }, o.legend = function() {}, o.legend.show = function(t) {
        var e = this.internal;
        e.showLegend(e.mapToTargetIds(t)), e.updateAndRedraw({
            withLegend: !0
        })
    }, o.legend.hide = function(t) {
        var e = this.internal;
        e.hideLegend(e.mapToTargetIds(t)), e.updateAndRedraw({
            withLegend: !0
        })
    }, o.resize = function(t) {
        var e = this.internal,
            i = e.config;
        i.size_width = t ? t.width : null, i.size_height = t ? t.height : null, this.flush()
    }, o.flush = function() {
        var t = this.internal;
        t.updateAndRedraw({
            withLegend: !0,
            withTransition: !1,
            withTransitionForTransform: !1
        })
    }, o.destroy = function() {
        var e = this.internal;
        return t.clearInterval(e.intervalForObserveInserted), t.onresize = null, e.selectChart.classed("c3", !1).html(""), Object.keys(e).forEach(function(t) {
            e[t] = null
        }), null
    }, o.tooltip = function() {}, o.tooltip.show = function(t) {
        var e, i, a = this.internal;
        t.mouse && (i = t.mouse), t.data ? a.isMultipleX() ? (i = [a.x(t.data.x), a.getYScale(t.data.id)(t.data.value)], e = null) : e = g(t.data.index) ? t.data.index : a.getIndexByX(t.data.x) : "undefined" != typeof t.x ? e = a.getIndexByX(t.x) : "undefined" != typeof t.index && (e = t.index), a.dispatchEvent("mouseover", e, i), a.dispatchEvent("mousemove", e, i)
    }, o.tooltip.hide = function() {
        this.internal.dispatchEvent("mouseout", 0)
    };
    var L;
    c.isSafari = function() {
        var e = t.navigator.userAgent;
        return e.indexOf("Safari") >= 0 && e.indexOf("Chrome") < 0
    }, c.isChrome = function() {
        var e = t.navigator.userAgent;
        return e.indexOf("Chrome") >= 0
    }, Function.prototype.bind || (Function.prototype.bind = function(t) {
        if ("function" != typeof this) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        var e = Array.prototype.slice.call(arguments, 1),
            i = this,
            a = function() {},
            n = function() {
                return i.apply(this instanceof a ? this : t, e.concat(Array.prototype.slice.call(arguments)))
            };
        return a.prototype = this.prototype, n.prototype = new a, n
    }), "function" == typeof define && define.amd ? define("c3", ["d3"], l) : "undefined" != typeof exports && "undefined" != typeof module ? module.exports = l : t.c3 = l
}(window);

function radialProgress(t) {
    function n() {
        function t(t) {
            "function" == typeof l && l.call()
        }
        d.each(function(n) {
            function d(t) {
                var n = (f - w) / (_ - w),
                    i = Math.min(360 * n, 360);
                i = i * Math.PI / 180, x.datum(i), x.transition().duration(o).attrTween("d", r), n > 1 && (b.datum(Math.min(360 * (n - 1), 360) * Math.PI / 180), b.transition().delay(o).duration(o).attrTween("d", e)), P.datum(Math.round(100 * n)), P.transition().duration(o).tween("text", a)
            }
            var l = d3.select(this).selectAll("svg").data([n]),
                h = l.enter().append("svg").attr("class", "radial-svg").append("g");
            i(), l.attr("width", c).attr("height", u);
            var v = h.append("g").attr("class", "component").attr("cursor", "pointer").on("click", t);
            A.endAngle(360 * (Math.PI / 180)), v.append("rect").attr("class", "background").attr("width", _width).attr("height", _height), v.append("path").attr("transform", "translate(" + _width / 2 + "," + _width / 2 + ")").attr("d", A), v.append("text").attr("class", "label").attr("transform", "translate(" + _width / 2 + "," + (_width + g) + ")").text(p);
            l.select("g").attr("transform", "translate(" + s.left + "," + s.top + ")");
            A.endAngle(m), h.append("g").attr("class", "arcs");
            var x = l.select(".arcs").selectAll(".arc").data(n);
            x.enter().append("path").attr("class", "arc").attr("transform", "translate(" + _width / 2 + "," + _width / 2 + ")").attr("d", A);
            var b = l.select(".arcs").selectAll(".arc2").data(n);
            b.enter().append("path").attr("class", "arc2").attr("transform", "translate(" + _width / 2 + "," + _width / 2 + ")").attr("d", M), h.append("g").attr("class", "labels");
            var P = l.select(".labels").selectAll(".label").data(n);
            P.enter().append("text").attr("class", "label").attr("y", _width / 2 + g / 3).attr("x", _width / 2).attr("cursor", "pointer").attr("width", _width).text(function(t) {
                return Math.round((f - w) / (_ - w) * 100) + "%"
            }).style("font-size", g + "px").on("click", t), x.exit().transition().duration(500).attr("x", 1e3).remove(), d(l)
        })
    }

    function a(t) {
        var n = d3.interpolate(x, t);
        return x = n(0),
            function(t) {
                x = n(t), this.textContent = Math.round(n(t)) + "%"
            }
    }

    function r(t) {
        var n = d3.interpolate(m, t);
        return function(t) {
            return m = n(t), A.endAngle(n(t))()
        }
    }

    function e(t) {
        var n = d3.interpolate(v, t);
        return function(t) {
            return M.endAngle(n(t))()
        }
    }

    function i() {
        _width = h - s.right - s.left - s.top - s.bottom, _height = _width, g = .2 * _width, A.outerRadius(_width / 2), A.innerRadius(_width / 2 * .85), M.outerRadius(_width / 2 * .85), M.innerRadius(_width / 2 * .85 - _width / 2 * .15)
    }
    var d, l, o = 1e3,
        s = {
            top: 0,
            right: 0,
            bottom: 30,
            left: 0
        },
        c = 300,
        u = 300,
        h = 150,
        p = "",
        g = 10,
        f = 0,
        w = 0,
        _ = 100,
        m = 0,
        v = 0,
        x = 0,
        A = d3.svg.arc().startAngle(0 * (Math.PI / 180)),
        M = d3.svg.arc().startAngle(0 * (Math.PI / 180)).endAngle(0);
    return d = d3.select(t), n.render = function() {
        return i(), n(), n
    }, n.value = function(t) {
        return arguments.length ? (f = [t], d.datum([f]), n) : f
    }, n.margin = function(t) {
        return arguments.length ? (s = t, n) : s
    }, n.diameter = function(t) {
        return arguments.length ? (h = t, n) : h
    }, n.minValue = function(t) {
        return arguments.length ? (w = t, n) : w
    }, n.maxValue = function(t) {
        return arguments.length ? (_ = t, n) : _
    }, n.label = function(t) {
        return arguments.length ? (p = t, n) : p
    }, n._duration = function(t) {
        return arguments.length ? (o = t, n) : o
    }, n.onClick = function(t) {
        return arguments.length ? (l = t, n) : l
    }, n
}
var Idx = function() {};
Idx.prototype.events;
Idx.Log = function(o) {
    this.source = o
}, Idx.Log.prototype.source, Idx.Log.prototype.enabled = !0, Idx.Log.prototype.info = function(o) {
    this.enabled && console.log(this.source + ": " + o)
}, Idx.Log.prototype.error = function(o) {
    this.enabled && console.error(this.source + ": " + o)
};
Idx.Events = function() {
    this.log = new Idx.Log("Events");
    var t = this,
        n = function(n, e, a) {
            var r = a.split("-").pop();
            "loaded" === r ? t.publish(a, {
                $element: n,
                element: e
            }) : n.on(r, function(r) {
                t.publish(a, {
                    event: r,
                    $element: n,
                    element: e
                })
            })
        },
        e = function() {
            jQuery("#zpa-main-container [data-zpa-event]").not("[data-zpa-event-bound]").each(function() {
                var e = this,
                    a = jQuery(e),
                    r = a.attr("data-zpa-event");
                a.attr("data-zpa-event-bound", !0), t._each(r, function(t) {
                    n(a, e, t)
                })
            })
        };
    window.setInterval(function() {
        e()
    }, 1e3)
}, Idx.Events.prototype._log, Idx.Events.prototype._handlers = [], Idx.Events.prototype._addHandler = function(t, n) {
    var e = {
        name: t,
        callback: n
    };
    this._handlers.push(e)
}, Idx.Events.prototype._getHandlers = function(t) {
    for (var n = [], e = 0; e < this._handlers.length; e++) {
        var a = this._handlers[e];
        a.name !== t && "*" !== a.name || n.push(a)
    }
    return n
}, Idx.Events.prototype._toArray = function(t) {
    return t = t || [], Array.isArray(t) || (t = t.split(/[ ,]+/)), t
}, Idx.Events.prototype._each = function(t, n) {
    t = this._toArray(t);
    for (var e = 0; e < t.length; e++) {
        var a = t[e];
        n(a, e)
    }
}, Idx.Events.prototype.subscribe = function(t, n) {
    var e = this;
    return e._each(t, function(t) {
        e._addHandler(t, n)
    }), e
}, Idx.Events.prototype.publish = function(t, n) {
    var e = this;
    return n = n || {}, e._each(t, function(t) {
        var a = e._getHandlers(t);
        e._each(a, function(e) {
            n.eventName = t, e.callback(n)
        })
    }), e
};
var idx = new Idx;
! function() {
    var n = new Idx.Events;
    idx.events = n
}();
! function() {
    var e = function(e) {
            var i = null;
            return e && (i = e.closest("[data-zpa-listing-number]").attr("data-zpa-listing-number")), i
        },
        i = function(e, i, n, t, o) {
            var a = {};
            e && (a.eventCategory = e), i && (a.eventAction = i), n && (a.eventLabel = n), t && (a.eventValue = t), o && (a.hitCallback = o);
            var r;
            "undefined" != typeof ga ? r = ga : "undefined" != typeof __gaTracker && (r = __gaTracker), "undefined" != typeof r && r("send", "event", a)
        };
    "undefined" != typeof idx && "undefined" != typeof idx.events && idx.events.subscribe("listing-detail-loaded", function(n) {
        var t = e(n.$element);
        i("IDX: Listing", "Detail View", t)
    }).subscribe("listing-image-carousel-advance", function(n) {
        var t = e(n.$element),
            o = n.$element.attr("data-zpa-view-count");
        i("IDX: Listing", "Carousel Advance", t, o)
    }).subscribe("listing-virtual-tour-open-click", function(n) {
        var t = e(n.$element);
        i("IDX: Listing", "Virtual Tour", t)
    }).subscribe("listing-extra-link-open-click", function(n) {
        var t = e(n.$element);
        i("IDX: Listing", "Extra Link", t)
    }).subscribe("social-share-click", function(n) {
        var t = e(n.$element),
            o = n.$element.data("zpa-social-share-service");
        i("IDX: Social Share", o, t)
    }).subscribe("schedule-showing-confirmation-loaded", function(n) {
        var t = e(n.$element);
        i("IDX: Schedule Showing", "Confirmation", t)
    }).subscribe("more-info-request-confirmation-loaded", function(n) {
        var t = e(n.$element);
        i("IDX: More Info Request", "Confirmation", t)
    }).subscribe("save-listing-confirmation-loaded", function(n) {
        var t = e(n.$element);
        i("IDX: Listing Saved", "Confirmation", t)
    }).subscribe("valuation-request-confirmation-loaded", function(e) {
        i("IDX: Valuation Request", "Confirmation")
    }).subscribe("contact-confirmation-loaded", function(e) {
        i("IDX: Contact", "Confirmation")
    }).subscribe("save-search-confirmation-loaded", function(e) {
        i("IDX: Search Saved", "Confirmation")
    }).subscribe("property-organizer-signup-confirmation-loaded", function(e) {
        i("IDX: Property Organizer Signup", "Confirmation")
    }).subscribe("user-registration-login-confirmation-loaded", function(e) {
        i("IDX: User Registration", "Login")
    }).subscribe("user-registration-signup-confirmation-loaded", function(e) {
        i("IDX: User Registration", "Signup")
    }).subscribe("user-registration-postpone-form-submit", function(e) {
        i("IDX: User Registration", "Postpone")
    })
}();
! function() {
    var e = (new Idx.Log("Brytecore"), function(e) {
            var i = {};
            return e && (i.mlsId = a(e, "data-zpa-listing-number"), i.address = a(e, "data-zpa-listing-address"), i.price = a(e, "data-zpa-listing-price")), i
        }),
        i = function(e) {
            var i = {};
            return e && (i.id = a(e, "data-zpa-subscriber-id"), i.emailAddress = a(e, "data-zpa-subscriber-email"), i.firstName = a(e, "data-zpa-subscriber-first-name"), i.lastName = a(e, "data-zpa-subscriber-last-name")), i
        },
        t = function(e) {
            var i = null;
            return e && (i = a(e, "data-zpa-subscriber-create-date")), i
        },
        r = function(e) {
            var i = !0;
            return i
        },
        n = function(e) {
            var i = e,
                t = i.data("bs.carousel").getActiveIndex(),
                r = i.find("img"),
                n = r.eq(t),
                s = n.attr("src");
            return s
        },
        s = function(e) {
            var i = {};
            if (e) {
                var t = e.closest("[data-zpa-event='listing-search-results-loaded']"),
                    r = t.attr("data-zpa-json");
                if (r) {
                    var n = JSON.parse(r);
                    i.bedroomsMin = n.bedrooms, i.cities = n.cityList;
                    var s = [];
                    n.oneStoryYn && s.push("1 Story"), n.garYn && s.push("Garage"), n.fireplaceYn && s.push("Fireplace"), n.poolYn && s.push("Pool"), n.viewYn && s.push("View"), n.horsePropertyYn && s.push("Horse Property"), n.diningRoomYn && s.push("Dining Room"), n.waterFrontYn && s.push("Water Front"), n.familyRoomYn && s.push("Family Room"), n.newConstructionYn && s.push("New Construction"), n.golfCourseYn && s.push("Golf Course"), n.atticYn && s.push("Attic"), n.basementYn && s.push("Basement"), n.agedCommunityYn && s.push("Aged Community"), i.features = s, i.fullBathsMin = n.bathCount, i.isAcreage = n.propertyType.indexOf("LL") > -1, i.isCondo = n.propertyType.indexOf("CND") > -1, i.isForeclosure = n.foreclosureYn, i.isReo = n.reoyn, i.isShortSale = n.shortSaleYn, i.isLot = n.propertyType.indexOf("LL") > -1, i.isMultiFamily = n.propertyType.indexOf("RI") > -1, i.isRental = n.propertyType.indexOf("RNT") > -1, i.isSingleFamily = n.propertyType.indexOf("SFR") > -1, i.postalCodes = n.zip, i.priceMax = n.maxListPrice, i.priceMin = n.minListPrice, i.schoolElementary = n.elementarySchool, i.schoolHigh = n.highSchool, i.schoolMiddle = n.jrHighSchool, i.yearBuiltMin = n.yearBuilt
                }
            }
            return i
        },
        a = function(e, i) {
            var t = e.closest("[" + i + "]").attr(i);
            return t
        },
        o = function(e, i) {
            var t = null;
            return e && i && ($field = e.find(":input[name='" + i + "']"), $field && (t = $field.val())), t
        },
        l = function(e, i) {
            var t = "";
            return e && (t += e), i && (t && (t += " "), t += i), t
        };
    if ("undefined" != typeof idx && "undefined" != typeof idx.events) {
        var u = function(e, i) {
            "undefined" != typeof brytescore && brytescore(e, i)
        };
        idx.events.subscribe(["property-organizer-login-confirmation-loaded", "user-registration-login-confirmation-loaded"], function(e) {
            u("authenticated", {
                userAccount: i(e.$element),
                isLead: r(e.$element)
            })
        }).subscribe(["property-organizer-signup-confirmation-loaded", "user-registration-signup-confirmation-loaded"], function(e) {
            u("registeredAccount", {
                userAccount: i(e.$element),
                isLead: r(e.$element),
                dateRegistered: t(e.$element)
            })
        }).subscribe("listing-result-loaded", function(i) {
            u("realestate.listingImpression", {
                listing: e(i.$element)
            })
        }).subscribe("save-listing-confirmation-loaded", function(i) {
            u("realestate.savedListing", {
                listing: e(i.$element)
            })
        }).subscribe("save-search-confirmation-loaded", function(e) {
            u("realestate.savedSearch", {
                search: s(e.$element)
            })
        }).subscribe("listing-search-results-loaded", function(e) {
            u("realestate.searchedListings", {
                search: s(e.$element)
            })
        }).subscribe("listing-detail-loaded", function(i) {
            u("realestate.viewedListing", {
                listing: e(i.$element)
            })
        }).subscribe("listing-image-carousel-advance", function(i) {
            u("realestate.viewedListingPhoto", {
                listing: e(i.$element),
                viewedPhotoURL: n(i.$element)
            })
        }).subscribe("social-share-click", function(i) {
            var t = i.$element.data("zpa-social-share-service");
            null === t || ("Facebook" === t ? u("realestate.sharedListingFacebook", {
                listing: e(i.$element)
            }) : "Email" === t ? u("realestate.sharedListingEmail", {
                fromEmail: o($form, "fromEmail"),
                toEmail: o($form, "toEmail"),
                message: o($form, "message"),
                relatedListing: e(i.$element)
            }) : "Print" === t ? u("realestate.printedListing", {
                listing: e(i.$element)
            }) : "Twitter" === t && u("realestate.sharedListingTwitter", {
                listing: e(i.$element)
            }))
        }).subscribe("more-info-request-form-submit", function(i) {
            var t = i.$element;
            u("realestate.requestedInfo", {
                form: {
                    fromEmail: o(t, "newEmail"),
                    fromName: l(o(t, "firstName"), o(t, "lastName")),
                    fromTelephone: o(t, "phone"),
                    message: o(t, "message"),
                    relatedListing: e(t)
                }
            })
        }).subscribe("schedule-showing-form-submit", function(i) {
            var t = i.$element;
            u("realestate.requestedShowing", {
                form: {
                    fromEmail: o(t, "newEmail"),
                    fromName: l(o(t, "firstName"), o(t, "lastName")),
                    fromTelephone: o(t, "phone"),
                    message: o(t, "message"),
                    relatedListing: e(t)
                },
                requestedDateTime: function() {
                    var e = null,
                        i = o(t, "prefDate"),
                        r = o(t, "prefTime");
                    if (i && r) {
                        var n = i + " " + r;
                        n = n.replace(/-|:|\s/g, " ");
                        var s = n.split(" ")[0],
                            a = n.split(" ")[1],
                            l = n.split(" ")[2],
                            u = n.split(" ")[3],
                            m = n.split(" ")[4],
                            c = n.split(" ")[5];
                        "PM" === c && (u += 12), e = new Date(s, a - 1, l, u, m).toISOString()
                    }
                    return e
                }()
            })
        }).subscribe("contact-form-submit", function(e) {
            var i = e.$element;
            u("realestate.submittedAgentContactForm", {
                form: {
                    fromEmail: o(i, "email"),
                    fromName: o(i, "contactName"),
                    fromTelephone: o(i, "phone"),
                    message: o(i, "message")
                },
                agentId: o(i, "agentId")
            })
        }).subscribe("listing-virtual-tour-open-click", function(i) {
            u("realestate.viewedListingVirtualTour", {
                listing: e(i.$element)
            })
        })
    }
}();